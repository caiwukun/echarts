{"version":3,"sources":["unknown"],"names":["global","factory","exports","module","define","amd","self","echarts","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__spreadArrays","il","r","k","a","j","jl","Browser","firefox","ie","edge","weChat","Env","browser","node","wxa","worker","canvasSupported","svgSupported","touchEventsSupported","pointerEventsSupported","domSupported","env","wx","getSystemInfoSync","document","navigator","detect","userAgent","ua","match","test","version","createElement","getContext","SVGRect","window","BUILTIN_OBJECT","TYPED_ARRAY","objToString","toString","arrayProto","nativeForEach","forEach","nativeFilter","filter","nativeSlice","slice","nativeMap","map","ctorFunction","protoFunction","methods","$override","name","fn","idStart","guid","logError","args","_i","console","error","clone","source","result","typeStr","isPrimitive","len","Ctor","from","isDom","key","merge","target","overwrite","isObject","targetProp","sourceProp","isArray","isBuiltInObject","extend","defaults","overlay","keysArr","keys","createCanvas","indexOf","array","value","inherits","clazz","baseClazz","clazzPrototype","F","prop","superClass","mixin","override","getOwnPropertyNames","keyList","isArrayLike","data","each","arr","cb","context","push","reduce","memo","obj","bindPolyfill","func","concat","bind","isFunction","curry","isString","isStringSafe","isNumber","type","isTypedArray","nodeType","ownerDocument","isGradientObject","colorStops","isPatternObject","image","isRegExp","eqNaN","retrieve","retrieve2","value0","value1","retrieve3","value2","normalizeCssArray","val","assert","condition","message","Error","trim","str","replace","primitiveKey","setAsPrimitive","HashMap","isArr","thisMap","visit","set","get","removeKey","createHashMap","createObject","proto","properties","StyleCtor","hasOwn","own","noop","x","y","clone$1","v","add","out","v1","v2","sub","Math","sqrt","lenSquare","scale","normalize","distance","dist","distanceSquare","distSquare","lerp","applyTransform","m","min","max","Param","e","topTarget","Draggable","handler","on","_dragStart","_drag","_dragEnd","draggingTarget","draggable","parent","_draggingTarget","dragging","_x","offsetX","_y","offsetY","dispatchToElement","event","dx","dy","drift","dropTarget","findHover","lastDropTarget","_dropTarget","Eventful","eventProcessors","_$eventProcessor","query","_$handlers","_h","eventProcessor","normalizeQuery","h","wrap","ctx","callAtLast","zrEventfulCallAtLast","lastIndex","lastWrap","splice","isSilent","eventName","off","eventType","newList","l","trigger","argLen","hItem","afterTrigger","triggerWithContext","LN2","log","determinant","rows","rank","rowStart","rowMask","colMask","detCache","cacheKey","fullRank","colStart","round","subRowMask","subRowStart","sum","colLocalIdx","colTag","buildTransformer","src","dest","mA","det","vh","srcPointX","srcPointY","pk","EVENT_SAVED_PROP","transformCoordWithViewport","el","inX","inY","inverse","getBoundingClientRect","isCanvasEl","saved","markers","prepareCoordMarkers","transformer","preparePointerTransformer","propLR","propTB","marker","stl","style","idxLR","idxTB","cssText","join","appendChild","transformerName","oldSrcCoords","srcCoords","destCoords","oldCoordTheSame","rect","ii","left","top","offsetLeft","offsetTop","nodeName","toUpperCase","isDomLevel2","addEventListener","MOUSE_EVENT_REG","_calcOut","clientToLocal","calculate","calculateZrXY","layerX","zrX","zrY","layerY","ex","clientX","ey","clientY","box","getNativeEvent","normalizeEvent","isTouch","wheelDelta","getWheelDeltaMayPolyfill","zrDelta","detail","touch","targetTouches","changedTouches","button","which","undefined","rawWheelDelta","deltaX","deltaY","delta","abs","sign","opt","attachEvent","removeEventListener","detachEvent","stop","preventDefault","stopPropagation","cancelBubble","returnValue","GestureMgr","_track","recognize","root","_doTrack","_recognize","clear","touches","trackItem","points","pos","recognizers","gestureInfo","dist$1","pointPair","center","pinch","tracks","trackLen","pinchEnd","pinchPre","pinchScale","isFinite","pinchCenter","pinchX","pinchY","SILENT","makeEventPacket","eveType","targetInfo","gestureEvent","zrByTouch","stopEvent","EmptyProxy","_super","_this","dispose","setCursor","HoveredResult","handlerNames","Handler","storage","painter","proxy","painterRoot","_hovered","setHandlerProxy","_draggingMgr","mousemove","isOutside","isOutsideBoundary","lastHovered","lastHoveredTarget","__zr","hovered","hoveredTarget","cursor","mouseout","eventControl","zrEventControl","zrIsToLocalDOM","resize","dispatch","eventArgs","setCursorStyle","cursorStyle","silent","eventKey","eventPacket","__hostTarget","eachOtherLayer","layer","exclude","list","getDisplayList","hoverCheckResult","ignore","isHover","processGesture","stage","_gestureMgr","gestureMgr","dom","res","_downEl","_downPoint","_upEl","displayable","rectHover","ignoreClip","clipPath","getClipPath","contain","hostEl","handlerInstance","getWidth","getHeight","DEFAULT_MIN_MERGE","DEFAULT_MIN_GALLOPING","minRunLength","makeAscendingRun","lo","hi","compare","runHi","reverseRun","binaryInsertionSort","start","pivot","right","mid","gallopLeft","hint","lastOffset","maxOffset","offset","tmp","gallopRight","TimSort","minGallop","runStart","runLength","stackSize","pushRun","_runStart","_runLength","mergeRuns","mergeAt","forceMergeRuns","start1","length1","start2","length2","mergeLow","mergeHigh","cursor1","cursor2","_minGallop","count1","count2","exit","customCursor","customDest","sort","remaining","ts","minRun","force","invalidZErrorLogged","logInvalidZError","warn","shapeCompareFunc","zlevel","z","z2","Storage","_roots","_displayList","_displayListLen","displayableSortFunc","traverse","update","includeIgnore","displayList","updateDisplayList","roots","_updateAndAddDisplayable","clipPaths","beforeUpdate","afterUpdate","userSetClipPath","currentClipPath","parentClipPath","updateTransform","childrenRef","children","child","__dirty","markRedraw","disp","__clipPaths","isNaN","textGuide","getTextGuideLine","textEl","getTextContent","addRoot","delRoot","idx","delAllRoots","getRoots","requestAnimationFrame","msRequestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","setTimeout","requestAnimationFrame$1","easing","linear","quadraticIn","quadraticOut","quadraticInOut","cubicIn","cubicOut","cubicInOut","quarticIn","quarticOut","quarticInOut","quinticIn","quinticOut","quinticInOut","sinusoidalIn","cos","PI","sinusoidalOut","sin","sinusoidalInOut","exponentialIn","pow","exponentialOut","exponentialInOut","circularIn","circularOut","circularInOut","elasticIn","asin","elasticOut","elasticInOut","backIn","backOut","backInOut","bounceIn","bounceOut","bounceInOut","Clip","opts","_initialized","_startTime","_pausedTime","_paused","_life","life","_delay","delay","loop","gap","onframe","ondestroy","onrestart","step","globalTime","deltaTime","percent","easing$1","easingFunc","schedule","_restart","remainder","pause","resume","Entry","LinkedList","_len","insert","entry","insertEntry","head","tail","next","prev","remove","LRU","maxSize","_list","_maxSize","_map","put","removed","_lastRemovedEntry","leastUsedEntry","kCSSColorTable","clampCssByte","clampCssFloat","f","parseCssInt","charAt","parseFloat","parseInt","parseCssFloat","cssHueToRgb","m1","m2","setRgba","g","copyRgba","colorCache","lastRemovedArr","putToCache","colorStr","rgbaArr","parse","cached","toLowerCase","iv","substr","op","ep","fname","params","split","alpha","pop","hsla2rgba","hsla","rgba","lift","color","level","colorArr","stringify","arrColor","lum","backgroundLum","arraySlice","interpolateNumber","p0","p1","interpolate1DArray","interpolate2DArray","len2","add1DArray","add2DArray","fillArray","val0","val1","arrDim","arr0","arr1","arr0Len","arr1Len","isPreviousLarger","is1DArraySame","catmullRomInterpolate","p2","p3","t2","t3","v0","catmullRomInterpolate1DArray","catmullRomInterpolate2DArray","cloneValue","ret","rgba2String","floor","guessArrayDim","tmpRgba","Track","propName","keyframes","maxTime","interpolable","_needsSort","_isAllValueEqual","_lastFrame","_lastFramePercent","isFinished","_finished","setFinished","_additiveTrack","needsAnimate","getAdditiveTrack","addKeyframe","time","arrayDim","lastFrame","colorArray","isValueColor","kf","prepare","additiveTrack","kfs","kfsLen","lastKf","startValue","additiveValue","isAdditive","valueKey","kfsNum","frameIdx","nextFrame","frame","range","w","targetArr","_additiveValue","useSpline","_addToTarget","Animator","additiveTo","_tracks","_trackKeys","_maxTime","_started","_clip","_target","_loop","_additiveAnimators","getTarget","changeTarget","when","props","whenWithKeys","propNames","track","initialValue","_getAdditiveTrack","lastFinalKf","isPaused","_doneCallback","_setTracksFinished","doneList","_doneList","_abortedCallback","animation","abortedList","_abortedList","removeClip","tracksKeys","trackName","additiveAnimators","getTrack","forceAnimate","clip","stillHasAdditiveAnimator","onframeList","_onframeList","addClip","forwardToLast","during","done","aborted","getClip","stopTracks","allAborted","saveFinalToTarget","trackKeys","__changeFinalValue","finalProps","Animation","_running","_time","_pauseStart","_clipsHead","_clipsTail","addAnimator","animator","removeAnimator","notTriggerStageUpdate","Date","getTime","nextClip","finished","_startLoop","animate","options","TOUCH_CLICK_DELAY","globalEventSupported","localNativeListenerNames","mouseHandlerNames","touchHandlerNames","pointerEventNameMap","pointerdown","pointerup","pointermove","pointerout","pointerHandlerNames","nm","mouse","pointer","globalNativeListenerNames","wheelEventSupported","isPointerFromTouch","pointerType","setTouchTimer","scope","touching","touchTimer","clearTimeout","markTouch","normalizeGlobalEvent","instance","FakeGlobalEvent","isLocalEl","elTmp","isLocal","domBelongToZr","parentNode","stopImmediatePropagation","currentTarget","localDOMHandlers","mousedown","__mayPointerCapture","downPoint","__togglePointerCapture","mouseup","__pointerCapturing","element","toElement","relatedTarget","wheel","mousewheel","touchstart","__lastTouchMoment","touchmove","touchend","click","globalDOMHandlers","pointerCaptureReleasing","mountLocalDOMEventListeners","domHandlers","nativeEventName","mountSingleDOMEventListener","mountGlobalDOMEventListeners","mount","nativeEventListener","capture","listener","mounted","listenerOpts","domTarget","unmountDOMEventListeners","DOMHandlerScope","HandlerDomProxy","_localHandlerScope","_globalHandlerScope","isPointerCapturing","globalHandlerScope","create$1","identity","copy","mul","out0","out1","out2","out3","out4","out5","translate","rotate","rad","aa","ac","atx","ab","ad","aty","st","ct","scale$1","vx","vy","invert","mIdentity","EPSILON","isNotAroundZero","scaleTmp","tmpTransform","originTransform","Transformable","setPosition","setScale","scaleX","scaleY","setOrigin","originX","originY","needLocalTransform","rotation","parentHasTransform","transform","getLocalTransform","_resolveGlobalScaleRatio","globalScaleRatio","getGlobalScale","relX","relY","sx","sy","invTransform","getComputedTransform","transformNode","ancestors","setLocalTransform","atan2","decomposeTransform","ox","oy","transformCoordToLocal","transformCoordToGlobal","getLineScale","initDefaultProps","Point","other","equal","scalar","scaleAndAdd","dot","negate","toArray","fromArray","input","onet","mathMin","mathMax","lt","rb","lb","rt","minTv","maxTv","BoundingRect","width","height","union","calculateTransform","intersect","mtv","ax0","ax1","ay0","ay1","bx0","bx1","by0","by1","overlap","dMin","Infinity","dMax","d0","d1","d2","d3","plain","tx","ty","maxX","maxY","textWidthCache","DEFAULT_FONT","_ctx","_cachedFont","defaultMeasureText","text","font","measureText","methods$1","cacheOfFont","innerGetBoundingRect","textAlign","textBaseline","getLineHeight","adjustTextX","adjustTextY","getBoundingRect","textLines","uniondRect","verticalAlign","parsePercent","maxValue","lastIndexOf","calculateTextPosition","textPosition","position","halfHeight","textVerticalAlign","align","dpr","devicePixelRatio","screen","deviceXDPI","logicalXDPI","DARK_MODE_THRESHOLD","DARK_LABEL_COLOR","LIGHT_LABEL_COLOR","LIGHTER_LABEL_COLOR","PRESERVED_NORMAL_STATE","PRIMARY_STATES_KEYS","DEFAULT_ANIMATABLE_MAP","tmpTextPosCalcRes","tmpBoundingRect","Element","id","animators","currentStates","states","_init","attr","updateInnerText","forceUpdate","_textContent","textConfig","local","attachedTransform","textStyleChanged","innerOrigin","layoutRect","textOrigin","origin","relOriginX","relOriginY","textOffset","isInside","inside","innerTextDefaultStyle","_innerTextDefaultStyle","textFill","textStroke","autoStroke","canBeInsideText","insideFill","insideStroke","getInsideTextFill","getInsideTextStroke","outsideFill","outsideStroke","getOutsideFill","getOutsideStroke","fill","stroke","setDefaultTextStyle","dirtyStyle","isDarkMode","backgroundColor","getBackgroundColor","attrKV","setTextConfig","setTextContent","setClipPath","extra","hide","show","keyOrObj","saveCurrentToNormalState","toState","_innerSaveToNormal","normalState","_normalState","fromStateTransition","__fromStateTransition","targetName","_savePrimaryToNormal","primaryKeys","hasState","getState","ensureState","clearStates","noAnimation","useState","stateName","keepCurrentStates","toNormalState","hasStates","animationCfg","stateTransition","state","stateProxy","useHoverLayer","hoverLayer","_toggleHoverLayerFlag","_applyStateObj","__inHover","duration","_textGuide","_updateAnimationTargets","REDARAW_BIT","useStates","stateObjects","notChange","stateObj","mergedState","_mergeStates","removeState","replaceState","oldState","newState","forceAdd","newStateExists","toggleState","enable","mergedTextConfig","transition","needsRestoreToNormal","transitionTarget","hasTransition","propNeedsTransition","_transitionState","_attachComponent","componentEl","zr","addSelfToZr","_detachComponent","removeSelfFromZr","_clipPath","removeClipPath","previousTextContent","removeTextContent","cfg","setTextGuideLine","guideLine","removeTextGuideLine","refreshHover","refresh","dirty","inHover","textContent","updateDuringAnimation","wakeUp","stopAnimation","leftAnimators","animateTo","animationProps","animateFrom","elProto","isGroup","logs","logDeprecatedError","xKey","yKey","createLegacyProperty","privateKey","defineProperty","enhanceArray","animatable","reverse","animateToShallow","doneCount","abortedCount","cfgDone","cfgAborted","doneCb","abortedCb","copyArrShallow","is2DArray","copyValue","sourceArr","len0","len1","topKey","animatableKeys","changedKeys","targetKeys","additive","setToFinal","animateAll","innerKey","keyLen","existsAnimators","existsAnimatorsOnSameTarget","revertedSource","reversedTarget","sourceClone","STYLE_MAGIC_KEY","random","DEFAULT_COMMON_STYLE","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","opacity","blend","DEFAULT_COMMON_ANIMATION_PROPS","PRIMARY_STATES_KEYS$1","Displayable","useStyle","beforeBrush","afterBrush","innerBeforeBrush","innerAfterBrush","rectContain","coord","animateStyle","targetKey","setStyle","STYLE_CHANGED_BIT","_rect","styleChanged","styleUpdated","createStyle","__hoverStyle","isStyleObject","_mergeStyle","targetStyle","sourceStyle","_getAnimationStyleProps","mergedStyle","dispProto","invisible","culling","incremental","mathPow","mathSqrt","EPSILON$1","EPSILON_NUMERIC","THREE_SQRT","ONE_THIRD","_v0","_v1","_v2","isAroundZero","isNotAroundZero$1","cubicAt","cubicDerivativeAt","cubicRootAt","c","A","B","C","t1","disc","K","discSqrt","Y1","Y2","T","theta","acos","ASqrt","cubicExtrema","extrema","cubicSubdivide","p01","p12","p23","p012","p123","p0123","cubicProjectPoint","x0","y0","x1","y1","x2","y2","x3","y3","interval","_t","cubicLength","iteration","px","py","quadraticAt","quadraticDerivativeAt","quadraticRootAt","quadraticExtremum","divider","quadraticSubdivide","quadraticProjectPoint","quadraticLength","mathMin$1","mathMax$1","mathSin","mathCos","PI2","end","extremity","fromLine","xDim","yDim","fromCubic","cubicExtrema$1","cubicAt$1","fromQuadratic","quadraticExtremum$1","quadraticAt$1","fromArc","rx","ry","startAngle","endAngle","anticlockwise","min$1","max$1","vec2Min","vec2Max","diff","angle","CMD","M","L","Q","Z","R","tmpOutX","tmpOutY","min2","max2","mathMin$2","mathMax$2","mathCos$1","mathSin$1","mathSqrt$1","mathAbs","PI2$1","hasTypedArray","Float32Array","tmpAngles","modPI2","radian","normalizeArcAngles","angles","newStartAngle","newEndAngle","PathProxy","notSaveData","_version","_xi","_yi","_x0","_y0","_saveData","increaseVersion","getVersion","segmentIgnoreThreshold","_ux","_uy","setDPR","setContext","beginPath","reset","_lineDash","_dashOffset","_pathSegLen","_pathLen","moveTo","addData","lineTo","exceedUnit","_needsDash","_dashedLineTo","bezierCurveTo","_dashedBezierTo","quadraticCurveTo","_dashedQuadraticTo","arc","cx","cy","arcTo","radius","closePath","toStatic","setLineDash","lineDash","_dashIdx","lineDashSum","_dashSum","setLineDashOffset","setData","appendPath","path","appendSize","appendPathData","cmd","_expandData","newData","dashSum","nDash","dash","bezierLen","tmpLen","Number","MAX_VALUE","xi","yi","isFirst","_calculateLength","ux","uy","pathSegLen","pathTotalLen","segCount","rebuildPath","drawPart","accumLength","displayedLength","psi","isEllipse","breakBuild","ellipse","d_1","containStroke","lineWidth","_l","_a","_b","_s","containStroke$1","containStroke$2","PI2$2","normalizeRadian","PI2$3","containStroke$3","windingLine","dir","x_","CMD$1","PI2$4","EPSILON$2","isAroundEqual","swapExtrema","windingCubic","nRoots","nExtrema","y0_","y1_","unit","windingQuadratic","y_","windingArc","dTheta","tmp_1","containPath","isStroke","pathData","containStroke$4","DEFAULT_PATH_STYLE","strokePercent","fillOpacity","strokeOpacity","lineDashOffset","lineCap","miterLimit","strokeNoScale","strokeFirst","DEFAULT_PATH_ANIMATION_PROPS","Path","shape","getDefaultShape","defaultStyle","getDefaultStyle","hasFill","pathFill","fillLum","isDarkLabel","buildPath","shapeCfg","inBundle","pathUpdated","SHAPE_CHANGED_BIT","createPathProxy","hasStroke","needsUpdateRect","firstInvoke","rectWithStroke","_rectWithStroke","lineScale","strokeContainThreshold","localPos","dirtyShape","animateShape","setShape","shapeChanged","targetShape","targetShapePrimaryProps","shapeKeys","mergedShape","isZeroArea","defaultProps","Sub","init","pathProto","subPixelOptimize","autoBatch","CMD$2","mathSqrt$2","mathAtan2","transformPath","nPoint","p_1","mathSqrt$3","mathSin$2","mathCos$2","PI$1","vMag","vRatio","u","vAngle","processArc","fa","fs","psiDeg","xp","yp","lambda","cxp","cyp","commandReg","numberReg","createPathProxyFromString","cpx","cpy","subpathX","subpathY","prevCmd","cmdList","cmdText","cmdStr","pLen","ctlPtx","ctlPty","SVGPath","isPathProxy","createPathOptions","pathProxy","innerOpts","createFromString","Group","_children","childAt","childOfName","childCount","_doAdd","addBefore","nextSibling","replaceAt","index","old","removeAll","eachChild","stopped","includeChildren","tmpRect","tmpMat","childRect","DEFAULT_IMAGE_STYLE","DEFAULT_IMAGE_ANIMATION_PROPS","sWidth","sHeight","ZRImage","CircleShape","Circle","r1","r2","r3","r4","total","subPixelOptimizeLine","outputShape","inputShape","subPixelOptimizeRect","originWidth","originHeight","positiveOrNegative","doubledPosition","RectShape","subPixelOptimizeOutputShape","Rect","optimizedShape","EllipseShape","Ellipse","subPixelOptimizeOutputShape$1","LineShape","Line","pointAt","interpolate","smoothSpline","isLoop","distance$1","segs","w2","w3","smoothBezier","smooth","constraint","cps","prevPoint","nextPoint","point","cp0","cp1","shift","buildPath$1","controlPoints","smoothConstraint","cp2","PolygonShape","Polygon","PolylineShape","Polyline","Gradient","addColorStop","LinearGradient","globalCoord","DEFAULT_TSPAN_STYLE","TSpan","setBoundingRect","parseXML","svg","parser","DOMParser","parseFromString","svgNode","firstChild","CompoundPath","_updatePathDirty","paths","dirtyPath","IncrementalDisplayble","notClear","_displayables","_temporaryDisplayables","_cursor","getCursor","clearDisplaybles","clearTemporalDisplayables","addDisplayable","notPersistent","addDisplayables","displayables","getDisplayables","getTemporalDisplayables","eachPendingDisplayable","globalImageCache","findExistImage","newImageOrSrc","cachedImgObj","createOrUpdateImage","cbPayload","__zrImageSrc","pendingWrap","isImageReady","pending","Image","onload","onerror","imageOnLoad","__cachedImgObj","STYLE_REG","truncateText","containerWidth","ellipsis","prepareTruncateOptions","truncateSingleLine","preparedOpts","maxIterations","minChar","cnCharWidth","ascCharWidth","placeholder","contentWidth","ellipsisWidth","textLine","subLength","estimateLength","charCode","charCodeAt","parsePlainText","overflow","padding","truncate","calculatedLineHeight","lineHeight","truncateLineOverflow","lineOverflow","lines","wrapText","contentHeight","lineCount","outerHeight","outerWidth","truncateMinChar","maxWidth","RichTextToken","RichTextLine","tokens","RichTextContentBlock","parseRichText","contentBlock","topWidth","topHeight","wrapInfo","accumWidth","breakAll","exec","matchedIndex","pushTokens","substring","pendingList","calculatedHeight","calculatedWidth","stlPadding","truncateLine","outer","line","token","tokenStyle","styleName","rich","textPadding","paddingH","tokenHeight","innerHeight","styleTokenWidth","tokenWidthNotSpecified","percentWidth","textBackgroundColor","bgImg","remainTruncWidth","block","isEmptyStr","newLine","strLines","linesWidths","tokenPadding","tokenPaddingH","outerWidth_1","parsePercent$1","isLineHolder","tokensLen","isLatin","ch","code","breakCharMap","isWordBreakChar","isBreakAll","lastAccumWidth","currentWord","currentWordWidth","chWidth","inWord","DEFAULT_RICH_TEXT_COLOR","DEFAULT_STROKE_LINE_WIDTH","DEFAULT_TEXT_ANIMATION_PROPS","fontSize","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","borderColor","borderWidth","borderRadius","ZRText","_defaultStyle","_updateSubTexts","_childCursor","normalizeTextStyle","_updateRichTexts","_updatePlainTexts","defaultTextStyle","sourceRich","targetRich","_mergeRich","richNames","richName","_getOrCreateChild","textFont","getStyleText","needDrawBg","needDrawBackground","bgColorDrawn","baseX","baseY","textX","textY","boxX","boxY","_renderBackground","getTextXForPadding","defaultLineWidth","useDefaultFill","getFill","getStroke","hasShadow","fixedBoundingRect","subElStyle","xLeft","lineTop","xRight","tokenCount","remainedWidth","leftIndex","lineXLeft","lineXRight","rightIndex","_placeToken","parentBgColorDrawn","textWidth","textHeight","topStyle","textBorderWidth","textBorderColor","isPlainBg","textBorderRadius","rectEl","imgEl","rectShape","rectStyle","imgStyle","borderDash","borderDashOffset","commonStyle","makeFont","fontFamily","fontWeight","fontStyle","VALID_TEXT_ALIGN","VALID_TEXT_VERTICAL_ALIGN","bottom","middle","normalizeStyle","ArcShape","clockwise","Arc","unitX","unitY","BezierCurveShape","cpx1","cpy1","someVectorAt","isTangent","cpx2","cpy2","BezierCurve","tangentAt","DropletShape","Droplet","HeartShape","Heart","PI$2","IsogonShape","Isogon","dStep","deg","RingShape","r0","Ring","sin$1","cos$1","RoseShape","Rose","PI$3","PI2$5","mathSin$3","mathCos$3","mathACos","mathATan2","mathAbs$1","mathSqrt$4","mathMax$3","mathMin$3","x10","y10","x32","y32","computeCornerTangents","cr","x01","y01","x11","y11","x00","y00","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","buildPath$2","innerRadius","hasRadius","hasInnerRadius","cornerRadius","innerCornerRadius","halfRd","icr","cr0","cr1","xrs","yrs","xire","yire","xre","yre","xirs","yirs","it","ct0","ct1","SectorShape","Sector","PI$4","cos$2","sin$2","StarShape","Star","xStart","yStart","ri","cos$3","sin$3","TrochoidShape","location","Trochoid","num","RadialGradient","extent","extent2","minTv$1","maxTv$1","OrientedBoundingRect","_corners","_axes","_origin","fromBoundingRect","corners","axes","overlapped","noMtv","_intersectCheckOneSide","axis","_getProjMinMaxOnAxis","dist0","dist1","dim","proj","proj_1","useVML","painterCtors","delInstance","totalLum","ZRender","_sleepAfterStill","_stillFrameAccum","_needsRefresh","_needsRefreshHover","_darkMode","rendererType","renderer","vml","handerProxy","getViewportRoot","_flush","configLayer","zLevel","config","setBackgroundColor","_backgroundColor","setDarkMode","darkMode","refreshImmediately","fromInside","flush","triggerRendered","refreshHoverImmediately","setSleepAfterStill","stillFramesCount","addHover","removeHover","clearHover","clearAnimation","pathToImage","eventHandler","registerPainter","RADIAN_EPSILON","_trim","linearMap","domain","clamp","subDomain","subRange","parsePercent$2","all","NaN","round$1","precision","returnStr","toFixed","getPrecisionSafe","eIndex","dotIndex","getPixelPrecision","dataExtent","pixelExtent","LN10","dataQuantity","sizeQuantity","getPercentWithPrecision","valueList","acc","digits","votesPerQuota","targetSeats","seats","votes","currentSum","NEGATIVE_INFINITY","maxId","remRadian","pi2","isRadianAroundZero","TIME_REG","parseDate","hour","UTC","quantity","quantityExponent","exp","nice","exponent","exp10","nf","numericToNumber","valFloat","isNumeric","getRandomIdBase","DUMMY_COMPONENT_NAME_PREFIX","INTERNAL_COMPONENT_ID_PREFIX","normalizeToArray","defaultEmphasis","subOpts","emphasis","subOptName","TEXT_STYLE_OPTIONS","getDataItemValue","dataItem","isDataItemOption","mappingToExists","existings","newCmptOptions","mode","isNormalMergeMode","isReplaceMergeMode","isReplaceAllMode","existingIdIdxMap","cmptOption","validateIdOrName","prepareResult","mappingById","mappingByName","mappingByIndex","mappingInReplaceAllMode","makeIdAndName","existing","isComponentIdInternal","newOption","keyInfo","brandNew","optionId","makeComparableKey","existingIdx","resultItem","keyExistAndEqual","nextIdx","mapResult","idMap","item","idNum","obj1","obj2","key1","key2","convertOptionIdName","idOrName","defaultValue","isValidIdOrName","isNameSpecified","componentModel","setComponentTypeToKeyInfo","mappingResult","mainType","componentModelCtor","subType","determineSubType","newCmptOption","existComponent","queryDataIndex","payload","dataIndexInside","dataIndex","indexOfRawIndex","indexOfName","makeInner","innerUniqueIndex","hostObj","parseFinder","ecModel","finderInput","finder","defaultMainType","queryOptionMap","parsedKey","queryType","includeMainTypes","queryOption","queryResult","queryReferringComponents","useDefault","enableAll","enableNone","models","SINGLE_REFERRING","userOption","indexOption","idOption","nameOption","specified","firstCmpt","getComponent","queryComponents","setAttribute","getAttribute","interpolateRawValues","sourceValue","targetValue","isAutoPrecision","interpolated","leftArr","rightArr","length_1","info","getDimensionInfo","leftVal","rightVal","TYPE_DELIMITER","IS_CONTAINER","IS_EXTENDED_CLASS","parseClassType","componentType","main","typeArr","checkClassType","isExtendedClass","clz","enableClassExtend","rootClz","mandatoryMethods","$constructor","method","ExtendedClass","isESClass","ins","superCall","superApply","Function","mountExtend","SubClz","SupperClz","classBase","enableClassCheck","classAttr","isInstance","methodName","enableClassManagement","registerClass","componentFullType","componentTypeInfo","container","makeContainer","getClass","throwWhenNotFound","getClassesByMainType","o","hasClass","getAllClassMainTypes","types","hasSubTypes","registerWhenExtend","originalExtend_1","makeStyleMapper","ignoreParent","model","excludes","includes","getShallow","AREA_STYLE_KEY_MAP","getAreaStyle","AreaStyleMixin","getECData","_highlightNextDigit","_highlightKeyMap","getSavedStates","HOVER_STATE_NORMAL","HOVER_STATE_BLUR","HOVER_STATE_EMPHASIS","SPECIAL_STATES","DISPLAY_STATES","Z2_EMPHASIS_LIFT","Z2_SELECT_LIFT","HIGHLIGHT_ACTION_TYPE","DOWNPLAY_ACTION_TYPE","SELECT_ACTION_TYPE","UNSELECT_ACTION_TYPE","TOGGLE_SELECT_ACTION_TYPE","hasFillOrStroke","fillOrStroke","liftedColorCache","liftColor","liftedColor","doChangeHoverState","hoverStateEnum","onHoverStateChange","hoverState","singleEnterEmphasis","singleLeaveEmphasis","singleEnterBlur","singleLeaveBlur","singleEnterSelect","selected","singleLeaveSelect","updateElementState","updater","commonParam","traverseUpdateState","setStatesFlag","getFromStateStyle","toStateName","fromState","createEmphasisDefaultState","targetStates","hasSelect","cloned","store","fromFill","selectFill","normalFill","fromStroke","selectStroke","normalStroke","emphasisStyle","z2EmphasisLift","createSelectDefaultState","z2SelectLift","createBlurDefaultState","hasBlur","currentOpacity","blurStyle","elementStateProxy","setDefaultStateProxy","enterEmphasisWhenMouseOver","shouldSilent","__highByOuter","leaveEmphasisWhenMouseOut","enterEmphasis","highlightDigit","leaveEmphasis","enterBlur","leaveBlur","enterSelect","leaveSelect","__highDownSilentOnTouch","allLeaveBlur","ecIns","getModel","eachComponent","view","getViewOfSeriesModel","getViewOfComponentModel","group","toggleSeriesBlurState","targetSeriesIndex","focus","blurScope","isBlur","leaveBlurOfIndices","dataIndices","itemEl","getItemGraphicEl","targetSeriesModel","getSeriesByIndex","targetCoordSys","coordinateSystem","master","blurredSeries","eachSeries","seriesModel","sameSeries","coordSys","sameCoordSys","getData","dataTypes","blurSeries","toggleSeriesBlurStateFromPayload","isHighDownPayload","isHighlight","seriesIndex","dataType","count","current","ecData","focus_1","toggleSelectionFromPayload","isSelectChangePayload","updateSeriesElementSelection","allData","getAllData","eachItemGraphicEl","isSelected","getAllSelectedIndices","getSelectedDataIndices","enableHoverEmphasis","setAsHighDownDispatcher","enableHoverFocus","OTHER_STATES","defaultStyleGetterMap","itemStyle","lineStyle","areaStyle","setStatesStylesFromModel","itemModel","styleType","getter","asDispatcher","disable","extendedEl","highDownSilentOnTouch","__highDownDispatcher","isHighDownDispatcher","getHighlightDigit","highlightKey","payloadType","savePathStates","selectState","select","ECHARTS_PREFIX","storedLogs","hasConsole","deprecateLog","deprecateReplaceLog","oldOpt","newOpt","consoleLog","makePrintable","hintInfo","msg","makePrintableStringIfPossible_1","toISOString","arg","printableStr","JSON","err","throwError","EMPTY_OBJ","setLabelText","label","labelTexts","oldStates","normal","getLabelText","stateModels","overrideValue","labelFetcher","labelDataIndex","labelDimIndex","normalModel","baseText","getFormattedLabel","defaultText","statesText","stateModel","setLabelStyle","targetEl","labelStatesModels","stateSpecified","isSetOnText","needsCreateText","labelStatesTexts","showNormal","normalStyle","createTextStyle","createTextConfig","stateShow","targetElEmphasisState","enableTextSetter","labelInner","getLabelStatesModels","labelName","statesModels","textStyleModel","specifiedTextStyle","isNotNormal","isAttached","textStyle","setTextStyleCommon","labelPosition","labelRotate","labelDistance","labelOffset","defaultOutsidePosition","inheritColor","globalTextStyle","option","richItemNames","getRichItemNames","richResult","name_1","richTextStyle","setTokenTextStyle","margin","richItemNameMap","richKeys","richKey","parentModel","TEXT_PROPS_WITH_GLOBAL","TEXT_PROPS_SELF","TEXT_PROPS_BOX","isBlock","fillColor","strokeColor","textBorderType","textBorderDashOffset","baseline","disableBox","borderType","getFont","gTextStyleModel","PATH_COLOR","tmpRichText","TextStyleMixin","getTextColor","isEmphasis","getTextRect","LINE_STYLE_KEY_MAP","getLineStyle","LineStyleMixin","ITEM_STYLE_KEY_MAP","getItemStyle","ItemStyleMixin","Model","rest","mergeOption","_doGet","parsePath","hasPath","pathFinal","resolveParentPath","isEmpty","restoreData","isAnimationEnabled","pathArr","base","getUID","enableSubTypeDefaulter","subTypeDefaulters","registerSubTypeDefaulter","defaulter","componentTypeMain","enableTopologicalTravel","entity","dependencyGetter","topologicalTravel","targetNameList","fullNameList","callback","makeDepndencyGraph","graph","stack","noEntryList","targetNameSet","currComponentType","currVertex","isInTargetNameSet","originalDeps","successor","removeEdgeAndAdd","removeEdge","succComponentType","entryCount","thisItem","createDependencyGraphItem","availableDeps","getAvailableDependencies","dependentName","predecessor","thatItem","dep","inheritDefaultOption","superOption","subOption","langEN","month","monthAbbr","dayOfWeek","dayOfWeekAbbr","legend","selector","toolbox","brush","title","polygon","lineX","lineY","keep","dataView","lang","dataZoom","zoom","back","magicType","bar","tiled","restore","saveAsImage","series","typeNames","pie","scatter","effectScatter","radar","tree","treemap","boxplot","candlestick","heatmap","parallel","sankey","funnel","gauge","pictorialBar","themeRiver","sunburst","aria","general","withTitle","withoutTitle","single","prefix","withName","withoutName","multiple","separator","partialData","langZH","LOCALE_ZH","LOCALE_EN","DEFAULT_LOCALE","localeStorage","localeModels","SYSTEM_LANG","langStr","documentElement","language","browserLanguage","registerLocale","locale","localeObj","createLocaleObject","getLocaleModel","getDefaultLocaleModel","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_DAY","ONE_YEAR","defaultLeveledFormatter","year","day","minute","second","millisecond","none","fullDayFormatter","fullLeveledFormatter","primaryTimeUnits","timeUnits","pad","getPrimaryTimeUnit","timeUnit","isPrimaryTimeUnit","getDefaultFormatPrecisionOfInterval","format","template","isUTC","date","fullYearGetterName","monthGetterName","q","dateGetterName","H","hoursGetterName","minutesGetterName","secondsGetterName","S","millisecondsGetterName","localeModel","timeModel","leveledFormat","tick","formatter","defaults$1","mergedFormatter","inherit","getUnitFromValue","targetId","levelId","isSecond","isMinute","isHour","isDay","isMonth","isYear","getUnitValue","fullYearSetterName","monthSetterName","dateSetterName","hoursSetterName","minutesSetterName","secondsSetterName","millisecondsSetterName","makePath","layout","centerGraphic","resizePath","makeImage","imageUrl","zrImg","img","boundingRect","aspect","pathRect","animateOrSetProps","animationType","animatableModel","isFrom","isUpdate","isRemove","animationPayload","updatePayload","getUpdatePayload","animationEnabled","animationEasing","animationDelay","getAnimationDelayParams","updateProps","initProps","removeElement","fadeOutDisplayable","removeElementWithFadeOut","doRemove","isElementRemoved","animateOrSetLabel","labelModel","getDefaultText","valueAnimationEnabled","precision_1","host_1","sourceValue_1","prevValue","targetValue_1","labelText","updateLabel","defaultTextGetter","initLabel","isNotGroup","isPath","groupTransition","g1","g2","getElMap","elMap","anid","getAnimatableProps","elMap1","oldEl","newProp","addCommas","parts","normalizeCssArray$1","replaceReg","replaceMap","encodeHTML","TPL_VAR_ALIAS","wrapVar","varName","seriesIdx","formatTpl","tpl","paramsList","encode","seriesLen","isTimeAxis","axisType","axisValue","axisIndex","$vars","alias","convertToColorString","defaultColor","each$1","LOCATION_PARAMS","HV_NAMES","boxLayout","orient","maxHeight","currentLineMaxSize","nextChild","nextChildRect","nextX","nextY","moveX","newline","moveY","vbox","hbox","getLayoutRect","positionInfo","containerRect","containerHeight","verticalMargin","horizontalMargin","fetchLayoutMode","layoutMode","mergeLayoutParam","targetOption","ignoreSize","hResult","vResult","names","hvIdx","newParams","newValueCount","merged","mergedValueCount","enoughParamNumber","hasProp","hasValue","getLayoutParams","copyLayoutParams","inner","ComponentModel","uid","mergeDefaultAndTheme","inputPositionParams","themeModel","getTheme","getDefaultOption","optionUpdated","newCptOption","isInit","ctor","defaultOption","fields","optList","getReferringComponents","indexKey","idKey","getBoxLayoutParams","boxLayoutModel","protoInitialize","componentIndex","getDependencies","deps","dependencies","unshift","platform","globalDefault","gradientColor","blendMode","stateAnimation","animationDuration","animationDurationUpdate","animationEasingUpdate","animationThreshold","progressiveThreshold","progressive","hoverLayerThreshold","useUTC","inner$1","getNearestColorPalette","colors","requestColorNum","paletteNum","ColorPaletteMixin","clearColorPalette","colorIdx","colorNameMap","getColorFromPalette","scopeFields","defaultColorPalette","layeredColorPalette","colorPalette","VISUAL_DIMENSIONS","SOURCE_FORMAT_ORIGINAL","SOURCE_FORMAT_ARRAY_ROWS","SOURCE_FORMAT_OBJECT_ROWS","SOURCE_FORMAT_KEYED_COLUMNS","SOURCE_FORMAT_TYPED_ARRAY","SOURCE_FORMAT_UNKNOWN","SERIES_LAYOUT_BY_COLUMN","SERIES_LAYOUT_BY_ROW","BE_ORDINAL","Must","Might","Not","innerGlobalModel","resetSourceDefaulter","datasetMap","inheritSourceMetaRawOption","thisNew","makeSeriesEncodeForAxisCoordSys","coordDimensions","datasetModel","querySeriesUpstreamDatasetModel","encodeItemName","encodeSeriesName","seriesLayoutBy","baseCategoryDimIndex","categoryWayValueDimStart","coordDimInfoLoose","coordDimIdx","coordDimInfo","getDataDimCountOnCoordDim","datasetRecord","categoryWayDim","valueWayDim","coordDimName","pushDim","dimIdxArr","idxFrom","idxCount","dimsDef","itemName","seriesName","makeSeriesEncodeForNameBased","dimCount","sourceFormat","dimensionsDefine","potentialNameDimIndex","idxResult","idxRes0","idxRes1","guessRecords","guessResult","doGuessOrdinal","startIndex","isPureNumber","fulfilled","nameDimIndex","thisData","queryDatasetUpstreamDatasetModels","guessOrdinal","dimIndex","maxLoop","dimName","dimType","dimDefItem","dataArrayRows","sample","detectValue","row","dataObjectRows","dataKeyedColumns","dataOriginal","beStr","internalOptionCreatorMap","concatInternalOptions","newCmptOptionList","internalOptionCreator","internalOptions","reCreateSeriesIndices","assertSeriesInitialized","initBase","OPTION_INNER_KEY","GlobalModel","theme","optionManager","_theme","_locale","_optionManager","setOption","optionPreprocessorFuncs","innerOpt","normalizeReplaceMergeInput","_resetOption","resetOption","optionChanged","baseOption","mountOption","_mergeOption","timelineOption","getTimelineOption","mediaOptions","getMediaOption","mediaOption","componentsMap","_componentsMap","componentsCount","_componentsCount","newCmptTypes","newCmptTypeMap","replaceMergeMainTypeMap","componentOption","mainTypeInReplaceMerge","visitComponent","oldCmptList","mergeMode","optionsByMainType","cmptsByMainType","cmptsCountByMainType","ComponentModelClass","extraOpt","__requireNewView","_seriesIndices","getOption","optInMainType","realLen","metNonInner","getLocale","localePosition","setUpdatePayload","_payload","cmpt","cmpts","queryByIdOrName","filterBySubType","findComponents","queryCond","getQueryCond","doFilter","indexAttr","idAttr","nameAttr","ctxForAll_1","cbForAll_1","getSeriesByName","oneSeries","getSeriesByType","getSeries","getSeriesCount","rawSeriesIndex","eachRawSeries","eachSeriesByType","eachRawSeriesByType","isSeriesFiltered","_seriesIndicesMap","getCurrentSeriesIndices","filterSeries","newSeriesIndices","seriesRawIdx","componentTypes","components","component","isNotTargetSeries","internalField","seriesIndices","mergeTheme","seriesId","notMergeColorLayer","colorLayer","themeItem","keyMap_1","idOrNameItem","replaceMerge","availableMethods","ExtensionAPI","ecInstance","coordinateSystemCreators","CoordinateSystemManager","_coordinateSystems","api","coordinateSystems","creater","getCoordinateSystems","register","creator","QUERY_REG","OptionManager","_timelineOptions","_mediaList","_currentMediaIndices","_api","rawOption","dataset","optionBackup","_optionBackup","newParsedOption","parseRawOption","_newBaseOption","timelineOptions","mediaList","mediaDefault","isRecreate","_mediaDefault","timelineModel","getCurrentIndex","ecWidth","ecHeight","indices","applyMediaQuery","indicesEquals","isNew","declaredBaseOption","timelineOnRoot","timeline","timelineOptionsOnRoot","mediaOnRoot","media","hasMedia","hasTimeline","singleMedia","doPreprocess","preProcess","realMap","aspectratio","applicatable","matched","operator","realAttr","real","expect","indices1","indices2","each$2","isObject$1","POSSIBLE_STYLES","compatEC2ItemStyle","itemStyleOpt","normalItemStyleOpt","emphasisItemStyleOpt","convertNormalEmphasis","optType","useExtend","normalOpt","emphasisOpt","removeEC3NormalStatus","compatTextStyle","labelOptSingle","textPropName","compatEC3CommonStyles","processSeries","seriesOpt","markPoint","markLine","markArea","nodes","edgeData","links","edges","categories","mpData","mlData","breadcrumb","levels","leaves","toArr","toObj","compatStyle","isTheme","axisName","axisOpt","axisPointer","parallelOpt","parallelAxisDefault","calendar","calendarOpt","radarOpt","nameGap","axisNameGap","geo","geoOpt","regions","regionObj","timelineOpt","toolboxOpt","feature","featureOpt","tooltip","compatLayoutProperties","LAYOUT_PROPERTIES","COMPATITABLE_COMPONENTS","BAR_ITEM_STYLE_MAP","compatBarItemStyle","oldName","newName","compatPieLabel","alignTo","edgeDistance","compatSunburstState","downplay","blur","compatGraphFocus","focusNodeAdjacency","traverseTree","backwardCompat","seriesType","clipOverflow","clockWise","hoverOffset","scaleSize","pointerColor","backgroundStyle","highlightPolicy","mapType","mapLocation","hoverAnimation","dataRange","visualMap","componentName","dataStack","stackInfoMap","stackInfoList","stackInfo","stackResultDimension","getCalculationInfo","stackedOverDimension","stackedDimension","stackedByDimension","isStackedByIndex","setCalculationInfo","calculateStack","targetStackInfo","idxInStack","resultVal","resultNaN","dims","targetData","byValue","stackedDataRawIndex","getRawIndex","stackedOver","rawIndexOf","getByRawIndex","hostModel","SourceImpl","dimensionsDetectedCount","encodeDefine","metaRawOption","isSourceInstance","createSource","sourceData","thisMetaRawOption","detectSourceFormat","determined","determineSourceDimensions","sourceHeader","dimensions","makeEncodeDefine","createSourceFromSeriesDataOption","cloneSourceShallow","normalizeDimensionsOption","arrayRowsTravelFirst","objectRowsCollectDimensions","colArr","firstIndex","dimensions_1","nameMap","displayName","exist","_c","providerMethods","mountMethods","DefaultDataProvider","sourceParam","dimSize","_source","_data","_offset","_dimSize","getSource","getItem","appendData","clean","pure","persistent","provider","getMethodMapKey","getItemForTypedArray","countForTypedArray","fillStorage","fillStorageForTypedArray","rawItemGetter","getRawSourceItemGetter","rawCounter","getRawSourceDataCounter","dimExtent","appendDataSimply","newCol","oldCol","getItemSimply","rawData","rawSourceItemGetterMap","col","countSimply","rawSourceDataCounterMap","getRawValueSimply","rawSourceValueGetterMap","getRawSourceValueGetter","retrieveRawValue","getRawDataItem","getProvider","dimInfo","DIMENSION_LABEL_REG","DataFormatMixin","getDataParams","rawValue","getRawValue","rawDataIndex","getName","itemOpt","getItemVisual","isSeries","userOutput","componentSubType","dimensionNames","status","extendParams","getItemModel","dimensionIndex","formatTooltip","multipleSeries","createTask","Task","_reset","_plan","plan","_count","_onDirty","onDirty","_dirty","perform","performArgs","upTask","_upstream","skip","outputData","__pipeline","currentTask","planResult","lastModBy","normalizeModBy","_modBy","lastModDataCount","_modDataCount","modBy","modDataCount","forceFirstProgress","_doReset","_outputDueEnd","_dueEnd","_progress","_dueIndex","progress","_doProgress","outputDueEnd","_settedOutputEnd","unfinished","iterator","_callingProgress","downstream","_downstream","pipe","downTask","_disposed","getUpstream","getDownstream","setOutputEnd","winCount","sStep","sCount","ceil","modNext","sequentialNext","parseDataValue","ordinalMeta","parseAndCollect","valueParserMap","ExternalSource","getDimensionInfoAll","getRawHeaderItem","retrieveItemValue","rawItem","convertDataValue","rawVal","createExternalSource","internalSource","extSource","sourceHeaderCount","dimsByName","dimDef","dimDefExt","errMsg","rawValueGetter","externalTransformMap","registerExternalTransform","externalTransform","typeParsed","applyDataTransform","rawTransOption","sourceList","infoForPrint","pipedTransOption","pipeLen","transOption","applySingleDataTransform","upSourceList","pipeIndex","transType","resultList","print","printStrArr","pipeIndexStr","datasetIndex","resultMetaRawOption","SourceManager","sourceHost","_sourceList","_upstreamSignList","_versionSignBase","_sourceHost","_setLocalSource","upstreamSignList","_getVersionSign","prepareSource","_isDirty","_createSource","upSourceMgrList","_getUpstreamSourceManagers","hasUpstream","resultSourceList","upSource","upSourceMgr","_createSourceMetaRawOption","_applyTransform","upMgrList","transformOption","fromTransformResult","doThrow","upMgr","upSrcMgr","sourceIndex","getSourceManager","disableTransformOptionMerge","createTooltipMarkup","retrieveVisualColorForTooltipMarker","visualDrawType","defaultSeriesFormatTooltip","tooltipDims","mapDimensionsAll","tooltipDimLen","isValueArr","markerColor","inlineValue","inlineValueType","subBlocks","sortParam","formatArrResult","formatTooltipArrayValue","inlineValues","inlineValueTypes","blocks","seriesNameSpecified","inlineName","header","noHeader","markerType","noName","valueType","isValueMultipleLine","dimItem","setEachItem","otherDims","inner$2","getSelectionKey","getId","SeriesModel","_selectedDataIndicesMap","dataTask","dataTaskCount","dataTaskReset","sourceManager","getInitialData","wrapData","dataBeforeProcessed","autoSeriesName","_initSelectedMapFromData","themeSubType","fillDataTextStyle","newSeriesOption","getRawData","task","getCurrentTask","getLinkedData","mainData","getLinkedDataAll","getBaseAxis","coordDimToDataDim","coordDim","getProgressive","getProgressiveThreshold","innerDataIndices","_innerSelect","unselect","selectedMap","nameOrId","toggleSelect","tmpArr","selectedDataIndicesMap","nameOrIds","selectedMode","lastDataIndex","hasItemOption","useColorPaletteOnData","ignoreStyleOnData","hasSymbolVisual","defaultSymbol","visualStyleAccessPath","getSeriesAutoName","dataDims","nameArr","dataDim","cloneShallow","dataTaskProgress","param","CHANGABLE_METHODS","DOWNSAMPLE_METHODS","wrapMethod","onDataChange","scheduler","pipeline","getPipeline","agentStubMap","ComponentView","render","updateView","updateLayout","updateVisual","seriesModels","createRenderPlanner","pipelineContext","originalLarge","large","originalProgressive","progressiveRender","inner$3","renderPlanner","ChartView","renderTask","renderTaskPlan","renderTaskReset","highlight","toggleHighlight","markUpdateMethod","updateMethod","elSetState","dataIdx","progressMethodMap","incrementalPrepareRender","incrementalRender","throttle","debounce","currCall","lastCall","lastExec","timer","debounceNextCall","cbArgs","thisDelay","thisDebounce","debounceDelay","inner$4","defaultStyleMappers","defaultColorKey","getStyleMapper","stylePath","styleMapper","visualStyleMapper","getDefaultColorKey","colorKey","seriesStyleTask","createOnAllSeries","performRawSeries","styleModel","getStyle","globalStyle","colorCallback","setVisual","dataEach","dataParams","setItemVisual","sharedModel","dataStyleTask","getVisual","existsStyle","ensureUniqueItemVisual","dataColorPaletteTask","overallReset","paletteScopeGroupByType","colorScope","dataAll","idxMap","rawIdx","fromPalette","ariaModel","seriesCnt","maxDataCnt","maxSeriesCnt","displaySeriesCnt","ariaLabel","getTitle","getConfig","seriesLabels_1","seriesCount","seriesLabel","seriesTpl","getSeriesTypeName","displayCnt","dataLabels","keyValues","RegExp","userConfig","PI$5","loadingDefault","textColor","maskColor","showSpinner","spinnerRadius","mask","labelRect","Scheduler","dataProcessorHandlers","visualHandlers","_stageTaskMap","_dataProcessorHandlers","_visualHandlers","_allHandlers","taskRecord","overallTask","getPerformArgs","_pipelineMap","pCtx","progressiveEnabled","__idxInPipeline","blockIndex","pipelineId","updateStreamModes","dataLen","threshold","restorePipelines","pipelineMap","preventIncremental","_pipe","prepareStageTasks","stageTaskMap","record","_createSeriesStageTask","_createOverallStageTask","prepareView","__block","performDataProcessorTasks","_performStageTasks","performVisualTasks","stageHandlers","stageHandler","visualType","stageHandlerRecord","seriesTaskMap","overallNeedDirty_1","stub","needSetDirty","performArgs_1","setDirty","dirtyMap","performSeriesTasks","getTargetSeries","seriesTaskPlan","seriesTaskReset","seriesTaskCount","useClearVisual","isVisual","isLayout","overallTaskReset","overallProgress","createStub","stubReset","stubOnDirty","agent","wrapStageHandler","detectSeriseType","stubProgress","clearAllVisual","resetDefines","makeSeriesTaskProgress","singleSeriesTaskProgress","resetDefineIdx","resetDefine","legacyFunc","ecModelMock","apiMock","mockMethods","cond","Clz","colorAll","lightTheme","contrastColor","axisCommon","axisLine","splitLine","splitArea","minorSplitLine","crossStyle","subtextStyle","iconStyle","brushStyle","handleStyle","moveHandleStyle","fillerColor","dataBackground","selectedDataBackground","controlStyle","dayLabel","monthLabel","yearLabel","timeAxis","logAxis","valueAxis","categoryAxis","symbol","color0","borderColor0","DatasetModel","_sourceManager","DatasetView","mapDataStorage","registerMap","mapName","rawDef","rawSpecialAreas","records","specialAreas","geoSource","geoJson","geoJSON","features","parsers","retrieveMap","svgXML","ECEventProcessor","cptQuery","dataQuery","otherQuery","condCptType","suffixes_1","dataKeys_1","reserved","propSuffix","suffixPos","eventInfo","packedEvent","check","filterForExposedEvent","host","propOnHost","seriesSymbolTask","legendSymbol","symbolType","symbolSize","keepAspect","symbolRotate","hasSymbolTypeCallback","hasSymbolSizeCallback","hasSymbolRotateCallback","hasCallback","seriesSymbol","seriesSymbolSize","seriesSymbolRotate","symbolKeepAspect","dataSymbolTask","itemSymbolType","itemSymbolSize","itemSymbolRotate","itemSymbolKeepAspect","getItemVisualFromData","getVisualFromData","PI2$6","CMD$3","DEFAULT_SEARCH_SPACE","getCandidateAnchor","outPt","outDir","projectPointToArc","projectPointToLine","limitToEnds","lineLen","projectedLen","projectPointToRect","tmpPt","nearestPointOnRect","pt","nearestPointOnPath","minDist","pt0","pt1","pt2","dir2","updateLabelLinePoints","labelLineModel","labelLine","labelGuideConfig","textGuideLineConfig","searchSpace","candidates","anchorPoint","anchor","targetTransform","targetInversedTransform","candidate","limitTurnAngle","tmpProjPoint","linePoints","minTurnAngle","angleCos","minTurnAngleCos","tan","limitSurfaceAngle","surfaceNormal","maxSurfaceAngle","maxSurfaceAngleCos","HALF_PI","angle2","newAngle","setLabelLineState","isNormal","styleObj","buildLabelLinePath","moveLen","midPoint0","midPoint2","midPoint1","setLabelLineStyle","labelIgnoreNormal","isLabelIgnored","showAbove","labelLineConfig","getLabelLineStatesModels","labelLineName","prepareLayoutList","defaultAttr","localRect","isAxisAligned","minMargin","globalRect","obb","priority","layoutOption","computedLayoutOption","axisAligned","shiftLayout","xyDim","sizeDim","minBound","maxBound","balanceShift","lastPos","adjusted","totalShifts","shiftList","first","last","minGap","maxGap","updateMinMaxGap","squeezeGaps","takeBoundsGap","squeezeWhenBailout","gapThisBound","gapOtherBound","moveDir","moveFromMaxGap","remained","maxSqeezePercent","gaps","totalGaps","prevItemRect","squeezePercent","movement","moveForEachLabel","shiftLayoutOnX","leftBound","rightBound","shiftLayoutOnY","topBound","bottomBound","hideOverlap","labelList","displayedLabels","hideEl","emphasisState","labelItem","existsTextCfg","labelGuideIgnore","cloneArr","newPoints","prepareLayoutCallbackParams","hostRect","labelLinePoints","LABEL_OPTION_TO_STYLE_KEYS","dummyTransformable","labelLayoutInnerStore","labelLineAnimationStore","extendWithKeys","LABEL_LAYOUT_PROPS","LabelManager","_labelList","_chartViewList","clearLabels","_addLabel","labelStyle","labelTransform","labelGuide","attachedPos","attachedRot","addLabelsOfSeries","chartView","__model","disableLabelLayout","updateLayoutConfig","createDragHandler","defaultLabelAttr","degreeToRadian","needsUpdateLabelLine","labelLayoutStore","labelsNeedsAdjustOnX","moveOverlap","labelsNeedsAdjustOnY","labelsNeedsHideOverlap","processLabelsOverall","ignoreLabelLineUpdate","_updateLabelLine","_animateLabels","visualStyle","disableLabelAnimation","layoutStore","oldLayout","newProps","oldOpacity","prevStates","oldLayoutSelect","oldLayoutEmphasis","layoutSelect","layoutEmphasis","newLayout","createLegacyDataSelectAction","ecRegisterAction","getSeriesIndices","eventsMap","dispatchAction","handleSeriesLegacySelectEvents","eventPostfix","legacyEventName","fromActionPayload","handleLegacySelectEvents","messageCenter","isFromClick","fromAction","createLinearGradient","canvasGradient","createRadialGradient","getCanvasGradient","normalizeLineDash","lineType","pathProxyForDraw","styleHasStroke","styleHasFill","doFillPath","originalGlobalAlpha","globalAlpha","doStrokePath","createCanvasPattern","pattern","__image","createPattern","repeat","brushPath","inBatch","strokePart","firstDraw","hasFillGradient","hasStrokeGradient","hasFillPattern","hasStrokePattern","fillGradient","strokeGradient","fillPattern","strokePattern","__canvasFillGradient","__canvasStrokeGradient","__canvasFillPattern","__canvasStrokePattern","fillStyle","strokeStyle","ctxLineDash","lineScale_1","needsRebuild","brushImage","drawImage","brushText","hasLineDash","lineScale_2","strokeText","fillText","SHADOW_NUMBER_PROPS","STROKE_PROPS","bindCommonProps","prevStyle","forceSetAll","flushPathDrawn","globalCompositeOperation","bindPathAndTextCommonStyle","prevEl","newLineWidth","bindImageStyle","setContextTransform","setTransform","viewRect","isDisplayableCulled","isClipPathChanged","prevClipPaths","updateClipStatus","allClipped","isTransformChanged","m0","DRAW_TYPE_PATH","DRAW_TYPE_IMAGE","DRAW_TYPE_TEXT","DRAW_TYPE_INCREMENTAL","canPathBatch","batchFill","batchStroke","isLast","viewWidth","viewHeight","prevElClipPaths","forceSetTransform","forceSetStyle","save","canBatchPath","lastDrawType","brushIncremental","temporalDisplayables","innerScope","i_1","len_1","returnFalse","createDom","newDom","newDomStyle","Layer","motionBlur","lastFrameAlpha","virtual","__used","__drawIndex","__startIndex","__endIndex","domStyle","onselectstart","webkitUserSelect","userSelect","webkitTapHighlightColor","domBack","ctxBack","getElementCount","initContext","createBackBuffer","clearAll","clearColor","haveMotionBLur","clearRect","clearColorGradientOrPattern","__canvasGradient","__painter","fillRect","HOVER_LAYER_ZLEVEL","CANVAS_ZLEVEL","EL_AFTER_INCREMENTAL_INC","INCREMENTAL_INC","parseInt10","isLayerValid","__builtin__","createRoot","domRoot","CanvasPainter","_zlevelList","_layers","_layerConfig","_needsManuallyCompositing","singleCanvas","_opts","_singleCanvas","rootStyle","innerHTML","zlevelList","layers","_width","_getSize","_height","_domRoot","rootCanvas","mainLayer","getType","isSingleCanvas","getViewportRootOffset","viewportRoot","paintAll","_redrawId","_paintList","_paintHoverList","_hoverlayer","getLayer","getHoverLayer","redrawId","_updateLayerStatus","_doPaintList","needsRefreshHover","_compositeManually","self_1","eachBuiltinLayer","layerList","zi","useTimer","now","startTime","firstEl","dTime","draw","insertLayer","layersMap","prevLayer","prevDom","insertBefore","eachLayer","getLayers","updatePrevLayer","incrementalLayerCount","prevZlevel","_clearLayer","layerConfig","_zlevel","delLayer","removeChild","display","clearLayer","getRenderedCanvas","imageLayer","pixelRatio","width_1","height_1","ctx_1","renderToCanvas","whIdx","wh","cwh","plt","prb","defaultView","getComputedStyle","canvas","shadowBlurSize","leftMargin","rightMargin","topMargin","bottomMargin","pathTransform","imgShape","findEventDispatcher","returnFirstMatch","found","assert$1","each$3","isFunction$1","isObject$2","zrender","TEST_FRAME_REMAIN_TIME","PRIORITY_PROCESSOR_SERIES_FILTER","PRIORITY_PROCESSOR_DATASTACK","PRIORITY_PROCESSOR_FILTER","PRIORITY_PROCESSOR_DEFAULT","PRIORITY_PROCESSOR_STATISTIC","PRIORITY_VISUAL_LAYOUT","PRIORITY_VISUAL_PROGRESSIVE_LAYOUT","PRIORITY_VISUAL_GLOBAL","PRIORITY_VISUAL_CHART","PRIORITY_VISUAL_POST_CHART_LAYOUT","PRIORITY_VISUAL_COMPONENT","PRIORITY_VISUAL_CHART_DATA_CUSTOM","PRIORITY_VISUAL_BRUSH","PRIORITY","PROCESSOR","FILTER","SERIES_FILTER","STATISTIC","VISUAL","LAYOUT","PROGRESSIVE_LAYOUT","GLOBAL","CHART","POST_CHART_LAYOUT","COMPONENT","BRUSH","CHART_ITEM","IN_MAIN_PROCESS_KEY","OPTION_UPDATED_KEY","STATUS_NEEDS_UPDATE_KEY","ACTION_REG","CONNECT_STATUS_KEY","CONNECT_STATUS_PENDING","CONNECT_STATUS_UPDATING","CONNECT_STATUS_UPDATED","createRegisterEventWithLowercaseECharts","isDisposed","disposedWarning","toLowercaseNameAndCallEventful","createRegisterEventWithLowercaseMessageCenter","MessageCenter","messageCenterProto","updateDirectly","updateMethods","doConvertPixel","doDispatchAction","flushPendingActions","triggerUpdatedEvent","bindRenderedEvent","bindMouseEvent","renderComponents","renderSeries","performPostUpdateFuncs","createExtensionAPI","enableConnect","markStatusToUpdate","applyChangedStates","ECharts","_chartsViews","_chartsMap","_componentsViews","_pendingActions","themeStorage","_dom","defaultRenderer","__ECHARTS__DEFAULT__RENDERER__","_zr","_throttledZrFlush","_coordSysMgr","prioritySortFunc","__prio","visualFuncs","dataProcessorFuncs","_scheduler","_messageCenter","_labelManager","_initEvents","_onframe","remainTime","_model","getDom","getZr","notMerge","lazyUpdate","setTheme","getDevicePixelRatio","getSvgDataURL","toDataURL","getDataURL","excludeComponents","excludesComponentViews","__viewId","url","getConnectedDataURL","isSvg","groupId","MAX_NUMBER","connectedGroups","left_1","top_1","right_1","bottom_1","canvasList_1","dpr_1","instances","chart","getSvgDom","targetCanvas","zr_1","content_1","getSvgRoot","connectedBackgroundColor","convertToPixel","convertFromPixel","containPixel","findResult","containPoint","parsedFinder","MOUSE_EVENT_NAMES","eveName","isGlobalOut","dataModel","eventData","eventActionMap","actionType","DOM_ATTRIBUTE_KEY","_loadingFX","showLoading","hideLoading","loadingEffects","makeActionFromEvent","eventObj","actions","updateLabelLayout","labelManager","isComponent","viewList","viewMap","__alive","doPrepare","requireNewView","viewId","classType","Clazz","__id","__ecComponentInfo","callView","excludeSeriesId","excludeSeriesIdMap","notBlur","prepareAndUpdate","coordSysMgr","componentDirtyList","componentView","seriesDirtyMap","coordSysList","chartsMap","escapeConnect","actionWrap","actionInfo","cptTypeTmp","cptType","payloads","batched","batch","eventObjBatch","isSelectChange","isStatusChange","batchItem","action","statusChanged","newObj","pendingActions","dispatcher","dirtyList","updateZ","updateStates","updateBlend","updateHoverLayerStatus","postUpdateFuncs","applyElementStates","newStates","elCount","preventUsingHoverLayer","preventAutoZ","stateAnimationModel","enableAnimation","class_1","getComponentByElement","modelInfo","updateConnectedChartsStatus","charts","otherChart","action_1","otherCharts_1","echartsProto","one","wrapped","args2","postInitFuncs","idBase","groupIdBase","init$1","existInstance","getInstanceByDom","clientWidth","clientHeight","postInitFunc","connect","disConnect","disconnect","getInstanceById","registerTheme","registerPreprocessor","preprocessorFunc","registerProcessor","processor","normalizeRegister","registerPostInit","registerPostUpdate","postUpdateFunc","registerAction","registerCoordinateSystem","coordSysCreator","getCoordinateSystemDimensions","getDimensionsInfo","registerLayout","layoutTask","registerVisual","visualTask","targetList","defaultPriority","__raw","registerLoading","loadingFx","extendComponentModel","extendComponentView","extendSeriesModel","extendChartView","setCanvasCreator","getMap","registerTransform","dataTool","defaultKeyGetter","DataDiffer","oldArr","newArr","oldKeyGetter","newKeyGetter","_old","_new","_oldKeyGetter","_newKeyGetter","_add","_update","_remove","execute","oldDataIndexMap","newDataIndexMap","oldDataKeyArr","newDataKeyArr","_initIndexMap","keyArr","keyGetterName","existence","summarizeDimensions","summary","notExtraCoordDimMap","defaultedLabel","defaultedTooltip","coordDimIndex","getOrCreateEncodeArr","isExtraCoord","mayLabelDimType","defaultTooltip","otherDim","encodeArr","dataDimsOnCoord","encodeFirstDimNotExtra","dimArr","encodeLabel","encodeTooltip","getDimensionTypeByAxis","DataDimensionInfo","mathFloor","isObject$3","map$1","UNDEFINED","INDEX_NOT_FOUND","ID_PREFIX","dataCtors","Float64Array","Int32Array","CtorUint32Array","Uint32Array","CtorInt32Array","CtorUint16Array","Uint16Array","TRANSFERABLE_PROPERTIES","CLONE_PROPERTIES","defaultDimValueGetters","prepareInvertedIndex","getRawValueFromStore","getIndicesCtor","prepareStorage","getRawIndexWithoutIndices","getRawIndexWithIndices","getIdFromName","normalizeDimensions","validateDimensions","cloneListForMapAndSample","getInitialExtent","setItemDataAndSeriesIndex","transferProperties","List","_rawCount","_storage","_storageArr","_nameList","_idList","_visual","_layout","_itemVisuals","_itemLayouts","_graphicEls","_rawExtent","_extent","_approximateExtent","_calculationInfo","TRANSFERABLE_METHODS","dimensionInfos","invertedIndicesMap","dimInfoInput","dimensionInfo","dimensionName","createInvertedIndices","_dimensionInfos","_dimensionsSummary","_invertedIndicesMap","getDimension","getDimensionsOnCoord","mapDimension","dimensionsSummary","initData","nameList","dimValueGetter","notProvider","_rawData","_indices","_nameRepeatCount","defaultDimValueGetter","_dimValueGetter","_dimValueGetterArrayRows","arrayRows","_initDataFromProvider","appendValues","values","dimLen","rawExtent","rawExtentArr","storageArr","emptyDataItem","sourceIdx","dimIdx","dimRawExtent","append","dimensionInfoMap","idList","nameDimIdx","_nameDimIdx","itemId","_idDimIdx","dimStorage","nameDim","nameDimChunk","getIndices","newIndices","thisCount","buffer","getByDimIdx","dimStore","getValues","getDataExtent","dimData","initialExtent","currEnd","useRaw","getApproximateExtent","setApproximateExtent","getSum","getMedian","dimDataArray","sortedDimDataArray","invertedIndices","rawIndex","indicesOfNearest","maxDistance","nearestIndices","minDiff","nearestIndicesLen","ctxCompat","fCtx","dimNames","dimIndices","filterSelf","dim0","selectRange","originalCount","quickFinished","dimStorage2","val2","dimk","mapArray","tmpRetValue","dataCount","retValue","rawExtentOnDim","downSample","dimension","rate","sampleValue","sampleIndex","targetStorage","frameValues","frameSize","sampleFrameIdx","lttbDownSample","valueDimension","sampledIndex","currentRawIndex","maxArea","area","nextRawIndex","nextFrameStart","nextFrameEnd","avgX","avgY","frameStart","frameEnd","pointAX","pointAY","otherList","thisList","visual","kvObj","itemVisual","itemVisuals","setLayout","name_2","getLayout","getItemLayout","setItemLayout","clearItemLayouts","setItemGraphicEl","dimensionInfoList","injectFunction","originalMethod","__wrappedMethods","getDimValueSimply","objectRows","keyedColumns","original","typedArray","chunk","DataCtor","oldStore","oldLen","newStore","nameRepeatCount","excludeDimensions","allDimensions","originalStorage","cloneChunk","originalChunk","childECData","thisECData","completeDimensions","sysDims","dataDimNameMap","coordDimNameMap","getDimCount","dimDefItemRaw","userDimName","encodeDef","encodeDefaulter","encodeDefMap","dataDimsRaw","validDataDims","resultDimIdxOrName","resultDimIdx","applyDim","availDimIdx","sysDimItemRaw","sysDimItemDimsDef","sysDimItemOtherDims","sysDimItem","sysDimItemDimsDefItem","generateCoord","generateCoordCount","fromZero","genName","optDimCount","createDimensions","dimensionsCount","CoordSysInfo","coordSysName","coordSysDims","axisMap","categoryAxisMap","getCoordSysInfoBySeries","fetch","fetchers","cartesian2d","xAxisModel","yAxisModel","isCategory","firstCategoryDimIndex","singleAxis","singleAxisModel","polar","polarModel","radiusAxisModel","findAxisModel","angleAxisModel","parallelModel","parallelAxisIndex","axisModel","axisDim","enableDataStack","byIndex","stackedCoordDimension","mayStack","stackedByDimInfo","stackedDimInfo","stackedDimCoordDim_1","stackedDimType","stackedDimCoordIndex_1","isCalculationCoord","isDimensionStacked","stackedDim","getStackedDimension","targetDim","createListFromArray","registeredCoordSys","coordSysInfo","coordSysDimDefs","useEncodeDefaulter","dimInfoList","hasNameEncode","categoryAxisModel","getOrdinalMeta","stackCalculationInfo","isNeedCompleteOrdinalData","sampleItem","firstDataNotNull","LineSeriesModel","legendHoverLink","endLabel","valueAnimation","smoothMonotone","showSymbol","showAllSymbol","connectNulls","sampling","Triangle","Diamond","Pin","tanX","tanY","cpLen","cpLen2","Arrow","symbolCtors","roundRect","square","circle","diamond","pin","arrow","triangle","symbolShapeMakers","thickness","size","symbolBuildProxies","SymbolClz","proxySymbol","symbolPathSetColor","innerColor","symbolStyle","__isEmptyBrush","createSymbol","symbolPath","setColor","getDefaultLabel","labelDims","vals","getDefaultInterpolatedLabel","interpolatedValue","Symbol","seriesScope","updateData","_createSymbol","driftSymbol","_symbolType","stopSymbolAnimation","toLastFrame","getSymbolPath","setZ","setDraggable","getSymbolSize","disableAnimation","_updateCommon","_sizeX","_sizeY","_seriesModel","emphasisItemStyle","blurItemStyle","selectItemStyle","symbolOffset","hoverScale","emphasisModel","visualColor","pathStyle","symbolInnerColor","liftZ","z2Origin","_z2","useNameLabel","getLabelDefaultText","scaleRatio","setSymbolScale","fadeOut","keepLabel","symbolNeedsDraw","isIgnore","clipShape","normalizeUpdateOpt","makeSeriesScope","SymbolDraw","SymbolCtor","_SymbolCtor","oldData","symbolUpdateOpt","getSymbolPoint","newIdx","symbolEl","oldIdx","_getSymbolPoint","isPersistent","incrementalPrepareUpdate","_seriesScope","incrementalUpdate","taskParams","updateIncrementalAndHover","prepareDataCoordInfo","valueOrigin","baseAxis","getOtherAxis","valueStart","getValueStart","baseAxisDim","valueAxisDim","valueDim","baseDim","baseDataOffset","stacked","stackResultDim","dataDimsForPoint","getExtent","getStackedOnPoint","dataCoordInfo","stackedData","dataToPoint","supportFloat32Array","Float32ArrayCtor","createFloat32Array","diffData","diffResult","idx1","lineAnimationDiff","oldStackedOnPoints","newStackedOnPoints","oldCoordSys","newCoordSys","oldValueOrigin","newValueOrigin","currPoints","nextPoints","currStackedPoints","nextStackedPoints","sortedIndices","rawIndices","newDataOldCoordInfo","oldDataNewCoordInfo","oldPoints","diffItem","pointAdded","oldIdx2","newIdx2","currentX","currentY","newDataDimsForPoint","oldPt","stackedOnPoint","oldDataDimsForPoint","newPt","newStackedOnPt","sortedCurrPoints","sortedNextPoints","sortedCurrStackedPoints","sortedNextStackedPoints","sortedStatus","i2","idx2","stackedOnCurrent","stackedOnNext","mathMin$4","mathMax$4","isPointNull","drawSegment","segLen","allLen","prevX","prevY","cpx0","cpy0","tmpK","ratioNextSeg","nextCpx0","nextCpy0","lenPrevSeg","lenNextSeg","ECPolylineShape","ECPolyline","getLastIndexNotNull","getPointAtIndex","getIndexRange","xOrY","prevIndex","nextIndex","getPointOn","isDimX","nRoot","t_1","ECPolygonShape","ECPolygon","stackedOnPoints","stackedOnSmooth","createGridClipPath","cartesian","hasAnimation","getArea","isHorizontal","isAxisInversed","duringCb","createPolarClipPath","sectorArea","isRadial","createClipPath","isCoordinateSystemType","isPointsSame","points1","points2","bboxFromPoints","minX","minY","getBoundingDiff","min1","max1","getSmooth","getStackedOnPoints","turnPointsIntoStep","stepTurnAt","baseIndex","stepPoints","stepPt","nextPt","stepPt2","getVisualGradient","visualMetaList","visualMeta","getAxis","stops","toGlobalCoord","dataToCoord","stopLen","outerColors","tinyExtent","minCoord","maxCoord","coordSpan","gradient","getIsIgnoreFunc","isAuto","getAxesByScale","canShowAllSymbolForCategory","categoryDataDim","labelMap","getViewLabels","tickValue","axisExtent","availSize","createLineClipPath","lineView","endLabelModel_1","showEndLabel","valueAnimation_1","data_1","labelAnimationRecord_1","lastFrameIndex","clipRect","_endLabelOnDuring","_endLabel","originalX","originalY","expandSize","getEndLabelStateSpecified","endLabelModel","isBaseInversed","LineView","lineGroup","symbolDraw","_symbolDraw","_lineGroup","lineStyleModel","areaStyleModel","isCoordSysPolar","prevCoordSys","_coordSys","polyline","_polyline","_polygon","isAreaChart","isIgnoreFunc","__temp","clipShapeForSymbol","_clipShapeForSymbol","_step","_initSymbolLabelAnimation","_newPolyline","_newPolygon","_initOrUpdateEndLabel","_stackedOnPoints","_points","_doUpdateAnimation","lineJoin","shouldBolderOnEmphasis","emphasisLineStyle","stackedOnSeries","changePolyState","_changePolyState","_valueOrigin","isHorizontalOrRadial","isAxisInverse","seriesDuration","seriesDalay","seriesDalayValue","polarClip","pointToCoord","gridClip","ratio","data_2","animationRecord","dataIndexRange","endValue","__points","updatedDataInfo","diffStatus","ptIdx","layoutPoints","forceStoreInTypedArray","useTypedArray","dimInfo0","dimInfo1","dimIdx0","dimIdx1","tmpIn","tmpOut","samplers","average","nearest","indexSampler","dataSample","sampler","nameLocation","nameRotate","nameTruncate","nameTextStyle","triggerEvent","onZero","onZeroAxisIndex","axisTick","axisLabel","showMinLabel","showMaxLabel","boundaryGap","deduplication","alignWithLabel","splitNumber","minorTick","primary","logBase","axisDefault","category","OrdinalMeta","_needCollect","needCollect","_deduplication","createByAxisModel","dedplication","getOrdinal","_getOrCreateMap","AXIS_TYPES","axisModelCreator","BaseAxisModelClass","extraDefaultOption","AxisModel","getAxisType","thisOption","__ordinalMeta","getCategories","AxisModelCommonMixin","getNeedCrossZero","getCoordSysModel","CartesianAxisModel","extraOption","categorySortInfo","Scale","setting","_setting","getSetting","unionExtent","unionExtentFromData","setExtent","thisExtent","isInExtentRange","isBlank","_isBlank","setBlank","roundNumber","intervalScaleNiceTicks","minInterval","maxInterval","span","intervalPrecision","getIntervalPrecision","niceTickExtent","fixExtent","contain$1","normalize$1","scale$2","OrdinalScale","_ordinalMeta","_categorySortInfo","getCategoryIndex","getTicks","ticks","getMinorTicks","setCategorySortInfo","getCategorySortInfo","beforeSortIndex","displayIndex","ordinalNumber","getLabel","cateogry","niceTicks","niceExtent","roundNumber$1","IntervalScale","_interval","_intervalPrecision","getInterval","setInterval","_niceExtent","expandToNicedExtent","safeLimit","lastNiceTick","minorTicks","nextTick","prevTick","minorTicksGroup","minorInterval","dataNum","fixMax","fixMin","STACK_PREFIX","LARGE_BAR_MIN_WIDTH","LargeArr","getSeriesStackId","getAxisKey","prepareLayoutBarSeries","isOnCartesian","isInLargeMode","getValueAxesMinGaps","barSeries","axisValues","cnt","axisMinGaps","valuesInAxis","makeColumnLayout","seriesInfoList","bandWidth","getBandWidth","extentSpan","scaleSpan","barWidth","barMaxWidth","barMinWidth","barGap","barCategoryGap","axisKey","stackId","doCalBarWidthAndOffset","columnsMap","seriesInfo","columnsOnAxis","autoWidthCount","categoryGap","stacks","minWidth","categoryGapPercent","columnCount","barGapPercent","autoWidth","column","finalWidth","widthSum","lastColumn","retrieveColumnLayout","barWidthAndOffset","lastStackCoords","columnLayoutInfo","columnOffset","columnWidth","barMinHeight","isValueAxisH","valueAxisStart","getValueAxisStart","baseValue","baseCoord","largeLayout","coordLayout","getRect","valueAxisHorizontal","valueDimIdx","largePoints","largeBackgroundPoints","largeDataIndices","valuePair","pointsOffset","idxOffset","backgroundStart","bisect","TimeScale","_minLevelUnit","labelFormatter","innerTicks","getIntervalTicks","_approxInterval","getFullYear","getMonth","getDate","approxTickNum","scaleIntervalsLen","scaleIntervals","isUnitValueSame","valueA","valueB","dateA","dateB","isSame","isSameYear","isSameMonth","isSameDay","isSameHour","isSameMinute","isSameSecond","isSameMilliSecond","getDateInterval","approxInterval","daysInMonth","getMonthInterval","APPROX_ONE_MONTH","getHourInterval","getMinutesAndSecondsInterval","isMinutes","getMillisecondsInterval","getFirstTimestampOfUnit","unitName","outDate","bottomUnitName","unitNames","iter","addTicksInSpan","minTimestamp","maxTimestamp","getMethodName","setMethodName","isDate","dateTime","notAdd","addLevelTicks","lastLevelTicks","levelTicks","newAddedTicks","isFirstLevel","startTick","endTick","getterName","setterName","levelsTicks","currentLevelTicks","tickCount","lastLevelTickCount","primaryTimeUnit","nextPrimaryTimeUnit","levelTicksRemoveDuplicated","targetTickNum","levelsTicksInExtent","maxLevel","scaleProto","intervalScaleProto","getPrecisionSafe$1","roundingErrorFix","mathFloor$1","mathCeil","mathPow$1","mathLog","LogScale","_originalScale","originalScale","originalExtent","powVal","_fixMin","fixRoundingError","_fixMax","originalVal","ScaleRawExtentInfo","_prepareParams","_dataMin","_dataMax","isOrdinal","_isOrdinal","_needCrossZero","modelMinRaw","_modelMinRaw","_modelMinNum","parseAxisModelMinMax","modelMaxRaw","_modelMaxRaw","_modelMaxNum","_axisDataLen","boundaryGapArr","_boundaryGapInner","dataMin","dataMax","axisDataLen","boundaryGapInner","minFixed","maxFixed","determinedMin","_determinedMin","determinedMax","_determinedMax","modifyDataMinMax","minMaxName","frozen","DATA_MIN_MAX_ATTR","setDeterminedMinMax","DETERMINED_MIN_MAX_ATTR","freeze","ensureScaleRawExtentInfo","rawExtentInfo","minMax","getScaleExtent","scaleType","rawExtentResult","barSeriesModels","isBaseAxisAndHasBarSeries_1","adjustedScale","adjustScaleForOverflow","axisLength","barsOnCurrentAxis","minOverflow","maxOverflow","totalOverFlow","oldRange","oldRangePercentOfNew","overflowBuffer","niceScaleExtent","extentInfo","createScaleByModel","ifAxisCrossZero","makeLabelFormatter","getLabelModel","categoryTickStart","getAxisRawValue","estimateLabelUnionRect","realNumberScaleTicks","categoryScaleExtent","axisLabelModel","unrotatedSingleRect","singleRect","rotateTextRect","textRect","rotateRadians","beforeWidth","beforeHeight","afterWidth","afterHeight","rotatedRect","getOptionCategoryInterval","shouldShowAllLabels","getDataDimensionsOnAxis","dataDimMap","unionAxisExtentFromData","seriesExtent","PI$6","AxisBuilder","nameDirection","tickDirection","labelDirection","handleAutoShown","transformGroup","_transformGroup","hasBuilder","builders","getGroup","innerTextLayout","axisRotation","textRotation","direction","rotationDiff","makeAxisEventDataBase","isLabelSilent","tooltipOpt","shown","matrix","arrows","arrowSize","arrowOffset","symbolWidth_1","symbolHeight_1","axisTickLabel","ticksEls","buildAxisMajorTicks","labelEls","buildAxisLabel","fixMinMaxLabelShow","buildAxisMinorTicks","gapSignal","isNameLocationCenter","labelLayout","nameRotation","axisNameAvailableWidth","endTextLayout","truncateOpt","nameTruncateMaxWidth","formatterParams","content","__fullText","targetType","textRotate","onLeft","tickEls","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","lastTick","ignoreEl","isTwoLabelOverlapped","firstRect","nextRect","mRotationBack","createTicks","ticksCoords","tickTransform","tickEndCoord","tickLineStyle","anidPrefix","tickCoord","tickEl","tickModel","getTicksCoords","minorTickModel","minorTicksCoords","getMinorTicksCoords","minorTickLineStyle","minorTicksEls","axisLabelShow","labelMargin","labels","labelRotation","rawCategoryData","formattedLabel","rawLabel","itemLabelModel","rawCategoryItem","fixValue","axisInfo","getAxisInfo","axisPointerModel","useHandle","isHandleTrigger","coordSysAxesInfo","axesInfo","makeKey","getAxisPointerModel","axisPointerClazz","AxisView","axisPointerClass","_doUpdateAxisPointerClass","updateAxisPointer","_axisPointer","_disposeAxisPointer","forceRender","getAxisPointerClass","registerAxisPointerClass","layout$1","gridModel","grid","otherAxisOnZeroOf","getAxesOnZeroOf","rawAxisPosition","axisPosition","rectBound","axisOffset","posBound","onZeroCoord","dirMap","labelInside","isCartesian2DSeries","findAxisModels","axisModelMap","inner$5","rectCoordAxisBuildSplitArea","axisView","axisGroup","splitAreaModel","areaColors","gridRect","areaColorsLen","lastSplitAreaColors","splitAreaColors","newSplitAreaColors","colorIndex","cIndex","rectCoordAxisHandleRemove","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","oldAxisGroup","_axisGroup","axisBuilder","elementType","cartesians","getCartesians","otherAxisType","axisElementBuilders","splitLineModel","lineColors","minorSplitLineModel","CartesianXAxisView","CartesianYAxisView","seriesModelMap","seriesRecords","axisRecordMap","prepareDataExtentOnAxis","calculateFilteredExtent","shrinkAxisExtent","axesModelMap","xAxis","yAxis","xRawExtentInfo","yRawExtentInfo","prepareAxisRecord","condExtent","seriesRecord","xAxisRecord","yAxisRecord","condDimMap","tarDimMap","condAxis","tarAxisRecord","addCondition","axisRecord","addTarget","condDims","tarDims","tarDimExtents","initExtent","condDimsLen","tarDimsLen","singleCondDim","singleTarDim","condVal","tarDimExtent","tarAxisExtent","tarExtent","GridModel","containLabel","GridView","Cartesian","_dimList","getAxes","addAxis","cartesian2DDimensions","canCalculateAffineTransform","Cartesian2D","calcAffineTransform","_transform","_invTransform","xAxisScale","yAxisScale","xScaleExtent","yScaleExtent","xScaleSpan","yScaleSpan","translateX","translateY","axisX","axisY","toLocalCoord","containData","clampData","xScale","yScale","xAxisExtent","yAxisExtent","pointToData","coordToData","xExtent","getGlobalExtent","yExtent","inner$6","createAxisLabels","makeCategoryLabels","makeRealNumberLabels","createAxisTicks","makeCategoryTicks","makeCategoryLabelsActually","labelCategoryInterval","labelsCache","getListCache","optionLabelInterval","listCacheGet","numericLabelInterval","makeLabelsByCustomizedCategoryInterval","makeAutoCategoryInterval","makeLabelsByNumericCategoryInterval","listCacheSet","ticksCache","optionTickInterval","tickCategoryInterval","labelsResult","cache","autoInterval","calculateCategoryInterval","fetchAutoCategoryIntervalCalculationParams","axisRotate","ordinalScale","ordinalExtent","unitSpan","unitW","unitH","maxW","maxH","dw","dh","lastAutoInterval","lastTickCount","axisExtent0","axisExtent1","getRotate","categoryInterval","onlyTick","showAllLabel","includeMinLabel","includeMaxLabel","addItem","tickObj","NORMALIZED_EXTENT","Axis","onBand","fixExtentWithBands","getTickModel","tickVal","fixOnBandTicksCoords","nTick","ticksLen","diffSize","crossLen","shift_1","ticksItem","littleThan","Axis2D","coordExtent","asc","Grid","_coordsMap","_coordsList","_axesMap","_axesList","axisPointerEnabled","_initCartesian","axesMap","_updateScale","onZeroRecords","fixAxisOnZero","ignoreContainLabel","axesList","adjustAxes","labelUnionRect","updateAxisTransform","axesMapOnDim","getCartesian","xAxisIndex","yAxisIndex","coordList","_findConvertTarget","coordsList","axisPositionUsed","axesCount","createAxisCreator","isAxisUsedInTheGrid","getTooltipAxes","baseAxes","otherAxes","otherAxis","grids","otherAxisDim","canOnZeroToAxis","getOnZeroRecordKey","coordBase","axisExtentSum","BaseBarSeriesModel","getMarkerPosition","offsetIndex","barMinAngle","largeThreshold","progressiveChunkMode","BarSeriesModel","brushSelector","selectors","roundCap","showBackground","realtimeSort","SausageShape","SausagePath","dr","rCenter","unitStartX","unitStartY","unitEndX","unitEndY","lessThanCircle","BAR_BORDER_WIDTH_QUERY","BAR_BORDER_RADIUS_QUERY","_eventPos","mathMax$5","mathMin$5","getClipArea","coordSysClipArea","expandWidth","BarView","_isFirstFrame","removeOnRenderedListener","_updateDrawMode","coordinateSystemType","_isLargeDraw","_renderLarge","_renderNormal","_clear","_updateLargeClip","_incrementalRenderLarge","isLargeDraw","animationModel","axis2DModel","_initSort","_onRendered","orderMap","_updateSort","needsClip","drawBackground","backgroundModel","barBorderRadius","bgEls","oldBgEls","_backgroundEls","isInitSort","isChangeOrder","createBackground","bgLayout","bgEl","createBackgroundEl","isClipped","elementCreator","updateStyle","updateRealtimeAnimation","newIndex","oldIndex","createBackgroundShape","bgGroup","_backgroundGroup","createLarge","_removeBackground","_dataSort","mappedValue","_isDataOrderChanged","oldOrder","oldCount","lastValue","isOrderChanged","newOrder","axisId","sortInfo","coordSysBoundingRect","signWidth","signHeight","clipped","signR","__dataIndex","animateProperty","ShapeClass","sector","sectorShape","animateTarget","seriesTarget","axisTarget","fixedLineWidth","getLineWidth","signX","signY","isZeroOnPolar","isPolar","labelPositionOutside","rawLayout","LagePathShape","LargePath","startPoint","__startPoint","baseDimIdx","__baseDimIdx","backgroundStartPoint","__largeDataIndices","__barWidth","setLargeBackgroundStyle","setLargeStyle","largePathUpdateDataIndex","largePath","largePathFindDataIndex","barWidthHalf","startValueVal","pointerBaseVal","pointerValueVal","baseLowerBound","baseUpperBound","barBaseVal","barValueVal","ElementClz","createListSimply","dimensionsInfo","LegendVisualProvider","getDataWithEncodedVisual","_getDataWithEncodedVisual","_getRawData","getAllNames","containName","dataWithEncodedVisual","PieSeriesModel","legendVisualProvider","_defaultLabelLine","labelLineNormalOpt","labelLineEmphasisOpt","minAngle","minShowLabelAngle","selectedOffset","percentPrecision","stillShowZeroSum","bleedMargin","distanceToLabelLine","avoidLabelOverlap","animationTypeUpdate","RADIAN","adjustSingleSide","viewLeft","viewTop","farthestX","recalculateXOnSemiToAlignOnEllipseCurve","semi","rB","rB2","rA","rA2","recalculateX","items","topSemi","bottomSemi","labelAlignTo","avoidOverlap","labelLayoutList","leftList","rightList","leftmostX","rightmostX","isPositionCenter","isAlignToEdge","realTextWidth","targetTextWidth","hasLabelRotate","minShowLabelRadian","setNotShow","isLabelShown","labelLineLen","labelLineLen2","midAngle","nx","ny","isLabelInside","notShowLabel","getSectorCornerRadius","PiePiece","firstCreate","_updateLabel","visualOpacity","PieView","sectorGroup","_sectorGroup","piePiece","itemLayout","PI2$7","RADIAN$1","getViewRect","pieLayout","validDataCount","unitRadian","roseType","restAngle","valueSumLargerThanMinAngle","currentAngle","angle_1","layout_1","layout_2","dataFilter","legendModels"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = global || self, factory(global.echarts = {}));\n}(this, (function (exports) { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n\r\n    var extendStatics = function(d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n\r\n    function __extends(d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\r\n\r\n    function __spreadArrays() {\r\n        for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n        for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n                r[k] = a[j];\r\n        return r;\r\n    }\n\n    var Browser = (function () {\r\n        function Browser() {\r\n            this.firefox = false;\r\n            this.ie = false;\r\n            this.edge = false;\r\n            this.weChat = false;\r\n        }\r\n        return Browser;\r\n    }());\r\n    var Env = (function () {\r\n        function Env() {\r\n            this.browser = new Browser();\r\n            this.node = false;\r\n            this.wxa = false;\r\n            this.worker = false;\r\n            this.canvasSupported = false;\r\n            this.svgSupported = false;\r\n            this.touchEventsSupported = false;\r\n            this.pointerEventsSupported = false;\r\n            this.domSupported = false;\r\n        }\r\n        return Env;\r\n    }());\r\n    var env = new Env();\r\n    if (typeof wx === 'object' && typeof wx.getSystemInfoSync === 'function') {\r\n        env.wxa = true;\r\n        env.canvasSupported = true;\r\n        env.touchEventsSupported = true;\r\n    }\r\n    else if (typeof document === 'undefined' && typeof self !== 'undefined') {\r\n        env.worker = true;\r\n        env.canvasSupported = true;\r\n    }\r\n    else if (typeof navigator === 'undefined') {\r\n        env.node = true;\r\n        env.canvasSupported = true;\r\n        env.svgSupported = true;\r\n    }\r\n    else {\r\n        detect(navigator.userAgent, env);\r\n    }\r\n    function detect(ua, env) {\r\n        var browser = env.browser;\r\n        var firefox = ua.match(/Firefox\\/([\\d.]+)/);\r\n        var ie = ua.match(/MSIE\\s([\\d.]+)/)\r\n            || ua.match(/Trident\\/.+?rv:(([\\d.]+))/);\r\n        var edge = ua.match(/Edge\\/([\\d.]+)/);\r\n        var weChat = (/micromessenger/i).test(ua);\r\n        if (firefox) {\r\n            browser.firefox = true;\r\n            browser.version = firefox[1];\r\n        }\r\n        if (ie) {\r\n            browser.ie = true;\r\n            browser.version = ie[1];\r\n        }\r\n        if (edge) {\r\n            browser.edge = true;\r\n            browser.version = edge[1];\r\n        }\r\n        if (weChat) {\r\n            browser.weChat = true;\r\n        }\r\n        env.canvasSupported = !!document.createElement('canvas').getContext;\r\n        env.svgSupported = typeof SVGRect !== 'undefined';\r\n        env.touchEventsSupported = 'ontouchstart' in window && !browser.ie && !browser.edge;\r\n        env.pointerEventsSupported = 'onpointerdown' in window\r\n            && (browser.edge || (browser.ie && +browser.version >= 11));\r\n        env.domSupported = typeof document !== 'undefined';\r\n    }\n\n    var BUILTIN_OBJECT = {\r\n        '[object Function]': true,\r\n        '[object RegExp]': true,\r\n        '[object Date]': true,\r\n        '[object Error]': true,\r\n        '[object CanvasGradient]': true,\r\n        '[object CanvasPattern]': true,\r\n        '[object Image]': true,\r\n        '[object Canvas]': true\r\n    };\r\n    var TYPED_ARRAY = {\r\n        '[object Int8Array]': true,\r\n        '[object Uint8Array]': true,\r\n        '[object Uint8ClampedArray]': true,\r\n        '[object Int16Array]': true,\r\n        '[object Uint16Array]': true,\r\n        '[object Int32Array]': true,\r\n        '[object Uint32Array]': true,\r\n        '[object Float32Array]': true,\r\n        '[object Float64Array]': true\r\n    };\r\n    var objToString = Object.prototype.toString;\r\n    var arrayProto = Array.prototype;\r\n    var nativeForEach = arrayProto.forEach;\r\n    var nativeFilter = arrayProto.filter;\r\n    var nativeSlice = arrayProto.slice;\r\n    var nativeMap = arrayProto.map;\r\n    var ctorFunction = (function () { }).constructor;\r\n    var protoFunction = ctorFunction ? ctorFunction.prototype : null;\r\n    var methods = {};\r\n    function $override(name, fn) {\r\n        methods[name] = fn;\r\n    }\r\n    var idStart = 0x0907;\r\n    function guid() {\r\n        return idStart++;\r\n    }\r\n    function logError() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (typeof console !== 'undefined') {\r\n            console.error.apply(args);\r\n        }\r\n    }\r\n    function clone(source) {\r\n        if (source == null || typeof source !== 'object') {\r\n            return source;\r\n        }\r\n        var result = source;\r\n        var typeStr = objToString.call(source);\r\n        if (typeStr === '[object Array]') {\r\n            if (!isPrimitive(source)) {\r\n                result = [];\r\n                for (var i = 0, len = source.length; i < len; i++) {\r\n                    result[i] = clone(source[i]);\r\n                }\r\n            }\r\n        }\r\n        else if (TYPED_ARRAY[typeStr]) {\r\n            if (!isPrimitive(source)) {\r\n                var Ctor = source.constructor;\r\n                if (Ctor.from) {\r\n                    result = Ctor.from(source);\r\n                }\r\n                else {\r\n                    result = new Ctor(source.length);\r\n                    for (var i = 0, len = source.length; i < len; i++) {\r\n                        result[i] = clone(source[i]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else if (!BUILTIN_OBJECT[typeStr] && !isPrimitive(source) && !isDom(source)) {\r\n            result = {};\r\n            for (var key in source) {\r\n                if (source.hasOwnProperty(key)) {\r\n                    result[key] = clone(source[key]);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function merge(target, source, overwrite) {\r\n        if (!isObject(source) || !isObject(target)) {\r\n            return overwrite ? clone(source) : target;\r\n        }\r\n        for (var key in source) {\r\n            if (source.hasOwnProperty(key)) {\r\n                var targetProp = target[key];\r\n                var sourceProp = source[key];\r\n                if (isObject(sourceProp)\r\n                    && isObject(targetProp)\r\n                    && !isArray(sourceProp)\r\n                    && !isArray(targetProp)\r\n                    && !isDom(sourceProp)\r\n                    && !isDom(targetProp)\r\n                    && !isBuiltInObject(sourceProp)\r\n                    && !isBuiltInObject(targetProp)\r\n                    && !isPrimitive(sourceProp)\r\n                    && !isPrimitive(targetProp)) {\r\n                    merge(targetProp, sourceProp, overwrite);\r\n                }\r\n                else if (overwrite || !(key in target)) {\r\n                    target[key] = clone(source[key]);\r\n                }\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n    function extend(target, source) {\r\n        if (Object.assign) {\r\n            Object.assign(target, source);\r\n        }\r\n        else {\r\n            for (var key in source) {\r\n                if (source.hasOwnProperty(key)) {\r\n                    target[key] = source[key];\r\n                }\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n    function defaults(target, source, overlay) {\r\n        var keysArr = keys(source);\r\n        for (var i = 0; i < keysArr.length; i++) {\r\n            var key = keysArr[i];\r\n            if ((overlay ? source[key] != null : target[key] == null)) {\r\n                target[key] = source[key];\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n    var createCanvas = function () {\r\n        return methods.createCanvas();\r\n    };\r\n    methods.createCanvas = function () {\r\n        return document.createElement('canvas');\r\n    };\r\n    function indexOf(array, value) {\r\n        if (array) {\r\n            if (array.indexOf) {\r\n                return array.indexOf(value);\r\n            }\r\n            for (var i = 0, len = array.length; i < len; i++) {\r\n                if (array[i] === value) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    function inherits(clazz, baseClazz) {\r\n        var clazzPrototype = clazz.prototype;\r\n        function F() { }\r\n        F.prototype = baseClazz.prototype;\r\n        clazz.prototype = new F();\r\n        for (var prop in clazzPrototype) {\r\n            if (clazzPrototype.hasOwnProperty(prop)) {\r\n                clazz.prototype[prop] = clazzPrototype[prop];\r\n            }\r\n        }\r\n        clazz.prototype.constructor = clazz;\r\n        clazz.superClass = baseClazz;\r\n    }\r\n    function mixin(target, source, override) {\r\n        target = 'prototype' in target ? target.prototype : target;\r\n        source = 'prototype' in source ? source.prototype : source;\r\n        if (Object.getOwnPropertyNames) {\r\n            var keyList = Object.getOwnPropertyNames(source);\r\n            for (var i = 0; i < keyList.length; i++) {\r\n                var key = keyList[i];\r\n                if (key !== 'constructor') {\r\n                    if ((override ? source[key] != null : target[key] == null)) {\r\n                        target[key] = source[key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            defaults(target, source, override);\r\n        }\r\n    }\r\n    function isArrayLike(data) {\r\n        if (!data) {\r\n            return false;\r\n        }\r\n        if (typeof data === 'string') {\r\n            return false;\r\n        }\r\n        return typeof data.length === 'number';\r\n    }\r\n    function each(arr, cb, context) {\r\n        if (!(arr && cb)) {\r\n            return;\r\n        }\r\n        if (arr.forEach && arr.forEach === nativeForEach) {\r\n            arr.forEach(cb, context);\r\n        }\r\n        else if (arr.length === +arr.length) {\r\n            for (var i = 0, len = arr.length; i < len; i++) {\r\n                cb.call(context, arr[i], i, arr);\r\n            }\r\n        }\r\n        else {\r\n            for (var key in arr) {\r\n                if (arr.hasOwnProperty(key)) {\r\n                    cb.call(context, arr[key], key, arr);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function map(arr, cb, context) {\r\n        if (!arr) {\r\n            return [];\r\n        }\r\n        if (!cb) {\r\n            return slice(arr);\r\n        }\r\n        if (arr.map && arr.map === nativeMap) {\r\n            return arr.map(cb, context);\r\n        }\r\n        else {\r\n            var result = [];\r\n            for (var i = 0, len = arr.length; i < len; i++) {\r\n                result.push(cb.call(context, arr[i], i, arr));\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n    function reduce(arr, cb, memo, context) {\r\n        if (!(arr && cb)) {\r\n            return;\r\n        }\r\n        for (var i = 0, len = arr.length; i < len; i++) {\r\n            memo = cb.call(context, memo, arr[i], i, arr);\r\n        }\r\n        return memo;\r\n    }\r\n    function filter(arr, cb, context) {\r\n        if (!arr) {\r\n            return [];\r\n        }\r\n        if (!cb) {\r\n            return slice(arr);\r\n        }\r\n        if (arr.filter && arr.filter === nativeFilter) {\r\n            return arr.filter(cb, context);\r\n        }\r\n        else {\r\n            var result = [];\r\n            for (var i = 0, len = arr.length; i < len; i++) {\r\n                if (cb.call(context, arr[i], i, arr)) {\r\n                    result.push(arr[i]);\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n    function keys(obj) {\r\n        if (!obj) {\r\n            return [];\r\n        }\r\n        if (Object.keys) {\r\n            return Object.keys(obj);\r\n        }\r\n        var keyList = [];\r\n        for (var key in obj) {\r\n            if (obj.hasOwnProperty(key)) {\r\n                keyList.push(key);\r\n            }\r\n        }\r\n        return keyList;\r\n    }\r\n    function bindPolyfill(func, context) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        return function () {\r\n            return func.apply(context, args.concat(nativeSlice.call(arguments)));\r\n        };\r\n    }\r\n    var bind = (protoFunction && isFunction(protoFunction.bind))\r\n        ? protoFunction.call.bind(protoFunction.bind)\r\n        : bindPolyfill;\r\n    function curry(func) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        return function () {\r\n            return func.apply(this, args.concat(nativeSlice.call(arguments)));\r\n        };\r\n    }\r\n    function isArray(value) {\r\n        if (Array.isArray) {\r\n            return Array.isArray(value);\r\n        }\r\n        return objToString.call(value) === '[object Array]';\r\n    }\r\n    function isFunction(value) {\r\n        return typeof value === 'function';\r\n    }\r\n    function isString(value) {\r\n        return typeof value === 'string';\r\n    }\r\n    function isStringSafe(value) {\r\n        return objToString.call(value) === '[object String]';\r\n    }\r\n    function isNumber(value) {\r\n        return typeof value === 'number';\r\n    }\r\n    function isObject(value) {\r\n        var type = typeof value;\r\n        return type === 'function' || (!!value && type === 'object');\r\n    }\r\n    function isBuiltInObject(value) {\r\n        return !!BUILTIN_OBJECT[objToString.call(value)];\r\n    }\r\n    function isTypedArray(value) {\r\n        return !!TYPED_ARRAY[objToString.call(value)];\r\n    }\r\n    function isDom(value) {\r\n        return typeof value === 'object'\r\n            && typeof value.nodeType === 'number'\r\n            && typeof value.ownerDocument === 'object';\r\n    }\r\n    function isGradientObject(value) {\r\n        return value.colorStops != null;\r\n    }\r\n    function isPatternObject(value) {\r\n        return value.image != null;\r\n    }\r\n    function isRegExp(value) {\r\n        return objToString.call(value) === '[object RegExp]';\r\n    }\r\n    function eqNaN(value) {\r\n        return value !== value;\r\n    }\r\n    function retrieve() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        for (var i = 0, len = args.length; i < len; i++) {\r\n            if (args[i] != null) {\r\n                return args[i];\r\n            }\r\n        }\r\n    }\r\n    function retrieve2(value0, value1) {\r\n        return value0 != null\r\n            ? value0\r\n            : value1;\r\n    }\r\n    function retrieve3(value0, value1, value2) {\r\n        return value0 != null\r\n            ? value0\r\n            : value1 != null\r\n                ? value1\r\n                : value2;\r\n    }\r\n    function slice(arr) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        return nativeSlice.apply(arr, args);\r\n    }\r\n    function normalizeCssArray(val) {\r\n        if (typeof (val) === 'number') {\r\n            return [val, val, val, val];\r\n        }\r\n        var len = val.length;\r\n        if (len === 2) {\r\n            return [val[0], val[1], val[0], val[1]];\r\n        }\r\n        else if (len === 3) {\r\n            return [val[0], val[1], val[2], val[1]];\r\n        }\r\n        return val;\r\n    }\r\n    function assert(condition, message) {\r\n        if (!condition) {\r\n            throw new Error(message);\r\n        }\r\n    }\r\n    function trim(str) {\r\n        if (str == null) {\r\n            return null;\r\n        }\r\n        else if (typeof str.trim === 'function') {\r\n            return str.trim();\r\n        }\r\n        else {\r\n            return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\r\n        }\r\n    }\r\n    var primitiveKey = '__ec_primitive__';\r\n    function setAsPrimitive(obj) {\r\n        obj[primitiveKey] = true;\r\n    }\r\n    function isPrimitive(obj) {\r\n        return obj[primitiveKey];\r\n    }\r\n    var HashMap = (function () {\r\n        function HashMap(obj) {\r\n            this.data = {};\r\n            var isArr = isArray(obj);\r\n            this.data = {};\r\n            var thisMap = this;\r\n            (obj instanceof HashMap)\r\n                ? obj.each(visit)\r\n                : (obj && each(obj, visit));\r\n            function visit(value, key) {\r\n                isArr ? thisMap.set(value, key) : thisMap.set(key, value);\r\n            }\r\n        }\r\n        HashMap.prototype.get = function (key) {\r\n            return this.data.hasOwnProperty(key) ? this.data[key] : null;\r\n        };\r\n        HashMap.prototype.set = function (key, value) {\r\n            return (this.data[key] = value);\r\n        };\r\n        HashMap.prototype.each = function (cb, context) {\r\n            for (var key in this.data) {\r\n                if (this.data.hasOwnProperty(key)) {\r\n                    cb.call(context, this.data[key], key);\r\n                }\r\n            }\r\n        };\r\n        HashMap.prototype.keys = function () {\r\n            return keys(this.data);\r\n        };\r\n        HashMap.prototype.removeKey = function (key) {\r\n            delete this.data[key];\r\n        };\r\n        return HashMap;\r\n    }());\r\n    function createHashMap(obj) {\r\n        return new HashMap(obj);\r\n    }\r\n    function createObject(proto, properties) {\r\n        var obj;\r\n        if (Object.create) {\r\n            obj = Object.create(proto);\r\n        }\r\n        else {\r\n            var StyleCtor = function () { };\r\n            StyleCtor.prototype = proto;\r\n            obj = new StyleCtor();\r\n        }\r\n        if (properties) {\r\n            extend(obj, properties);\r\n        }\r\n        return obj;\r\n    }\r\n    function hasOwn(own, prop) {\r\n        return own.hasOwnProperty(prop);\r\n    }\r\n    function noop() { }\n\n    function create(x, y) {\r\n        if (x == null) {\r\n            x = 0;\r\n        }\r\n        if (y == null) {\r\n            y = 0;\r\n        }\r\n        return [x, y];\r\n    }\r\n    function clone$1(v) {\r\n        return [v[0], v[1]];\r\n    }\r\n    function add(out, v1, v2) {\r\n        out[0] = v1[0] + v2[0];\r\n        out[1] = v1[1] + v2[1];\r\n        return out;\r\n    }\r\n    function sub(out, v1, v2) {\r\n        out[0] = v1[0] - v2[0];\r\n        out[1] = v1[1] - v2[1];\r\n        return out;\r\n    }\r\n    function len(v) {\r\n        return Math.sqrt(lenSquare(v));\r\n    }\r\n    function lenSquare(v) {\r\n        return v[0] * v[0] + v[1] * v[1];\r\n    }\r\n    function scale(out, v, s) {\r\n        out[0] = v[0] * s;\r\n        out[1] = v[1] * s;\r\n        return out;\r\n    }\r\n    function normalize(out, v) {\r\n        var d = len(v);\r\n        if (d === 0) {\r\n            out[0] = 0;\r\n            out[1] = 0;\r\n        }\r\n        else {\r\n            out[0] = v[0] / d;\r\n            out[1] = v[1] / d;\r\n        }\r\n        return out;\r\n    }\r\n    function distance(v1, v2) {\r\n        return Math.sqrt((v1[0] - v2[0]) * (v1[0] - v2[0])\r\n            + (v1[1] - v2[1]) * (v1[1] - v2[1]));\r\n    }\r\n    var dist = distance;\r\n    function distanceSquare(v1, v2) {\r\n        return (v1[0] - v2[0]) * (v1[0] - v2[0])\r\n            + (v1[1] - v2[1]) * (v1[1] - v2[1]);\r\n    }\r\n    var distSquare = distanceSquare;\r\n    function lerp(out, v1, v2, t) {\r\n        out[0] = v1[0] + t * (v2[0] - v1[0]);\r\n        out[1] = v1[1] + t * (v2[1] - v1[1]);\r\n        return out;\r\n    }\r\n    function applyTransform(out, v, m) {\r\n        var x = v[0];\r\n        var y = v[1];\r\n        out[0] = m[0] * x + m[2] * y + m[4];\r\n        out[1] = m[1] * x + m[3] * y + m[5];\r\n        return out;\r\n    }\r\n    function min(out, v1, v2) {\r\n        out[0] = Math.min(v1[0], v2[0]);\r\n        out[1] = Math.min(v1[1], v2[1]);\r\n        return out;\r\n    }\r\n    function max(out, v1, v2) {\r\n        out[0] = Math.max(v1[0], v2[0]);\r\n        out[1] = Math.max(v1[1], v2[1]);\r\n        return out;\r\n    }\n\n    var Param = (function () {\r\n        function Param(target, e) {\r\n            this.target = target;\r\n            this.topTarget = e && e.topTarget;\r\n        }\r\n        return Param;\r\n    }());\r\n    var Draggable = (function () {\r\n        function Draggable(handler) {\r\n            this.handler = handler;\r\n            handler.on('mousedown', this._dragStart, this);\r\n            handler.on('mousemove', this._drag, this);\r\n            handler.on('mouseup', this._dragEnd, this);\r\n        }\r\n        Draggable.prototype._dragStart = function (e) {\r\n            var draggingTarget = e.target;\r\n            while (draggingTarget && !draggingTarget.draggable) {\r\n                draggingTarget = draggingTarget.parent;\r\n            }\r\n            if (draggingTarget) {\r\n                this._draggingTarget = draggingTarget;\r\n                draggingTarget.dragging = true;\r\n                this._x = e.offsetX;\r\n                this._y = e.offsetY;\r\n                this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragstart', e.event);\r\n            }\r\n        };\r\n        Draggable.prototype._drag = function (e) {\r\n            var draggingTarget = this._draggingTarget;\r\n            if (draggingTarget) {\r\n                var x = e.offsetX;\r\n                var y = e.offsetY;\r\n                var dx = x - this._x;\r\n                var dy = y - this._y;\r\n                this._x = x;\r\n                this._y = y;\r\n                draggingTarget.drift(dx, dy, e);\r\n                this.handler.dispatchToElement(new Param(draggingTarget, e), 'drag', e.event);\r\n                var dropTarget = this.handler.findHover(x, y, draggingTarget).target;\r\n                var lastDropTarget = this._dropTarget;\r\n                this._dropTarget = dropTarget;\r\n                if (draggingTarget !== dropTarget) {\r\n                    if (lastDropTarget && dropTarget !== lastDropTarget) {\r\n                        this.handler.dispatchToElement(new Param(lastDropTarget, e), 'dragleave', e.event);\r\n                    }\r\n                    if (dropTarget && dropTarget !== lastDropTarget) {\r\n                        this.handler.dispatchToElement(new Param(dropTarget, e), 'dragenter', e.event);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        Draggable.prototype._dragEnd = function (e) {\r\n            var draggingTarget = this._draggingTarget;\r\n            if (draggingTarget) {\r\n                draggingTarget.dragging = false;\r\n            }\r\n            this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragend', e.event);\r\n            if (this._dropTarget) {\r\n                this.handler.dispatchToElement(new Param(this._dropTarget, e), 'drop', e.event);\r\n            }\r\n            this._draggingTarget = null;\r\n            this._dropTarget = null;\r\n        };\r\n        return Draggable;\r\n    }());\n\n    var Eventful = (function () {\r\n        function Eventful(eventProcessors) {\r\n            if (eventProcessors) {\r\n                this._$eventProcessor = eventProcessors;\r\n            }\r\n        }\r\n        Eventful.prototype.on = function (event, query, handler, context) {\r\n            if (!this._$handlers) {\r\n                this._$handlers = {};\r\n            }\r\n            var _h = this._$handlers;\r\n            if (typeof query === 'function') {\r\n                context = handler;\r\n                handler = query;\r\n                query = null;\r\n            }\r\n            if (!handler || !event) {\r\n                return this;\r\n            }\r\n            var eventProcessor = this._$eventProcessor;\r\n            if (query != null && eventProcessor && eventProcessor.normalizeQuery) {\r\n                query = eventProcessor.normalizeQuery(query);\r\n            }\r\n            if (!_h[event]) {\r\n                _h[event] = [];\r\n            }\r\n            for (var i = 0; i < _h[event].length; i++) {\r\n                if (_h[event][i].h === handler) {\r\n                    return this;\r\n                }\r\n            }\r\n            var wrap = {\r\n                h: handler,\r\n                query: query,\r\n                ctx: (context || this),\r\n                callAtLast: handler.zrEventfulCallAtLast\r\n            };\r\n            var lastIndex = _h[event].length - 1;\r\n            var lastWrap = _h[event][lastIndex];\r\n            (lastWrap && lastWrap.callAtLast)\r\n                ? _h[event].splice(lastIndex, 0, wrap)\r\n                : _h[event].push(wrap);\r\n            return this;\r\n        };\r\n        Eventful.prototype.isSilent = function (eventName) {\r\n            var _h = this._$handlers;\r\n            return !_h || !_h[eventName] || !_h[eventName].length;\r\n        };\r\n        Eventful.prototype.off = function (eventType, handler) {\r\n            var _h = this._$handlers;\r\n            if (!_h) {\r\n                return this;\r\n            }\r\n            if (!eventType) {\r\n                this._$handlers = {};\r\n                return this;\r\n            }\r\n            if (handler) {\r\n                if (_h[eventType]) {\r\n                    var newList = [];\r\n                    for (var i = 0, l = _h[eventType].length; i < l; i++) {\r\n                        if (_h[eventType][i].h !== handler) {\r\n                            newList.push(_h[eventType][i]);\r\n                        }\r\n                    }\r\n                    _h[eventType] = newList;\r\n                }\r\n                if (_h[eventType] && _h[eventType].length === 0) {\r\n                    delete _h[eventType];\r\n                }\r\n            }\r\n            else {\r\n                delete _h[eventType];\r\n            }\r\n            return this;\r\n        };\r\n        Eventful.prototype.trigger = function (eventType) {\r\n            var args = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                args[_i - 1] = arguments[_i];\r\n            }\r\n            if (!this._$handlers) {\r\n                return this;\r\n            }\r\n            var _h = this._$handlers[eventType];\r\n            var eventProcessor = this._$eventProcessor;\r\n            if (_h) {\r\n                var argLen = args.length;\r\n                var len = _h.length;\r\n                for (var i = 0; i < len; i++) {\r\n                    var hItem = _h[i];\r\n                    if (eventProcessor\r\n                        && eventProcessor.filter\r\n                        && hItem.query != null\r\n                        && !eventProcessor.filter(eventType, hItem.query)) {\r\n                        continue;\r\n                    }\r\n                    switch (argLen) {\r\n                        case 0:\r\n                            hItem.h.call(hItem.ctx);\r\n                            break;\r\n                        case 1:\r\n                            hItem.h.call(hItem.ctx, args[0]);\r\n                            break;\r\n                        case 2:\r\n                            hItem.h.call(hItem.ctx, args[0], args[1]);\r\n                            break;\r\n                        default:\r\n                            hItem.h.apply(hItem.ctx, args);\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n            eventProcessor && eventProcessor.afterTrigger\r\n                && eventProcessor.afterTrigger(eventType);\r\n            return this;\r\n        };\r\n        Eventful.prototype.triggerWithContext = function (type) {\r\n            if (!this._$handlers) {\r\n                return this;\r\n            }\r\n            var _h = this._$handlers[type];\r\n            var eventProcessor = this._$eventProcessor;\r\n            if (_h) {\r\n                var args = arguments;\r\n                var argLen = args.length;\r\n                var ctx = args[argLen - 1];\r\n                var len = _h.length;\r\n                for (var i = 0; i < len; i++) {\r\n                    var hItem = _h[i];\r\n                    if (eventProcessor\r\n                        && eventProcessor.filter\r\n                        && hItem.query != null\r\n                        && !eventProcessor.filter(type, hItem.query)) {\r\n                        continue;\r\n                    }\r\n                    switch (argLen) {\r\n                        case 0:\r\n                            hItem.h.call(ctx);\r\n                            break;\r\n                        case 1:\r\n                            hItem.h.call(ctx, args[0]);\r\n                            break;\r\n                        case 2:\r\n                            hItem.h.call(ctx, args[0], args[1]);\r\n                            break;\r\n                        default:\r\n                            hItem.h.apply(ctx, args.slice(1, argLen - 1));\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n            eventProcessor && eventProcessor.afterTrigger\r\n                && eventProcessor.afterTrigger(type);\r\n            return this;\r\n        };\r\n        return Eventful;\r\n    }());\n\n    var LN2 = Math.log(2);\r\n    function determinant(rows, rank, rowStart, rowMask, colMask, detCache) {\r\n        var cacheKey = rowMask + '-' + colMask;\r\n        var fullRank = rows.length;\r\n        if (detCache.hasOwnProperty(cacheKey)) {\r\n            return detCache[cacheKey];\r\n        }\r\n        if (rank === 1) {\r\n            var colStart = Math.round(Math.log(((1 << fullRank) - 1) & ~colMask) / LN2);\r\n            return rows[rowStart][colStart];\r\n        }\r\n        var subRowMask = rowMask | (1 << rowStart);\r\n        var subRowStart = rowStart + 1;\r\n        while (rowMask & (1 << subRowStart)) {\r\n            subRowStart++;\r\n        }\r\n        var sum = 0;\r\n        for (var j = 0, colLocalIdx = 0; j < fullRank; j++) {\r\n            var colTag = 1 << j;\r\n            if (!(colTag & colMask)) {\r\n                sum += (colLocalIdx % 2 ? -1 : 1) * rows[rowStart][j]\r\n                    * determinant(rows, rank - 1, subRowStart, subRowMask, colMask | colTag, detCache);\r\n                colLocalIdx++;\r\n            }\r\n        }\r\n        detCache[cacheKey] = sum;\r\n        return sum;\r\n    }\r\n    function buildTransformer(src, dest) {\r\n        var mA = [\r\n            [src[0], src[1], 1, 0, 0, 0, -dest[0] * src[0], -dest[0] * src[1]],\r\n            [0, 0, 0, src[0], src[1], 1, -dest[1] * src[0], -dest[1] * src[1]],\r\n            [src[2], src[3], 1, 0, 0, 0, -dest[2] * src[2], -dest[2] * src[3]],\r\n            [0, 0, 0, src[2], src[3], 1, -dest[3] * src[2], -dest[3] * src[3]],\r\n            [src[4], src[5], 1, 0, 0, 0, -dest[4] * src[4], -dest[4] * src[5]],\r\n            [0, 0, 0, src[4], src[5], 1, -dest[5] * src[4], -dest[5] * src[5]],\r\n            [src[6], src[7], 1, 0, 0, 0, -dest[6] * src[6], -dest[6] * src[7]],\r\n            [0, 0, 0, src[6], src[7], 1, -dest[7] * src[6], -dest[7] * src[7]]\r\n        ];\r\n        var detCache = {};\r\n        var det = determinant(mA, 8, 0, 0, 0, detCache);\r\n        if (det === 0) {\r\n            return;\r\n        }\r\n        var vh = [];\r\n        for (var i = 0; i < 8; i++) {\r\n            for (var j = 0; j < 8; j++) {\r\n                vh[j] == null && (vh[j] = 0);\r\n                vh[j] += ((i + j) % 2 ? -1 : 1)\r\n                    * determinant(mA, 7, i === 0 ? 1 : 0, 1 << i, 1 << j, detCache)\r\n                    / det * dest[i];\r\n            }\r\n        }\r\n        return function (out, srcPointX, srcPointY) {\r\n            var pk = srcPointX * vh[6] + srcPointY * vh[7] + 1;\r\n            out[0] = (srcPointX * vh[0] + srcPointY * vh[1] + vh[2]) / pk;\r\n            out[1] = (srcPointX * vh[3] + srcPointY * vh[4] + vh[5]) / pk;\r\n        };\r\n    }\n\n    var EVENT_SAVED_PROP = '___zrEVENTSAVED';\r\n    function transformCoordWithViewport(out, el, inX, inY, inverse) {\r\n        if (el.getBoundingClientRect && env.domSupported && !isCanvasEl(el)) {\r\n            var saved = el[EVENT_SAVED_PROP] || (el[EVENT_SAVED_PROP] = {});\r\n            var markers = prepareCoordMarkers(el, saved);\r\n            var transformer = preparePointerTransformer(markers, saved, inverse);\r\n            if (transformer) {\r\n                transformer(out, inX, inY);\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    function prepareCoordMarkers(el, saved) {\r\n        var markers = saved.markers;\r\n        if (markers) {\r\n            return markers;\r\n        }\r\n        markers = saved.markers = [];\r\n        var propLR = ['left', 'right'];\r\n        var propTB = ['top', 'bottom'];\r\n        for (var i = 0; i < 4; i++) {\r\n            var marker = document.createElement('div');\r\n            var stl = marker.style;\r\n            var idxLR = i % 2;\r\n            var idxTB = (i >> 1) % 2;\r\n            stl.cssText = [\r\n                'position: absolute',\r\n                'visibility: hidden',\r\n                'padding: 0',\r\n                'margin: 0',\r\n                'border-width: 0',\r\n                'user-select: none',\r\n                'width:0',\r\n                'height:0',\r\n                propLR[idxLR] + ':0',\r\n                propTB[idxTB] + ':0',\r\n                propLR[1 - idxLR] + ':auto',\r\n                propTB[1 - idxTB] + ':auto',\r\n                ''\r\n            ].join('!important;');\r\n            el.appendChild(marker);\r\n            markers.push(marker);\r\n        }\r\n        return markers;\r\n    }\r\n    function preparePointerTransformer(markers, saved, inverse) {\r\n        var transformerName = inverse ? 'invTrans' : 'trans';\r\n        var transformer = saved[transformerName];\r\n        var oldSrcCoords = saved.srcCoords;\r\n        var srcCoords = [];\r\n        var destCoords = [];\r\n        var oldCoordTheSame = true;\r\n        for (var i = 0; i < 4; i++) {\r\n            var rect = markers[i].getBoundingClientRect();\r\n            var ii = 2 * i;\r\n            var x = rect.left;\r\n            var y = rect.top;\r\n            srcCoords.push(x, y);\r\n            oldCoordTheSame = oldCoordTheSame && oldSrcCoords && x === oldSrcCoords[ii] && y === oldSrcCoords[ii + 1];\r\n            destCoords.push(markers[i].offsetLeft, markers[i].offsetTop);\r\n        }\r\n        return (oldCoordTheSame && transformer)\r\n            ? transformer\r\n            : (saved.srcCoords = srcCoords,\r\n                saved[transformerName] = inverse\r\n                    ? buildTransformer(destCoords, srcCoords)\r\n                    : buildTransformer(srcCoords, destCoords));\r\n    }\r\n    function isCanvasEl(el) {\r\n        return el.nodeName.toUpperCase() === 'CANVAS';\r\n    }\n\n    var isDomLevel2 = (typeof window !== 'undefined') && !!window.addEventListener;\r\n    var MOUSE_EVENT_REG = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\r\n    var _calcOut = [];\r\n    function clientToLocal(el, e, out, calculate) {\r\n        out = out || {};\r\n        if (calculate || !env.canvasSupported) {\r\n            calculateZrXY(el, e, out);\r\n        }\r\n        else if (env.browser.firefox\r\n            && e.layerX != null\r\n            && e.layerX !== e.offsetX) {\r\n            out.zrX = e.layerX;\r\n            out.zrY = e.layerY;\r\n        }\r\n        else if (e.offsetX != null) {\r\n            out.zrX = e.offsetX;\r\n            out.zrY = e.offsetY;\r\n        }\r\n        else {\r\n            calculateZrXY(el, e, out);\r\n        }\r\n        return out;\r\n    }\r\n    function calculateZrXY(el, e, out) {\r\n        if (env.domSupported && el.getBoundingClientRect) {\r\n            var ex = e.clientX;\r\n            var ey = e.clientY;\r\n            if (isCanvasEl(el)) {\r\n                var box = el.getBoundingClientRect();\r\n                out.zrX = ex - box.left;\r\n                out.zrY = ey - box.top;\r\n                return;\r\n            }\r\n            else {\r\n                if (transformCoordWithViewport(_calcOut, el, ex, ey)) {\r\n                    out.zrX = _calcOut[0];\r\n                    out.zrY = _calcOut[1];\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        out.zrX = out.zrY = 0;\r\n    }\r\n    function getNativeEvent(e) {\r\n        return e\r\n            || window.event;\r\n    }\r\n    function normalizeEvent(el, e, calculate) {\r\n        e = getNativeEvent(e);\r\n        if (e.zrX != null) {\r\n            return e;\r\n        }\r\n        var eventType = e.type;\r\n        var isTouch = eventType && eventType.indexOf('touch') >= 0;\r\n        if (!isTouch) {\r\n            clientToLocal(el, e, e, calculate);\r\n            var wheelDelta = getWheelDeltaMayPolyfill(e);\r\n            e.zrDelta = wheelDelta ? wheelDelta / 120 : -(e.detail || 0) / 3;\r\n        }\r\n        else {\r\n            var touch = eventType !== 'touchend'\r\n                ? e.targetTouches[0]\r\n                : e.changedTouches[0];\r\n            touch && clientToLocal(el, touch, e, calculate);\r\n        }\r\n        var button = e.button;\r\n        if (e.which == null && button !== undefined && MOUSE_EVENT_REG.test(e.type)) {\r\n            e.which = (button & 1 ? 1 : (button & 2 ? 3 : (button & 4 ? 2 : 0)));\r\n        }\r\n        return e;\r\n    }\r\n    function getWheelDeltaMayPolyfill(e) {\r\n        var rawWheelDelta = e.wheelDelta;\r\n        if (rawWheelDelta) {\r\n            return rawWheelDelta;\r\n        }\r\n        var deltaX = e.deltaX;\r\n        var deltaY = e.deltaY;\r\n        if (deltaX == null || deltaY == null) {\r\n            return rawWheelDelta;\r\n        }\r\n        var delta = deltaY !== 0 ? Math.abs(deltaY) : Math.abs(deltaX);\r\n        var sign = deltaY > 0 ? -1\r\n            : deltaY < 0 ? 1\r\n                : deltaX > 0 ? -1\r\n                    : 1;\r\n        return 3 * delta * sign;\r\n    }\r\n    function addEventListener(el, name, handler, opt) {\r\n        if (isDomLevel2) {\r\n            el.addEventListener(name, handler, opt);\r\n        }\r\n        else {\r\n            el.attachEvent('on' + name, handler);\r\n        }\r\n    }\r\n    function removeEventListener(el, name, handler, opt) {\r\n        if (isDomLevel2) {\r\n            el.removeEventListener(name, handler, opt);\r\n        }\r\n        else {\r\n            el.detachEvent('on' + name, handler);\r\n        }\r\n    }\r\n    var stop = isDomLevel2\r\n        ? function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            e.cancelBubble = true;\r\n        }\r\n        : function (e) {\r\n            e.returnValue = false;\r\n            e.cancelBubble = true;\r\n        };\n\n    var GestureMgr = (function () {\r\n        function GestureMgr() {\r\n            this._track = [];\r\n        }\r\n        GestureMgr.prototype.recognize = function (event, target, root) {\r\n            this._doTrack(event, target, root);\r\n            return this._recognize(event);\r\n        };\r\n        GestureMgr.prototype.clear = function () {\r\n            this._track.length = 0;\r\n            return this;\r\n        };\r\n        GestureMgr.prototype._doTrack = function (event, target, root) {\r\n            var touches = event.touches;\r\n            if (!touches) {\r\n                return;\r\n            }\r\n            var trackItem = {\r\n                points: [],\r\n                touches: [],\r\n                target: target,\r\n                event: event\r\n            };\r\n            for (var i = 0, len = touches.length; i < len; i++) {\r\n                var touch = touches[i];\r\n                var pos = clientToLocal(root, touch, {});\r\n                trackItem.points.push([pos.zrX, pos.zrY]);\r\n                trackItem.touches.push(touch);\r\n            }\r\n            this._track.push(trackItem);\r\n        };\r\n        GestureMgr.prototype._recognize = function (event) {\r\n            for (var eventName in recognizers) {\r\n                if (recognizers.hasOwnProperty(eventName)) {\r\n                    var gestureInfo = recognizers[eventName](this._track, event);\r\n                    if (gestureInfo) {\r\n                        return gestureInfo;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        return GestureMgr;\r\n    }());\r\n    function dist$1(pointPair) {\r\n        var dx = pointPair[1][0] - pointPair[0][0];\r\n        var dy = pointPair[1][1] - pointPair[0][1];\r\n        return Math.sqrt(dx * dx + dy * dy);\r\n    }\r\n    function center(pointPair) {\r\n        return [\r\n            (pointPair[0][0] + pointPair[1][0]) / 2,\r\n            (pointPair[0][1] + pointPair[1][1]) / 2\r\n        ];\r\n    }\r\n    var recognizers = {\r\n        pinch: function (tracks, event) {\r\n            var trackLen = tracks.length;\r\n            if (!trackLen) {\r\n                return;\r\n            }\r\n            var pinchEnd = (tracks[trackLen - 1] || {}).points;\r\n            var pinchPre = (tracks[trackLen - 2] || {}).points || pinchEnd;\r\n            if (pinchPre\r\n                && pinchPre.length > 1\r\n                && pinchEnd\r\n                && pinchEnd.length > 1) {\r\n                var pinchScale = dist$1(pinchEnd) / dist$1(pinchPre);\r\n                !isFinite(pinchScale) && (pinchScale = 1);\r\n                event.pinchScale = pinchScale;\r\n                var pinchCenter = center(pinchEnd);\r\n                event.pinchX = pinchCenter[0];\r\n                event.pinchY = pinchCenter[1];\r\n                return {\r\n                    type: 'pinch',\r\n                    target: tracks[0].target,\r\n                    event: event\r\n                };\r\n            }\r\n        }\r\n    };\n\n    var SILENT = 'silent';\r\n    function makeEventPacket(eveType, targetInfo, event) {\r\n        return {\r\n            type: eveType,\r\n            event: event,\r\n            target: targetInfo.target,\r\n            topTarget: targetInfo.topTarget,\r\n            cancelBubble: false,\r\n            offsetX: event.zrX,\r\n            offsetY: event.zrY,\r\n            gestureEvent: event.gestureEvent,\r\n            pinchX: event.pinchX,\r\n            pinchY: event.pinchY,\r\n            pinchScale: event.pinchScale,\r\n            wheelDelta: event.zrDelta,\r\n            zrByTouch: event.zrByTouch,\r\n            which: event.which,\r\n            stop: stopEvent\r\n        };\r\n    }\r\n    function stopEvent() {\r\n        stop(this.event);\r\n    }\r\n    var EmptyProxy = (function (_super) {\r\n        __extends(EmptyProxy, _super);\r\n        function EmptyProxy() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.handler = null;\r\n            return _this;\r\n        }\r\n        EmptyProxy.prototype.dispose = function () { };\r\n        EmptyProxy.prototype.setCursor = function () { };\r\n        return EmptyProxy;\r\n    }(Eventful));\r\n    var HoveredResult = (function () {\r\n        function HoveredResult(x, y) {\r\n            this.x = x;\r\n            this.y = y;\r\n        }\r\n        return HoveredResult;\r\n    }());\r\n    var handlerNames = [\r\n        'click', 'dblclick', 'mousewheel', 'mouseout',\r\n        'mouseup', 'mousedown', 'mousemove', 'contextmenu'\r\n    ];\r\n    var Handler = (function (_super) {\r\n        __extends(Handler, _super);\r\n        function Handler(storage, painter, proxy, painterRoot) {\r\n            var _this = _super.call(this) || this;\r\n            _this._hovered = new HoveredResult(0, 0);\r\n            _this.storage = storage;\r\n            _this.painter = painter;\r\n            _this.painterRoot = painterRoot;\r\n            proxy = proxy || new EmptyProxy();\r\n            _this.proxy = null;\r\n            _this.setHandlerProxy(proxy);\r\n            _this._draggingMgr = new Draggable(_this);\r\n            return _this;\r\n        }\r\n        Handler.prototype.setHandlerProxy = function (proxy) {\r\n            if (this.proxy) {\r\n                this.proxy.dispose();\r\n            }\r\n            if (proxy) {\r\n                each(handlerNames, function (name) {\r\n                    proxy.on && proxy.on(name, this[name], this);\r\n                }, this);\r\n                proxy.handler = this;\r\n            }\r\n            this.proxy = proxy;\r\n        };\r\n        Handler.prototype.mousemove = function (event) {\r\n            var x = event.zrX;\r\n            var y = event.zrY;\r\n            var isOutside = isOutsideBoundary(this, x, y);\r\n            var lastHovered = this._hovered;\r\n            var lastHoveredTarget = lastHovered.target;\r\n            if (lastHoveredTarget && !lastHoveredTarget.__zr) {\r\n                lastHovered = this.findHover(lastHovered.x, lastHovered.y);\r\n                lastHoveredTarget = lastHovered.target;\r\n            }\r\n            var hovered = this._hovered = isOutside ? new HoveredResult(x, y) : this.findHover(x, y);\r\n            var hoveredTarget = hovered.target;\r\n            var proxy = this.proxy;\r\n            proxy.setCursor && proxy.setCursor(hoveredTarget ? hoveredTarget.cursor : 'default');\r\n            if (lastHoveredTarget && hoveredTarget !== lastHoveredTarget) {\r\n                this.dispatchToElement(lastHovered, 'mouseout', event);\r\n            }\r\n            this.dispatchToElement(hovered, 'mousemove', event);\r\n            if (hoveredTarget && hoveredTarget !== lastHoveredTarget) {\r\n                this.dispatchToElement(hovered, 'mouseover', event);\r\n            }\r\n        };\r\n        Handler.prototype.mouseout = function (event) {\r\n            var eventControl = event.zrEventControl;\r\n            var zrIsToLocalDOM = event.zrIsToLocalDOM;\r\n            if (eventControl !== 'only_globalout') {\r\n                this.dispatchToElement(this._hovered, 'mouseout', event);\r\n            }\r\n            if (eventControl !== 'no_globalout') {\r\n                !zrIsToLocalDOM && this.trigger('globalout', { type: 'globalout', event: event });\r\n            }\r\n        };\r\n        Handler.prototype.resize = function () {\r\n            this._hovered = new HoveredResult(0, 0);\r\n        };\r\n        Handler.prototype.dispatch = function (eventName, eventArgs) {\r\n            var handler = this[eventName];\r\n            handler && handler.call(this, eventArgs);\r\n        };\r\n        Handler.prototype.dispose = function () {\r\n            this.proxy.dispose();\r\n            this.storage = null;\r\n            this.proxy = null;\r\n            this.painter = null;\r\n        };\r\n        Handler.prototype.setCursorStyle = function (cursorStyle) {\r\n            var proxy = this.proxy;\r\n            proxy.setCursor && proxy.setCursor(cursorStyle);\r\n        };\r\n        Handler.prototype.dispatchToElement = function (targetInfo, eventName, event) {\r\n            targetInfo = targetInfo || {};\r\n            var el = targetInfo.target;\r\n            if (el && el.silent) {\r\n                return;\r\n            }\r\n            var eventKey = ('on' + eventName);\r\n            var eventPacket = makeEventPacket(eventName, targetInfo, event);\r\n            while (el) {\r\n                el[eventKey]\r\n                    && (eventPacket.cancelBubble = !!el[eventKey].call(el, eventPacket));\r\n                el.trigger(eventName, eventPacket);\r\n                el = el.__hostTarget ? el.__hostTarget : el.parent;\r\n                if (eventPacket.cancelBubble) {\r\n                    break;\r\n                }\r\n            }\r\n            if (!eventPacket.cancelBubble) {\r\n                this.trigger(eventName, eventPacket);\r\n                if (this.painter && this.painter.eachOtherLayer) {\r\n                    this.painter.eachOtherLayer(function (layer) {\r\n                        if (typeof (layer[eventKey]) === 'function') {\r\n                            layer[eventKey].call(layer, eventPacket);\r\n                        }\r\n                        if (layer.trigger) {\r\n                            layer.trigger(eventName, eventPacket);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        Handler.prototype.findHover = function (x, y, exclude) {\r\n            var list = this.storage.getDisplayList();\r\n            var out = new HoveredResult(x, y);\r\n            for (var i = list.length - 1; i >= 0; i--) {\r\n                var hoverCheckResult = void 0;\r\n                if (list[i] !== exclude\r\n                    && !list[i].ignore\r\n                    && (hoverCheckResult = isHover(list[i], x, y))) {\r\n                    !out.topTarget && (out.topTarget = list[i]);\r\n                    if (hoverCheckResult !== SILENT) {\r\n                        out.target = list[i];\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return out;\r\n        };\r\n        Handler.prototype.processGesture = function (event, stage) {\r\n            if (!this._gestureMgr) {\r\n                this._gestureMgr = new GestureMgr();\r\n            }\r\n            var gestureMgr = this._gestureMgr;\r\n            stage === 'start' && gestureMgr.clear();\r\n            var gestureInfo = gestureMgr.recognize(event, this.findHover(event.zrX, event.zrY, null).target, this.proxy.dom);\r\n            stage === 'end' && gestureMgr.clear();\r\n            if (gestureInfo) {\r\n                var type = gestureInfo.type;\r\n                event.gestureEvent = type;\r\n                var res = new HoveredResult();\r\n                res.target = gestureInfo.target;\r\n                this.dispatchToElement(res, type, gestureInfo.event);\r\n            }\r\n        };\r\n        return Handler;\r\n    }(Eventful));\r\n    each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\r\n        Handler.prototype[name] = function (event) {\r\n            var x = event.zrX;\r\n            var y = event.zrY;\r\n            var isOutside = isOutsideBoundary(this, x, y);\r\n            var hovered;\r\n            var hoveredTarget;\r\n            if (name !== 'mouseup' || !isOutside) {\r\n                hovered = this.findHover(x, y);\r\n                hoveredTarget = hovered.target;\r\n            }\r\n            if (name === 'mousedown') {\r\n                this._downEl = hoveredTarget;\r\n                this._downPoint = [event.zrX, event.zrY];\r\n                this._upEl = hoveredTarget;\r\n            }\r\n            else if (name === 'mouseup') {\r\n                this._upEl = hoveredTarget;\r\n            }\r\n            else if (name === 'click') {\r\n                if (this._downEl !== this._upEl\r\n                    || !this._downPoint\r\n                    || dist(this._downPoint, [event.zrX, event.zrY]) > 4) {\r\n                    return;\r\n                }\r\n                this._downPoint = null;\r\n            }\r\n            this.dispatchToElement(hovered, name, event);\r\n        };\r\n    });\r\n    function isHover(displayable, x, y) {\r\n        if (displayable[displayable.rectHover ? 'rectContain' : 'contain'](x, y)) {\r\n            var el = displayable;\r\n            var isSilent = void 0;\r\n            var ignoreClip = false;\r\n            while (el) {\r\n                if (el.ignoreClip) {\r\n                    ignoreClip = true;\r\n                }\r\n                if (!ignoreClip) {\r\n                    var clipPath = el.getClipPath();\r\n                    if (clipPath && !clipPath.contain(x, y)) {\r\n                        return false;\r\n                    }\r\n                    if (el.silent) {\r\n                        isSilent = true;\r\n                    }\r\n                }\r\n                var hostEl = el.__hostTarget;\r\n                el = hostEl ? hostEl : el.parent;\r\n            }\r\n            return isSilent ? SILENT : true;\r\n        }\r\n        return false;\r\n    }\r\n    function isOutsideBoundary(handlerInstance, x, y) {\r\n        var painter = handlerInstance.painter;\r\n        return x < 0 || x > painter.getWidth() || y < 0 || y > painter.getHeight();\r\n    }\n\n    var DEFAULT_MIN_MERGE = 32;\r\n    var DEFAULT_MIN_GALLOPING = 7;\r\n    function minRunLength(n) {\r\n        var r = 0;\r\n        while (n >= DEFAULT_MIN_MERGE) {\r\n            r |= n & 1;\r\n            n >>= 1;\r\n        }\r\n        return n + r;\r\n    }\r\n    function makeAscendingRun(array, lo, hi, compare) {\r\n        var runHi = lo + 1;\r\n        if (runHi === hi) {\r\n            return 1;\r\n        }\r\n        if (compare(array[runHi++], array[lo]) < 0) {\r\n            while (runHi < hi && compare(array[runHi], array[runHi - 1]) < 0) {\r\n                runHi++;\r\n            }\r\n            reverseRun(array, lo, runHi);\r\n        }\r\n        else {\r\n            while (runHi < hi && compare(array[runHi], array[runHi - 1]) >= 0) {\r\n                runHi++;\r\n            }\r\n        }\r\n        return runHi - lo;\r\n    }\r\n    function reverseRun(array, lo, hi) {\r\n        hi--;\r\n        while (lo < hi) {\r\n            var t = array[lo];\r\n            array[lo++] = array[hi];\r\n            array[hi--] = t;\r\n        }\r\n    }\r\n    function binaryInsertionSort(array, lo, hi, start, compare) {\r\n        if (start === lo) {\r\n            start++;\r\n        }\r\n        for (; start < hi; start++) {\r\n            var pivot = array[start];\r\n            var left = lo;\r\n            var right = start;\r\n            var mid;\r\n            while (left < right) {\r\n                mid = left + right >>> 1;\r\n                if (compare(pivot, array[mid]) < 0) {\r\n                    right = mid;\r\n                }\r\n                else {\r\n                    left = mid + 1;\r\n                }\r\n            }\r\n            var n = start - left;\r\n            switch (n) {\r\n                case 3:\r\n                    array[left + 3] = array[left + 2];\r\n                case 2:\r\n                    array[left + 2] = array[left + 1];\r\n                case 1:\r\n                    array[left + 1] = array[left];\r\n                    break;\r\n                default:\r\n                    while (n > 0) {\r\n                        array[left + n] = array[left + n - 1];\r\n                        n--;\r\n                    }\r\n            }\r\n            array[left] = pivot;\r\n        }\r\n    }\r\n    function gallopLeft(value, array, start, length, hint, compare) {\r\n        var lastOffset = 0;\r\n        var maxOffset = 0;\r\n        var offset = 1;\r\n        if (compare(value, array[start + hint]) > 0) {\r\n            maxOffset = length - hint;\r\n            while (offset < maxOffset && compare(value, array[start + hint + offset]) > 0) {\r\n                lastOffset = offset;\r\n                offset = (offset << 1) + 1;\r\n                if (offset <= 0) {\r\n                    offset = maxOffset;\r\n                }\r\n            }\r\n            if (offset > maxOffset) {\r\n                offset = maxOffset;\r\n            }\r\n            lastOffset += hint;\r\n            offset += hint;\r\n        }\r\n        else {\r\n            maxOffset = hint + 1;\r\n            while (offset < maxOffset && compare(value, array[start + hint - offset]) <= 0) {\r\n                lastOffset = offset;\r\n                offset = (offset << 1) + 1;\r\n                if (offset <= 0) {\r\n                    offset = maxOffset;\r\n                }\r\n            }\r\n            if (offset > maxOffset) {\r\n                offset = maxOffset;\r\n            }\r\n            var tmp = lastOffset;\r\n            lastOffset = hint - offset;\r\n            offset = hint - tmp;\r\n        }\r\n        lastOffset++;\r\n        while (lastOffset < offset) {\r\n            var m = lastOffset + (offset - lastOffset >>> 1);\r\n            if (compare(value, array[start + m]) > 0) {\r\n                lastOffset = m + 1;\r\n            }\r\n            else {\r\n                offset = m;\r\n            }\r\n        }\r\n        return offset;\r\n    }\r\n    function gallopRight(value, array, start, length, hint, compare) {\r\n        var lastOffset = 0;\r\n        var maxOffset = 0;\r\n        var offset = 1;\r\n        if (compare(value, array[start + hint]) < 0) {\r\n            maxOffset = hint + 1;\r\n            while (offset < maxOffset && compare(value, array[start + hint - offset]) < 0) {\r\n                lastOffset = offset;\r\n                offset = (offset << 1) + 1;\r\n                if (offset <= 0) {\r\n                    offset = maxOffset;\r\n                }\r\n            }\r\n            if (offset > maxOffset) {\r\n                offset = maxOffset;\r\n            }\r\n            var tmp = lastOffset;\r\n            lastOffset = hint - offset;\r\n            offset = hint - tmp;\r\n        }\r\n        else {\r\n            maxOffset = length - hint;\r\n            while (offset < maxOffset && compare(value, array[start + hint + offset]) >= 0) {\r\n                lastOffset = offset;\r\n                offset = (offset << 1) + 1;\r\n                if (offset <= 0) {\r\n                    offset = maxOffset;\r\n                }\r\n            }\r\n            if (offset > maxOffset) {\r\n                offset = maxOffset;\r\n            }\r\n            lastOffset += hint;\r\n            offset += hint;\r\n        }\r\n        lastOffset++;\r\n        while (lastOffset < offset) {\r\n            var m = lastOffset + (offset - lastOffset >>> 1);\r\n            if (compare(value, array[start + m]) < 0) {\r\n                offset = m;\r\n            }\r\n            else {\r\n                lastOffset = m + 1;\r\n            }\r\n        }\r\n        return offset;\r\n    }\r\n    function TimSort(array, compare) {\r\n        var minGallop = DEFAULT_MIN_GALLOPING;\r\n        var length = 0;\r\n        var runStart;\r\n        var runLength;\r\n        var stackSize = 0;\r\n        length = array.length;\r\n        var tmp = [];\r\n        runStart = [];\r\n        runLength = [];\r\n        function pushRun(_runStart, _runLength) {\r\n            runStart[stackSize] = _runStart;\r\n            runLength[stackSize] = _runLength;\r\n            stackSize += 1;\r\n        }\r\n        function mergeRuns() {\r\n            while (stackSize > 1) {\r\n                var n = stackSize - 2;\r\n                if ((n >= 1 && runLength[n - 1] <= runLength[n] + runLength[n + 1])\r\n                    || (n >= 2 && runLength[n - 2] <= runLength[n] + runLength[n - 1])) {\r\n                    if (runLength[n - 1] < runLength[n + 1]) {\r\n                        n--;\r\n                    }\r\n                }\r\n                else if (runLength[n] > runLength[n + 1]) {\r\n                    break;\r\n                }\r\n                mergeAt(n);\r\n            }\r\n        }\r\n        function forceMergeRuns() {\r\n            while (stackSize > 1) {\r\n                var n = stackSize - 2;\r\n                if (n > 0 && runLength[n - 1] < runLength[n + 1]) {\r\n                    n--;\r\n                }\r\n                mergeAt(n);\r\n            }\r\n        }\r\n        function mergeAt(i) {\r\n            var start1 = runStart[i];\r\n            var length1 = runLength[i];\r\n            var start2 = runStart[i + 1];\r\n            var length2 = runLength[i + 1];\r\n            runLength[i] = length1 + length2;\r\n            if (i === stackSize - 3) {\r\n                runStart[i + 1] = runStart[i + 2];\r\n                runLength[i + 1] = runLength[i + 2];\r\n            }\r\n            stackSize--;\r\n            var k = gallopRight(array[start2], array, start1, length1, 0, compare);\r\n            start1 += k;\r\n            length1 -= k;\r\n            if (length1 === 0) {\r\n                return;\r\n            }\r\n            length2 = gallopLeft(array[start1 + length1 - 1], array, start2, length2, length2 - 1, compare);\r\n            if (length2 === 0) {\r\n                return;\r\n            }\r\n            if (length1 <= length2) {\r\n                mergeLow(start1, length1, start2, length2);\r\n            }\r\n            else {\r\n                mergeHigh(start1, length1, start2, length2);\r\n            }\r\n        }\r\n        function mergeLow(start1, length1, start2, length2) {\r\n            var i = 0;\r\n            for (i = 0; i < length1; i++) {\r\n                tmp[i] = array[start1 + i];\r\n            }\r\n            var cursor1 = 0;\r\n            var cursor2 = start2;\r\n            var dest = start1;\r\n            array[dest++] = array[cursor2++];\r\n            if (--length2 === 0) {\r\n                for (i = 0; i < length1; i++) {\r\n                    array[dest + i] = tmp[cursor1 + i];\r\n                }\r\n                return;\r\n            }\r\n            if (length1 === 1) {\r\n                for (i = 0; i < length2; i++) {\r\n                    array[dest + i] = array[cursor2 + i];\r\n                }\r\n                array[dest + length2] = tmp[cursor1];\r\n                return;\r\n            }\r\n            var _minGallop = minGallop;\r\n            var count1;\r\n            var count2;\r\n            var exit;\r\n            while (1) {\r\n                count1 = 0;\r\n                count2 = 0;\r\n                exit = false;\r\n                do {\r\n                    if (compare(array[cursor2], tmp[cursor1]) < 0) {\r\n                        array[dest++] = array[cursor2++];\r\n                        count2++;\r\n                        count1 = 0;\r\n                        if (--length2 === 0) {\r\n                            exit = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    else {\r\n                        array[dest++] = tmp[cursor1++];\r\n                        count1++;\r\n                        count2 = 0;\r\n                        if (--length1 === 1) {\r\n                            exit = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                } while ((count1 | count2) < _minGallop);\r\n                if (exit) {\r\n                    break;\r\n                }\r\n                do {\r\n                    count1 = gallopRight(array[cursor2], tmp, cursor1, length1, 0, compare);\r\n                    if (count1 !== 0) {\r\n                        for (i = 0; i < count1; i++) {\r\n                            array[dest + i] = tmp[cursor1 + i];\r\n                        }\r\n                        dest += count1;\r\n                        cursor1 += count1;\r\n                        length1 -= count1;\r\n                        if (length1 <= 1) {\r\n                            exit = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    array[dest++] = array[cursor2++];\r\n                    if (--length2 === 0) {\r\n                        exit = true;\r\n                        break;\r\n                    }\r\n                    count2 = gallopLeft(tmp[cursor1], array, cursor2, length2, 0, compare);\r\n                    if (count2 !== 0) {\r\n                        for (i = 0; i < count2; i++) {\r\n                            array[dest + i] = array[cursor2 + i];\r\n                        }\r\n                        dest += count2;\r\n                        cursor2 += count2;\r\n                        length2 -= count2;\r\n                        if (length2 === 0) {\r\n                            exit = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    array[dest++] = tmp[cursor1++];\r\n                    if (--length1 === 1) {\r\n                        exit = true;\r\n                        break;\r\n                    }\r\n                    _minGallop--;\r\n                } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\r\n                if (exit) {\r\n                    break;\r\n                }\r\n                if (_minGallop < 0) {\r\n                    _minGallop = 0;\r\n                }\r\n                _minGallop += 2;\r\n            }\r\n            minGallop = _minGallop;\r\n            minGallop < 1 && (minGallop = 1);\r\n            if (length1 === 1) {\r\n                for (i = 0; i < length2; i++) {\r\n                    array[dest + i] = array[cursor2 + i];\r\n                }\r\n                array[dest + length2] = tmp[cursor1];\r\n            }\r\n            else if (length1 === 0) {\r\n                throw new Error();\r\n            }\r\n            else {\r\n                for (i = 0; i < length1; i++) {\r\n                    array[dest + i] = tmp[cursor1 + i];\r\n                }\r\n            }\r\n        }\r\n        function mergeHigh(start1, length1, start2, length2) {\r\n            var i = 0;\r\n            for (i = 0; i < length2; i++) {\r\n                tmp[i] = array[start2 + i];\r\n            }\r\n            var cursor1 = start1 + length1 - 1;\r\n            var cursor2 = length2 - 1;\r\n            var dest = start2 + length2 - 1;\r\n            var customCursor = 0;\r\n            var customDest = 0;\r\n            array[dest--] = array[cursor1--];\r\n            if (--length1 === 0) {\r\n                customCursor = dest - (length2 - 1);\r\n                for (i = 0; i < length2; i++) {\r\n                    array[customCursor + i] = tmp[i];\r\n                }\r\n                return;\r\n            }\r\n            if (length2 === 1) {\r\n                dest -= length1;\r\n                cursor1 -= length1;\r\n                customDest = dest + 1;\r\n                customCursor = cursor1 + 1;\r\n                for (i = length1 - 1; i >= 0; i--) {\r\n                    array[customDest + i] = array[customCursor + i];\r\n                }\r\n                array[dest] = tmp[cursor2];\r\n                return;\r\n            }\r\n            var _minGallop = minGallop;\r\n            while (true) {\r\n                var count1 = 0;\r\n                var count2 = 0;\r\n                var exit = false;\r\n                do {\r\n                    if (compare(tmp[cursor2], array[cursor1]) < 0) {\r\n                        array[dest--] = array[cursor1--];\r\n                        count1++;\r\n                        count2 = 0;\r\n                        if (--length1 === 0) {\r\n                            exit = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    else {\r\n                        array[dest--] = tmp[cursor2--];\r\n                        count2++;\r\n                        count1 = 0;\r\n                        if (--length2 === 1) {\r\n                            exit = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                } while ((count1 | count2) < _minGallop);\r\n                if (exit) {\r\n                    break;\r\n                }\r\n                do {\r\n                    count1 = length1 - gallopRight(tmp[cursor2], array, start1, length1, length1 - 1, compare);\r\n                    if (count1 !== 0) {\r\n                        dest -= count1;\r\n                        cursor1 -= count1;\r\n                        length1 -= count1;\r\n                        customDest = dest + 1;\r\n                        customCursor = cursor1 + 1;\r\n                        for (i = count1 - 1; i >= 0; i--) {\r\n                            array[customDest + i] = array[customCursor + i];\r\n                        }\r\n                        if (length1 === 0) {\r\n                            exit = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    array[dest--] = tmp[cursor2--];\r\n                    if (--length2 === 1) {\r\n                        exit = true;\r\n                        break;\r\n                    }\r\n                    count2 = length2 - gallopLeft(array[cursor1], tmp, 0, length2, length2 - 1, compare);\r\n                    if (count2 !== 0) {\r\n                        dest -= count2;\r\n                        cursor2 -= count2;\r\n                        length2 -= count2;\r\n                        customDest = dest + 1;\r\n                        customCursor = cursor2 + 1;\r\n                        for (i = 0; i < count2; i++) {\r\n                            array[customDest + i] = tmp[customCursor + i];\r\n                        }\r\n                        if (length2 <= 1) {\r\n                            exit = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    array[dest--] = array[cursor1--];\r\n                    if (--length1 === 0) {\r\n                        exit = true;\r\n                        break;\r\n                    }\r\n                    _minGallop--;\r\n                } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\r\n                if (exit) {\r\n                    break;\r\n                }\r\n                if (_minGallop < 0) {\r\n                    _minGallop = 0;\r\n                }\r\n                _minGallop += 2;\r\n            }\r\n            minGallop = _minGallop;\r\n            if (minGallop < 1) {\r\n                minGallop = 1;\r\n            }\r\n            if (length2 === 1) {\r\n                dest -= length1;\r\n                cursor1 -= length1;\r\n                customDest = dest + 1;\r\n                customCursor = cursor1 + 1;\r\n                for (i = length1 - 1; i >= 0; i--) {\r\n                    array[customDest + i] = array[customCursor + i];\r\n                }\r\n                array[dest] = tmp[cursor2];\r\n            }\r\n            else if (length2 === 0) {\r\n                throw new Error();\r\n            }\r\n            else {\r\n                customCursor = dest - (length2 - 1);\r\n                for (i = 0; i < length2; i++) {\r\n                    array[customCursor + i] = tmp[i];\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            mergeRuns: mergeRuns,\r\n            forceMergeRuns: forceMergeRuns,\r\n            pushRun: pushRun\r\n        };\r\n    }\r\n    function sort(array, compare, lo, hi) {\r\n        if (!lo) {\r\n            lo = 0;\r\n        }\r\n        if (!hi) {\r\n            hi = array.length;\r\n        }\r\n        var remaining = hi - lo;\r\n        if (remaining < 2) {\r\n            return;\r\n        }\r\n        var runLength = 0;\r\n        if (remaining < DEFAULT_MIN_MERGE) {\r\n            runLength = makeAscendingRun(array, lo, hi, compare);\r\n            binaryInsertionSort(array, lo, hi, lo + runLength, compare);\r\n            return;\r\n        }\r\n        var ts = TimSort(array, compare);\r\n        var minRun = minRunLength(remaining);\r\n        do {\r\n            runLength = makeAscendingRun(array, lo, hi, compare);\r\n            if (runLength < minRun) {\r\n                var force = remaining;\r\n                if (force > minRun) {\r\n                    force = minRun;\r\n                }\r\n                binaryInsertionSort(array, lo, lo + force, lo + runLength, compare);\r\n                runLength = force;\r\n            }\r\n            ts.pushRun(lo, runLength);\r\n            ts.mergeRuns();\r\n            remaining -= runLength;\r\n            lo += runLength;\r\n        } while (remaining !== 0);\r\n        ts.forceMergeRuns();\r\n    }\n\n    var invalidZErrorLogged = false;\r\n    function logInvalidZError() {\r\n        if (invalidZErrorLogged) {\r\n            return;\r\n        }\r\n        invalidZErrorLogged = true;\r\n        console.warn('z / z2 / zlevel of displayable is invalid, which may cause unexpected errors');\r\n    }\r\n    function shapeCompareFunc(a, b) {\r\n        if (a.zlevel === b.zlevel) {\r\n            if (a.z === b.z) {\r\n                return a.z2 - b.z2;\r\n            }\r\n            return a.z - b.z;\r\n        }\r\n        return a.zlevel - b.zlevel;\r\n    }\r\n    var Storage = (function () {\r\n        function Storage() {\r\n            this._roots = [];\r\n            this._displayList = [];\r\n            this._displayListLen = 0;\r\n            this.displayableSortFunc = shapeCompareFunc;\r\n        }\r\n        Storage.prototype.traverse = function (cb, context) {\r\n            for (var i = 0; i < this._roots.length; i++) {\r\n                this._roots[i].traverse(cb, context);\r\n            }\r\n        };\r\n        Storage.prototype.getDisplayList = function (update, includeIgnore) {\r\n            includeIgnore = includeIgnore || false;\r\n            var displayList = this._displayList;\r\n            if (update || !displayList.length) {\r\n                this.updateDisplayList(includeIgnore);\r\n            }\r\n            return displayList;\r\n        };\r\n        Storage.prototype.updateDisplayList = function (includeIgnore) {\r\n            this._displayListLen = 0;\r\n            var roots = this._roots;\r\n            var displayList = this._displayList;\r\n            for (var i = 0, len = roots.length; i < len; i++) {\r\n                this._updateAndAddDisplayable(roots[i], null, includeIgnore);\r\n            }\r\n            displayList.length = this._displayListLen;\r\n            env.canvasSupported && sort(displayList, shapeCompareFunc);\r\n        };\r\n        Storage.prototype._updateAndAddDisplayable = function (el, clipPaths, includeIgnore) {\r\n            if (el.ignore && !includeIgnore) {\r\n                return;\r\n            }\r\n            el.beforeUpdate();\r\n            el.update();\r\n            el.afterUpdate();\r\n            var userSetClipPath = el.getClipPath();\r\n            if (el.ignoreClip) {\r\n                clipPaths = null;\r\n            }\r\n            else if (userSetClipPath) {\r\n                if (clipPaths) {\r\n                    clipPaths = clipPaths.slice();\r\n                }\r\n                else {\r\n                    clipPaths = [];\r\n                }\r\n                var currentClipPath = userSetClipPath;\r\n                var parentClipPath = el;\r\n                while (currentClipPath) {\r\n                    currentClipPath.parent = parentClipPath;\r\n                    currentClipPath.updateTransform();\r\n                    clipPaths.push(currentClipPath);\r\n                    parentClipPath = currentClipPath;\r\n                    currentClipPath = currentClipPath.getClipPath();\r\n                }\r\n            }\r\n            if (el.childrenRef) {\r\n                var children = el.childrenRef();\r\n                for (var i = 0; i < children.length; i++) {\r\n                    var child = children[i];\r\n                    if (el.__dirty) {\r\n                        child.markRedraw();\r\n                    }\r\n                    this._updateAndAddDisplayable(child, clipPaths, includeIgnore);\r\n                }\r\n                el.__dirty = 0;\r\n            }\r\n            else {\r\n                var disp = el;\r\n                if (clipPaths && clipPaths.length) {\r\n                    disp.__clipPaths = clipPaths;\r\n                }\r\n                else if (disp.__clipPaths && disp.__clipPaths.length > 0) {\r\n                    disp.__clipPaths = [];\r\n                }\r\n                if (isNaN(disp.z)) {\r\n                    logInvalidZError();\r\n                    disp.z = 0;\r\n                }\r\n                if (isNaN(disp.z2)) {\r\n                    logInvalidZError();\r\n                    disp.z2 = 0;\r\n                }\r\n                if (isNaN(disp.zlevel)) {\r\n                    logInvalidZError();\r\n                    disp.zlevel = 0;\r\n                }\r\n                this._displayList[this._displayListLen++] = disp;\r\n            }\r\n            var textGuide = el.getTextGuideLine();\r\n            if (textGuide) {\r\n                this._updateAndAddDisplayable(textGuide, clipPaths, includeIgnore);\r\n            }\r\n            var textEl = el.getTextContent();\r\n            if (textEl) {\r\n                this._updateAndAddDisplayable(textEl, clipPaths, includeIgnore);\r\n            }\r\n        };\r\n        Storage.prototype.addRoot = function (el) {\r\n            if (el.__zr && el.__zr.storage === this) {\r\n                return;\r\n            }\r\n            this._roots.push(el);\r\n        };\r\n        Storage.prototype.delRoot = function (el) {\r\n            if (el instanceof Array) {\r\n                for (var i = 0, l = el.length; i < l; i++) {\r\n                    this.delRoot(el[i]);\r\n                }\r\n                return;\r\n            }\r\n            var idx = indexOf(this._roots, el);\r\n            if (idx >= 0) {\r\n                this._roots.splice(idx, 1);\r\n            }\r\n        };\r\n        Storage.prototype.delAllRoots = function () {\r\n            this._roots = [];\r\n            this._displayList = [];\r\n            this._displayListLen = 0;\r\n            return;\r\n        };\r\n        Storage.prototype.getRoots = function () {\r\n            return this._roots;\r\n        };\r\n        Storage.prototype.dispose = function () {\r\n            this._displayList = null;\r\n            this._roots = null;\r\n        };\r\n        return Storage;\r\n    }());\n\n    var requestAnimationFrame;\r\n    requestAnimationFrame = (typeof window !== 'undefined'\r\n        && ((window.requestAnimationFrame && window.requestAnimationFrame.bind(window))\r\n            || (window.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window))\r\n            || window.mozRequestAnimationFrame\r\n            || window.webkitRequestAnimationFrame)) || function (func) {\r\n        return setTimeout(func, 16);\r\n    };\r\n    var requestAnimationFrame$1 = requestAnimationFrame;\n\n    var easing = {\r\n        linear: function (k) {\r\n            return k;\r\n        },\r\n        quadraticIn: function (k) {\r\n            return k * k;\r\n        },\r\n        quadraticOut: function (k) {\r\n            return k * (2 - k);\r\n        },\r\n        quadraticInOut: function (k) {\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k;\r\n            }\r\n            return -0.5 * (--k * (k - 2) - 1);\r\n        },\r\n        cubicIn: function (k) {\r\n            return k * k * k;\r\n        },\r\n        cubicOut: function (k) {\r\n            return --k * k * k + 1;\r\n        },\r\n        cubicInOut: function (k) {\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k * k;\r\n            }\r\n            return 0.5 * ((k -= 2) * k * k + 2);\r\n        },\r\n        quarticIn: function (k) {\r\n            return k * k * k * k;\r\n        },\r\n        quarticOut: function (k) {\r\n            return 1 - (--k * k * k * k);\r\n        },\r\n        quarticInOut: function (k) {\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k * k * k;\r\n            }\r\n            return -0.5 * ((k -= 2) * k * k * k - 2);\r\n        },\r\n        quinticIn: function (k) {\r\n            return k * k * k * k * k;\r\n        },\r\n        quinticOut: function (k) {\r\n            return --k * k * k * k * k + 1;\r\n        },\r\n        quinticInOut: function (k) {\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k * k * k * k;\r\n            }\r\n            return 0.5 * ((k -= 2) * k * k * k * k + 2);\r\n        },\r\n        sinusoidalIn: function (k) {\r\n            return 1 - Math.cos(k * Math.PI / 2);\r\n        },\r\n        sinusoidalOut: function (k) {\r\n            return Math.sin(k * Math.PI / 2);\r\n        },\r\n        sinusoidalInOut: function (k) {\r\n            return 0.5 * (1 - Math.cos(Math.PI * k));\r\n        },\r\n        exponentialIn: function (k) {\r\n            return k === 0 ? 0 : Math.pow(1024, k - 1);\r\n        },\r\n        exponentialOut: function (k) {\r\n            return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\r\n        },\r\n        exponentialInOut: function (k) {\r\n            if (k === 0) {\r\n                return 0;\r\n            }\r\n            if (k === 1) {\r\n                return 1;\r\n            }\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * Math.pow(1024, k - 1);\r\n            }\r\n            return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\r\n        },\r\n        circularIn: function (k) {\r\n            return 1 - Math.sqrt(1 - k * k);\r\n        },\r\n        circularOut: function (k) {\r\n            return Math.sqrt(1 - (--k * k));\r\n        },\r\n        circularInOut: function (k) {\r\n            if ((k *= 2) < 1) {\r\n                return -0.5 * (Math.sqrt(1 - k * k) - 1);\r\n            }\r\n            return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\r\n        },\r\n        elasticIn: function (k) {\r\n            var s;\r\n            var a = 0.1;\r\n            var p = 0.4;\r\n            if (k === 0) {\r\n                return 0;\r\n            }\r\n            if (k === 1) {\r\n                return 1;\r\n            }\r\n            if (!a || a < 1) {\r\n                a = 1;\r\n                s = p / 4;\r\n            }\r\n            else {\r\n                s = p * Math.asin(1 / a) / (2 * Math.PI);\r\n            }\r\n            return -(a * Math.pow(2, 10 * (k -= 1))\r\n                * Math.sin((k - s) * (2 * Math.PI) / p));\r\n        },\r\n        elasticOut: function (k) {\r\n            var s;\r\n            var a = 0.1;\r\n            var p = 0.4;\r\n            if (k === 0) {\r\n                return 0;\r\n            }\r\n            if (k === 1) {\r\n                return 1;\r\n            }\r\n            if (!a || a < 1) {\r\n                a = 1;\r\n                s = p / 4;\r\n            }\r\n            else {\r\n                s = p * Math.asin(1 / a) / (2 * Math.PI);\r\n            }\r\n            return (a * Math.pow(2, -10 * k)\r\n                * Math.sin((k - s) * (2 * Math.PI) / p) + 1);\r\n        },\r\n        elasticInOut: function (k) {\r\n            var s;\r\n            var a = 0.1;\r\n            var p = 0.4;\r\n            if (k === 0) {\r\n                return 0;\r\n            }\r\n            if (k === 1) {\r\n                return 1;\r\n            }\r\n            if (!a || a < 1) {\r\n                a = 1;\r\n                s = p / 4;\r\n            }\r\n            else {\r\n                s = p * Math.asin(1 / a) / (2 * Math.PI);\r\n            }\r\n            if ((k *= 2) < 1) {\r\n                return -0.5 * (a * Math.pow(2, 10 * (k -= 1))\r\n                    * Math.sin((k - s) * (2 * Math.PI) / p));\r\n            }\r\n            return a * Math.pow(2, -10 * (k -= 1))\r\n                * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\r\n        },\r\n        backIn: function (k) {\r\n            var s = 1.70158;\r\n            return k * k * ((s + 1) * k - s);\r\n        },\r\n        backOut: function (k) {\r\n            var s = 1.70158;\r\n            return --k * k * ((s + 1) * k + s) + 1;\r\n        },\r\n        backInOut: function (k) {\r\n            var s = 1.70158 * 1.525;\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * (k * k * ((s + 1) * k - s));\r\n            }\r\n            return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\r\n        },\r\n        bounceIn: function (k) {\r\n            return 1 - easing.bounceOut(1 - k);\r\n        },\r\n        bounceOut: function (k) {\r\n            if (k < (1 / 2.75)) {\r\n                return 7.5625 * k * k;\r\n            }\r\n            else if (k < (2 / 2.75)) {\r\n                return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\r\n            }\r\n            else if (k < (2.5 / 2.75)) {\r\n                return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\r\n            }\r\n            else {\r\n                return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\r\n            }\r\n        },\r\n        bounceInOut: function (k) {\r\n            if (k < 0.5) {\r\n                return easing.bounceIn(k * 2) * 0.5;\r\n            }\r\n            return easing.bounceOut(k * 2 - 1) * 0.5 + 0.5;\r\n        }\r\n    };\n\n    var Clip = (function () {\r\n        function Clip(opts) {\r\n            this._initialized = false;\r\n            this._startTime = 0;\r\n            this._pausedTime = 0;\r\n            this._paused = false;\r\n            this._life = opts.life || 1000;\r\n            this._delay = opts.delay || 0;\r\n            this.loop = opts.loop == null ? false : opts.loop;\r\n            this.gap = opts.gap || 0;\r\n            this.easing = opts.easing || 'linear';\r\n            this.onframe = opts.onframe;\r\n            this.ondestroy = opts.ondestroy;\r\n            this.onrestart = opts.onrestart;\r\n        }\r\n        Clip.prototype.step = function (globalTime, deltaTime) {\r\n            if (!this._initialized) {\r\n                this._startTime = globalTime + this._delay;\r\n                this._initialized = true;\r\n            }\r\n            if (this._paused) {\r\n                this._pausedTime += deltaTime;\r\n                return;\r\n            }\r\n            var percent = (globalTime - this._startTime - this._pausedTime) / this._life;\r\n            if (percent < 0) {\r\n                percent = 0;\r\n            }\r\n            percent = Math.min(percent, 1);\r\n            var easing$1 = this.easing;\r\n            var easingFunc = typeof easing$1 === 'string'\r\n                ? easing[easing$1] : easing$1;\r\n            var schedule = typeof easingFunc === 'function'\r\n                ? easingFunc(percent)\r\n                : percent;\r\n            this.onframe && this.onframe(schedule);\r\n            if (percent === 1) {\r\n                if (this.loop) {\r\n                    this._restart(globalTime);\r\n                    this.onrestart && this.onrestart();\r\n                }\r\n                else {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        Clip.prototype._restart = function (globalTime) {\r\n            var remainder = (globalTime - this._startTime - this._pausedTime) % this._life;\r\n            this._startTime = globalTime - remainder + this.gap;\r\n            this._pausedTime = 0;\r\n        };\r\n        Clip.prototype.pause = function () {\r\n            this._paused = true;\r\n        };\r\n        Clip.prototype.resume = function () {\r\n            this._paused = false;\r\n        };\r\n        return Clip;\r\n    }());\n\n    var Entry = (function () {\r\n        function Entry(val) {\r\n            this.value = val;\r\n        }\r\n        return Entry;\r\n    }());\r\n    var LinkedList = (function () {\r\n        function LinkedList() {\r\n            this._len = 0;\r\n        }\r\n        LinkedList.prototype.insert = function (val) {\r\n            var entry = new Entry(val);\r\n            this.insertEntry(entry);\r\n            return entry;\r\n        };\r\n        LinkedList.prototype.insertEntry = function (entry) {\r\n            if (!this.head) {\r\n                this.head = this.tail = entry;\r\n            }\r\n            else {\r\n                this.tail.next = entry;\r\n                entry.prev = this.tail;\r\n                entry.next = null;\r\n                this.tail = entry;\r\n            }\r\n            this._len++;\r\n        };\r\n        LinkedList.prototype.remove = function (entry) {\r\n            var prev = entry.prev;\r\n            var next = entry.next;\r\n            if (prev) {\r\n                prev.next = next;\r\n            }\r\n            else {\r\n                this.head = next;\r\n            }\r\n            if (next) {\r\n                next.prev = prev;\r\n            }\r\n            else {\r\n                this.tail = prev;\r\n            }\r\n            entry.next = entry.prev = null;\r\n            this._len--;\r\n        };\r\n        LinkedList.prototype.len = function () {\r\n            return this._len;\r\n        };\r\n        LinkedList.prototype.clear = function () {\r\n            this.head = this.tail = null;\r\n            this._len = 0;\r\n        };\r\n        return LinkedList;\r\n    }());\r\n    var LRU = (function () {\r\n        function LRU(maxSize) {\r\n            this._list = new LinkedList();\r\n            this._maxSize = 10;\r\n            this._map = {};\r\n            this._maxSize = maxSize;\r\n        }\r\n        LRU.prototype.put = function (key, value) {\r\n            var list = this._list;\r\n            var map = this._map;\r\n            var removed = null;\r\n            if (map[key] == null) {\r\n                var len = list.len();\r\n                var entry = this._lastRemovedEntry;\r\n                if (len >= this._maxSize && len > 0) {\r\n                    var leastUsedEntry = list.head;\r\n                    list.remove(leastUsedEntry);\r\n                    delete map[leastUsedEntry.key];\r\n                    removed = leastUsedEntry.value;\r\n                    this._lastRemovedEntry = leastUsedEntry;\r\n                }\r\n                if (entry) {\r\n                    entry.value = value;\r\n                }\r\n                else {\r\n                    entry = new Entry(value);\r\n                }\r\n                entry.key = key;\r\n                list.insertEntry(entry);\r\n                map[key] = entry;\r\n            }\r\n            return removed;\r\n        };\r\n        LRU.prototype.get = function (key) {\r\n            var entry = this._map[key];\r\n            var list = this._list;\r\n            if (entry != null) {\r\n                if (entry !== list.tail) {\r\n                    list.remove(entry);\r\n                    list.insertEntry(entry);\r\n                }\r\n                return entry.value;\r\n            }\r\n        };\r\n        LRU.prototype.clear = function () {\r\n            this._list.clear();\r\n            this._map = {};\r\n        };\r\n        LRU.prototype.len = function () {\r\n            return this._list.len();\r\n        };\r\n        return LRU;\r\n    }());\n\n    var kCSSColorTable = {\r\n        'transparent': [0, 0, 0, 0], 'aliceblue': [240, 248, 255, 1],\r\n        'antiquewhite': [250, 235, 215, 1], 'aqua': [0, 255, 255, 1],\r\n        'aquamarine': [127, 255, 212, 1], 'azure': [240, 255, 255, 1],\r\n        'beige': [245, 245, 220, 1], 'bisque': [255, 228, 196, 1],\r\n        'black': [0, 0, 0, 1], 'blanchedalmond': [255, 235, 205, 1],\r\n        'blue': [0, 0, 255, 1], 'blueviolet': [138, 43, 226, 1],\r\n        'brown': [165, 42, 42, 1], 'burlywood': [222, 184, 135, 1],\r\n        'cadetblue': [95, 158, 160, 1], 'chartreuse': [127, 255, 0, 1],\r\n        'chocolate': [210, 105, 30, 1], 'coral': [255, 127, 80, 1],\r\n        'cornflowerblue': [100, 149, 237, 1], 'cornsilk': [255, 248, 220, 1],\r\n        'crimson': [220, 20, 60, 1], 'cyan': [0, 255, 255, 1],\r\n        'darkblue': [0, 0, 139, 1], 'darkcyan': [0, 139, 139, 1],\r\n        'darkgoldenrod': [184, 134, 11, 1], 'darkgray': [169, 169, 169, 1],\r\n        'darkgreen': [0, 100, 0, 1], 'darkgrey': [169, 169, 169, 1],\r\n        'darkkhaki': [189, 183, 107, 1], 'darkmagenta': [139, 0, 139, 1],\r\n        'darkolivegreen': [85, 107, 47, 1], 'darkorange': [255, 140, 0, 1],\r\n        'darkorchid': [153, 50, 204, 1], 'darkred': [139, 0, 0, 1],\r\n        'darksalmon': [233, 150, 122, 1], 'darkseagreen': [143, 188, 143, 1],\r\n        'darkslateblue': [72, 61, 139, 1], 'darkslategray': [47, 79, 79, 1],\r\n        'darkslategrey': [47, 79, 79, 1], 'darkturquoise': [0, 206, 209, 1],\r\n        'darkviolet': [148, 0, 211, 1], 'deeppink': [255, 20, 147, 1],\r\n        'deepskyblue': [0, 191, 255, 1], 'dimgray': [105, 105, 105, 1],\r\n        'dimgrey': [105, 105, 105, 1], 'dodgerblue': [30, 144, 255, 1],\r\n        'firebrick': [178, 34, 34, 1], 'floralwhite': [255, 250, 240, 1],\r\n        'forestgreen': [34, 139, 34, 1], 'fuchsia': [255, 0, 255, 1],\r\n        'gainsboro': [220, 220, 220, 1], 'ghostwhite': [248, 248, 255, 1],\r\n        'gold': [255, 215, 0, 1], 'goldenrod': [218, 165, 32, 1],\r\n        'gray': [128, 128, 128, 1], 'green': [0, 128, 0, 1],\r\n        'greenyellow': [173, 255, 47, 1], 'grey': [128, 128, 128, 1],\r\n        'honeydew': [240, 255, 240, 1], 'hotpink': [255, 105, 180, 1],\r\n        'indianred': [205, 92, 92, 1], 'indigo': [75, 0, 130, 1],\r\n        'ivory': [255, 255, 240, 1], 'khaki': [240, 230, 140, 1],\r\n        'lavender': [230, 230, 250, 1], 'lavenderblush': [255, 240, 245, 1],\r\n        'lawngreen': [124, 252, 0, 1], 'lemonchiffon': [255, 250, 205, 1],\r\n        'lightblue': [173, 216, 230, 1], 'lightcoral': [240, 128, 128, 1],\r\n        'lightcyan': [224, 255, 255, 1], 'lightgoldenrodyellow': [250, 250, 210, 1],\r\n        'lightgray': [211, 211, 211, 1], 'lightgreen': [144, 238, 144, 1],\r\n        'lightgrey': [211, 211, 211, 1], 'lightpink': [255, 182, 193, 1],\r\n        'lightsalmon': [255, 160, 122, 1], 'lightseagreen': [32, 178, 170, 1],\r\n        'lightskyblue': [135, 206, 250, 1], 'lightslategray': [119, 136, 153, 1],\r\n        'lightslategrey': [119, 136, 153, 1], 'lightsteelblue': [176, 196, 222, 1],\r\n        'lightyellow': [255, 255, 224, 1], 'lime': [0, 255, 0, 1],\r\n        'limegreen': [50, 205, 50, 1], 'linen': [250, 240, 230, 1],\r\n        'magenta': [255, 0, 255, 1], 'maroon': [128, 0, 0, 1],\r\n        'mediumaquamarine': [102, 205, 170, 1], 'mediumblue': [0, 0, 205, 1],\r\n        'mediumorchid': [186, 85, 211, 1], 'mediumpurple': [147, 112, 219, 1],\r\n        'mediumseagreen': [60, 179, 113, 1], 'mediumslateblue': [123, 104, 238, 1],\r\n        'mediumspringgreen': [0, 250, 154, 1], 'mediumturquoise': [72, 209, 204, 1],\r\n        'mediumvioletred': [199, 21, 133, 1], 'midnightblue': [25, 25, 112, 1],\r\n        'mintcream': [245, 255, 250, 1], 'mistyrose': [255, 228, 225, 1],\r\n        'moccasin': [255, 228, 181, 1], 'navajowhite': [255, 222, 173, 1],\r\n        'navy': [0, 0, 128, 1], 'oldlace': [253, 245, 230, 1],\r\n        'olive': [128, 128, 0, 1], 'olivedrab': [107, 142, 35, 1],\r\n        'orange': [255, 165, 0, 1], 'orangered': [255, 69, 0, 1],\r\n        'orchid': [218, 112, 214, 1], 'palegoldenrod': [238, 232, 170, 1],\r\n        'palegreen': [152, 251, 152, 1], 'paleturquoise': [175, 238, 238, 1],\r\n        'palevioletred': [219, 112, 147, 1], 'papayawhip': [255, 239, 213, 1],\r\n        'peachpuff': [255, 218, 185, 1], 'peru': [205, 133, 63, 1],\r\n        'pink': [255, 192, 203, 1], 'plum': [221, 160, 221, 1],\r\n        'powderblue': [176, 224, 230, 1], 'purple': [128, 0, 128, 1],\r\n        'red': [255, 0, 0, 1], 'rosybrown': [188, 143, 143, 1],\r\n        'royalblue': [65, 105, 225, 1], 'saddlebrown': [139, 69, 19, 1],\r\n        'salmon': [250, 128, 114, 1], 'sandybrown': [244, 164, 96, 1],\r\n        'seagreen': [46, 139, 87, 1], 'seashell': [255, 245, 238, 1],\r\n        'sienna': [160, 82, 45, 1], 'silver': [192, 192, 192, 1],\r\n        'skyblue': [135, 206, 235, 1], 'slateblue': [106, 90, 205, 1],\r\n        'slategray': [112, 128, 144, 1], 'slategrey': [112, 128, 144, 1],\r\n        'snow': [255, 250, 250, 1], 'springgreen': [0, 255, 127, 1],\r\n        'steelblue': [70, 130, 180, 1], 'tan': [210, 180, 140, 1],\r\n        'teal': [0, 128, 128, 1], 'thistle': [216, 191, 216, 1],\r\n        'tomato': [255, 99, 71, 1], 'turquoise': [64, 224, 208, 1],\r\n        'violet': [238, 130, 238, 1], 'wheat': [245, 222, 179, 1],\r\n        'white': [255, 255, 255, 1], 'whitesmoke': [245, 245, 245, 1],\r\n        'yellow': [255, 255, 0, 1], 'yellowgreen': [154, 205, 50, 1]\r\n    };\r\n    function clampCssByte(i) {\r\n        i = Math.round(i);\r\n        return i < 0 ? 0 : i > 255 ? 255 : i;\r\n    }\r\n    function clampCssFloat(f) {\r\n        return f < 0 ? 0 : f > 1 ? 1 : f;\r\n    }\r\n    function parseCssInt(val) {\r\n        var str = val;\r\n        if (str.length && str.charAt(str.length - 1) === '%') {\r\n            return clampCssByte(parseFloat(str) / 100 * 255);\r\n        }\r\n        return clampCssByte(parseInt(str, 10));\r\n    }\r\n    function parseCssFloat(val) {\r\n        var str = val;\r\n        if (str.length && str.charAt(str.length - 1) === '%') {\r\n            return clampCssFloat(parseFloat(str) / 100);\r\n        }\r\n        return clampCssFloat(parseFloat(str));\r\n    }\r\n    function cssHueToRgb(m1, m2, h) {\r\n        if (h < 0) {\r\n            h += 1;\r\n        }\r\n        else if (h > 1) {\r\n            h -= 1;\r\n        }\r\n        if (h * 6 < 1) {\r\n            return m1 + (m2 - m1) * h * 6;\r\n        }\r\n        if (h * 2 < 1) {\r\n            return m2;\r\n        }\r\n        if (h * 3 < 2) {\r\n            return m1 + (m2 - m1) * (2 / 3 - h) * 6;\r\n        }\r\n        return m1;\r\n    }\r\n    function setRgba(out, r, g, b, a) {\r\n        out[0] = r;\r\n        out[1] = g;\r\n        out[2] = b;\r\n        out[3] = a;\r\n        return out;\r\n    }\r\n    function copyRgba(out, a) {\r\n        out[0] = a[0];\r\n        out[1] = a[1];\r\n        out[2] = a[2];\r\n        out[3] = a[3];\r\n        return out;\r\n    }\r\n    var colorCache = new LRU(20);\r\n    var lastRemovedArr = null;\r\n    function putToCache(colorStr, rgbaArr) {\r\n        if (lastRemovedArr) {\r\n            copyRgba(lastRemovedArr, rgbaArr);\r\n        }\r\n        lastRemovedArr = colorCache.put(colorStr, lastRemovedArr || (rgbaArr.slice()));\r\n    }\r\n    function parse(colorStr, rgbaArr) {\r\n        if (!colorStr) {\r\n            return;\r\n        }\r\n        rgbaArr = rgbaArr || [];\r\n        var cached = colorCache.get(colorStr);\r\n        if (cached) {\r\n            return copyRgba(rgbaArr, cached);\r\n        }\r\n        colorStr = colorStr + '';\r\n        var str = colorStr.replace(/ /g, '').toLowerCase();\r\n        if (str in kCSSColorTable) {\r\n            copyRgba(rgbaArr, kCSSColorTable[str]);\r\n            putToCache(colorStr, rgbaArr);\r\n            return rgbaArr;\r\n        }\r\n        if (str.charAt(0) === '#') {\r\n            if (str.length === 4) {\r\n                var iv = parseInt(str.substr(1), 16);\r\n                if (!(iv >= 0 && iv <= 0xfff)) {\r\n                    setRgba(rgbaArr, 0, 0, 0, 1);\r\n                    return;\r\n                }\r\n                setRgba(rgbaArr, ((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8), (iv & 0xf0) | ((iv & 0xf0) >> 4), (iv & 0xf) | ((iv & 0xf) << 4), 1);\r\n                putToCache(colorStr, rgbaArr);\r\n                return rgbaArr;\r\n            }\r\n            else if (str.length === 7) {\r\n                var iv = parseInt(str.substr(1), 16);\r\n                if (!(iv >= 0 && iv <= 0xffffff)) {\r\n                    setRgba(rgbaArr, 0, 0, 0, 1);\r\n                    return;\r\n                }\r\n                setRgba(rgbaArr, (iv & 0xff0000) >> 16, (iv & 0xff00) >> 8, iv & 0xff, 1);\r\n                putToCache(colorStr, rgbaArr);\r\n                return rgbaArr;\r\n            }\r\n            return;\r\n        }\r\n        var op = str.indexOf('(');\r\n        var ep = str.indexOf(')');\r\n        if (op !== -1 && ep + 1 === str.length) {\r\n            var fname = str.substr(0, op);\r\n            var params = str.substr(op + 1, ep - (op + 1)).split(',');\r\n            var alpha = 1;\r\n            switch (fname) {\r\n                case 'rgba':\r\n                    if (params.length !== 4) {\r\n                        setRgba(rgbaArr, 0, 0, 0, 1);\r\n                        return;\r\n                    }\r\n                    alpha = parseCssFloat(params.pop());\r\n                case 'rgb':\r\n                    if (params.length !== 3) {\r\n                        setRgba(rgbaArr, 0, 0, 0, 1);\r\n                        return;\r\n                    }\r\n                    setRgba(rgbaArr, parseCssInt(params[0]), parseCssInt(params[1]), parseCssInt(params[2]), alpha);\r\n                    putToCache(colorStr, rgbaArr);\r\n                    return rgbaArr;\r\n                case 'hsla':\r\n                    if (params.length !== 4) {\r\n                        setRgba(rgbaArr, 0, 0, 0, 1);\r\n                        return;\r\n                    }\r\n                    params[3] = parseCssFloat(params[3]);\r\n                    hsla2rgba(params, rgbaArr);\r\n                    putToCache(colorStr, rgbaArr);\r\n                    return rgbaArr;\r\n                case 'hsl':\r\n                    if (params.length !== 3) {\r\n                        setRgba(rgbaArr, 0, 0, 0, 1);\r\n                        return;\r\n                    }\r\n                    hsla2rgba(params, rgbaArr);\r\n                    putToCache(colorStr, rgbaArr);\r\n                    return rgbaArr;\r\n                default:\r\n                    return;\r\n            }\r\n        }\r\n        setRgba(rgbaArr, 0, 0, 0, 1);\r\n        return;\r\n    }\r\n    function hsla2rgba(hsla, rgba) {\r\n        var h = (((parseFloat(hsla[0]) % 360) + 360) % 360) / 360;\r\n        var s = parseCssFloat(hsla[1]);\r\n        var l = parseCssFloat(hsla[2]);\r\n        var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\r\n        var m1 = l * 2 - m2;\r\n        rgba = rgba || [];\r\n        setRgba(rgba, clampCssByte(cssHueToRgb(m1, m2, h + 1 / 3) * 255), clampCssByte(cssHueToRgb(m1, m2, h) * 255), clampCssByte(cssHueToRgb(m1, m2, h - 1 / 3) * 255), 1);\r\n        if (hsla.length === 4) {\r\n            rgba[3] = hsla[3];\r\n        }\r\n        return rgba;\r\n    }\r\n    function lift(color, level) {\r\n        var colorArr = parse(color);\r\n        if (colorArr) {\r\n            for (var i = 0; i < 3; i++) {\r\n                if (level < 0) {\r\n                    colorArr[i] = colorArr[i] * (1 - level) | 0;\r\n                }\r\n                else {\r\n                    colorArr[i] = ((255 - colorArr[i]) * level + colorArr[i]) | 0;\r\n                }\r\n                if (colorArr[i] > 255) {\r\n                    colorArr[i] = 255;\r\n                }\r\n                else if (colorArr[i] < 0) {\r\n                    colorArr[i] = 0;\r\n                }\r\n            }\r\n            return stringify(colorArr, colorArr.length === 4 ? 'rgba' : 'rgb');\r\n        }\r\n    }\r\n    function stringify(arrColor, type) {\r\n        if (!arrColor || !arrColor.length) {\r\n            return;\r\n        }\r\n        var colorStr = arrColor[0] + ',' + arrColor[1] + ',' + arrColor[2];\r\n        if (type === 'rgba' || type === 'hsva' || type === 'hsla') {\r\n            colorStr += ',' + arrColor[3];\r\n        }\r\n        return type + '(' + colorStr + ')';\r\n    }\r\n    function lum(color, backgroundLum) {\r\n        var arr = parse(color);\r\n        return arr\r\n            ? (0.299 * arr[0] + 0.587 * arr[1] + 0.114 * arr[2]) * arr[3] / 255\r\n                + (1 - arr[3]) * backgroundLum\r\n            : 0;\r\n    }\n\n    var arraySlice = Array.prototype.slice;\r\n    function interpolateNumber(p0, p1, percent) {\r\n        return (p1 - p0) * percent + p0;\r\n    }\r\n    function step(p0, p1, percent) {\r\n        return percent > 0.5 ? p1 : p0;\r\n    }\r\n    function interpolate1DArray(out, p0, p1, percent) {\r\n        var len = p0.length;\r\n        for (var i = 0; i < len; i++) {\r\n            out[i] = interpolateNumber(p0[i], p1[i], percent);\r\n        }\r\n    }\r\n    function interpolate2DArray(out, p0, p1, percent) {\r\n        var len = p0.length;\r\n        var len2 = len && p0[0].length;\r\n        for (var i = 0; i < len; i++) {\r\n            if (!out[i]) {\r\n                out[i] = [];\r\n            }\r\n            for (var j = 0; j < len2; j++) {\r\n                out[i][j] = interpolateNumber(p0[i][j], p1[i][j], percent);\r\n            }\r\n        }\r\n    }\r\n    function add1DArray(out, p0, p1, sign) {\r\n        var len = p0.length;\r\n        for (var i = 0; i < len; i++) {\r\n            out[i] = p0[i] + p1[i] * sign;\r\n        }\r\n        return out;\r\n    }\r\n    function add2DArray(out, p0, p1, sign) {\r\n        var len = p0.length;\r\n        var len2 = len && p0[0].length;\r\n        for (var i = 0; i < len; i++) {\r\n            if (!out[i]) {\r\n                out[i] = [];\r\n            }\r\n            for (var j = 0; j < len2; j++) {\r\n                out[i][j] = p0[i][j] + p1[i][j] * sign;\r\n            }\r\n        }\r\n        return out;\r\n    }\r\n    function fillArray(val0, val1, arrDim) {\r\n        var arr0 = val0;\r\n        var arr1 = val1;\r\n        if (!arr0.push || !arr1.push) {\r\n            return;\r\n        }\r\n        var arr0Len = arr0.length;\r\n        var arr1Len = arr1.length;\r\n        if (arr0Len !== arr1Len) {\r\n            var isPreviousLarger = arr0Len > arr1Len;\r\n            if (isPreviousLarger) {\r\n                arr0.length = arr1Len;\r\n            }\r\n            else {\r\n                for (var i = arr0Len; i < arr1Len; i++) {\r\n                    arr0.push(arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i]));\r\n                }\r\n            }\r\n        }\r\n        var len2 = arr0[0] && arr0[0].length;\r\n        for (var i = 0; i < arr0.length; i++) {\r\n            if (arrDim === 1) {\r\n                if (isNaN(arr0[i])) {\r\n                    arr0[i] = arr1[i];\r\n                }\r\n            }\r\n            else {\r\n                for (var j = 0; j < len2; j++) {\r\n                    if (isNaN(arr0[i][j])) {\r\n                        arr0[i][j] = arr1[i][j];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function is1DArraySame(arr0, arr1) {\r\n        var len = arr0.length;\r\n        if (len !== arr1.length) {\r\n            return false;\r\n        }\r\n        for (var i = 0; i < len; i++) {\r\n            if (arr0[i] !== arr1[i]) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    function catmullRomInterpolate(p0, p1, p2, p3, t, t2, t3) {\r\n        var v0 = (p2 - p0) * 0.5;\r\n        var v1 = (p3 - p1) * 0.5;\r\n        return (2 * (p1 - p2) + v0 + v1) * t3\r\n            + (-3 * (p1 - p2) - 2 * v0 - v1) * t2\r\n            + v0 * t + p1;\r\n    }\r\n    function catmullRomInterpolate1DArray(out, p0, p1, p2, p3, t, t2, t3) {\r\n        var len = p0.length;\r\n        for (var i = 0; i < len; i++) {\r\n            out[i] = catmullRomInterpolate(p0[i], p1[i], p2[i], p3[i], t, t2, t3);\r\n        }\r\n    }\r\n    function catmullRomInterpolate2DArray(out, p0, p1, p2, p3, t, t2, t3) {\r\n        var len = p0.length;\r\n        var len2 = p0[0].length;\r\n        for (var i = 0; i < len; i++) {\r\n            if (!out[i]) {\r\n                out[1] = [];\r\n            }\r\n            for (var j = 0; j < len2; j++) {\r\n                out[i][j] = catmullRomInterpolate(p0[i][j], p1[i][j], p2[i][j], p3[i][j], t, t2, t3);\r\n            }\r\n        }\r\n    }\r\n    function cloneValue(value) {\r\n        if (isArrayLike(value)) {\r\n            var len = value.length;\r\n            if (isArrayLike(value[0])) {\r\n                var ret = [];\r\n                for (var i = 0; i < len; i++) {\r\n                    ret.push(arraySlice.call(value[i]));\r\n                }\r\n                return ret;\r\n            }\r\n            return arraySlice.call(value);\r\n        }\r\n        return value;\r\n    }\r\n    function rgba2String(rgba) {\r\n        rgba[0] = Math.floor(rgba[0]);\r\n        rgba[1] = Math.floor(rgba[1]);\r\n        rgba[2] = Math.floor(rgba[2]);\r\n        return 'rgba(' + rgba.join(',') + ')';\r\n    }\r\n    function guessArrayDim(value) {\r\n        return isArrayLike(value && value[0]) ? 2 : 1;\r\n    }\r\n    var tmpRgba = [0, 0, 0, 0];\r\n    var Track = (function () {\r\n        function Track(propName) {\r\n            this.keyframes = [];\r\n            this.maxTime = 0;\r\n            this.arrDim = 0;\r\n            this.interpolable = true;\r\n            this._needsSort = false;\r\n            this._isAllValueEqual = true;\r\n            this._lastFrame = 0;\r\n            this._lastFramePercent = 0;\r\n            this.propName = propName;\r\n        }\r\n        Track.prototype.isFinished = function () {\r\n            return this._finished;\r\n        };\r\n        Track.prototype.setFinished = function () {\r\n            this._finished = true;\r\n            if (this._additiveTrack) {\r\n                this._additiveTrack.setFinished();\r\n            }\r\n        };\r\n        Track.prototype.needsAnimate = function () {\r\n            return !this._isAllValueEqual && this.keyframes.length >= 2 && this.interpolable;\r\n        };\r\n        Track.prototype.getAdditiveTrack = function () {\r\n            return this._additiveTrack;\r\n        };\r\n        Track.prototype.addKeyframe = function (time, value) {\r\n            if (time >= this.maxTime) {\r\n                this.maxTime = time;\r\n            }\r\n            else {\r\n                this._needsSort = true;\r\n            }\r\n            var keyframes = this.keyframes;\r\n            var len = keyframes.length;\r\n            if (this.interpolable) {\r\n                if (isArrayLike(value)) {\r\n                    var arrayDim = guessArrayDim(value);\r\n                    if (len > 0 && this.arrDim !== arrayDim) {\r\n                        this.interpolable = false;\r\n                        return;\r\n                    }\r\n                    if (arrayDim === 1 && typeof value[0] !== 'number'\r\n                        || arrayDim === 2 && typeof value[0][0] !== 'number') {\r\n                        this.interpolable = false;\r\n                        return;\r\n                    }\r\n                    if (len > 0) {\r\n                        var lastFrame = keyframes[len - 1];\r\n                        if (this._isAllValueEqual) {\r\n                            if (arrayDim === 1) {\r\n                                if (!is1DArraySame(value, lastFrame.value)) {\r\n                                    this._isAllValueEqual = false;\r\n                                }\r\n                            }\r\n                            else {\r\n                                this._isAllValueEqual = false;\r\n                            }\r\n                        }\r\n                    }\r\n                    this.arrDim = arrayDim;\r\n                }\r\n                else {\r\n                    if (this.arrDim > 0) {\r\n                        this.interpolable = false;\r\n                        return;\r\n                    }\r\n                    if (typeof value === 'string') {\r\n                        var colorArray = parse(value);\r\n                        if (colorArray) {\r\n                            value = colorArray;\r\n                            this.isValueColor = true;\r\n                        }\r\n                        else {\r\n                            this.interpolable = false;\r\n                        }\r\n                    }\r\n                    else if (typeof value !== 'number') {\r\n                        this.interpolable = false;\r\n                        return;\r\n                    }\r\n                    if (this._isAllValueEqual && len > 0) {\r\n                        var lastFrame = keyframes[len - 1];\r\n                        if (this.isValueColor && !is1DArraySame(lastFrame.value, value)) {\r\n                            this._isAllValueEqual = false;\r\n                        }\r\n                        else if (lastFrame.value !== value) {\r\n                            this._isAllValueEqual = false;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            var kf = {\r\n                time: time,\r\n                value: value,\r\n                percent: 0\r\n            };\r\n            this.keyframes.push(kf);\r\n            return kf;\r\n        };\r\n        Track.prototype.prepare = function (additiveTrack) {\r\n            var kfs = this.keyframes;\r\n            if (this._needsSort) {\r\n                kfs.sort(function (a, b) {\r\n                    return a.time - b.time;\r\n                });\r\n            }\r\n            var arrDim = this.arrDim;\r\n            var kfsLen = kfs.length;\r\n            var lastKf = kfs[kfsLen - 1];\r\n            for (var i = 0; i < kfsLen; i++) {\r\n                kfs[i].percent = kfs[i].time / this.maxTime;\r\n                if (arrDim > 0 && i !== kfsLen - 1) {\r\n                    fillArray(kfs[i].value, lastKf.value, arrDim);\r\n                }\r\n            }\r\n            if (additiveTrack\r\n                && this.needsAnimate()\r\n                && additiveTrack.needsAnimate()\r\n                && arrDim === additiveTrack.arrDim\r\n                && this.isValueColor === additiveTrack.isValueColor\r\n                && !additiveTrack._finished) {\r\n                this._additiveTrack = additiveTrack;\r\n                var startValue = kfs[0].value;\r\n                for (var i = 0; i < kfsLen; i++) {\r\n                    if (arrDim === 0) {\r\n                        if (this.isValueColor) {\r\n                            kfs[i].additiveValue\r\n                                = add1DArray([], kfs[i].value, startValue, -1);\r\n                        }\r\n                        else {\r\n                            kfs[i].additiveValue = kfs[i].value - startValue;\r\n                        }\r\n                    }\r\n                    else if (arrDim === 1) {\r\n                        kfs[i].additiveValue = add1DArray([], kfs[i].value, startValue, -1);\r\n                    }\r\n                    else if (arrDim === 2) {\r\n                        kfs[i].additiveValue = add2DArray([], kfs[i].value, startValue, -1);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        Track.prototype.step = function (target, percent) {\r\n            if (this._finished) {\r\n                return;\r\n            }\r\n            if (this._additiveTrack && this._additiveTrack._finished) {\r\n                this._additiveTrack = null;\r\n            }\r\n            var isAdditive = this._additiveTrack != null;\r\n            var valueKey = isAdditive ? 'additiveValue' : 'value';\r\n            var keyframes = this.keyframes;\r\n            var kfsNum = this.keyframes.length;\r\n            var propName = this.propName;\r\n            var arrDim = this.arrDim;\r\n            var isValueColor = this.isValueColor;\r\n            var frameIdx;\r\n            if (percent < 0) {\r\n                frameIdx = 0;\r\n            }\r\n            else if (percent < this._lastFramePercent) {\r\n                var start = Math.min(this._lastFrame + 1, kfsNum - 1);\r\n                for (frameIdx = start; frameIdx >= 0; frameIdx--) {\r\n                    if (keyframes[frameIdx].percent <= percent) {\r\n                        break;\r\n                    }\r\n                }\r\n                frameIdx = Math.min(frameIdx, kfsNum - 2);\r\n            }\r\n            else {\r\n                for (frameIdx = this._lastFrame; frameIdx < kfsNum; frameIdx++) {\r\n                    if (keyframes[frameIdx].percent > percent) {\r\n                        break;\r\n                    }\r\n                }\r\n                frameIdx = Math.min(frameIdx - 1, kfsNum - 2);\r\n            }\r\n            var nextFrame = keyframes[frameIdx + 1];\r\n            var frame = keyframes[frameIdx];\r\n            if (!(frame && nextFrame)) {\r\n                return;\r\n            }\r\n            this._lastFrame = frameIdx;\r\n            this._lastFramePercent = percent;\r\n            var range = (nextFrame.percent - frame.percent);\r\n            if (range === 0) {\r\n                return;\r\n            }\r\n            var w = (percent - frame.percent) / range;\r\n            var targetArr = isAdditive ? this._additiveValue\r\n                : (isValueColor ? tmpRgba : target[propName]);\r\n            if ((arrDim > 0 || isValueColor) && !targetArr) {\r\n                targetArr = this._additiveValue = [];\r\n            }\r\n            if (this.useSpline) {\r\n                var p1 = keyframes[frameIdx][valueKey];\r\n                var p0 = keyframes[frameIdx === 0 ? frameIdx : frameIdx - 1][valueKey];\r\n                var p2 = keyframes[frameIdx > kfsNum - 2 ? kfsNum - 1 : frameIdx + 1][valueKey];\r\n                var p3 = keyframes[frameIdx > kfsNum - 3 ? kfsNum - 1 : frameIdx + 2][valueKey];\r\n                if (arrDim > 0) {\r\n                    arrDim === 1\r\n                        ? catmullRomInterpolate1DArray(targetArr, p0, p1, p2, p3, w, w * w, w * w * w)\r\n                        : catmullRomInterpolate2DArray(targetArr, p0, p1, p2, p3, w, w * w, w * w * w);\r\n                }\r\n                else if (isValueColor) {\r\n                    catmullRomInterpolate1DArray(targetArr, p0, p1, p2, p3, w, w * w, w * w * w);\r\n                    if (!isAdditive) {\r\n                        target[propName] = rgba2String(targetArr);\r\n                    }\r\n                }\r\n                else {\r\n                    var value = void 0;\r\n                    if (!this.interpolable) {\r\n                        value = p2;\r\n                    }\r\n                    else {\r\n                        value = catmullRomInterpolate(p0, p1, p2, p3, w, w * w, w * w * w);\r\n                    }\r\n                    if (isAdditive) {\r\n                        this._additiveValue = value;\r\n                    }\r\n                    else {\r\n                        target[propName] = value;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (arrDim > 0) {\r\n                    arrDim === 1\r\n                        ? interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w)\r\n                        : interpolate2DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\r\n                }\r\n                else if (isValueColor) {\r\n                    interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\r\n                    if (!isAdditive) {\r\n                        target[propName] = rgba2String(targetArr);\r\n                    }\r\n                }\r\n                else {\r\n                    var value = void 0;\r\n                    if (!this.interpolable) {\r\n                        value = step(frame[valueKey], nextFrame[valueKey], w);\r\n                    }\r\n                    else {\r\n                        value = interpolateNumber(frame[valueKey], nextFrame[valueKey], w);\r\n                    }\r\n                    if (isAdditive) {\r\n                        this._additiveValue = value;\r\n                    }\r\n                    else {\r\n                        target[propName] = value;\r\n                    }\r\n                }\r\n            }\r\n            if (isAdditive) {\r\n                this._addToTarget(target);\r\n            }\r\n        };\r\n        Track.prototype._addToTarget = function (target) {\r\n            var arrDim = this.arrDim;\r\n            var propName = this.propName;\r\n            var additiveValue = this._additiveValue;\r\n            if (arrDim === 0) {\r\n                if (this.isValueColor) {\r\n                    parse(target[propName], tmpRgba);\r\n                    add1DArray(tmpRgba, tmpRgba, additiveValue, 1);\r\n                    target[propName] = rgba2String(tmpRgba);\r\n                }\r\n                else {\r\n                    target[propName] = target[propName] + additiveValue;\r\n                }\r\n            }\r\n            else if (arrDim === 1) {\r\n                add1DArray(target[propName], target[propName], additiveValue, 1);\r\n            }\r\n            else if (arrDim === 2) {\r\n                add2DArray(target[propName], target[propName], additiveValue, 1);\r\n            }\r\n        };\r\n        return Track;\r\n    }());\r\n    var Animator = (function () {\r\n        function Animator(target, loop, additiveTo) {\r\n            this._tracks = {};\r\n            this._trackKeys = [];\r\n            this._delay = 0;\r\n            this._maxTime = 0;\r\n            this._paused = false;\r\n            this._started = 0;\r\n            this._clip = null;\r\n            this._target = target;\r\n            this._loop = loop;\r\n            if (loop) {\r\n                logError('Can\\' use additive animation on looped animation.');\r\n                return;\r\n            }\r\n            this._additiveAnimators = additiveTo;\r\n        }\r\n        Animator.prototype.getTarget = function () {\r\n            return this._target;\r\n        };\r\n        Animator.prototype.changeTarget = function (target) {\r\n            this._target = target;\r\n        };\r\n        Animator.prototype.when = function (time, props) {\r\n            return this.whenWithKeys(time, props, keys(props));\r\n        };\r\n        Animator.prototype.whenWithKeys = function (time, props, propNames) {\r\n            var tracks = this._tracks;\r\n            for (var i = 0; i < propNames.length; i++) {\r\n                var propName = propNames[i];\r\n                var track = tracks[propName];\r\n                if (!track) {\r\n                    track = tracks[propName] = new Track(propName);\r\n                    var initialValue = void 0;\r\n                    var additiveTrack = this._getAdditiveTrack(propName);\r\n                    if (additiveTrack) {\r\n                        var lastFinalKf = additiveTrack.keyframes[additiveTrack.keyframes.length - 1];\r\n                        initialValue = lastFinalKf && lastFinalKf.value;\r\n                        if (additiveTrack.isValueColor && initialValue) {\r\n                            initialValue = rgba2String(initialValue);\r\n                        }\r\n                    }\r\n                    else {\r\n                        initialValue = this._target[propName];\r\n                    }\r\n                    if (initialValue == null) {\r\n                        continue;\r\n                    }\r\n                    if (time !== 0) {\r\n                        track.addKeyframe(0, cloneValue(initialValue));\r\n                    }\r\n                    this._trackKeys.push(propName);\r\n                }\r\n                track.addKeyframe(time, cloneValue(props[propName]));\r\n            }\r\n            this._maxTime = Math.max(this._maxTime, time);\r\n            return this;\r\n        };\r\n        Animator.prototype.pause = function () {\r\n            this._clip.pause();\r\n            this._paused = true;\r\n        };\r\n        Animator.prototype.resume = function () {\r\n            this._clip.resume();\r\n            this._paused = false;\r\n        };\r\n        Animator.prototype.isPaused = function () {\r\n            return !!this._paused;\r\n        };\r\n        Animator.prototype._doneCallback = function () {\r\n            this._setTracksFinished();\r\n            this._clip = null;\r\n            var doneList = this._doneList;\r\n            if (doneList) {\r\n                var len = doneList.length;\r\n                for (var i = 0; i < len; i++) {\r\n                    doneList[i].call(this);\r\n                }\r\n            }\r\n        };\r\n        Animator.prototype._abortedCallback = function () {\r\n            this._setTracksFinished();\r\n            var animation = this.animation;\r\n            var abortedList = this._abortedList;\r\n            if (animation) {\r\n                animation.removeClip(this._clip);\r\n            }\r\n            this._clip = null;\r\n            if (abortedList) {\r\n                for (var i = 0; i < abortedList.length; i++) {\r\n                    abortedList[i].call(this);\r\n                }\r\n            }\r\n        };\r\n        Animator.prototype._setTracksFinished = function () {\r\n            var tracks = this._tracks;\r\n            var tracksKeys = this._trackKeys;\r\n            for (var i = 0; i < tracksKeys.length; i++) {\r\n                tracks[tracksKeys[i]].setFinished();\r\n            }\r\n        };\r\n        Animator.prototype._getAdditiveTrack = function (trackName) {\r\n            var additiveTrack;\r\n            var additiveAnimators = this._additiveAnimators;\r\n            if (additiveAnimators) {\r\n                for (var i = 0; i < additiveAnimators.length; i++) {\r\n                    var track = additiveAnimators[i].getTrack(trackName);\r\n                    if (track) {\r\n                        additiveTrack = track;\r\n                    }\r\n                }\r\n            }\r\n            return additiveTrack;\r\n        };\r\n        Animator.prototype.start = function (easing, forceAnimate) {\r\n            if (this._started > 0) {\r\n                return;\r\n            }\r\n            this._started = 1;\r\n            var self = this;\r\n            var tracks = [];\r\n            for (var i = 0; i < this._trackKeys.length; i++) {\r\n                var propName = this._trackKeys[i];\r\n                var track = this._tracks[propName];\r\n                var additiveTrack = this._getAdditiveTrack(propName);\r\n                var kfs = track.keyframes;\r\n                track.prepare(additiveTrack);\r\n                if (track.needsAnimate()) {\r\n                    tracks.push(track);\r\n                }\r\n                else if (!track.interpolable) {\r\n                    var lastKf = kfs[kfs.length - 1];\r\n                    if (lastKf) {\r\n                        self._target[track.propName] = lastKf.value;\r\n                    }\r\n                }\r\n            }\r\n            if (tracks.length || forceAnimate) {\r\n                var clip = new Clip({\r\n                    life: this._maxTime,\r\n                    loop: this._loop,\r\n                    delay: this._delay,\r\n                    onframe: function (percent) {\r\n                        self._started = 2;\r\n                        var additiveAnimators = self._additiveAnimators;\r\n                        if (additiveAnimators) {\r\n                            var stillHasAdditiveAnimator = false;\r\n                            for (var i = 0; i < additiveAnimators.length; i++) {\r\n                                if (additiveAnimators[i]._clip) {\r\n                                    stillHasAdditiveAnimator = true;\r\n                                    break;\r\n                                }\r\n                            }\r\n                            if (!stillHasAdditiveAnimator) {\r\n                                self._additiveAnimators = null;\r\n                            }\r\n                        }\r\n                        for (var i = 0; i < tracks.length; i++) {\r\n                            tracks[i].step(self._target, percent);\r\n                        }\r\n                        var onframeList = self._onframeList;\r\n                        if (onframeList) {\r\n                            for (var i = 0; i < onframeList.length; i++) {\r\n                                onframeList[i](self._target, percent);\r\n                            }\r\n                        }\r\n                    },\r\n                    ondestroy: function () {\r\n                        self._doneCallback();\r\n                    }\r\n                });\r\n                this._clip = clip;\r\n                if (this.animation) {\r\n                    this.animation.addClip(clip);\r\n                }\r\n                if (easing && easing !== 'spline') {\r\n                    clip.easing = easing;\r\n                }\r\n            }\r\n            else {\r\n                this._doneCallback();\r\n            }\r\n            return this;\r\n        };\r\n        Animator.prototype.stop = function (forwardToLast) {\r\n            if (!this._clip) {\r\n                return;\r\n            }\r\n            var clip = this._clip;\r\n            if (forwardToLast) {\r\n                clip.onframe(1);\r\n            }\r\n            this._abortedCallback();\r\n        };\r\n        Animator.prototype.delay = function (time) {\r\n            this._delay = time;\r\n            return this;\r\n        };\r\n        Animator.prototype.during = function (cb) {\r\n            if (cb) {\r\n                if (!this._onframeList) {\r\n                    this._onframeList = [];\r\n                }\r\n                this._onframeList.push(cb);\r\n            }\r\n            return this;\r\n        };\r\n        Animator.prototype.done = function (cb) {\r\n            if (cb) {\r\n                if (!this._doneList) {\r\n                    this._doneList = [];\r\n                }\r\n                this._doneList.push(cb);\r\n            }\r\n            return this;\r\n        };\r\n        Animator.prototype.aborted = function (cb) {\r\n            if (cb) {\r\n                if (!this._abortedList) {\r\n                    this._abortedList = [];\r\n                }\r\n                this._abortedList.push(cb);\r\n            }\r\n            return this;\r\n        };\r\n        Animator.prototype.getClip = function () {\r\n            return this._clip;\r\n        };\r\n        Animator.prototype.getTrack = function (propName) {\r\n            return this._tracks[propName];\r\n        };\r\n        Animator.prototype.stopTracks = function (propNames, forwardToLast) {\r\n            if (!propNames.length || !this._clip) {\r\n                return true;\r\n            }\r\n            var tracks = this._tracks;\r\n            var tracksKeys = this._trackKeys;\r\n            for (var i = 0; i < propNames.length; i++) {\r\n                var track = tracks[propNames[i]];\r\n                if (track) {\r\n                    if (forwardToLast) {\r\n                        track.step(this._target, 1);\r\n                    }\r\n                    else if (this._started === 1) {\r\n                        track.step(this._target, 0);\r\n                    }\r\n                    track.setFinished();\r\n                }\r\n            }\r\n            var allAborted = true;\r\n            for (var i = 0; i < tracksKeys.length; i++) {\r\n                if (!tracks[tracksKeys[i]].isFinished()) {\r\n                    allAborted = false;\r\n                    break;\r\n                }\r\n            }\r\n            if (allAborted) {\r\n                this._abortedCallback();\r\n            }\r\n            return allAborted;\r\n        };\r\n        Animator.prototype.saveFinalToTarget = function (target, trackKeys) {\r\n            if (!target) {\r\n                return;\r\n            }\r\n            trackKeys = trackKeys || this._trackKeys;\r\n            for (var i = 0; i < trackKeys.length; i++) {\r\n                var propName = trackKeys[i];\r\n                var track = this._tracks[propName];\r\n                if (!track || track.isFinished()) {\r\n                    continue;\r\n                }\r\n                var kfs = track.keyframes;\r\n                var lastKf = kfs[kfs.length - 1];\r\n                if (lastKf) {\r\n                    var val = cloneValue(lastKf.value);\r\n                    if (track.isValueColor) {\r\n                        val = rgba2String(val);\r\n                    }\r\n                    target[propName] = val;\r\n                }\r\n            }\r\n        };\r\n        Animator.prototype.__changeFinalValue = function (finalProps, trackKeys) {\r\n            trackKeys = trackKeys || keys(finalProps);\r\n            for (var i = 0; i < trackKeys.length; i++) {\r\n                var propName = trackKeys[i];\r\n                var track = this._tracks[propName];\r\n                if (!track) {\r\n                    continue;\r\n                }\r\n                var kfs = track.keyframes;\r\n                if (kfs.length > 1) {\r\n                    var lastKf = kfs.pop();\r\n                    track.addKeyframe(lastKf.time, finalProps[propName]);\r\n                    track.prepare(track.getAdditiveTrack());\r\n                }\r\n            }\r\n        };\r\n        return Animator;\r\n    }());\n\n    var Animation = (function (_super) {\r\n        __extends(Animation, _super);\r\n        function Animation(opts) {\r\n            var _this = _super.call(this) || this;\r\n            _this._running = false;\r\n            _this._time = 0;\r\n            _this._pausedTime = 0;\r\n            _this._pauseStart = 0;\r\n            _this._paused = false;\r\n            opts = opts || {};\r\n            _this.stage = opts.stage || {};\r\n            _this.onframe = opts.onframe || function () { };\r\n            return _this;\r\n        }\r\n        Animation.prototype.addClip = function (clip) {\r\n            if (clip.animation) {\r\n                this.removeClip(clip);\r\n            }\r\n            if (!this._clipsHead) {\r\n                this._clipsHead = this._clipsTail = clip;\r\n            }\r\n            else {\r\n                this._clipsTail.next = clip;\r\n                clip.prev = this._clipsTail;\r\n                clip.next = null;\r\n                this._clipsTail = clip;\r\n            }\r\n            clip.animation = this;\r\n        };\r\n        Animation.prototype.addAnimator = function (animator) {\r\n            animator.animation = this;\r\n            var clip = animator.getClip();\r\n            if (clip) {\r\n                this.addClip(clip);\r\n            }\r\n        };\r\n        Animation.prototype.removeClip = function (clip) {\r\n            if (!clip.animation) {\r\n                return;\r\n            }\r\n            var prev = clip.prev;\r\n            var next = clip.next;\r\n            if (prev) {\r\n                prev.next = next;\r\n            }\r\n            else {\r\n                this._clipsHead = next;\r\n            }\r\n            if (next) {\r\n                next.prev = prev;\r\n            }\r\n            else {\r\n                this._clipsTail = prev;\r\n            }\r\n            clip.next = clip.prev = clip.animation = null;\r\n        };\r\n        Animation.prototype.removeAnimator = function (animator) {\r\n            var clip = animator.getClip();\r\n            if (clip) {\r\n                this.removeClip(clip);\r\n            }\r\n            animator.animation = null;\r\n        };\r\n        Animation.prototype.update = function (notTriggerStageUpdate) {\r\n            var time = new Date().getTime() - this._pausedTime;\r\n            var delta = time - this._time;\r\n            var clip = this._clipsHead;\r\n            while (clip) {\r\n                var nextClip = clip.next;\r\n                var finished = clip.step(time, delta);\r\n                if (finished) {\r\n                    clip.ondestroy && clip.ondestroy();\r\n                    this.removeClip(clip);\r\n                    clip = nextClip;\r\n                }\r\n                else {\r\n                    clip = nextClip;\r\n                }\r\n            }\r\n            this._time = time;\r\n            this.onframe(delta);\r\n            this.trigger('frame', delta);\r\n            if (this.stage.update && !notTriggerStageUpdate) {\r\n                this.stage.update();\r\n            }\r\n        };\r\n        Animation.prototype._startLoop = function () {\r\n            var self = this;\r\n            this._running = true;\r\n            function step() {\r\n                if (self._running) {\r\n                    requestAnimationFrame$1(step);\r\n                    !self._paused && self.update();\r\n                }\r\n            }\r\n            requestAnimationFrame$1(step);\r\n        };\r\n        Animation.prototype.start = function () {\r\n            if (this._running) {\r\n                return;\r\n            }\r\n            this._time = new Date().getTime();\r\n            this._pausedTime = 0;\r\n            this._startLoop();\r\n        };\r\n        Animation.prototype.stop = function () {\r\n            this._running = false;\r\n        };\r\n        Animation.prototype.pause = function () {\r\n            if (!this._paused) {\r\n                this._pauseStart = new Date().getTime();\r\n                this._paused = true;\r\n            }\r\n        };\r\n        Animation.prototype.resume = function () {\r\n            if (this._paused) {\r\n                this._pausedTime += (new Date().getTime()) - this._pauseStart;\r\n                this._paused = false;\r\n            }\r\n        };\r\n        Animation.prototype.clear = function () {\r\n            var clip = this._clipsHead;\r\n            while (clip) {\r\n                var nextClip = clip.next;\r\n                clip.prev = clip.next = clip.animation = null;\r\n                clip = nextClip;\r\n            }\r\n            this._clipsHead = this._clipsTail = null;\r\n        };\r\n        Animation.prototype.isFinished = function () {\r\n            return this._clipsHead == null;\r\n        };\r\n        Animation.prototype.animate = function (target, options) {\r\n            options = options || {};\r\n            this.start();\r\n            var animator = new Animator(target, options.loop);\r\n            this.addAnimator(animator);\r\n            return animator;\r\n        };\r\n        return Animation;\r\n    }(Eventful));\n\n    var TOUCH_CLICK_DELAY = 300;\r\n    var globalEventSupported = env.domSupported;\r\n    var localNativeListenerNames = (function () {\r\n        var mouseHandlerNames = [\r\n            'click', 'dblclick', 'mousewheel', 'wheel', 'mouseout',\r\n            'mouseup', 'mousedown', 'mousemove', 'contextmenu'\r\n        ];\r\n        var touchHandlerNames = [\r\n            'touchstart', 'touchend', 'touchmove'\r\n        ];\r\n        var pointerEventNameMap = {\r\n            pointerdown: 1, pointerup: 1, pointermove: 1, pointerout: 1\r\n        };\r\n        var pointerHandlerNames = map(mouseHandlerNames, function (name) {\r\n            var nm = name.replace('mouse', 'pointer');\r\n            return pointerEventNameMap.hasOwnProperty(nm) ? nm : name;\r\n        });\r\n        return {\r\n            mouse: mouseHandlerNames,\r\n            touch: touchHandlerNames,\r\n            pointer: pointerHandlerNames\r\n        };\r\n    })();\r\n    var globalNativeListenerNames = {\r\n        mouse: ['mousemove', 'mouseup'],\r\n        pointer: ['pointermove', 'pointerup']\r\n    };\r\n    var wheelEventSupported = false;\r\n    function isPointerFromTouch(event) {\r\n        var pointerType = event.pointerType;\r\n        return pointerType === 'pen' || pointerType === 'touch';\r\n    }\r\n    function setTouchTimer(scope) {\r\n        scope.touching = true;\r\n        if (scope.touchTimer != null) {\r\n            clearTimeout(scope.touchTimer);\r\n            scope.touchTimer = null;\r\n        }\r\n        scope.touchTimer = setTimeout(function () {\r\n            scope.touching = false;\r\n            scope.touchTimer = null;\r\n        }, 700);\r\n    }\r\n    function markTouch(event) {\r\n        event && (event.zrByTouch = true);\r\n    }\r\n    function normalizeGlobalEvent(instance, event) {\r\n        return normalizeEvent(instance.dom, new FakeGlobalEvent(instance, event), true);\r\n    }\r\n    function isLocalEl(instance, el) {\r\n        var elTmp = el;\r\n        var isLocal = false;\r\n        while (elTmp && elTmp.nodeType !== 9\r\n            && !(isLocal = elTmp.domBelongToZr\r\n                || (elTmp !== el && elTmp === instance.painterRoot))) {\r\n            elTmp = elTmp.parentNode;\r\n        }\r\n        return isLocal;\r\n    }\r\n    var FakeGlobalEvent = (function () {\r\n        function FakeGlobalEvent(instance, event) {\r\n            this.stopPropagation = noop;\r\n            this.stopImmediatePropagation = noop;\r\n            this.preventDefault = noop;\r\n            this.type = event.type;\r\n            this.target = this.currentTarget = instance.dom;\r\n            this.pointerType = event.pointerType;\r\n            this.clientX = event.clientX;\r\n            this.clientY = event.clientY;\r\n        }\r\n        return FakeGlobalEvent;\r\n    }());\r\n    var localDOMHandlers = {\r\n        mousedown: function (event) {\r\n            event = normalizeEvent(this.dom, event);\r\n            this.__mayPointerCapture = [event.zrX, event.zrY];\r\n            this.trigger('mousedown', event);\r\n        },\r\n        mousemove: function (event) {\r\n            event = normalizeEvent(this.dom, event);\r\n            var downPoint = this.__mayPointerCapture;\r\n            if (downPoint && (event.zrX !== downPoint[0] || event.zrY !== downPoint[1])) {\r\n                this.__togglePointerCapture(true);\r\n            }\r\n            this.trigger('mousemove', event);\r\n        },\r\n        mouseup: function (event) {\r\n            event = normalizeEvent(this.dom, event);\r\n            this.__togglePointerCapture(false);\r\n            this.trigger('mouseup', event);\r\n        },\r\n        mouseout: function (event) {\r\n            event = normalizeEvent(this.dom, event);\r\n            if (this.__pointerCapturing) {\r\n                event.zrEventControl = 'no_globalout';\r\n            }\r\n            var element = event.toElement || event.relatedTarget;\r\n            event.zrIsToLocalDOM = isLocalEl(this, element);\r\n            this.trigger('mouseout', event);\r\n        },\r\n        wheel: function (event) {\r\n            wheelEventSupported = true;\r\n            event = normalizeEvent(this.dom, event);\r\n            this.trigger('mousewheel', event);\r\n        },\r\n        mousewheel: function (event) {\r\n            if (wheelEventSupported) {\r\n                return;\r\n            }\r\n            event = normalizeEvent(this.dom, event);\r\n            this.trigger('mousewheel', event);\r\n        },\r\n        touchstart: function (event) {\r\n            event = normalizeEvent(this.dom, event);\r\n            markTouch(event);\r\n            this.__lastTouchMoment = new Date();\r\n            this.handler.processGesture(event, 'start');\r\n            localDOMHandlers.mousemove.call(this, event);\r\n            localDOMHandlers.mousedown.call(this, event);\r\n        },\r\n        touchmove: function (event) {\r\n            event = normalizeEvent(this.dom, event);\r\n            markTouch(event);\r\n            this.handler.processGesture(event, 'change');\r\n            localDOMHandlers.mousemove.call(this, event);\r\n        },\r\n        touchend: function (event) {\r\n            event = normalizeEvent(this.dom, event);\r\n            markTouch(event);\r\n            this.handler.processGesture(event, 'end');\r\n            localDOMHandlers.mouseup.call(this, event);\r\n            if (+new Date() - (+this.__lastTouchMoment) < TOUCH_CLICK_DELAY) {\r\n                localDOMHandlers.click.call(this, event);\r\n            }\r\n        },\r\n        pointerdown: function (event) {\r\n            localDOMHandlers.mousedown.call(this, event);\r\n        },\r\n        pointermove: function (event) {\r\n            if (!isPointerFromTouch(event)) {\r\n                localDOMHandlers.mousemove.call(this, event);\r\n            }\r\n        },\r\n        pointerup: function (event) {\r\n            localDOMHandlers.mouseup.call(this, event);\r\n        },\r\n        pointerout: function (event) {\r\n            if (!isPointerFromTouch(event)) {\r\n                localDOMHandlers.mouseout.call(this, event);\r\n            }\r\n        }\r\n    };\r\n    each(['click', 'dblclick', 'contextmenu'], function (name) {\r\n        localDOMHandlers[name] = function (event) {\r\n            event = normalizeEvent(this.dom, event);\r\n            this.trigger(name, event);\r\n        };\r\n    });\r\n    var globalDOMHandlers = {\r\n        pointermove: function (event) {\r\n            if (!isPointerFromTouch(event)) {\r\n                globalDOMHandlers.mousemove.call(this, event);\r\n            }\r\n        },\r\n        pointerup: function (event) {\r\n            globalDOMHandlers.mouseup.call(this, event);\r\n        },\r\n        mousemove: function (event) {\r\n            this.trigger('mousemove', event);\r\n        },\r\n        mouseup: function (event) {\r\n            var pointerCaptureReleasing = this.__pointerCapturing;\r\n            this.__togglePointerCapture(false);\r\n            this.trigger('mouseup', event);\r\n            if (pointerCaptureReleasing) {\r\n                event.zrEventControl = 'only_globalout';\r\n                this.trigger('mouseout', event);\r\n            }\r\n        }\r\n    };\r\n    function mountLocalDOMEventListeners(instance, scope) {\r\n        var domHandlers = scope.domHandlers;\r\n        if (env.pointerEventsSupported) {\r\n            each(localNativeListenerNames.pointer, function (nativeEventName) {\r\n                mountSingleDOMEventListener(scope, nativeEventName, function (event) {\r\n                    domHandlers[nativeEventName].call(instance, event);\r\n                });\r\n            });\r\n        }\r\n        else {\r\n            if (env.touchEventsSupported) {\r\n                each(localNativeListenerNames.touch, function (nativeEventName) {\r\n                    mountSingleDOMEventListener(scope, nativeEventName, function (event) {\r\n                        domHandlers[nativeEventName].call(instance, event);\r\n                        setTouchTimer(scope);\r\n                    });\r\n                });\r\n            }\r\n            each(localNativeListenerNames.mouse, function (nativeEventName) {\r\n                mountSingleDOMEventListener(scope, nativeEventName, function (event) {\r\n                    event = getNativeEvent(event);\r\n                    if (!scope.touching) {\r\n                        domHandlers[nativeEventName].call(instance, event);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n    function mountGlobalDOMEventListeners(instance, scope) {\r\n        if (env.pointerEventsSupported) {\r\n            each(globalNativeListenerNames.pointer, mount);\r\n        }\r\n        else if (!env.touchEventsSupported) {\r\n            each(globalNativeListenerNames.mouse, mount);\r\n        }\r\n        function mount(nativeEventName) {\r\n            function nativeEventListener(event) {\r\n                event = getNativeEvent(event);\r\n                if (!isLocalEl(instance, event.target)) {\r\n                    event = normalizeGlobalEvent(instance, event);\r\n                    scope.domHandlers[nativeEventName].call(instance, event);\r\n                }\r\n            }\r\n            mountSingleDOMEventListener(scope, nativeEventName, nativeEventListener, { capture: true });\r\n        }\r\n    }\r\n    function mountSingleDOMEventListener(scope, nativeEventName, listener, opt) {\r\n        scope.mounted[nativeEventName] = listener;\r\n        scope.listenerOpts[nativeEventName] = opt;\r\n        addEventListener(scope.domTarget, nativeEventName, listener, opt);\r\n    }\r\n    function unmountDOMEventListeners(scope) {\r\n        var mounted = scope.mounted;\r\n        for (var nativeEventName in mounted) {\r\n            if (mounted.hasOwnProperty(nativeEventName)) {\r\n                removeEventListener(scope.domTarget, nativeEventName, mounted[nativeEventName], scope.listenerOpts[nativeEventName]);\r\n            }\r\n        }\r\n        scope.mounted = {};\r\n    }\r\n    var DOMHandlerScope = (function () {\r\n        function DOMHandlerScope(domTarget, domHandlers) {\r\n            this.mounted = {};\r\n            this.listenerOpts = {};\r\n            this.touching = false;\r\n            this.domTarget = domTarget;\r\n            this.domHandlers = domHandlers;\r\n        }\r\n        return DOMHandlerScope;\r\n    }());\r\n    var HandlerDomProxy = (function (_super) {\r\n        __extends(HandlerDomProxy, _super);\r\n        function HandlerDomProxy(dom, painterRoot) {\r\n            var _this = _super.call(this) || this;\r\n            _this.__pointerCapturing = false;\r\n            _this.dom = dom;\r\n            _this.painterRoot = painterRoot;\r\n            _this._localHandlerScope = new DOMHandlerScope(dom, localDOMHandlers);\r\n            if (globalEventSupported) {\r\n                _this._globalHandlerScope = new DOMHandlerScope(document, globalDOMHandlers);\r\n            }\r\n            mountLocalDOMEventListeners(_this, _this._localHandlerScope);\r\n            return _this;\r\n        }\r\n        HandlerDomProxy.prototype.dispose = function () {\r\n            unmountDOMEventListeners(this._localHandlerScope);\r\n            if (globalEventSupported) {\r\n                unmountDOMEventListeners(this._globalHandlerScope);\r\n            }\r\n        };\r\n        HandlerDomProxy.prototype.setCursor = function (cursorStyle) {\r\n            this.dom.style && (this.dom.style.cursor = cursorStyle || 'default');\r\n        };\r\n        HandlerDomProxy.prototype.__togglePointerCapture = function (isPointerCapturing) {\r\n            this.__mayPointerCapture = null;\r\n            if (globalEventSupported\r\n                && ((+this.__pointerCapturing) ^ (+isPointerCapturing))) {\r\n                this.__pointerCapturing = isPointerCapturing;\r\n                var globalHandlerScope = this._globalHandlerScope;\r\n                isPointerCapturing\r\n                    ? mountGlobalDOMEventListeners(this, globalHandlerScope)\r\n                    : unmountDOMEventListeners(globalHandlerScope);\r\n            }\r\n        };\r\n        return HandlerDomProxy;\r\n    }(Eventful));\n\n    function create$1() {\r\n        return [1, 0, 0, 1, 0, 0];\r\n    }\r\n    function identity(out) {\r\n        out[0] = 1;\r\n        out[1] = 0;\r\n        out[2] = 0;\r\n        out[3] = 1;\r\n        out[4] = 0;\r\n        out[5] = 0;\r\n        return out;\r\n    }\r\n    function copy(out, m) {\r\n        out[0] = m[0];\r\n        out[1] = m[1];\r\n        out[2] = m[2];\r\n        out[3] = m[3];\r\n        out[4] = m[4];\r\n        out[5] = m[5];\r\n        return out;\r\n    }\r\n    function mul(out, m1, m2) {\r\n        var out0 = m1[0] * m2[0] + m1[2] * m2[1];\r\n        var out1 = m1[1] * m2[0] + m1[3] * m2[1];\r\n        var out2 = m1[0] * m2[2] + m1[2] * m2[3];\r\n        var out3 = m1[1] * m2[2] + m1[3] * m2[3];\r\n        var out4 = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];\r\n        var out5 = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\r\n        out[0] = out0;\r\n        out[1] = out1;\r\n        out[2] = out2;\r\n        out[3] = out3;\r\n        out[4] = out4;\r\n        out[5] = out5;\r\n        return out;\r\n    }\r\n    function translate(out, a, v) {\r\n        out[0] = a[0];\r\n        out[1] = a[1];\r\n        out[2] = a[2];\r\n        out[3] = a[3];\r\n        out[4] = a[4] + v[0];\r\n        out[5] = a[5] + v[1];\r\n        return out;\r\n    }\r\n    function rotate(out, a, rad) {\r\n        var aa = a[0];\r\n        var ac = a[2];\r\n        var atx = a[4];\r\n        var ab = a[1];\r\n        var ad = a[3];\r\n        var aty = a[5];\r\n        var st = Math.sin(rad);\r\n        var ct = Math.cos(rad);\r\n        out[0] = aa * ct + ab * st;\r\n        out[1] = -aa * st + ab * ct;\r\n        out[2] = ac * ct + ad * st;\r\n        out[3] = -ac * st + ct * ad;\r\n        out[4] = ct * atx + st * aty;\r\n        out[5] = ct * aty - st * atx;\r\n        return out;\r\n    }\r\n    function scale$1(out, a, v) {\r\n        var vx = v[0];\r\n        var vy = v[1];\r\n        out[0] = a[0] * vx;\r\n        out[1] = a[1] * vy;\r\n        out[2] = a[2] * vx;\r\n        out[3] = a[3] * vy;\r\n        out[4] = a[4] * vx;\r\n        out[5] = a[5] * vy;\r\n        return out;\r\n    }\r\n    function invert(out, a) {\r\n        var aa = a[0];\r\n        var ac = a[2];\r\n        var atx = a[4];\r\n        var ab = a[1];\r\n        var ad = a[3];\r\n        var aty = a[5];\r\n        var det = aa * ad - ab * ac;\r\n        if (!det) {\r\n            return null;\r\n        }\r\n        det = 1.0 / det;\r\n        out[0] = ad * det;\r\n        out[1] = -ab * det;\r\n        out[2] = -ac * det;\r\n        out[3] = aa * det;\r\n        out[4] = (ac * aty - ad * atx) * det;\r\n        out[5] = (ab * atx - aa * aty) * det;\r\n        return out;\r\n    }\n\n    var mIdentity = identity;\r\n    var EPSILON = 5e-5;\r\n    function isNotAroundZero(val) {\r\n        return val > EPSILON || val < -EPSILON;\r\n    }\r\n    var scaleTmp = [];\r\n    var tmpTransform = [];\r\n    var originTransform = create$1();\r\n    var abs = Math.abs;\r\n    var Transformable = (function () {\r\n        function Transformable() {\r\n        }\r\n        Transformable.prototype.setPosition = function (arr) {\r\n            this.x = arr[0];\r\n            this.y = arr[1];\r\n        };\r\n        Transformable.prototype.setScale = function (arr) {\r\n            this.scaleX = arr[0];\r\n            this.scaleY = arr[1];\r\n        };\r\n        Transformable.prototype.setOrigin = function (arr) {\r\n            this.originX = arr[0];\r\n            this.originY = arr[1];\r\n        };\r\n        Transformable.prototype.needLocalTransform = function () {\r\n            return isNotAroundZero(this.rotation)\r\n                || isNotAroundZero(this.x)\r\n                || isNotAroundZero(this.y)\r\n                || isNotAroundZero(this.scaleX - 1)\r\n                || isNotAroundZero(this.scaleY - 1);\r\n        };\r\n        Transformable.prototype.updateTransform = function () {\r\n            var parent = this.parent;\r\n            var parentHasTransform = parent && parent.transform;\r\n            var needLocalTransform = this.needLocalTransform();\r\n            var m = this.transform;\r\n            if (!(needLocalTransform || parentHasTransform)) {\r\n                m && mIdentity(m);\r\n                return;\r\n            }\r\n            m = m || create$1();\r\n            if (needLocalTransform) {\r\n                this.getLocalTransform(m);\r\n            }\r\n            else {\r\n                mIdentity(m);\r\n            }\r\n            if (parentHasTransform) {\r\n                if (needLocalTransform) {\r\n                    mul(m, parent.transform, m);\r\n                }\r\n                else {\r\n                    copy(m, parent.transform);\r\n                }\r\n            }\r\n            this.transform = m;\r\n            this._resolveGlobalScaleRatio(m);\r\n        };\r\n        Transformable.prototype._resolveGlobalScaleRatio = function (m) {\r\n            var globalScaleRatio = this.globalScaleRatio;\r\n            if (globalScaleRatio != null && globalScaleRatio !== 1) {\r\n                this.getGlobalScale(scaleTmp);\r\n                var relX = scaleTmp[0] < 0 ? -1 : 1;\r\n                var relY = scaleTmp[1] < 0 ? -1 : 1;\r\n                var sx = ((scaleTmp[0] - relX) * globalScaleRatio + relX) / scaleTmp[0] || 0;\r\n                var sy = ((scaleTmp[1] - relY) * globalScaleRatio + relY) / scaleTmp[1] || 0;\r\n                m[0] *= sx;\r\n                m[1] *= sx;\r\n                m[2] *= sy;\r\n                m[3] *= sy;\r\n            }\r\n            this.invTransform = this.invTransform || create$1();\r\n            invert(this.invTransform, m);\r\n        };\r\n        Transformable.prototype.getLocalTransform = function (m) {\r\n            return Transformable.getLocalTransform(this, m);\r\n        };\r\n        Transformable.prototype.getComputedTransform = function () {\r\n            var transformNode = this;\r\n            var ancestors = [];\r\n            while (transformNode) {\r\n                ancestors.push(transformNode);\r\n                transformNode = transformNode.parent;\r\n            }\r\n            while (transformNode = ancestors.pop()) {\r\n                transformNode.updateTransform();\r\n            }\r\n            return this.transform;\r\n        };\r\n        Transformable.prototype.setLocalTransform = function (m) {\r\n            if (!m) {\r\n                return;\r\n            }\r\n            var sx = m[0] * m[0] + m[1] * m[1];\r\n            var sy = m[2] * m[2] + m[3] * m[3];\r\n            if (isNotAroundZero(sx - 1)) {\r\n                sx = Math.sqrt(sx);\r\n            }\r\n            if (isNotAroundZero(sy - 1)) {\r\n                sy = Math.sqrt(sy);\r\n            }\r\n            this.rotation = Math.atan2(-m[1] / sy, m[0] / sx);\r\n            if (m[0] < 0) {\r\n                sx = -sx;\r\n            }\r\n            if (m[3] < 0) {\r\n                sy = -sy;\r\n            }\r\n            if (sx < 0 && sy < 0) {\r\n                this.rotation += Math.PI;\r\n                sx = -sx;\r\n                sy = -sy;\r\n            }\r\n            this.x = m[4];\r\n            this.y = m[5];\r\n            this.scaleX = sx;\r\n            this.scaleY = sy;\r\n        };\r\n        Transformable.prototype.decomposeTransform = function () {\r\n            if (!this.transform) {\r\n                return;\r\n            }\r\n            var parent = this.parent;\r\n            var m = this.transform;\r\n            if (parent && parent.transform) {\r\n                mul(tmpTransform, parent.invTransform, m);\r\n                m = tmpTransform;\r\n            }\r\n            var ox = this.originX;\r\n            var oy = this.originY;\r\n            if (ox || oy) {\r\n                originTransform[4] = ox;\r\n                originTransform[5] = oy;\r\n                mul(tmpTransform, m, originTransform);\r\n                tmpTransform[4] -= ox;\r\n                tmpTransform[5] -= oy;\r\n                m = tmpTransform;\r\n            }\r\n            this.setLocalTransform(m);\r\n        };\r\n        Transformable.prototype.getGlobalScale = function (out) {\r\n            var m = this.transform;\r\n            out = out || [];\r\n            if (!m) {\r\n                out[0] = 1;\r\n                out[1] = 1;\r\n                return out;\r\n            }\r\n            out[0] = Math.sqrt(m[0] * m[0] + m[1] * m[1]);\r\n            out[1] = Math.sqrt(m[2] * m[2] + m[3] * m[3]);\r\n            if (m[0] < 0) {\r\n                out[0] = -out[0];\r\n            }\r\n            if (m[3] < 0) {\r\n                out[1] = -out[1];\r\n            }\r\n            return out;\r\n        };\r\n        Transformable.prototype.transformCoordToLocal = function (x, y) {\r\n            var v2 = [x, y];\r\n            var invTransform = this.invTransform;\r\n            if (invTransform) {\r\n                applyTransform(v2, v2, invTransform);\r\n            }\r\n            return v2;\r\n        };\r\n        Transformable.prototype.transformCoordToGlobal = function (x, y) {\r\n            var v2 = [x, y];\r\n            var transform = this.transform;\r\n            if (transform) {\r\n                applyTransform(v2, v2, transform);\r\n            }\r\n            return v2;\r\n        };\r\n        Transformable.prototype.getLineScale = function () {\r\n            var m = this.transform;\r\n            return m && abs(m[0] - 1) > 1e-10 && abs(m[3] - 1) > 1e-10\r\n                ? Math.sqrt(abs(m[0] * m[3] - m[2] * m[1]))\r\n                : 1;\r\n        };\r\n        Transformable.getLocalTransform = function (target, m) {\r\n            m = m || [];\r\n            mIdentity(m);\r\n            var ox = target.originX || 0;\r\n            var oy = target.originY || 0;\r\n            var sx = target.scaleX;\r\n            var sy = target.scaleY;\r\n            var rotation = target.rotation || 0;\r\n            var x = target.x;\r\n            var y = target.y;\r\n            m[4] -= ox;\r\n            m[5] -= oy;\r\n            m[0] *= sx;\r\n            m[1] *= sy;\r\n            m[2] *= sx;\r\n            m[3] *= sy;\r\n            m[4] *= sx;\r\n            m[5] *= sy;\r\n            if (rotation) {\r\n                rotate(m, m, rotation);\r\n            }\r\n            m[4] += ox;\r\n            m[5] += oy;\r\n            m[4] += x;\r\n            m[5] += y;\r\n            return m;\r\n        };\r\n        Transformable.initDefaultProps = (function () {\r\n            var proto = Transformable.prototype;\r\n            proto.x = 0;\r\n            proto.y = 0;\r\n            proto.scaleX = 1;\r\n            proto.scaleY = 1;\r\n            proto.originX = 0;\r\n            proto.originY = 0;\r\n            proto.rotation = 0;\r\n            proto.globalScaleRatio = 1;\r\n        })();\r\n        return Transformable;\r\n    }());\n\n    var Point = (function () {\r\n        function Point(x, y) {\r\n            this.x = x || 0;\r\n            this.y = y || 0;\r\n        }\r\n        Point.prototype.copy = function (other) {\r\n            this.x = other.x;\r\n            this.y = other.y;\r\n            return this;\r\n        };\r\n        Point.prototype.clone = function () {\r\n            return new Point(this.x, this.y);\r\n        };\r\n        Point.prototype.set = function (x, y) {\r\n            this.x = x;\r\n            this.y = y;\r\n            return this;\r\n        };\r\n        Point.prototype.equal = function (other) {\r\n            return other.x === this.x && other.y === this.y;\r\n        };\r\n        Point.prototype.add = function (other) {\r\n            this.x += other.x;\r\n            this.y += other.y;\r\n            return this;\r\n        };\r\n        Point.prototype.scale = function (scalar) {\r\n            this.x *= scalar;\r\n            this.y *= scalar;\r\n        };\r\n        Point.prototype.scaleAndAdd = function (other, scalar) {\r\n            this.x += other.x * scalar;\r\n            this.y += other.y * scalar;\r\n        };\r\n        Point.prototype.sub = function (other) {\r\n            this.x -= other.x;\r\n            this.y -= other.y;\r\n            return this;\r\n        };\r\n        Point.prototype.dot = function (other) {\r\n            return this.x * other.x + this.y * other.y;\r\n        };\r\n        Point.prototype.len = function () {\r\n            return Math.sqrt(this.x * this.x + this.y * this.y);\r\n        };\r\n        Point.prototype.lenSquare = function () {\r\n            return this.x * this.x + this.y * this.y;\r\n        };\r\n        Point.prototype.normalize = function () {\r\n            var len = this.len();\r\n            this.x /= len;\r\n            this.y /= len;\r\n            return this;\r\n        };\r\n        Point.prototype.distance = function (other) {\r\n            var dx = this.x - other.x;\r\n            var dy = this.y - other.y;\r\n            return Math.sqrt(dx * dx + dy * dy);\r\n        };\r\n        Point.prototype.distanceSquare = function (other) {\r\n            var dx = this.x - other.x;\r\n            var dy = this.y - other.y;\r\n            return dx * dx + dy * dy;\r\n        };\r\n        Point.prototype.negate = function () {\r\n            this.x = -this.x;\r\n            this.y = -this.y;\r\n            return this;\r\n        };\r\n        Point.prototype.transform = function (m) {\r\n            if (!m) {\r\n                return;\r\n            }\r\n            var x = this.x;\r\n            var y = this.y;\r\n            this.x = m[0] * x + m[2] * y + m[4];\r\n            this.y = m[1] * x + m[3] * y + m[5];\r\n            return this;\r\n        };\r\n        Point.prototype.toArray = function (out) {\r\n            out[0] = this.x;\r\n            out[1] = this.y;\r\n            return out;\r\n        };\r\n        Point.prototype.fromArray = function (input) {\r\n            this.x = input[0];\r\n            this.y = input[1];\r\n        };\r\n        Point.set = function (p, x, y) {\r\n            p.x = x;\r\n            p.y = y;\r\n        };\r\n        Point.copy = function (p, p2) {\r\n            p.x = p2.x;\r\n            p.y = p2.y;\r\n        };\r\n        Point.len = function (p) {\r\n            return Math.sqrt(p.x * p.x + p.y * p.y);\r\n        };\r\n        Point.lenSquare = function (p) {\r\n            return p.x * p.x + p.y * p.y;\r\n        };\r\n        Point.dot = function (p0, p1) {\r\n            return p0.x * p1.x + p0.y * p1.y;\r\n        };\r\n        Point.add = function (out, p0, p1) {\r\n            out.x = p0.x + p1.x;\r\n            out.y = p0.y + p1.y;\r\n        };\r\n        Point.sub = function (out, p0, p1) {\r\n            out.x = p0.x - p1.x;\r\n            out.y = p0.y - p1.y;\r\n        };\r\n        Point.scale = function (out, p0, scalar) {\r\n            out.x = p0.x * scalar;\r\n            out.y = p0.y * scalar;\r\n        };\r\n        Point.scaleAndAdd = function (out, p0, p1, scalar) {\r\n            out.x = p0.x + p1.x * scalar;\r\n            out.y = p0.y + p1.y * scalar;\r\n        };\r\n        Point.lerp = function (out, p0, p1, t) {\r\n            var onet = 1 - t;\r\n            out.x = onet * p0.x + t * p1.x;\r\n            out.y = onet * p0.y + t * p1.y;\r\n        };\r\n        return Point;\r\n    }());\n\n    var mathMin = Math.min;\r\n    var mathMax = Math.max;\r\n    var lt = new Point();\r\n    var rb = new Point();\r\n    var lb = new Point();\r\n    var rt = new Point();\r\n    var minTv = new Point();\r\n    var maxTv = new Point();\r\n    var BoundingRect = (function () {\r\n        function BoundingRect(x, y, width, height) {\r\n            if (width < 0) {\r\n                x = x + width;\r\n                width = -width;\r\n            }\r\n            if (height < 0) {\r\n                y = y + height;\r\n                height = -height;\r\n            }\r\n            this.x = x;\r\n            this.y = y;\r\n            this.width = width;\r\n            this.height = height;\r\n        }\r\n        BoundingRect.prototype.union = function (other) {\r\n            var x = mathMin(other.x, this.x);\r\n            var y = mathMin(other.y, this.y);\r\n            this.width = mathMax(other.x + other.width, this.x + this.width) - x;\r\n            this.height = mathMax(other.y + other.height, this.y + this.height) - y;\r\n            this.x = x;\r\n            this.y = y;\r\n        };\r\n        BoundingRect.prototype.applyTransform = function (m) {\r\n            BoundingRect.applyTransform(this, this, m);\r\n        };\r\n        BoundingRect.prototype.calculateTransform = function (b) {\r\n            var a = this;\r\n            var sx = b.width / a.width;\r\n            var sy = b.height / a.height;\r\n            var m = create$1();\r\n            translate(m, m, [-a.x, -a.y]);\r\n            scale$1(m, m, [sx, sy]);\r\n            translate(m, m, [b.x, b.y]);\r\n            return m;\r\n        };\r\n        BoundingRect.prototype.intersect = function (b, mtv) {\r\n            if (!b) {\r\n                return false;\r\n            }\r\n            if (!(b instanceof BoundingRect)) {\r\n                b = BoundingRect.create(b);\r\n            }\r\n            var a = this;\r\n            var ax0 = a.x;\r\n            var ax1 = a.x + a.width;\r\n            var ay0 = a.y;\r\n            var ay1 = a.y + a.height;\r\n            var bx0 = b.x;\r\n            var bx1 = b.x + b.width;\r\n            var by0 = b.y;\r\n            var by1 = b.y + b.height;\r\n            var overlap = !(ax1 < bx0 || bx1 < ax0 || ay1 < by0 || by1 < ay0);\r\n            if (mtv) {\r\n                var dMin = Infinity;\r\n                var dMax = 0;\r\n                var d0 = Math.abs(ax1 - bx0);\r\n                var d1 = Math.abs(bx1 - ax0);\r\n                var d2 = Math.abs(ay1 - by0);\r\n                var d3 = Math.abs(by1 - ay0);\r\n                var dx = Math.min(d0, d1);\r\n                var dy = Math.min(d2, d3);\r\n                if (ax1 < bx0 || bx1 < ax0) {\r\n                    if (dx > dMax) {\r\n                        dMax = dx;\r\n                        if (d0 < d1) {\r\n                            Point.set(maxTv, -d0, 0);\r\n                        }\r\n                        else {\r\n                            Point.set(maxTv, d1, 0);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    if (dx < dMin) {\r\n                        dMin = dx;\r\n                        if (d0 < d1) {\r\n                            Point.set(minTv, d0, 0);\r\n                        }\r\n                        else {\r\n                            Point.set(minTv, -d1, 0);\r\n                        }\r\n                    }\r\n                }\r\n                if (ay1 < by0 || by1 < ay0) {\r\n                    if (dy > dMax) {\r\n                        dMax = dy;\r\n                        if (d2 < d3) {\r\n                            Point.set(maxTv, 0, -d2);\r\n                        }\r\n                        else {\r\n                            Point.set(maxTv, 0, d3);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    if (dx < dMin) {\r\n                        dMin = dx;\r\n                        if (d2 < d3) {\r\n                            Point.set(minTv, 0, d2);\r\n                        }\r\n                        else {\r\n                            Point.set(minTv, 0, -d3);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (mtv) {\r\n                Point.copy(mtv, overlap ? minTv : maxTv);\r\n            }\r\n            return overlap;\r\n        };\r\n        BoundingRect.prototype.contain = function (x, y) {\r\n            var rect = this;\r\n            return x >= rect.x\r\n                && x <= (rect.x + rect.width)\r\n                && y >= rect.y\r\n                && y <= (rect.y + rect.height);\r\n        };\r\n        BoundingRect.prototype.clone = function () {\r\n            return new BoundingRect(this.x, this.y, this.width, this.height);\r\n        };\r\n        BoundingRect.prototype.copy = function (other) {\r\n            BoundingRect.copy(this, other);\r\n        };\r\n        BoundingRect.prototype.plain = function () {\r\n            return {\r\n                x: this.x,\r\n                y: this.y,\r\n                width: this.width,\r\n                height: this.height\r\n            };\r\n        };\r\n        BoundingRect.create = function (rect) {\r\n            return new BoundingRect(rect.x, rect.y, rect.width, rect.height);\r\n        };\r\n        BoundingRect.copy = function (target, source) {\r\n            target.x = source.x;\r\n            target.y = source.y;\r\n            target.width = source.width;\r\n            target.height = source.height;\r\n        };\r\n        BoundingRect.applyTransform = function (target, source, m) {\r\n            if (!m) {\r\n                if (target !== source) {\r\n                    BoundingRect.copy(target, source);\r\n                }\r\n                return;\r\n            }\r\n            if (m[1] < 1e-5 && m[1] > -1e-5 && m[2] < 1e-5 && m[2] > -1e-5) {\r\n                var sx = m[0];\r\n                var sy = m[3];\r\n                var tx = m[4];\r\n                var ty = m[5];\r\n                target.x = source.x * sx + tx;\r\n                target.y = source.y * sy + ty;\r\n                target.width = source.width * sx;\r\n                target.height = source.height * sy;\r\n                if (target.width < 0) {\r\n                    target.x += target.width;\r\n                    target.width = -target.width;\r\n                }\r\n                if (target.height < 0) {\r\n                    target.y += target.height;\r\n                    target.height = -target.height;\r\n                }\r\n                return;\r\n            }\r\n            lt.x = lb.x = source.x;\r\n            lt.y = rt.y = source.y;\r\n            rb.x = rt.x = source.x + source.width;\r\n            rb.y = lb.y = source.y + source.height;\r\n            lt.transform(m);\r\n            rt.transform(m);\r\n            rb.transform(m);\r\n            lb.transform(m);\r\n            target.x = mathMin(lt.x, rb.x, lb.x, rt.x);\r\n            target.y = mathMin(lt.y, rb.y, lb.y, rt.y);\r\n            var maxX = mathMax(lt.x, rb.x, lb.x, rt.x);\r\n            var maxY = mathMax(lt.y, rb.y, lb.y, rt.y);\r\n            target.width = maxX - target.x;\r\n            target.height = maxY - target.y;\r\n        };\r\n        return BoundingRect;\r\n    }());\n\n    var textWidthCache = {};\r\n    var DEFAULT_FONT = '12px sans-serif';\r\n    var _ctx;\r\n    var _cachedFont;\r\n    function defaultMeasureText(text, font) {\r\n        if (!_ctx) {\r\n            _ctx = createCanvas().getContext('2d');\r\n        }\r\n        if (_cachedFont !== font) {\r\n            _cachedFont = _ctx.font = font || DEFAULT_FONT;\r\n        }\r\n        return _ctx.measureText(text);\r\n    }\r\n    var methods$1 = {\r\n        measureText: defaultMeasureText\r\n    };\r\n    function getWidth(text, font) {\r\n        font = font || DEFAULT_FONT;\r\n        var cacheOfFont = textWidthCache[font];\r\n        if (!cacheOfFont) {\r\n            cacheOfFont = textWidthCache[font] = new LRU(500);\r\n        }\r\n        var width = cacheOfFont.get(text);\r\n        if (width == null) {\r\n            width = methods$1.measureText(text, font).width;\r\n            cacheOfFont.put(text, width);\r\n        }\r\n        return width;\r\n    }\r\n    function innerGetBoundingRect(text, font, textAlign, textBaseline) {\r\n        var width = getWidth(text, font);\r\n        var height = getLineHeight(font);\r\n        var x = adjustTextX(0, width, textAlign);\r\n        var y = adjustTextY(0, height, textBaseline);\r\n        var rect = new BoundingRect(x, y, width, height);\r\n        return rect;\r\n    }\r\n    function getBoundingRect(text, font, textAlign, textBaseline) {\r\n        var textLines = ((text || '') + '').split('\\n');\r\n        var len = textLines.length;\r\n        if (len === 1) {\r\n            return innerGetBoundingRect(textLines[0], font, textAlign, textBaseline);\r\n        }\r\n        else {\r\n            var uniondRect = new BoundingRect(0, 0, 0, 0);\r\n            for (var i = 0; i < textLines.length; i++) {\r\n                var rect = innerGetBoundingRect(textLines[i], font, textAlign, textBaseline);\r\n                i === 0 ? uniondRect.copy(rect) : uniondRect.union(rect);\r\n            }\r\n            return uniondRect;\r\n        }\r\n    }\r\n    function adjustTextX(x, width, textAlign) {\r\n        if (textAlign === 'right') {\r\n            x -= width;\r\n        }\r\n        else if (textAlign === 'center') {\r\n            x -= width / 2;\r\n        }\r\n        return x;\r\n    }\r\n    function adjustTextY(y, height, verticalAlign) {\r\n        if (verticalAlign === 'middle') {\r\n            y -= height / 2;\r\n        }\r\n        else if (verticalAlign === 'bottom') {\r\n            y -= height;\r\n        }\r\n        return y;\r\n    }\r\n    function getLineHeight(font) {\r\n        return getWidth('国', font);\r\n    }\r\n    function parsePercent(value, maxValue) {\r\n        if (typeof value === 'string') {\r\n            if (value.lastIndexOf('%') >= 0) {\r\n                return parseFloat(value) / 100 * maxValue;\r\n            }\r\n            return parseFloat(value);\r\n        }\r\n        return value;\r\n    }\r\n    function calculateTextPosition(out, opts, rect) {\r\n        var textPosition = opts.position || 'inside';\r\n        var distance = opts.distance != null ? opts.distance : 5;\r\n        var height = rect.height;\r\n        var width = rect.width;\r\n        var halfHeight = height / 2;\r\n        var x = rect.x;\r\n        var y = rect.y;\r\n        var textAlign = 'left';\r\n        var textVerticalAlign = 'top';\r\n        if (textPosition instanceof Array) {\r\n            x += parsePercent(textPosition[0], rect.width);\r\n            y += parsePercent(textPosition[1], rect.height);\r\n            textAlign = null;\r\n            textVerticalAlign = null;\r\n        }\r\n        else {\r\n            switch (textPosition) {\r\n                case 'left':\r\n                    x -= distance;\r\n                    y += halfHeight;\r\n                    textAlign = 'right';\r\n                    textVerticalAlign = 'middle';\r\n                    break;\r\n                case 'right':\r\n                    x += distance + width;\r\n                    y += halfHeight;\r\n                    textVerticalAlign = 'middle';\r\n                    break;\r\n                case 'top':\r\n                    x += width / 2;\r\n                    y -= distance;\r\n                    textAlign = 'center';\r\n                    textVerticalAlign = 'bottom';\r\n                    break;\r\n                case 'bottom':\r\n                    x += width / 2;\r\n                    y += height + distance;\r\n                    textAlign = 'center';\r\n                    break;\r\n                case 'inside':\r\n                    x += width / 2;\r\n                    y += halfHeight;\r\n                    textAlign = 'center';\r\n                    textVerticalAlign = 'middle';\r\n                    break;\r\n                case 'insideLeft':\r\n                    x += distance;\r\n                    y += halfHeight;\r\n                    textVerticalAlign = 'middle';\r\n                    break;\r\n                case 'insideRight':\r\n                    x += width - distance;\r\n                    y += halfHeight;\r\n                    textAlign = 'right';\r\n                    textVerticalAlign = 'middle';\r\n                    break;\r\n                case 'insideTop':\r\n                    x += width / 2;\r\n                    y += distance;\r\n                    textAlign = 'center';\r\n                    break;\r\n                case 'insideBottom':\r\n                    x += width / 2;\r\n                    y += height - distance;\r\n                    textAlign = 'center';\r\n                    textVerticalAlign = 'bottom';\r\n                    break;\r\n                case 'insideTopLeft':\r\n                    x += distance;\r\n                    y += distance;\r\n                    break;\r\n                case 'insideTopRight':\r\n                    x += width - distance;\r\n                    y += distance;\r\n                    textAlign = 'right';\r\n                    break;\r\n                case 'insideBottomLeft':\r\n                    x += distance;\r\n                    y += height - distance;\r\n                    textVerticalAlign = 'bottom';\r\n                    break;\r\n                case 'insideBottomRight':\r\n                    x += width - distance;\r\n                    y += height - distance;\r\n                    textAlign = 'right';\r\n                    textVerticalAlign = 'bottom';\r\n                    break;\r\n            }\r\n        }\r\n        out = out || {};\r\n        out.x = x;\r\n        out.y = y;\r\n        out.align = textAlign;\r\n        out.verticalAlign = textVerticalAlign;\r\n        return out;\r\n    }\n\n    var dpr = 1;\r\n    if (typeof window !== 'undefined') {\r\n        dpr = Math.max(window.devicePixelRatio\r\n            || (window.screen.deviceXDPI / window.screen.logicalXDPI)\r\n            || 1, 1);\r\n    }\r\n    var devicePixelRatio = dpr;\r\n    var DARK_MODE_THRESHOLD = 0.4;\r\n    var DARK_LABEL_COLOR = '#333';\r\n    var LIGHT_LABEL_COLOR = '#ccc';\r\n    var LIGHTER_LABEL_COLOR = '#eee';\n\n    var PRESERVED_NORMAL_STATE = '__zr_normal__';\r\n    var PRIMARY_STATES_KEYS = ['x', 'y', 'scaleX', 'scaleY', 'originX', 'originY', 'rotation', 'ignore'];\r\n    var DEFAULT_ANIMATABLE_MAP = {\r\n        x: true,\r\n        y: true,\r\n        scaleX: true,\r\n        scaleY: true,\r\n        originX: true,\r\n        originY: true,\r\n        rotation: true,\r\n        ignore: false\r\n    };\r\n    var tmpTextPosCalcRes = {};\r\n    var tmpBoundingRect = new BoundingRect(0, 0, 0, 0);\r\n    var Element = (function () {\r\n        function Element(props) {\r\n            this.id = guid();\r\n            this.animators = [];\r\n            this.currentStates = [];\r\n            this.states = {};\r\n            this._init(props);\r\n        }\r\n        Element.prototype._init = function (props) {\r\n            this.attr(props);\r\n        };\r\n        Element.prototype.drift = function (dx, dy, e) {\r\n            switch (this.draggable) {\r\n                case 'horizontal':\r\n                    dy = 0;\r\n                    break;\r\n                case 'vertical':\r\n                    dx = 0;\r\n                    break;\r\n            }\r\n            var m = this.transform;\r\n            if (!m) {\r\n                m = this.transform = [1, 0, 0, 1, 0, 0];\r\n            }\r\n            m[4] += dx;\r\n            m[5] += dy;\r\n            this.decomposeTransform();\r\n            this.markRedraw();\r\n        };\r\n        Element.prototype.beforeUpdate = function () { };\r\n        Element.prototype.afterUpdate = function () { };\r\n        Element.prototype.update = function () {\r\n            this.updateTransform();\r\n            this.updateInnerText();\r\n        };\r\n        Element.prototype.updateInnerText = function (forceUpdate) {\r\n            var textEl = this._textContent;\r\n            if (textEl && (!textEl.ignore || forceUpdate)) {\r\n                if (!this.textConfig) {\r\n                    this.textConfig = {};\r\n                }\r\n                var textConfig = this.textConfig;\r\n                var isLocal = textConfig.local;\r\n                var attachedTransform = textEl.attachedTransform;\r\n                var textAlign = void 0;\r\n                var textVerticalAlign = void 0;\r\n                var textStyleChanged = false;\r\n                if (isLocal) {\r\n                    attachedTransform.parent = this;\r\n                }\r\n                else {\r\n                    attachedTransform.parent = null;\r\n                }\r\n                var innerOrigin = false;\r\n                attachedTransform.x = textEl.x;\r\n                attachedTransform.y = textEl.y;\r\n                attachedTransform.originX = textEl.originX;\r\n                attachedTransform.originY = textEl.originY;\r\n                attachedTransform.rotation = textEl.rotation;\r\n                attachedTransform.scaleX = textEl.scaleX;\r\n                attachedTransform.scaleY = textEl.scaleY;\r\n                if (textConfig.position != null) {\r\n                    var layoutRect = tmpBoundingRect;\r\n                    if (textConfig.layoutRect) {\r\n                        layoutRect.copy(textConfig.layoutRect);\r\n                    }\r\n                    else {\r\n                        layoutRect.copy(this.getBoundingRect());\r\n                    }\r\n                    if (!isLocal) {\r\n                        layoutRect.applyTransform(this.transform);\r\n                    }\r\n                    if (this.calculateTextPosition) {\r\n                        this.calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\r\n                    }\r\n                    else {\r\n                        calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\r\n                    }\r\n                    attachedTransform.x = tmpTextPosCalcRes.x;\r\n                    attachedTransform.y = tmpTextPosCalcRes.y;\r\n                    textAlign = tmpTextPosCalcRes.align;\r\n                    textVerticalAlign = tmpTextPosCalcRes.verticalAlign;\r\n                    var textOrigin = textConfig.origin;\r\n                    if (textOrigin && textConfig.rotation != null) {\r\n                        var relOriginX = void 0;\r\n                        var relOriginY = void 0;\r\n                        if (textOrigin === 'center') {\r\n                            relOriginX = layoutRect.width * 0.5;\r\n                            relOriginY = layoutRect.height * 0.5;\r\n                        }\r\n                        else {\r\n                            relOriginX = parsePercent(textOrigin[0], layoutRect.width);\r\n                            relOriginY = parsePercent(textOrigin[1], layoutRect.height);\r\n                        }\r\n                        innerOrigin = true;\r\n                        attachedTransform.originX = -attachedTransform.x + relOriginX + (isLocal ? 0 : layoutRect.x);\r\n                        attachedTransform.originY = -attachedTransform.y + relOriginY + (isLocal ? 0 : layoutRect.y);\r\n                    }\r\n                }\r\n                if (textConfig.rotation != null) {\r\n                    attachedTransform.rotation = textConfig.rotation;\r\n                }\r\n                var textOffset = textConfig.offset;\r\n                if (textOffset) {\r\n                    attachedTransform.x += textOffset[0];\r\n                    attachedTransform.y += textOffset[1];\r\n                    if (!innerOrigin) {\r\n                        attachedTransform.originX = -textOffset[0];\r\n                        attachedTransform.originY = -textOffset[1];\r\n                    }\r\n                }\r\n                var isInside = textConfig.inside == null\r\n                    ? (typeof textConfig.position === 'string' && textConfig.position.indexOf('inside') >= 0)\r\n                    : textConfig.inside;\r\n                var innerTextDefaultStyle = this._innerTextDefaultStyle || (this._innerTextDefaultStyle = {});\r\n                var textFill = void 0;\r\n                var textStroke = void 0;\r\n                var autoStroke = void 0;\r\n                if (isInside && this.canBeInsideText()) {\r\n                    textFill = textConfig.insideFill;\r\n                    textStroke = textConfig.insideStroke;\r\n                    if (textFill == null || textFill === 'auto') {\r\n                        textFill = this.getInsideTextFill();\r\n                    }\r\n                    if (textStroke == null || textStroke === 'auto') {\r\n                        textStroke = this.getInsideTextStroke(textFill);\r\n                        autoStroke = true;\r\n                    }\r\n                }\r\n                else {\r\n                    textFill = textConfig.outsideFill;\r\n                    textStroke = textConfig.outsideStroke;\r\n                    if (textFill == null || textFill === 'auto') {\r\n                        textFill = this.getOutsideFill();\r\n                    }\r\n                    if (textStroke == null || textStroke === 'auto') {\r\n                        textStroke = this.getOutsideStroke(textFill);\r\n                        autoStroke = true;\r\n                    }\r\n                }\r\n                textFill = textFill || '#000';\r\n                if (textFill !== innerTextDefaultStyle.fill\r\n                    || textStroke !== innerTextDefaultStyle.stroke\r\n                    || autoStroke !== innerTextDefaultStyle.autoStroke\r\n                    || textAlign !== innerTextDefaultStyle.align\r\n                    || textVerticalAlign !== innerTextDefaultStyle.verticalAlign) {\r\n                    textStyleChanged = true;\r\n                    innerTextDefaultStyle.fill = textFill;\r\n                    innerTextDefaultStyle.stroke = textStroke;\r\n                    innerTextDefaultStyle.autoStroke = autoStroke;\r\n                    innerTextDefaultStyle.align = textAlign;\r\n                    innerTextDefaultStyle.verticalAlign = textVerticalAlign;\r\n                    textEl.setDefaultTextStyle(innerTextDefaultStyle);\r\n                }\r\n                if (textStyleChanged) {\r\n                    textEl.dirtyStyle();\r\n                }\r\n                textEl.markRedraw();\r\n            }\r\n        };\r\n        Element.prototype.canBeInsideText = function () {\r\n            return true;\r\n        };\r\n        Element.prototype.getInsideTextFill = function () {\r\n            return '#fff';\r\n        };\r\n        Element.prototype.getInsideTextStroke = function (textFill) {\r\n            return '#000';\r\n        };\r\n        Element.prototype.getOutsideFill = function () {\r\n            return this.__zr && this.__zr.isDarkMode() ? LIGHT_LABEL_COLOR : DARK_LABEL_COLOR;\r\n        };\r\n        Element.prototype.getOutsideStroke = function (textFill) {\r\n            var backgroundColor = this.__zr && this.__zr.getBackgroundColor();\r\n            var colorArr = typeof backgroundColor === 'string' && parse(backgroundColor);\r\n            if (!colorArr) {\r\n                colorArr = [255, 255, 255, 1];\r\n            }\r\n            var alpha = colorArr[3];\r\n            for (var i = 0; i < 3; i++) {\r\n                colorArr[i] = colorArr[i] * alpha + 255 * (1 - alpha);\r\n            }\r\n            colorArr[3] = 1;\r\n            return stringify(colorArr, 'rgba');\r\n        };\r\n        Element.prototype.traverse = function (cb, context) { };\r\n        Element.prototype.attrKV = function (key, value) {\r\n            if (key === 'textConfig') {\r\n                this.setTextConfig(value);\r\n            }\r\n            else if (key === 'textContent') {\r\n                this.setTextContent(value);\r\n            }\r\n            else if (key === 'clipPath') {\r\n                this.setClipPath(value);\r\n            }\r\n            else if (key === 'extra') {\r\n                this.extra = this.extra || {};\r\n                extend(this.extra, value);\r\n            }\r\n            else {\r\n                this[key] = value;\r\n            }\r\n        };\r\n        Element.prototype.hide = function () {\r\n            this.ignore = true;\r\n            this.markRedraw();\r\n        };\r\n        Element.prototype.show = function () {\r\n            this.ignore = false;\r\n            this.markRedraw();\r\n        };\r\n        Element.prototype.attr = function (keyOrObj, value) {\r\n            if (typeof keyOrObj === 'string') {\r\n                this.attrKV(keyOrObj, value);\r\n            }\r\n            else if (isObject(keyOrObj)) {\r\n                var obj = keyOrObj;\r\n                var keysArr = keys(obj);\r\n                for (var i = 0; i < keysArr.length; i++) {\r\n                    var key = keysArr[i];\r\n                    this.attrKV(key, keyOrObj[key]);\r\n                }\r\n            }\r\n            this.markRedraw();\r\n            return this;\r\n        };\r\n        Element.prototype.saveCurrentToNormalState = function (toState) {\r\n            this._innerSaveToNormal(toState);\r\n            var normalState = this._normalState;\r\n            for (var i = 0; i < this.animators.length; i++) {\r\n                var animator = this.animators[i];\r\n                var fromStateTransition = animator.__fromStateTransition;\r\n                if (fromStateTransition && fromStateTransition !== PRESERVED_NORMAL_STATE) {\r\n                    continue;\r\n                }\r\n                var targetName = animator.targetName;\r\n                var target = targetName\r\n                    ? normalState[targetName] : normalState;\r\n                animator.saveFinalToTarget(target);\r\n            }\r\n        };\r\n        Element.prototype._innerSaveToNormal = function (toState) {\r\n            var normalState = this._normalState;\r\n            if (!normalState) {\r\n                normalState = this._normalState = {};\r\n            }\r\n            if (toState.textConfig && !normalState.textConfig) {\r\n                normalState.textConfig = this.textConfig;\r\n            }\r\n            this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\r\n        };\r\n        Element.prototype._savePrimaryToNormal = function (toState, normalState, primaryKeys) {\r\n            for (var i = 0; i < primaryKeys.length; i++) {\r\n                var key = primaryKeys[i];\r\n                if (toState[key] != null && !(key in normalState)) {\r\n                    normalState[key] = this[key];\r\n                }\r\n            }\r\n        };\r\n        Element.prototype.hasState = function () {\r\n            return this.currentStates.length > 0;\r\n        };\r\n        Element.prototype.getState = function (name) {\r\n            return this.states[name];\r\n        };\r\n        Element.prototype.ensureState = function (name) {\r\n            var states = this.states;\r\n            if (!states[name]) {\r\n                states[name] = {};\r\n            }\r\n            return states[name];\r\n        };\r\n        Element.prototype.clearStates = function (noAnimation) {\r\n            this.useState(PRESERVED_NORMAL_STATE, false, noAnimation);\r\n        };\r\n        Element.prototype.useState = function (stateName, keepCurrentStates, noAnimation) {\r\n            var toNormalState = stateName === PRESERVED_NORMAL_STATE;\r\n            var hasStates = this.hasState();\r\n            if (!hasStates && toNormalState) {\r\n                return;\r\n            }\r\n            var currentStates = this.currentStates;\r\n            var animationCfg = this.stateTransition;\r\n            if (indexOf(currentStates, stateName) >= 0 && (keepCurrentStates || currentStates.length === 1)) {\r\n                return;\r\n            }\r\n            var state;\r\n            if (this.stateProxy && !toNormalState) {\r\n                state = this.stateProxy(stateName);\r\n            }\r\n            if (!state) {\r\n                state = (this.states && this.states[stateName]);\r\n            }\r\n            if (!state && !toNormalState) {\r\n                logError(\"State \" + stateName + \" not exists.\");\r\n                return;\r\n            }\r\n            if (!toNormalState) {\r\n                this.saveCurrentToNormalState(state);\r\n            }\r\n            var useHoverLayer = !!(state && state.hoverLayer);\r\n            if (useHoverLayer) {\r\n                this._toggleHoverLayerFlag(true);\r\n            }\r\n            this._applyStateObj(stateName, state, this._normalState, keepCurrentStates, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\r\n            if (this._textContent) {\r\n                this._textContent.useState(stateName, keepCurrentStates);\r\n            }\r\n            if (this._textGuide) {\r\n                this._textGuide.useState(stateName, keepCurrentStates);\r\n            }\r\n            if (toNormalState) {\r\n                this.currentStates = [];\r\n                this._normalState = {};\r\n            }\r\n            else {\r\n                if (!keepCurrentStates) {\r\n                    this.currentStates = [stateName];\r\n                }\r\n                else {\r\n                    this.currentStates.push(stateName);\r\n                }\r\n            }\r\n            this._updateAnimationTargets();\r\n            this.markRedraw();\r\n            if (!useHoverLayer && this.__inHover) {\r\n                this._toggleHoverLayerFlag(false);\r\n                this.__dirty &= ~Element.REDARAW_BIT;\r\n            }\r\n            return state;\r\n        };\r\n        Element.prototype.useStates = function (states, noAnimation) {\r\n            if (!states.length) {\r\n                this.clearStates();\r\n            }\r\n            else {\r\n                var stateObjects = [];\r\n                var currentStates = this.currentStates;\r\n                var len = states.length;\r\n                var notChange = len === currentStates.length;\r\n                if (notChange) {\r\n                    for (var i = 0; i < len; i++) {\r\n                        if (states[i] !== currentStates[i]) {\r\n                            notChange = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if (notChange) {\r\n                    return;\r\n                }\r\n                for (var i = 0; i < len; i++) {\r\n                    var stateName = states[i];\r\n                    var stateObj = void 0;\r\n                    if (this.stateProxy) {\r\n                        stateObj = this.stateProxy(stateName, states);\r\n                    }\r\n                    if (!stateObj) {\r\n                        stateObj = this.states[stateName];\r\n                    }\r\n                    if (stateObj) {\r\n                        stateObjects.push(stateObj);\r\n                    }\r\n                }\r\n                var useHoverLayer = !!(stateObjects[len - 1] && stateObjects[len - 1].hoverLayer);\r\n                if (useHoverLayer) {\r\n                    this._toggleHoverLayerFlag(true);\r\n                }\r\n                var mergedState = this._mergeStates(stateObjects);\r\n                var animationCfg = this.stateTransition;\r\n                this.saveCurrentToNormalState(mergedState);\r\n                this._applyStateObj(states.join(','), mergedState, this._normalState, false, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\r\n                if (this._textContent) {\r\n                    this._textContent.useStates(states);\r\n                }\r\n                if (this._textGuide) {\r\n                    this._textGuide.useStates(states);\r\n                }\r\n                this._updateAnimationTargets();\r\n                this.currentStates = states.slice();\r\n                this.markRedraw();\r\n                if (!useHoverLayer && this.__inHover) {\r\n                    this._toggleHoverLayerFlag(false);\r\n                    this.__dirty &= ~Element.REDARAW_BIT;\r\n                }\r\n            }\r\n        };\r\n        Element.prototype._updateAnimationTargets = function () {\r\n            for (var i = 0; i < this.animators.length; i++) {\r\n                var animator = this.animators[i];\r\n                if (animator.targetName) {\r\n                    animator.changeTarget(this[animator.targetName]);\r\n                }\r\n            }\r\n        };\r\n        Element.prototype.removeState = function (state) {\r\n            var idx = indexOf(this.currentStates, state);\r\n            if (idx >= 0) {\r\n                var currentStates = this.currentStates.slice();\r\n                currentStates.splice(idx, 1);\r\n                this.useStates(currentStates);\r\n            }\r\n        };\r\n        Element.prototype.replaceState = function (oldState, newState, forceAdd) {\r\n            var currentStates = this.currentStates.slice();\r\n            var idx = indexOf(currentStates, oldState);\r\n            var newStateExists = indexOf(currentStates, newState) >= 0;\r\n            if (idx >= 0) {\r\n                if (!newStateExists) {\r\n                    currentStates[idx] = newState;\r\n                }\r\n                else {\r\n                    currentStates.splice(idx, 1);\r\n                }\r\n            }\r\n            else if (forceAdd && !newStateExists) {\r\n                currentStates.push(newState);\r\n            }\r\n            this.useStates(currentStates);\r\n        };\r\n        Element.prototype.toggleState = function (state, enable) {\r\n            if (enable) {\r\n                this.useState(state, true);\r\n            }\r\n            else {\r\n                this.removeState(state);\r\n            }\r\n        };\r\n        Element.prototype._mergeStates = function (states) {\r\n            var mergedState = {};\r\n            var mergedTextConfig;\r\n            for (var i = 0; i < states.length; i++) {\r\n                var state = states[i];\r\n                extend(mergedState, state);\r\n                if (state.textConfig) {\r\n                    mergedTextConfig = mergedTextConfig || {};\r\n                    extend(mergedTextConfig, state.textConfig);\r\n                }\r\n            }\r\n            if (mergedTextConfig) {\r\n                mergedState.textConfig = mergedTextConfig;\r\n            }\r\n            return mergedState;\r\n        };\r\n        Element.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\r\n            var needsRestoreToNormal = !(state && keepCurrentStates);\r\n            if (state && state.textConfig) {\r\n                this.textConfig = extend({}, keepCurrentStates ? this.textConfig : normalState.textConfig);\r\n                extend(this.textConfig, state.textConfig);\r\n            }\r\n            else if (needsRestoreToNormal) {\r\n                if (normalState.textConfig) {\r\n                    this.textConfig = normalState.textConfig;\r\n                }\r\n            }\r\n            var transitionTarget = {};\r\n            var hasTransition = false;\r\n            for (var i = 0; i < PRIMARY_STATES_KEYS.length; i++) {\r\n                var key = PRIMARY_STATES_KEYS[i];\r\n                var propNeedsTransition = transition && DEFAULT_ANIMATABLE_MAP[key];\r\n                if (state && state[key] != null) {\r\n                    if (propNeedsTransition) {\r\n                        hasTransition = true;\r\n                        transitionTarget[key] = state[key];\r\n                    }\r\n                    else {\r\n                        this[key] = state[key];\r\n                    }\r\n                }\r\n                else if (needsRestoreToNormal) {\r\n                    if (normalState[key] != null) {\r\n                        if (propNeedsTransition) {\r\n                            hasTransition = true;\r\n                            transitionTarget[key] = normalState[key];\r\n                        }\r\n                        else {\r\n                            this[key] = normalState[key];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (!transition) {\r\n                for (var i = 0; i < this.animators.length; i++) {\r\n                    var animator = this.animators[i];\r\n                    var targetName = animator.targetName;\r\n                    animator.__changeFinalValue(targetName\r\n                        ? (state || normalState)[targetName]\r\n                        : (state || normalState));\r\n                }\r\n            }\r\n            if (hasTransition) {\r\n                this._transitionState(stateName, transitionTarget, animationCfg);\r\n            }\r\n        };\r\n        Element.prototype._attachComponent = function (componentEl) {\r\n            if (componentEl.__zr && !componentEl.__hostTarget) {\r\n                throw new Error('Text element has been added to zrender.');\r\n            }\r\n            if (componentEl === this) {\r\n                throw new Error('Recursive component attachment.');\r\n            }\r\n            var zr = this.__zr;\r\n            if (zr) {\r\n                componentEl.addSelfToZr(zr);\r\n            }\r\n            componentEl.__zr = zr;\r\n            componentEl.__hostTarget = this;\r\n        };\r\n        Element.prototype._detachComponent = function (componentEl) {\r\n            if (componentEl.__zr) {\r\n                componentEl.removeSelfFromZr(componentEl.__zr);\r\n            }\r\n            componentEl.__zr = null;\r\n            componentEl.__hostTarget = null;\r\n        };\r\n        Element.prototype.getClipPath = function () {\r\n            return this._clipPath;\r\n        };\r\n        Element.prototype.setClipPath = function (clipPath) {\r\n            if (this._clipPath && this._clipPath !== clipPath) {\r\n                this.removeClipPath();\r\n            }\r\n            this._attachComponent(clipPath);\r\n            this._clipPath = clipPath;\r\n            this.markRedraw();\r\n        };\r\n        Element.prototype.removeClipPath = function () {\r\n            var clipPath = this._clipPath;\r\n            if (clipPath) {\r\n                this._detachComponent(clipPath);\r\n                this._clipPath = null;\r\n                this.markRedraw();\r\n            }\r\n        };\r\n        Element.prototype.getTextContent = function () {\r\n            return this._textContent;\r\n        };\r\n        Element.prototype.setTextContent = function (textEl) {\r\n            var previousTextContent = this._textContent;\r\n            if (previousTextContent === textEl) {\r\n                return;\r\n            }\r\n            if (previousTextContent && previousTextContent !== textEl) {\r\n                this.removeTextContent();\r\n            }\r\n            if (textEl.__zr && !textEl.__hostTarget) {\r\n                throw new Error('Text element has been added to zrender.');\r\n            }\r\n            textEl.attachedTransform = new Transformable();\r\n            this._attachComponent(textEl);\r\n            this._textContent = textEl;\r\n            this.markRedraw();\r\n        };\r\n        Element.prototype.setTextConfig = function (cfg) {\r\n            if (!this.textConfig) {\r\n                this.textConfig = {};\r\n            }\r\n            extend(this.textConfig, cfg);\r\n            this.markRedraw();\r\n        };\r\n        Element.prototype.removeTextContent = function () {\r\n            var textEl = this._textContent;\r\n            if (textEl) {\r\n                textEl.attachedTransform = null;\r\n                this._detachComponent(textEl);\r\n                this._textContent = null;\r\n                this._innerTextDefaultStyle = null;\r\n                this.markRedraw();\r\n            }\r\n        };\r\n        Element.prototype.getTextGuideLine = function () {\r\n            return this._textGuide;\r\n        };\r\n        Element.prototype.setTextGuideLine = function (guideLine) {\r\n            if (this._textGuide && this._textGuide !== guideLine) {\r\n                this.removeTextGuideLine();\r\n            }\r\n            this._attachComponent(guideLine);\r\n            this._textGuide = guideLine;\r\n            this.markRedraw();\r\n        };\r\n        Element.prototype.removeTextGuideLine = function () {\r\n            var textGuide = this._textGuide;\r\n            if (textGuide) {\r\n                this._detachComponent(textGuide);\r\n                this._textGuide = null;\r\n                this.markRedraw();\r\n            }\r\n        };\r\n        Element.prototype.markRedraw = function () {\r\n            this.__dirty |= Element.REDARAW_BIT;\r\n            var zr = this.__zr;\r\n            if (zr) {\r\n                if (this.__inHover) {\r\n                    zr.refreshHover();\r\n                }\r\n                else {\r\n                    zr.refresh();\r\n                }\r\n            }\r\n            if (this.__hostTarget) {\r\n                this.__hostTarget.markRedraw();\r\n            }\r\n        };\r\n        Element.prototype.dirty = function () {\r\n            this.markRedraw();\r\n        };\r\n        Element.prototype._toggleHoverLayerFlag = function (inHover) {\r\n            this.__inHover = inHover;\r\n            var textContent = this._textContent;\r\n            var textGuide = this._textGuide;\r\n            if (textContent) {\r\n                textContent.__inHover = inHover;\r\n            }\r\n            if (textGuide) {\r\n                textGuide.__inHover = inHover;\r\n            }\r\n        };\r\n        Element.prototype.addSelfToZr = function (zr) {\r\n            this.__zr = zr;\r\n            var animators = this.animators;\r\n            if (animators) {\r\n                for (var i = 0; i < animators.length; i++) {\r\n                    zr.animation.addAnimator(animators[i]);\r\n                }\r\n            }\r\n            if (this._clipPath) {\r\n                this._clipPath.addSelfToZr(zr);\r\n            }\r\n            if (this._textContent) {\r\n                this._textContent.addSelfToZr(zr);\r\n            }\r\n            if (this._textGuide) {\r\n                this._textGuide.addSelfToZr(zr);\r\n            }\r\n        };\r\n        Element.prototype.removeSelfFromZr = function (zr) {\r\n            this.__zr = null;\r\n            var animators = this.animators;\r\n            if (animators) {\r\n                for (var i = 0; i < animators.length; i++) {\r\n                    zr.animation.removeAnimator(animators[i]);\r\n                }\r\n            }\r\n            if (this._clipPath) {\r\n                this._clipPath.removeSelfFromZr(zr);\r\n            }\r\n            if (this._textContent) {\r\n                this._textContent.removeSelfFromZr(zr);\r\n            }\r\n            if (this._textGuide) {\r\n                this._textGuide.removeSelfFromZr(zr);\r\n            }\r\n        };\r\n        Element.prototype.animate = function (key, loop) {\r\n            var target = key ? this[key] : this;\r\n            if (!target) {\r\n                logError('Property \"'\r\n                    + key\r\n                    + '\" is not existed in element '\r\n                    + this.id);\r\n                return;\r\n            }\r\n            var animator = new Animator(target, loop);\r\n            this.addAnimator(animator, key);\r\n            return animator;\r\n        };\r\n        Element.prototype.addAnimator = function (animator, key) {\r\n            var zr = this.__zr;\r\n            var el = this;\r\n            animator.during(function () {\r\n                el.updateDuringAnimation(key);\r\n            }).done(function () {\r\n                var animators = el.animators;\r\n                var idx = indexOf(animators, animator);\r\n                if (idx >= 0) {\r\n                    animators.splice(idx, 1);\r\n                }\r\n            });\r\n            this.animators.push(animator);\r\n            if (zr) {\r\n                zr.animation.addAnimator(animator);\r\n            }\r\n            zr && zr.wakeUp();\r\n        };\r\n        Element.prototype.updateDuringAnimation = function (key) {\r\n            this.markRedraw();\r\n        };\r\n        Element.prototype.stopAnimation = function (scope, forwardToLast) {\r\n            var animators = this.animators;\r\n            var len = animators.length;\r\n            var leftAnimators = [];\r\n            for (var i = 0; i < len; i++) {\r\n                var animator = animators[i];\r\n                if (!scope || scope === animator.scope) {\r\n                    animator.stop(forwardToLast);\r\n                }\r\n                else {\r\n                    leftAnimators.push(animator);\r\n                }\r\n            }\r\n            this.animators = leftAnimators;\r\n            return this;\r\n        };\r\n        Element.prototype.animateTo = function (target, cfg, animationProps) {\r\n            animateTo(this, target, cfg, animationProps);\r\n        };\r\n        Element.prototype.animateFrom = function (target, cfg, animationProps) {\r\n            animateTo(this, target, cfg, animationProps, true);\r\n        };\r\n        Element.prototype._transitionState = function (stateName, target, cfg, animationProps) {\r\n            var animators = animateTo(this, target, cfg, animationProps);\r\n            for (var i = 0; i < animators.length; i++) {\r\n                animators[i].__fromStateTransition = stateName;\r\n            }\r\n        };\r\n        Element.prototype.getBoundingRect = function () {\r\n            return null;\r\n        };\r\n        Element.REDARAW_BIT = 1;\r\n        Element.initDefaultProps = (function () {\r\n            var elProto = Element.prototype;\r\n            elProto.type = 'element';\r\n            elProto.name = '';\r\n            elProto.ignore = false;\r\n            elProto.silent = false;\r\n            elProto.isGroup = false;\r\n            elProto.draggable = false;\r\n            elProto.dragging = false;\r\n            elProto.ignoreClip = false;\r\n            elProto.__inHover = false;\r\n            elProto.__dirty = Element.REDARAW_BIT;\r\n            var logs = {};\r\n            function logDeprecatedError(key, xKey, yKey) {\r\n                if (!logs[key + xKey + yKey]) {\r\n                    console.warn(\"DEPRECATED: '\" + key + \"' has been deprecated. use '\" + xKey + \"', '\" + yKey + \"' instead\");\r\n                    logs[key + xKey + yKey] = true;\r\n                }\r\n            }\r\n            function createLegacyProperty(key, privateKey, xKey, yKey) {\r\n                Object.defineProperty(elProto, key, {\r\n                    get: function () {\r\n                        logDeprecatedError(key, xKey, yKey);\r\n                        if (!this[privateKey]) {\r\n                            var pos = this[privateKey] = [];\r\n                            enhanceArray(this, pos);\r\n                        }\r\n                        return this[privateKey];\r\n                    },\r\n                    set: function (pos) {\r\n                        logDeprecatedError(key, xKey, yKey);\r\n                        this[xKey] = pos[0];\r\n                        this[yKey] = pos[1];\r\n                        this[privateKey] = pos;\r\n                        enhanceArray(this, pos);\r\n                    }\r\n                });\r\n                function enhanceArray(self, pos) {\r\n                    Object.defineProperty(pos, 0, {\r\n                        get: function () {\r\n                            return self[xKey];\r\n                        },\r\n                        set: function (val) {\r\n                            self[xKey] = val;\r\n                        }\r\n                    });\r\n                    Object.defineProperty(pos, 1, {\r\n                        get: function () {\r\n                            return self[yKey];\r\n                        },\r\n                        set: function (val) {\r\n                            self[yKey] = val;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (Object.defineProperty && (!env.browser.ie || env.browser.version > 8)) {\r\n                createLegacyProperty('position', '_legacyPos', 'x', 'y');\r\n                createLegacyProperty('scale', '_legacyScale', 'scaleX', 'scaleY');\r\n                createLegacyProperty('origin', '_legacyOrigin', 'originX', 'originY');\r\n            }\r\n        })();\r\n        return Element;\r\n    }());\r\n    mixin(Element, Eventful);\r\n    mixin(Element, Transformable);\r\n    function animateTo(animatable, target, cfg, animationProps, reverse) {\r\n        cfg = cfg || {};\r\n        var animators = [];\r\n        animateToShallow(animatable, '', animatable, target, cfg, animationProps, animators, reverse);\r\n        var doneCount = animators.length;\r\n        var abortedCount = doneCount;\r\n        var cfgDone = cfg.done;\r\n        var cfgAborted = cfg.aborted;\r\n        var doneCb = cfgDone ? function () {\r\n            doneCount--;\r\n            if (!doneCount) {\r\n                cfgDone();\r\n            }\r\n        } : null;\r\n        var abortedCb = cfgAborted ? function () {\r\n            abortedCount--;\r\n            if (!abortedCount) {\r\n                cfgAborted();\r\n            }\r\n        } : null;\r\n        if (!doneCount) {\r\n            cfgDone && cfgDone();\r\n        }\r\n        if (animators.length > 0 && cfg.during) {\r\n            animators[0].during(function (target, percent) {\r\n                cfg.during(percent);\r\n            });\r\n        }\r\n        for (var i = 0; i < animators.length; i++) {\r\n            var animator = animators[i];\r\n            if (doneCb) {\r\n                animator.done(doneCb);\r\n            }\r\n            if (abortedCb) {\r\n                animator.aborted(abortedCb);\r\n            }\r\n            animator.start(cfg.easing, cfg.force);\r\n        }\r\n        return animators;\r\n    }\r\n    function copyArrShallow(source, target, len) {\r\n        for (var i = 0; i < len; i++) {\r\n            source[i] = target[i];\r\n        }\r\n    }\r\n    function is2DArray(value) {\r\n        return isArrayLike(value[0]);\r\n    }\r\n    function copyValue(target, source, key) {\r\n        if (isArrayLike(source[key])) {\r\n            if (!isArrayLike(target[key])) {\r\n                target[key] = [];\r\n            }\r\n            if (isTypedArray(source[key])) {\r\n                var len = source[key].length;\r\n                if (target[key].length !== len) {\r\n                    target[key] = new (source[key].constructor)(len);\r\n                    copyArrShallow(target[key], source[key], len);\r\n                }\r\n            }\r\n            var sourceArr = source[key];\r\n            var targetArr = target[key];\r\n            var len0 = sourceArr.length;\r\n            if (is2DArray(sourceArr)) {\r\n                var len1 = sourceArr[0].length;\r\n                for (var i = 0; i < len0; i++) {\r\n                    if (!targetArr[i]) {\r\n                        targetArr[i] = Array.prototype.slice.call(sourceArr[i]);\r\n                    }\r\n                    else {\r\n                        copyArrShallow(targetArr[i], sourceArr[i], len1);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                copyArrShallow(targetArr, sourceArr, len0);\r\n            }\r\n            targetArr.length = sourceArr.length;\r\n        }\r\n        else {\r\n            target[key] = source[key];\r\n        }\r\n    }\r\n    function animateToShallow(animatable, topKey, source, target, cfg, animationProps, animators, reverse) {\r\n        var animatableKeys = [];\r\n        var changedKeys = [];\r\n        var targetKeys = keys(target);\r\n        var duration = cfg.duration;\r\n        var delay = cfg.delay;\r\n        var additive = cfg.additive;\r\n        var setToFinal = cfg.setToFinal;\r\n        var animateAll = !isObject(animationProps);\r\n        for (var k = 0; k < targetKeys.length; k++) {\r\n            var innerKey = targetKeys[k];\r\n            if (source[innerKey] != null\r\n                && target[innerKey] != null\r\n                && (animateAll || animationProps[innerKey])) {\r\n                if (isObject(target[innerKey]) && !isArrayLike(target[innerKey])) {\r\n                    if (topKey) {\r\n                        if (!reverse) {\r\n                            source[innerKey] = target[innerKey];\r\n                            animatable.updateDuringAnimation(topKey);\r\n                        }\r\n                        continue;\r\n                    }\r\n                    animateToShallow(animatable, innerKey, source[innerKey], target[innerKey], cfg, animationProps && animationProps[innerKey], animators, reverse);\r\n                }\r\n                else {\r\n                    animatableKeys.push(innerKey);\r\n                    changedKeys.push(innerKey);\r\n                }\r\n            }\r\n            else if (!reverse) {\r\n                source[innerKey] = target[innerKey];\r\n                animatable.updateDuringAnimation(topKey);\r\n                changedKeys.push(innerKey);\r\n            }\r\n        }\r\n        var keyLen = animatableKeys.length;\r\n        if (keyLen > 0 || cfg.force) {\r\n            var existsAnimators = animatable.animators;\r\n            var existsAnimatorsOnSameTarget = [];\r\n            for (var i = 0; i < existsAnimators.length; i++) {\r\n                if (existsAnimators[i].targetName === topKey) {\r\n                    existsAnimatorsOnSameTarget.push(existsAnimators[i]);\r\n                }\r\n            }\r\n            if (!additive && existsAnimatorsOnSameTarget.length) {\r\n                for (var i = 0; i < existsAnimatorsOnSameTarget.length; i++) {\r\n                    var allAborted = existsAnimatorsOnSameTarget[i].stopTracks(changedKeys);\r\n                    if (allAborted) {\r\n                        var idx = indexOf(existsAnimators, existsAnimatorsOnSameTarget[i]);\r\n                        existsAnimators.splice(idx, 1);\r\n                    }\r\n                }\r\n            }\r\n            var revertedSource = void 0;\r\n            var reversedTarget = void 0;\r\n            var sourceClone = void 0;\r\n            if (reverse) {\r\n                reversedTarget = {};\r\n                if (setToFinal) {\r\n                    revertedSource = {};\r\n                }\r\n                for (var i = 0; i < keyLen; i++) {\r\n                    var innerKey = animatableKeys[i];\r\n                    reversedTarget[innerKey] = source[innerKey];\r\n                    if (setToFinal) {\r\n                        revertedSource[innerKey] = target[innerKey];\r\n                    }\r\n                    else {\r\n                        source[innerKey] = target[innerKey];\r\n                    }\r\n                }\r\n            }\r\n            else if (setToFinal) {\r\n                sourceClone = {};\r\n                for (var i = 0; i < keyLen; i++) {\r\n                    var innerKey = animatableKeys[i];\r\n                    sourceClone[innerKey] = cloneValue(source[innerKey]);\r\n                    copyValue(source, target, innerKey);\r\n                }\r\n            }\r\n            var animator = new Animator(source, false, additive ? existsAnimatorsOnSameTarget : null);\r\n            animator.targetName = topKey;\r\n            if (cfg.scope) {\r\n                animator.scope = cfg.scope;\r\n            }\r\n            if (setToFinal && revertedSource) {\r\n                animator.whenWithKeys(0, revertedSource, animatableKeys);\r\n            }\r\n            if (sourceClone) {\r\n                animator.whenWithKeys(0, sourceClone, animatableKeys);\r\n            }\r\n            animator.whenWithKeys(duration == null ? 500 : duration, reverse ? reversedTarget : target, animatableKeys).delay(delay || 0);\r\n            animatable.addAnimator(animator, topKey);\r\n            animators.push(animator);\r\n        }\r\n    }\n\n    var STYLE_MAGIC_KEY = '__zr_style_' + Math.round((Math.random() * 10));\r\n    var DEFAULT_COMMON_STYLE = {\r\n        shadowBlur: 0,\r\n        shadowOffsetX: 0,\r\n        shadowOffsetY: 0,\r\n        shadowColor: '#000',\r\n        opacity: 1,\r\n        blend: 'source-over'\r\n    };\r\n    var DEFAULT_COMMON_ANIMATION_PROPS = {\r\n        style: {\r\n            shadowBlur: true,\r\n            shadowOffsetX: true,\r\n            shadowOffsetY: true,\r\n            shadowColor: true,\r\n            opacity: true\r\n        }\r\n    };\r\n    DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY] = true;\r\n    var PRIMARY_STATES_KEYS$1 = ['z', 'z2', 'invisible'];\r\n    var Displayable = (function (_super) {\r\n        __extends(Displayable, _super);\r\n        function Displayable(props) {\r\n            return _super.call(this, props) || this;\r\n        }\r\n        Displayable.prototype._init = function (props) {\r\n            var keysArr = keys(props);\r\n            for (var i = 0; i < keysArr.length; i++) {\r\n                var key = keysArr[i];\r\n                if (key === 'style') {\r\n                    this.useStyle(props[key]);\r\n                }\r\n                else {\r\n                    _super.prototype.attrKV.call(this, key, props[key]);\r\n                }\r\n            }\r\n            if (!this.style) {\r\n                this.useStyle({});\r\n            }\r\n        };\r\n        Displayable.prototype.beforeBrush = function () { };\r\n        Displayable.prototype.afterBrush = function () { };\r\n        Displayable.prototype.innerBeforeBrush = function () { };\r\n        Displayable.prototype.innerAfterBrush = function () { };\r\n        Displayable.prototype.contain = function (x, y) {\r\n            return this.rectContain(x, y);\r\n        };\r\n        Displayable.prototype.traverse = function (cb, context) {\r\n            cb.call(context, this);\r\n        };\r\n        Displayable.prototype.rectContain = function (x, y) {\r\n            var coord = this.transformCoordToLocal(x, y);\r\n            var rect = this.getBoundingRect();\r\n            return rect.contain(coord[0], coord[1]);\r\n        };\r\n        Displayable.prototype.animateStyle = function (loop) {\r\n            return this.animate('style', loop);\r\n        };\r\n        Displayable.prototype.updateDuringAnimation = function (targetKey) {\r\n            if (targetKey === 'style') {\r\n                this.dirtyStyle();\r\n            }\r\n            else {\r\n                this.markRedraw();\r\n            }\r\n        };\r\n        Displayable.prototype.attrKV = function (key, value) {\r\n            if (key !== 'style') {\r\n                _super.prototype.attrKV.call(this, key, value);\r\n            }\r\n            else {\r\n                if (!this.style) {\r\n                    this.useStyle(value);\r\n                }\r\n                else {\r\n                    this.setStyle(value);\r\n                }\r\n            }\r\n        };\r\n        Displayable.prototype.setStyle = function (keyOrObj, value) {\r\n            if (typeof keyOrObj === 'string') {\r\n                this.style[keyOrObj] = value;\r\n            }\r\n            else {\r\n                extend(this.style, keyOrObj);\r\n            }\r\n            this.dirtyStyle();\r\n            return this;\r\n        };\r\n        Displayable.prototype.dirtyStyle = function () {\r\n            this.markRedraw();\r\n            this.__dirty |= Displayable.STYLE_CHANGED_BIT;\r\n            if (this._rect) {\r\n                this._rect = null;\r\n            }\r\n        };\r\n        Displayable.prototype.dirty = function () {\r\n            this.dirtyStyle();\r\n        };\r\n        Displayable.prototype.styleChanged = function () {\r\n            return !!(this.__dirty & Displayable.STYLE_CHANGED_BIT);\r\n        };\r\n        Displayable.prototype.styleUpdated = function () {\r\n            this.__dirty &= ~Displayable.STYLE_CHANGED_BIT;\r\n        };\r\n        Displayable.prototype.createStyle = function (obj) {\r\n            return createObject(DEFAULT_COMMON_STYLE, obj);\r\n        };\r\n        Displayable.prototype.useStyle = function (obj) {\r\n            if (!obj[STYLE_MAGIC_KEY]) {\r\n                obj = this.createStyle(obj);\r\n            }\r\n            if (this.__inHover) {\r\n                this.__hoverStyle = obj;\r\n            }\r\n            else {\r\n                this.style = obj;\r\n            }\r\n            this.dirtyStyle();\r\n        };\r\n        Displayable.prototype.isStyleObject = function (obj) {\r\n            return obj[STYLE_MAGIC_KEY];\r\n        };\r\n        Displayable.prototype._innerSaveToNormal = function (toState) {\r\n            _super.prototype._innerSaveToNormal.call(this, toState);\r\n            var normalState = this._normalState;\r\n            if (toState.style && !normalState.style) {\r\n                normalState.style = this._mergeStyle(this.createStyle(), this.style);\r\n            }\r\n            this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS$1);\r\n        };\r\n        Displayable.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\r\n            _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\r\n            var needsRestoreToNormal = !(state && keepCurrentStates);\r\n            var targetStyle;\r\n            if (state && state.style) {\r\n                if (transition) {\r\n                    if (keepCurrentStates) {\r\n                        targetStyle = state.style;\r\n                    }\r\n                    else {\r\n                        targetStyle = this._mergeStyle(this.createStyle(), normalState.style);\r\n                        this._mergeStyle(targetStyle, state.style);\r\n                    }\r\n                }\r\n                else {\r\n                    targetStyle = this._mergeStyle(this.createStyle(), keepCurrentStates ? this.style : normalState.style);\r\n                    this._mergeStyle(targetStyle, state.style);\r\n                }\r\n            }\r\n            else if (needsRestoreToNormal) {\r\n                targetStyle = normalState.style;\r\n            }\r\n            if (targetStyle) {\r\n                if (transition) {\r\n                    var sourceStyle = this.style;\r\n                    this.style = this.createStyle(needsRestoreToNormal ? {} : sourceStyle);\r\n                    if (needsRestoreToNormal) {\r\n                        var changedKeys = keys(sourceStyle);\r\n                        for (var i = 0; i < changedKeys.length; i++) {\r\n                            var key = changedKeys[i];\r\n                            if (key in targetStyle) {\r\n                                targetStyle[key] = targetStyle[key];\r\n                                this.style[key] = sourceStyle[key];\r\n                            }\r\n                        }\r\n                    }\r\n                    var targetKeys = keys(targetStyle);\r\n                    for (var i = 0; i < targetKeys.length; i++) {\r\n                        var key = targetKeys[i];\r\n                        this.style[key] = this.style[key];\r\n                    }\r\n                    this._transitionState(stateName, {\r\n                        style: targetStyle\r\n                    }, animationCfg, this._getAnimationStyleProps());\r\n                }\r\n                else {\r\n                    this.useStyle(targetStyle);\r\n                }\r\n            }\r\n            for (var i = 0; i < PRIMARY_STATES_KEYS$1.length; i++) {\r\n                var key = PRIMARY_STATES_KEYS$1[i];\r\n                if (state && state[key] != null) {\r\n                    this[key] = state[key];\r\n                }\r\n                else if (needsRestoreToNormal) {\r\n                    if (normalState[key] != null) {\r\n                        this[key] = normalState[key];\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        Displayable.prototype._mergeStates = function (states) {\r\n            var mergedState = _super.prototype._mergeStates.call(this, states);\r\n            var mergedStyle;\r\n            for (var i = 0; i < states.length; i++) {\r\n                var state = states[i];\r\n                if (state.style) {\r\n                    mergedStyle = mergedStyle || {};\r\n                    this._mergeStyle(mergedStyle, state.style);\r\n                }\r\n            }\r\n            if (mergedStyle) {\r\n                mergedState.style = mergedStyle;\r\n            }\r\n            return mergedState;\r\n        };\r\n        Displayable.prototype._mergeStyle = function (targetStyle, sourceStyle) {\r\n            extend(targetStyle, sourceStyle);\r\n            return targetStyle;\r\n        };\r\n        Displayable.prototype._getAnimationStyleProps = function () {\r\n            return DEFAULT_COMMON_ANIMATION_PROPS;\r\n        };\r\n        Displayable.STYLE_CHANGED_BIT = 2;\r\n        Displayable.initDefaultProps = (function () {\r\n            var dispProto = Displayable.prototype;\r\n            dispProto.type = 'displayable';\r\n            dispProto.invisible = false;\r\n            dispProto.z = 0;\r\n            dispProto.z2 = 0;\r\n            dispProto.zlevel = 0;\r\n            dispProto.culling = false;\r\n            dispProto.cursor = 'pointer';\r\n            dispProto.rectHover = false;\r\n            dispProto.incremental = false;\r\n            dispProto._rect = null;\r\n            dispProto.__dirty = Element.REDARAW_BIT | Displayable.STYLE_CHANGED_BIT;\r\n        })();\r\n        return Displayable;\r\n    }(Element));\n\n    var mathPow = Math.pow;\r\n    var mathSqrt = Math.sqrt;\r\n    var EPSILON$1 = 1e-8;\r\n    var EPSILON_NUMERIC = 1e-4;\r\n    var THREE_SQRT = mathSqrt(3);\r\n    var ONE_THIRD = 1 / 3;\r\n    var _v0 = create();\r\n    var _v1 = create();\r\n    var _v2 = create();\r\n    function isAroundZero(val) {\r\n        return val > -EPSILON$1 && val < EPSILON$1;\r\n    }\r\n    function isNotAroundZero$1(val) {\r\n        return val > EPSILON$1 || val < -EPSILON$1;\r\n    }\r\n    function cubicAt(p0, p1, p2, p3, t) {\r\n        var onet = 1 - t;\r\n        return onet * onet * (onet * p0 + 3 * t * p1)\r\n            + t * t * (t * p3 + 3 * onet * p2);\r\n    }\r\n    function cubicDerivativeAt(p0, p1, p2, p3, t) {\r\n        var onet = 1 - t;\r\n        return 3 * (((p1 - p0) * onet + 2 * (p2 - p1) * t) * onet\r\n            + (p3 - p2) * t * t);\r\n    }\r\n    function cubicRootAt(p0, p1, p2, p3, val, roots) {\r\n        var a = p3 + 3 * (p1 - p2) - p0;\r\n        var b = 3 * (p2 - p1 * 2 + p0);\r\n        var c = 3 * (p1 - p0);\r\n        var d = p0 - val;\r\n        var A = b * b - 3 * a * c;\r\n        var B = b * c - 9 * a * d;\r\n        var C = c * c - 3 * b * d;\r\n        var n = 0;\r\n        if (isAroundZero(A) && isAroundZero(B)) {\r\n            if (isAroundZero(b)) {\r\n                roots[0] = 0;\r\n            }\r\n            else {\r\n                var t1 = -c / b;\r\n                if (t1 >= 0 && t1 <= 1) {\r\n                    roots[n++] = t1;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            var disc = B * B - 4 * A * C;\r\n            if (isAroundZero(disc)) {\r\n                var K = B / A;\r\n                var t1 = -b / a + K;\r\n                var t2 = -K / 2;\r\n                if (t1 >= 0 && t1 <= 1) {\r\n                    roots[n++] = t1;\r\n                }\r\n                if (t2 >= 0 && t2 <= 1) {\r\n                    roots[n++] = t2;\r\n                }\r\n            }\r\n            else if (disc > 0) {\r\n                var discSqrt = mathSqrt(disc);\r\n                var Y1 = A * b + 1.5 * a * (-B + discSqrt);\r\n                var Y2 = A * b + 1.5 * a * (-B - discSqrt);\r\n                if (Y1 < 0) {\r\n                    Y1 = -mathPow(-Y1, ONE_THIRD);\r\n                }\r\n                else {\r\n                    Y1 = mathPow(Y1, ONE_THIRD);\r\n                }\r\n                if (Y2 < 0) {\r\n                    Y2 = -mathPow(-Y2, ONE_THIRD);\r\n                }\r\n                else {\r\n                    Y2 = mathPow(Y2, ONE_THIRD);\r\n                }\r\n                var t1 = (-b - (Y1 + Y2)) / (3 * a);\r\n                if (t1 >= 0 && t1 <= 1) {\r\n                    roots[n++] = t1;\r\n                }\r\n            }\r\n            else {\r\n                var T = (2 * A * b - 3 * a * B) / (2 * mathSqrt(A * A * A));\r\n                var theta = Math.acos(T) / 3;\r\n                var ASqrt = mathSqrt(A);\r\n                var tmp = Math.cos(theta);\r\n                var t1 = (-b - 2 * ASqrt * tmp) / (3 * a);\r\n                var t2 = (-b + ASqrt * (tmp + THREE_SQRT * Math.sin(theta))) / (3 * a);\r\n                var t3 = (-b + ASqrt * (tmp - THREE_SQRT * Math.sin(theta))) / (3 * a);\r\n                if (t1 >= 0 && t1 <= 1) {\r\n                    roots[n++] = t1;\r\n                }\r\n                if (t2 >= 0 && t2 <= 1) {\r\n                    roots[n++] = t2;\r\n                }\r\n                if (t3 >= 0 && t3 <= 1) {\r\n                    roots[n++] = t3;\r\n                }\r\n            }\r\n        }\r\n        return n;\r\n    }\r\n    function cubicExtrema(p0, p1, p2, p3, extrema) {\r\n        var b = 6 * p2 - 12 * p1 + 6 * p0;\r\n        var a = 9 * p1 + 3 * p3 - 3 * p0 - 9 * p2;\r\n        var c = 3 * p1 - 3 * p0;\r\n        var n = 0;\r\n        if (isAroundZero(a)) {\r\n            if (isNotAroundZero$1(b)) {\r\n                var t1 = -c / b;\r\n                if (t1 >= 0 && t1 <= 1) {\r\n                    extrema[n++] = t1;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            var disc = b * b - 4 * a * c;\r\n            if (isAroundZero(disc)) {\r\n                extrema[0] = -b / (2 * a);\r\n            }\r\n            else if (disc > 0) {\r\n                var discSqrt = mathSqrt(disc);\r\n                var t1 = (-b + discSqrt) / (2 * a);\r\n                var t2 = (-b - discSqrt) / (2 * a);\r\n                if (t1 >= 0 && t1 <= 1) {\r\n                    extrema[n++] = t1;\r\n                }\r\n                if (t2 >= 0 && t2 <= 1) {\r\n                    extrema[n++] = t2;\r\n                }\r\n            }\r\n        }\r\n        return n;\r\n    }\r\n    function cubicSubdivide(p0, p1, p2, p3, t, out) {\r\n        var p01 = (p1 - p0) * t + p0;\r\n        var p12 = (p2 - p1) * t + p1;\r\n        var p23 = (p3 - p2) * t + p2;\r\n        var p012 = (p12 - p01) * t + p01;\r\n        var p123 = (p23 - p12) * t + p12;\r\n        var p0123 = (p123 - p012) * t + p012;\r\n        out[0] = p0;\r\n        out[1] = p01;\r\n        out[2] = p012;\r\n        out[3] = p0123;\r\n        out[4] = p0123;\r\n        out[5] = p123;\r\n        out[6] = p23;\r\n        out[7] = p3;\r\n    }\r\n    function cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, out) {\r\n        var t;\r\n        var interval = 0.005;\r\n        var d = Infinity;\r\n        var prev;\r\n        var next;\r\n        var d1;\r\n        var d2;\r\n        _v0[0] = x;\r\n        _v0[1] = y;\r\n        for (var _t = 0; _t < 1; _t += 0.05) {\r\n            _v1[0] = cubicAt(x0, x1, x2, x3, _t);\r\n            _v1[1] = cubicAt(y0, y1, y2, y3, _t);\r\n            d1 = distSquare(_v0, _v1);\r\n            if (d1 < d) {\r\n                t = _t;\r\n                d = d1;\r\n            }\r\n        }\r\n        d = Infinity;\r\n        for (var i = 0; i < 32; i++) {\r\n            if (interval < EPSILON_NUMERIC) {\r\n                break;\r\n            }\r\n            prev = t - interval;\r\n            next = t + interval;\r\n            _v1[0] = cubicAt(x0, x1, x2, x3, prev);\r\n            _v1[1] = cubicAt(y0, y1, y2, y3, prev);\r\n            d1 = distSquare(_v1, _v0);\r\n            if (prev >= 0 && d1 < d) {\r\n                t = prev;\r\n                d = d1;\r\n            }\r\n            else {\r\n                _v2[0] = cubicAt(x0, x1, x2, x3, next);\r\n                _v2[1] = cubicAt(y0, y1, y2, y3, next);\r\n                d2 = distSquare(_v2, _v0);\r\n                if (next <= 1 && d2 < d) {\r\n                    t = next;\r\n                    d = d2;\r\n                }\r\n                else {\r\n                    interval *= 0.5;\r\n                }\r\n            }\r\n        }\r\n        if (out) {\r\n            out[0] = cubicAt(x0, x1, x2, x3, t);\r\n            out[1] = cubicAt(y0, y1, y2, y3, t);\r\n        }\r\n        return mathSqrt(d);\r\n    }\r\n    function cubicLength(x0, y0, x1, y1, x2, y2, x3, y3, iteration) {\r\n        var px = x0;\r\n        var py = y0;\r\n        var d = 0;\r\n        var step = 1 / iteration;\r\n        for (var i = 1; i <= iteration; i++) {\r\n            var t = i * step;\r\n            var x = cubicAt(x0, x1, x2, x3, t);\r\n            var y = cubicAt(y0, y1, y2, y3, t);\r\n            var dx = x - px;\r\n            var dy = y - py;\r\n            d += Math.sqrt(dx * dx + dy * dy);\r\n            px = x;\r\n            py = y;\r\n        }\r\n        return d;\r\n    }\r\n    function quadraticAt(p0, p1, p2, t) {\r\n        var onet = 1 - t;\r\n        return onet * (onet * p0 + 2 * t * p1) + t * t * p2;\r\n    }\r\n    function quadraticDerivativeAt(p0, p1, p2, t) {\r\n        return 2 * ((1 - t) * (p1 - p0) + t * (p2 - p1));\r\n    }\r\n    function quadraticRootAt(p0, p1, p2, val, roots) {\r\n        var a = p0 - 2 * p1 + p2;\r\n        var b = 2 * (p1 - p0);\r\n        var c = p0 - val;\r\n        var n = 0;\r\n        if (isAroundZero(a)) {\r\n            if (isNotAroundZero$1(b)) {\r\n                var t1 = -c / b;\r\n                if (t1 >= 0 && t1 <= 1) {\r\n                    roots[n++] = t1;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            var disc = b * b - 4 * a * c;\r\n            if (isAroundZero(disc)) {\r\n                var t1 = -b / (2 * a);\r\n                if (t1 >= 0 && t1 <= 1) {\r\n                    roots[n++] = t1;\r\n                }\r\n            }\r\n            else if (disc > 0) {\r\n                var discSqrt = mathSqrt(disc);\r\n                var t1 = (-b + discSqrt) / (2 * a);\r\n                var t2 = (-b - discSqrt) / (2 * a);\r\n                if (t1 >= 0 && t1 <= 1) {\r\n                    roots[n++] = t1;\r\n                }\r\n                if (t2 >= 0 && t2 <= 1) {\r\n                    roots[n++] = t2;\r\n                }\r\n            }\r\n        }\r\n        return n;\r\n    }\r\n    function quadraticExtremum(p0, p1, p2) {\r\n        var divider = p0 + p2 - 2 * p1;\r\n        if (divider === 0) {\r\n            return 0.5;\r\n        }\r\n        else {\r\n            return (p0 - p1) / divider;\r\n        }\r\n    }\r\n    function quadraticSubdivide(p0, p1, p2, t, out) {\r\n        var p01 = (p1 - p0) * t + p0;\r\n        var p12 = (p2 - p1) * t + p1;\r\n        var p012 = (p12 - p01) * t + p01;\r\n        out[0] = p0;\r\n        out[1] = p01;\r\n        out[2] = p012;\r\n        out[3] = p012;\r\n        out[4] = p12;\r\n        out[5] = p2;\r\n    }\r\n    function quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, out) {\r\n        var t;\r\n        var interval = 0.005;\r\n        var d = Infinity;\r\n        _v0[0] = x;\r\n        _v0[1] = y;\r\n        for (var _t = 0; _t < 1; _t += 0.05) {\r\n            _v1[0] = quadraticAt(x0, x1, x2, _t);\r\n            _v1[1] = quadraticAt(y0, y1, y2, _t);\r\n            var d1 = distSquare(_v0, _v1);\r\n            if (d1 < d) {\r\n                t = _t;\r\n                d = d1;\r\n            }\r\n        }\r\n        d = Infinity;\r\n        for (var i = 0; i < 32; i++) {\r\n            if (interval < EPSILON_NUMERIC) {\r\n                break;\r\n            }\r\n            var prev = t - interval;\r\n            var next = t + interval;\r\n            _v1[0] = quadraticAt(x0, x1, x2, prev);\r\n            _v1[1] = quadraticAt(y0, y1, y2, prev);\r\n            var d1 = distSquare(_v1, _v0);\r\n            if (prev >= 0 && d1 < d) {\r\n                t = prev;\r\n                d = d1;\r\n            }\r\n            else {\r\n                _v2[0] = quadraticAt(x0, x1, x2, next);\r\n                _v2[1] = quadraticAt(y0, y1, y2, next);\r\n                var d2 = distSquare(_v2, _v0);\r\n                if (next <= 1 && d2 < d) {\r\n                    t = next;\r\n                    d = d2;\r\n                }\r\n                else {\r\n                    interval *= 0.5;\r\n                }\r\n            }\r\n        }\r\n        if (out) {\r\n            out[0] = quadraticAt(x0, x1, x2, t);\r\n            out[1] = quadraticAt(y0, y1, y2, t);\r\n        }\r\n        return mathSqrt(d);\r\n    }\r\n    function quadraticLength(x0, y0, x1, y1, x2, y2, iteration) {\r\n        var px = x0;\r\n        var py = y0;\r\n        var d = 0;\r\n        var step = 1 / iteration;\r\n        for (var i = 1; i <= iteration; i++) {\r\n            var t = i * step;\r\n            var x = quadraticAt(x0, x1, x2, t);\r\n            var y = quadraticAt(y0, y1, y2, t);\r\n            var dx = x - px;\r\n            var dy = y - py;\r\n            d += Math.sqrt(dx * dx + dy * dy);\r\n            px = x;\r\n            py = y;\r\n        }\r\n        return d;\r\n    }\n\n    var mathMin$1 = Math.min;\r\n    var mathMax$1 = Math.max;\r\n    var mathSin = Math.sin;\r\n    var mathCos = Math.cos;\r\n    var PI2 = Math.PI * 2;\r\n    var start = create();\r\n    var end = create();\r\n    var extremity = create();\r\n    function fromLine(x0, y0, x1, y1, min, max) {\r\n        min[0] = mathMin$1(x0, x1);\r\n        min[1] = mathMin$1(y0, y1);\r\n        max[0] = mathMax$1(x0, x1);\r\n        max[1] = mathMax$1(y0, y1);\r\n    }\r\n    var xDim = [];\r\n    var yDim = [];\r\n    function fromCubic(x0, y0, x1, y1, x2, y2, x3, y3, min, max) {\r\n        var cubicExtrema$1 = cubicExtrema;\r\n        var cubicAt$1 = cubicAt;\r\n        var n = cubicExtrema$1(x0, x1, x2, x3, xDim);\r\n        min[0] = Infinity;\r\n        min[1] = Infinity;\r\n        max[0] = -Infinity;\r\n        max[1] = -Infinity;\r\n        for (var i = 0; i < n; i++) {\r\n            var x = cubicAt$1(x0, x1, x2, x3, xDim[i]);\r\n            min[0] = mathMin$1(x, min[0]);\r\n            max[0] = mathMax$1(x, max[0]);\r\n        }\r\n        n = cubicExtrema$1(y0, y1, y2, y3, yDim);\r\n        for (var i = 0; i < n; i++) {\r\n            var y = cubicAt$1(y0, y1, y2, y3, yDim[i]);\r\n            min[1] = mathMin$1(y, min[1]);\r\n            max[1] = mathMax$1(y, max[1]);\r\n        }\r\n        min[0] = mathMin$1(x0, min[0]);\r\n        max[0] = mathMax$1(x0, max[0]);\r\n        min[0] = mathMin$1(x3, min[0]);\r\n        max[0] = mathMax$1(x3, max[0]);\r\n        min[1] = mathMin$1(y0, min[1]);\r\n        max[1] = mathMax$1(y0, max[1]);\r\n        min[1] = mathMin$1(y3, min[1]);\r\n        max[1] = mathMax$1(y3, max[1]);\r\n    }\r\n    function fromQuadratic(x0, y0, x1, y1, x2, y2, min, max) {\r\n        var quadraticExtremum$1 = quadraticExtremum;\r\n        var quadraticAt$1 = quadraticAt;\r\n        var tx = mathMax$1(mathMin$1(quadraticExtremum$1(x0, x1, x2), 1), 0);\r\n        var ty = mathMax$1(mathMin$1(quadraticExtremum$1(y0, y1, y2), 1), 0);\r\n        var x = quadraticAt$1(x0, x1, x2, tx);\r\n        var y = quadraticAt$1(y0, y1, y2, ty);\r\n        min[0] = mathMin$1(x0, x2, x);\r\n        min[1] = mathMin$1(y0, y2, y);\r\n        max[0] = mathMax$1(x0, x2, x);\r\n        max[1] = mathMax$1(y0, y2, y);\r\n    }\r\n    function fromArc(x, y, rx, ry, startAngle, endAngle, anticlockwise, min$1, max$1) {\r\n        var vec2Min = min;\r\n        var vec2Max = max;\r\n        var diff = Math.abs(startAngle - endAngle);\r\n        if (diff % PI2 < 1e-4 && diff > 1e-4) {\r\n            min$1[0] = x - rx;\r\n            min$1[1] = y - ry;\r\n            max$1[0] = x + rx;\r\n            max$1[1] = y + ry;\r\n            return;\r\n        }\r\n        start[0] = mathCos(startAngle) * rx + x;\r\n        start[1] = mathSin(startAngle) * ry + y;\r\n        end[0] = mathCos(endAngle) * rx + x;\r\n        end[1] = mathSin(endAngle) * ry + y;\r\n        vec2Min(min$1, start, end);\r\n        vec2Max(max$1, start, end);\r\n        startAngle = startAngle % (PI2);\r\n        if (startAngle < 0) {\r\n            startAngle = startAngle + PI2;\r\n        }\r\n        endAngle = endAngle % (PI2);\r\n        if (endAngle < 0) {\r\n            endAngle = endAngle + PI2;\r\n        }\r\n        if (startAngle > endAngle && !anticlockwise) {\r\n            endAngle += PI2;\r\n        }\r\n        else if (startAngle < endAngle && anticlockwise) {\r\n            startAngle += PI2;\r\n        }\r\n        if (anticlockwise) {\r\n            var tmp = endAngle;\r\n            endAngle = startAngle;\r\n            startAngle = tmp;\r\n        }\r\n        for (var angle = 0; angle < endAngle; angle += Math.PI / 2) {\r\n            if (angle > startAngle) {\r\n                extremity[0] = mathCos(angle) * rx + x;\r\n                extremity[1] = mathSin(angle) * ry + y;\r\n                vec2Min(min$1, extremity, min$1);\r\n                vec2Max(max$1, extremity, max$1);\r\n            }\r\n        }\r\n    }\n\n    var CMD = {\r\n        M: 1,\r\n        L: 2,\r\n        C: 3,\r\n        Q: 4,\r\n        A: 5,\r\n        Z: 6,\r\n        R: 7\r\n    };\r\n    var tmpOutX = [];\r\n    var tmpOutY = [];\r\n    var min$1 = [];\r\n    var max$1 = [];\r\n    var min2 = [];\r\n    var max2 = [];\r\n    var mathMin$2 = Math.min;\r\n    var mathMax$2 = Math.max;\r\n    var mathCos$1 = Math.cos;\r\n    var mathSin$1 = Math.sin;\r\n    var mathSqrt$1 = Math.sqrt;\r\n    var mathAbs = Math.abs;\r\n    var PI = Math.PI;\r\n    var PI2$1 = PI * 2;\r\n    var hasTypedArray = typeof Float32Array !== 'undefined';\r\n    var tmpAngles = [];\r\n    function modPI2(radian) {\r\n        var n = Math.round(radian / PI * 1e8) / 1e8;\r\n        return (n % 2) * PI;\r\n    }\r\n    function normalizeArcAngles(angles, anticlockwise) {\r\n        var newStartAngle = modPI2(angles[0]);\r\n        if (newStartAngle < 0) {\r\n            newStartAngle += PI2$1;\r\n        }\r\n        var delta = newStartAngle - angles[0];\r\n        var newEndAngle = angles[1];\r\n        newEndAngle += delta;\r\n        if (!anticlockwise && newEndAngle - newStartAngle >= PI2$1) {\r\n            newEndAngle = newStartAngle + PI2$1;\r\n        }\r\n        else if (anticlockwise && newStartAngle - newEndAngle >= PI2$1) {\r\n            newEndAngle = newStartAngle - PI2$1;\r\n        }\r\n        else if (!anticlockwise && newStartAngle > newEndAngle) {\r\n            newEndAngle = newStartAngle +\r\n                (PI2$1 - modPI2(newStartAngle - newEndAngle));\r\n        }\r\n        else if (anticlockwise && newStartAngle < newEndAngle) {\r\n            newEndAngle = newStartAngle -\r\n                (PI2$1 - modPI2(newEndAngle - newStartAngle));\r\n        }\r\n        angles[0] = newStartAngle;\r\n        angles[1] = newEndAngle;\r\n    }\r\n    var PathProxy = (function () {\r\n        function PathProxy(notSaveData) {\r\n            this.dpr = 1;\r\n            this._version = 0;\r\n            this._xi = 0;\r\n            this._yi = 0;\r\n            this._x0 = 0;\r\n            this._y0 = 0;\r\n            this._len = 0;\r\n            if (notSaveData) {\r\n                this._saveData = false;\r\n            }\r\n            if (this._saveData) {\r\n                this.data = [];\r\n            }\r\n        }\r\n        PathProxy.prototype.increaseVersion = function () {\r\n            this._version++;\r\n        };\r\n        PathProxy.prototype.getVersion = function () {\r\n            return this._version;\r\n        };\r\n        PathProxy.prototype.setScale = function (sx, sy, segmentIgnoreThreshold) {\r\n            segmentIgnoreThreshold = segmentIgnoreThreshold || 0;\r\n            if (segmentIgnoreThreshold > 0) {\r\n                this._ux = mathAbs(segmentIgnoreThreshold / devicePixelRatio / sx) || 0;\r\n                this._uy = mathAbs(segmentIgnoreThreshold / devicePixelRatio / sy) || 0;\r\n            }\r\n        };\r\n        PathProxy.prototype.setDPR = function (dpr) {\r\n            this.dpr = dpr;\r\n        };\r\n        PathProxy.prototype.setContext = function (ctx) {\r\n            this._ctx = ctx;\r\n        };\r\n        PathProxy.prototype.getContext = function () {\r\n            return this._ctx;\r\n        };\r\n        PathProxy.prototype.beginPath = function () {\r\n            this._ctx && this._ctx.beginPath();\r\n            this.reset();\r\n            return this;\r\n        };\r\n        PathProxy.prototype.reset = function () {\r\n            if (this._saveData) {\r\n                this._len = 0;\r\n            }\r\n            if (this._lineDash) {\r\n                this._lineDash = null;\r\n                this._dashOffset = 0;\r\n            }\r\n            if (this._pathSegLen) {\r\n                this._pathSegLen = null;\r\n                this._pathLen = 0;\r\n            }\r\n            this._version++;\r\n        };\r\n        PathProxy.prototype.moveTo = function (x, y) {\r\n            this.addData(CMD.M, x, y);\r\n            this._ctx && this._ctx.moveTo(x, y);\r\n            this._x0 = x;\r\n            this._y0 = y;\r\n            this._xi = x;\r\n            this._yi = y;\r\n            return this;\r\n        };\r\n        PathProxy.prototype.lineTo = function (x, y) {\r\n            var exceedUnit = mathAbs(x - this._xi) > this._ux\r\n                || mathAbs(y - this._yi) > this._uy\r\n                || this._len < 5;\r\n            this.addData(CMD.L, x, y);\r\n            if (this._ctx && exceedUnit) {\r\n                this._needsDash ? this._dashedLineTo(x, y)\r\n                    : this._ctx.lineTo(x, y);\r\n            }\r\n            if (exceedUnit) {\r\n                this._xi = x;\r\n                this._yi = y;\r\n            }\r\n            return this;\r\n        };\r\n        PathProxy.prototype.bezierCurveTo = function (x1, y1, x2, y2, x3, y3) {\r\n            this.addData(CMD.C, x1, y1, x2, y2, x3, y3);\r\n            if (this._ctx) {\r\n                this._needsDash ? this._dashedBezierTo(x1, y1, x2, y2, x3, y3)\r\n                    : this._ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\r\n            }\r\n            this._xi = x3;\r\n            this._yi = y3;\r\n            return this;\r\n        };\r\n        PathProxy.prototype.quadraticCurveTo = function (x1, y1, x2, y2) {\r\n            this.addData(CMD.Q, x1, y1, x2, y2);\r\n            if (this._ctx) {\r\n                this._needsDash ? this._dashedQuadraticTo(x1, y1, x2, y2)\r\n                    : this._ctx.quadraticCurveTo(x1, y1, x2, y2);\r\n            }\r\n            this._xi = x2;\r\n            this._yi = y2;\r\n            return this;\r\n        };\r\n        PathProxy.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\r\n            tmpAngles[0] = startAngle;\r\n            tmpAngles[1] = endAngle;\r\n            normalizeArcAngles(tmpAngles, anticlockwise);\r\n            startAngle = tmpAngles[0];\r\n            endAngle = tmpAngles[1];\r\n            var delta = endAngle - startAngle;\r\n            this.addData(CMD.A, cx, cy, r, r, startAngle, delta, 0, anticlockwise ? 0 : 1);\r\n            this._ctx && this._ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\r\n            this._xi = mathCos$1(endAngle) * r + cx;\r\n            this._yi = mathSin$1(endAngle) * r + cy;\r\n            return this;\r\n        };\r\n        PathProxy.prototype.arcTo = function (x1, y1, x2, y2, radius) {\r\n            if (this._ctx) {\r\n                this._ctx.arcTo(x1, y1, x2, y2, radius);\r\n            }\r\n            return this;\r\n        };\r\n        PathProxy.prototype.rect = function (x, y, w, h) {\r\n            this._ctx && this._ctx.rect(x, y, w, h);\r\n            this.addData(CMD.R, x, y, w, h);\r\n            return this;\r\n        };\r\n        PathProxy.prototype.closePath = function () {\r\n            this.addData(CMD.Z);\r\n            var ctx = this._ctx;\r\n            var x0 = this._x0;\r\n            var y0 = this._y0;\r\n            if (ctx) {\r\n                this._needsDash && this._dashedLineTo(x0, y0);\r\n                ctx.closePath();\r\n            }\r\n            this._xi = x0;\r\n            this._yi = y0;\r\n            return this;\r\n        };\r\n        PathProxy.prototype.fill = function (ctx) {\r\n            ctx && ctx.fill();\r\n            this.toStatic();\r\n        };\r\n        PathProxy.prototype.stroke = function (ctx) {\r\n            ctx && ctx.stroke();\r\n            this.toStatic();\r\n        };\r\n        PathProxy.prototype.setLineDash = function (lineDash) {\r\n            if (lineDash instanceof Array) {\r\n                this._lineDash = lineDash;\r\n                this._dashIdx = 0;\r\n                var lineDashSum = 0;\r\n                for (var i = 0; i < lineDash.length; i++) {\r\n                    lineDashSum += lineDash[i];\r\n                }\r\n                this._dashSum = lineDashSum;\r\n                this._needsDash = true;\r\n            }\r\n            else {\r\n                this._lineDash = null;\r\n                this._needsDash = false;\r\n            }\r\n            return this;\r\n        };\r\n        PathProxy.prototype.setLineDashOffset = function (offset) {\r\n            this._dashOffset = offset;\r\n            return this;\r\n        };\r\n        PathProxy.prototype.len = function () {\r\n            return this._len;\r\n        };\r\n        PathProxy.prototype.setData = function (data) {\r\n            var len = data.length;\r\n            if (!(this.data && this.data.length === len) && hasTypedArray) {\r\n                this.data = new Float32Array(len);\r\n            }\r\n            for (var i = 0; i < len; i++) {\r\n                this.data[i] = data[i];\r\n            }\r\n            this._len = len;\r\n        };\r\n        PathProxy.prototype.appendPath = function (path) {\r\n            if (!(path instanceof Array)) {\r\n                path = [path];\r\n            }\r\n            var len = path.length;\r\n            var appendSize = 0;\r\n            var offset = this._len;\r\n            for (var i = 0; i < len; i++) {\r\n                appendSize += path[i].len();\r\n            }\r\n            if (hasTypedArray && (this.data instanceof Float32Array)) {\r\n                this.data = new Float32Array(offset + appendSize);\r\n            }\r\n            for (var i = 0; i < len; i++) {\r\n                var appendPathData = path[i].data;\r\n                for (var k = 0; k < appendPathData.length; k++) {\r\n                    this.data[offset++] = appendPathData[k];\r\n                }\r\n            }\r\n            this._len = offset;\r\n        };\r\n        PathProxy.prototype.addData = function (cmd, a, b, c, d, e, f, g, h) {\r\n            if (!this._saveData) {\r\n                return;\r\n            }\r\n            var data = this.data;\r\n            if (this._len + arguments.length > data.length) {\r\n                this._expandData();\r\n                data = this.data;\r\n            }\r\n            for (var i = 0; i < arguments.length; i++) {\r\n                data[this._len++] = arguments[i];\r\n            }\r\n        };\r\n        PathProxy.prototype._expandData = function () {\r\n            if (!(this.data instanceof Array)) {\r\n                var newData = [];\r\n                for (var i = 0; i < this._len; i++) {\r\n                    newData[i] = this.data[i];\r\n                }\r\n                this.data = newData;\r\n            }\r\n        };\r\n        PathProxy.prototype._dashedLineTo = function (x1, y1) {\r\n            var dashSum = this._dashSum;\r\n            var lineDash = this._lineDash;\r\n            var ctx = this._ctx;\r\n            var offset = this._dashOffset;\r\n            var x0 = this._xi;\r\n            var y0 = this._yi;\r\n            var dx = x1 - x0;\r\n            var dy = y1 - y0;\r\n            var dist = mathSqrt$1(dx * dx + dy * dy);\r\n            var x = x0;\r\n            var y = y0;\r\n            var nDash = lineDash.length;\r\n            var dash;\r\n            var idx;\r\n            dx /= dist;\r\n            dy /= dist;\r\n            if (offset < 0) {\r\n                offset = dashSum + offset;\r\n            }\r\n            offset %= dashSum;\r\n            x -= offset * dx;\r\n            y -= offset * dy;\r\n            while ((dx > 0 && x <= x1) || (dx < 0 && x >= x1)\r\n                || (dx === 0 && ((dy > 0 && y <= y1) || (dy < 0 && y >= y1)))) {\r\n                idx = this._dashIdx;\r\n                dash = lineDash[idx];\r\n                x += dx * dash;\r\n                y += dy * dash;\r\n                this._dashIdx = (idx + 1) % nDash;\r\n                if ((dx > 0 && x < x0) || (dx < 0 && x > x0) || (dy > 0 && y < y0) || (dy < 0 && y > y0)) {\r\n                    continue;\r\n                }\r\n                ctx[idx % 2 ? 'moveTo' : 'lineTo'](dx >= 0 ? mathMin$2(x, x1) : mathMax$2(x, x1), dy >= 0 ? mathMin$2(y, y1) : mathMax$2(y, y1));\r\n            }\r\n            dx = x - x1;\r\n            dy = y - y1;\r\n            this._dashOffset = -mathSqrt$1(dx * dx + dy * dy);\r\n        };\r\n        PathProxy.prototype._dashedBezierTo = function (x1, y1, x2, y2, x3, y3) {\r\n            var ctx = this._ctx;\r\n            var dashSum = this._dashSum;\r\n            var offset = this._dashOffset;\r\n            var lineDash = this._lineDash;\r\n            var x0 = this._xi;\r\n            var y0 = this._yi;\r\n            var bezierLen = 0;\r\n            var idx = this._dashIdx;\r\n            var nDash = lineDash.length;\r\n            var t;\r\n            var dx;\r\n            var dy;\r\n            var x;\r\n            var y;\r\n            var tmpLen = 0;\r\n            if (offset < 0) {\r\n                offset = dashSum + offset;\r\n            }\r\n            offset %= dashSum;\r\n            for (t = 0; t < 1; t += 0.1) {\r\n                dx = cubicAt(x0, x1, x2, x3, t + 0.1)\r\n                    - cubicAt(x0, x1, x2, x3, t);\r\n                dy = cubicAt(y0, y1, y2, y3, t + 0.1)\r\n                    - cubicAt(y0, y1, y2, y3, t);\r\n                bezierLen += mathSqrt$1(dx * dx + dy * dy);\r\n            }\r\n            for (; idx < nDash; idx++) {\r\n                tmpLen += lineDash[idx];\r\n                if (tmpLen > offset) {\r\n                    break;\r\n                }\r\n            }\r\n            t = (tmpLen - offset) / bezierLen;\r\n            while (t <= 1) {\r\n                x = cubicAt(x0, x1, x2, x3, t);\r\n                y = cubicAt(y0, y1, y2, y3, t);\r\n                idx % 2 ? ctx.moveTo(x, y)\r\n                    : ctx.lineTo(x, y);\r\n                t += lineDash[idx] / bezierLen;\r\n                idx = (idx + 1) % nDash;\r\n            }\r\n            (idx % 2 !== 0) && ctx.lineTo(x3, y3);\r\n            dx = x3 - x;\r\n            dy = y3 - y;\r\n            this._dashOffset = -mathSqrt$1(dx * dx + dy * dy);\r\n        };\r\n        PathProxy.prototype._dashedQuadraticTo = function (x1, y1, x2, y2) {\r\n            var x3 = x2;\r\n            var y3 = y2;\r\n            x2 = (x2 + 2 * x1) / 3;\r\n            y2 = (y2 + 2 * y1) / 3;\r\n            x1 = (this._xi + 2 * x1) / 3;\r\n            y1 = (this._yi + 2 * y1) / 3;\r\n            this._dashedBezierTo(x1, y1, x2, y2, x3, y3);\r\n        };\r\n        PathProxy.prototype.toStatic = function () {\r\n            if (!this._saveData) {\r\n                return;\r\n            }\r\n            var data = this.data;\r\n            if (data instanceof Array) {\r\n                data.length = this._len;\r\n                if (hasTypedArray && this._len > 11) {\r\n                    this.data = new Float32Array(data);\r\n                }\r\n            }\r\n        };\r\n        PathProxy.prototype.getBoundingRect = function () {\r\n            min$1[0] = min$1[1] = min2[0] = min2[1] = Number.MAX_VALUE;\r\n            max$1[0] = max$1[1] = max2[0] = max2[1] = -Number.MAX_VALUE;\r\n            var data = this.data;\r\n            var xi = 0;\r\n            var yi = 0;\r\n            var x0 = 0;\r\n            var y0 = 0;\r\n            var i;\r\n            for (i = 0; i < data.length;) {\r\n                var cmd = data[i++];\r\n                var isFirst = i === 1;\r\n                if (isFirst) {\r\n                    xi = data[i];\r\n                    yi = data[i + 1];\r\n                    x0 = xi;\r\n                    y0 = yi;\r\n                }\r\n                switch (cmd) {\r\n                    case CMD.M:\r\n                        xi = x0 = data[i++];\r\n                        yi = y0 = data[i++];\r\n                        min2[0] = x0;\r\n                        min2[1] = y0;\r\n                        max2[0] = x0;\r\n                        max2[1] = y0;\r\n                        break;\r\n                    case CMD.L:\r\n                        fromLine(xi, yi, data[i], data[i + 1], min2, max2);\r\n                        xi = data[i++];\r\n                        yi = data[i++];\r\n                        break;\r\n                    case CMD.C:\r\n                        fromCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], min2, max2);\r\n                        xi = data[i++];\r\n                        yi = data[i++];\r\n                        break;\r\n                    case CMD.Q:\r\n                        fromQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], min2, max2);\r\n                        xi = data[i++];\r\n                        yi = data[i++];\r\n                        break;\r\n                    case CMD.A:\r\n                        var cx = data[i++];\r\n                        var cy = data[i++];\r\n                        var rx = data[i++];\r\n                        var ry = data[i++];\r\n                        var startAngle = data[i++];\r\n                        var endAngle = data[i++] + startAngle;\r\n                        i += 1;\r\n                        var anticlockwise = !data[i++];\r\n                        if (isFirst) {\r\n                            x0 = mathCos$1(startAngle) * rx + cx;\r\n                            y0 = mathSin$1(startAngle) * ry + cy;\r\n                        }\r\n                        fromArc(cx, cy, rx, ry, startAngle, endAngle, anticlockwise, min2, max2);\r\n                        xi = mathCos$1(endAngle) * rx + cx;\r\n                        yi = mathSin$1(endAngle) * ry + cy;\r\n                        break;\r\n                    case CMD.R:\r\n                        x0 = xi = data[i++];\r\n                        y0 = yi = data[i++];\r\n                        var width = data[i++];\r\n                        var height = data[i++];\r\n                        fromLine(x0, y0, x0 + width, y0 + height, min2, max2);\r\n                        break;\r\n                    case CMD.Z:\r\n                        xi = x0;\r\n                        yi = y0;\r\n                        break;\r\n                }\r\n                min(min$1, min$1, min2);\r\n                max(max$1, max$1, max2);\r\n            }\r\n            if (i === 0) {\r\n                min$1[0] = min$1[1] = max$1[0] = max$1[1] = 0;\r\n            }\r\n            return new BoundingRect(min$1[0], min$1[1], max$1[0] - min$1[0], max$1[1] - min$1[1]);\r\n        };\r\n        PathProxy.prototype._calculateLength = function () {\r\n            var data = this.data;\r\n            var len = this._len;\r\n            var ux = this._ux;\r\n            var uy = this._uy;\r\n            var xi = 0;\r\n            var yi = 0;\r\n            var x0 = 0;\r\n            var y0 = 0;\r\n            if (!this._pathSegLen) {\r\n                this._pathSegLen = [];\r\n            }\r\n            var pathSegLen = this._pathSegLen;\r\n            var pathTotalLen = 0;\r\n            var segCount = 0;\r\n            for (var i = 0; i < len;) {\r\n                var cmd = data[i++];\r\n                var isFirst = i === 1;\r\n                if (isFirst) {\r\n                    xi = data[i];\r\n                    yi = data[i + 1];\r\n                    x0 = xi;\r\n                    y0 = yi;\r\n                }\r\n                var l = -1;\r\n                switch (cmd) {\r\n                    case CMD.M:\r\n                        xi = x0 = data[i++];\r\n                        yi = y0 = data[i++];\r\n                        break;\r\n                    case CMD.L: {\r\n                        var x2 = data[i++];\r\n                        var y2 = data[i++];\r\n                        var dx = x2 - xi;\r\n                        var dy = y2 - yi;\r\n                        if (mathAbs(dx) > ux || mathAbs(dy) > uy || i === len - 1) {\r\n                            l = Math.sqrt(dx * dx + dy * dy);\r\n                            xi = x2;\r\n                            yi = y2;\r\n                        }\r\n                        break;\r\n                    }\r\n                    case CMD.C: {\r\n                        var x1 = data[i++];\r\n                        var y1 = data[i++];\r\n                        var x2 = data[i++];\r\n                        var y2 = data[i++];\r\n                        var x3 = data[i++];\r\n                        var y3 = data[i++];\r\n                        l = cubicLength(xi, yi, x1, y1, x2, y2, x3, y3, 10);\r\n                        xi = x3;\r\n                        yi = y3;\r\n                        break;\r\n                    }\r\n                    case CMD.Q: {\r\n                        var x1 = data[i++];\r\n                        var y1 = data[i++];\r\n                        var x2 = data[i++];\r\n                        var y2 = data[i++];\r\n                        l = quadraticLength(xi, yi, x1, y1, x2, y2, 10);\r\n                        xi = x2;\r\n                        yi = y2;\r\n                        break;\r\n                    }\r\n                    case CMD.A:\r\n                        var cx = data[i++];\r\n                        var cy = data[i++];\r\n                        var rx = data[i++];\r\n                        var ry = data[i++];\r\n                        var startAngle = data[i++];\r\n                        var delta = data[i++];\r\n                        var endAngle = delta + startAngle;\r\n                        i += 1;\r\n                        var anticlockwise = !data[i++];\r\n                        if (isFirst) {\r\n                            x0 = mathCos$1(startAngle) * rx + cx;\r\n                            y0 = mathSin$1(startAngle) * ry + cy;\r\n                        }\r\n                        l = mathMax$2(rx, ry) * mathMin$2(PI2$1, Math.abs(delta));\r\n                        xi = mathCos$1(endAngle) * rx + cx;\r\n                        yi = mathSin$1(endAngle) * ry + cy;\r\n                        break;\r\n                    case CMD.R: {\r\n                        x0 = xi = data[i++];\r\n                        y0 = yi = data[i++];\r\n                        var width = data[i++];\r\n                        var height = data[i++];\r\n                        l = width * 2 + height * 2;\r\n                        break;\r\n                    }\r\n                    case CMD.Z: {\r\n                        var dx = x0 - xi;\r\n                        var dy = y0 - yi;\r\n                        l = Math.sqrt(dx * dx + dy * dy);\r\n                        xi = x0;\r\n                        yi = y0;\r\n                        break;\r\n                    }\r\n                }\r\n                if (l >= 0) {\r\n                    pathSegLen[segCount++] = l;\r\n                    pathTotalLen += l;\r\n                }\r\n            }\r\n            this._pathLen = pathTotalLen;\r\n            return pathTotalLen;\r\n        };\r\n        PathProxy.prototype.rebuildPath = function (ctx, percent) {\r\n            var d = this.data;\r\n            var ux = this._ux;\r\n            var uy = this._uy;\r\n            var len = this._len;\r\n            var x0;\r\n            var y0;\r\n            var xi;\r\n            var yi;\r\n            var x;\r\n            var y;\r\n            var drawPart = percent < 1;\r\n            var pathSegLen;\r\n            var pathTotalLen;\r\n            var accumLength = 0;\r\n            var segCount = 0;\r\n            var displayedLength;\r\n            if (drawPart) {\r\n                if (!this._pathSegLen) {\r\n                    this._calculateLength();\r\n                }\r\n                pathSegLen = this._pathSegLen;\r\n                pathTotalLen = this._pathLen;\r\n                displayedLength = percent * pathTotalLen;\r\n                if (!displayedLength) {\r\n                    return;\r\n                }\r\n            }\r\n            lo: for (var i = 0; i < len;) {\r\n                var cmd = d[i++];\r\n                var isFirst = i === 1;\r\n                if (isFirst) {\r\n                    xi = d[i];\r\n                    yi = d[i + 1];\r\n                    x0 = xi;\r\n                    y0 = yi;\r\n                }\r\n                switch (cmd) {\r\n                    case CMD.M:\r\n                        x0 = xi = d[i++];\r\n                        y0 = yi = d[i++];\r\n                        ctx.moveTo(xi, yi);\r\n                        break;\r\n                    case CMD.L: {\r\n                        x = d[i++];\r\n                        y = d[i++];\r\n                        if (mathAbs(x - xi) > ux || mathAbs(y - yi) > uy || i === len - 1) {\r\n                            if (drawPart) {\r\n                                var l = pathSegLen[segCount++];\r\n                                if (accumLength + l > displayedLength) {\r\n                                    var t = (displayedLength - accumLength) / l;\r\n                                    ctx.lineTo(xi * (1 - t) + x * t, yi * (1 - t) + y * t);\r\n                                    break lo;\r\n                                }\r\n                                accumLength += l;\r\n                            }\r\n                            ctx.lineTo(x, y);\r\n                            xi = x;\r\n                            yi = y;\r\n                        }\r\n                        break;\r\n                    }\r\n                    case CMD.C: {\r\n                        var x1 = d[i++];\r\n                        var y1 = d[i++];\r\n                        var x2 = d[i++];\r\n                        var y2 = d[i++];\r\n                        var x3 = d[i++];\r\n                        var y3 = d[i++];\r\n                        if (drawPart) {\r\n                            var l = pathSegLen[segCount++];\r\n                            if (accumLength + l > displayedLength) {\r\n                                var t = (displayedLength - accumLength) / l;\r\n                                cubicSubdivide(xi, x1, x2, x3, t, tmpOutX);\r\n                                cubicSubdivide(yi, y1, y2, y3, t, tmpOutY);\r\n                                ctx.bezierCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2], tmpOutX[3], tmpOutY[3]);\r\n                                break lo;\r\n                            }\r\n                            accumLength += l;\r\n                        }\r\n                        ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\r\n                        xi = x3;\r\n                        yi = y3;\r\n                        break;\r\n                    }\r\n                    case CMD.Q: {\r\n                        var x1 = d[i++];\r\n                        var y1 = d[i++];\r\n                        var x2 = d[i++];\r\n                        var y2 = d[i++];\r\n                        if (drawPart) {\r\n                            var l = pathSegLen[segCount++];\r\n                            if (accumLength + l > displayedLength) {\r\n                                var t = (displayedLength - accumLength) / l;\r\n                                quadraticSubdivide(xi, x1, x2, t, tmpOutX);\r\n                                quadraticSubdivide(yi, y1, y2, t, tmpOutY);\r\n                                ctx.quadraticCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2]);\r\n                                break lo;\r\n                            }\r\n                            accumLength += l;\r\n                        }\r\n                        ctx.quadraticCurveTo(x1, y1, x2, y2);\r\n                        xi = x2;\r\n                        yi = y2;\r\n                        break;\r\n                    }\r\n                    case CMD.A:\r\n                        var cx = d[i++];\r\n                        var cy = d[i++];\r\n                        var rx = d[i++];\r\n                        var ry = d[i++];\r\n                        var startAngle = d[i++];\r\n                        var delta = d[i++];\r\n                        var psi = d[i++];\r\n                        var anticlockwise = !d[i++];\r\n                        var r = (rx > ry) ? rx : ry;\r\n                        var isEllipse = mathAbs(rx - ry) > 1e-3;\r\n                        var endAngle = startAngle + delta;\r\n                        var breakBuild = false;\r\n                        if (drawPart) {\r\n                            var l = pathSegLen[segCount++];\r\n                            if (accumLength + l > displayedLength) {\r\n                                endAngle = startAngle + delta * (displayedLength - accumLength) / l;\r\n                                breakBuild = true;\r\n                            }\r\n                            accumLength += l;\r\n                        }\r\n                        if (isEllipse && ctx.ellipse) {\r\n                            ctx.ellipse(cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise);\r\n                        }\r\n                        else {\r\n                            ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\r\n                        }\r\n                        if (breakBuild) {\r\n                            break lo;\r\n                        }\r\n                        if (isFirst) {\r\n                            x0 = mathCos$1(startAngle) * rx + cx;\r\n                            y0 = mathSin$1(startAngle) * ry + cy;\r\n                        }\r\n                        xi = mathCos$1(endAngle) * rx + cx;\r\n                        yi = mathSin$1(endAngle) * ry + cy;\r\n                        break;\r\n                    case CMD.R:\r\n                        x0 = xi = d[i];\r\n                        y0 = yi = d[i + 1];\r\n                        x = d[i++];\r\n                        y = d[i++];\r\n                        var width = d[i++];\r\n                        var height = d[i++];\r\n                        if (drawPart) {\r\n                            var l = pathSegLen[segCount++];\r\n                            if (accumLength + l > displayedLength) {\r\n                                var d_1 = displayedLength - accumLength;\r\n                                ctx.moveTo(x, y);\r\n                                ctx.lineTo(x + mathMin$2(d_1, width), y);\r\n                                d_1 -= width;\r\n                                if (d_1 > 0) {\r\n                                    ctx.lineTo(x + width, y + mathMin$2(d_1, height));\r\n                                }\r\n                                d_1 -= height;\r\n                                if (d_1 > 0) {\r\n                                    ctx.lineTo(x + mathMax$2(width - d_1, 0), y + height);\r\n                                }\r\n                                d_1 -= width;\r\n                                if (d_1 > 0) {\r\n                                    ctx.lineTo(x, y + mathMax$2(height - d_1, 0));\r\n                                }\r\n                                break lo;\r\n                            }\r\n                            accumLength += l;\r\n                        }\r\n                        ctx.rect(x, y, width, height);\r\n                        break;\r\n                    case CMD.Z:\r\n                        if (drawPart) {\r\n                            var l = pathSegLen[segCount++];\r\n                            if (accumLength + l > displayedLength) {\r\n                                var t = (displayedLength - accumLength) / l;\r\n                                ctx.lineTo(xi * (1 - t) + x0 * t, yi * (1 - t) + y0 * t);\r\n                                break lo;\r\n                            }\r\n                            accumLength += l;\r\n                        }\r\n                        ctx.closePath();\r\n                        xi = x0;\r\n                        yi = y0;\r\n                }\r\n            }\r\n        };\r\n        PathProxy.CMD = CMD;\r\n        PathProxy.initDefaultProps = (function () {\r\n            var proto = PathProxy.prototype;\r\n            proto._saveData = true;\r\n            proto._needsDash = false;\r\n            proto._dashOffset = 0;\r\n            proto._dashIdx = 0;\r\n            proto._dashSum = 0;\r\n            proto._ux = 0;\r\n            proto._uy = 0;\r\n        })();\r\n        return PathProxy;\r\n    }());\n\n    function containStroke(x0, y0, x1, y1, lineWidth, x, y) {\r\n        if (lineWidth === 0) {\r\n            return false;\r\n        }\r\n        var _l = lineWidth;\r\n        var _a = 0;\r\n        var _b = x0;\r\n        if ((y > y0 + _l && y > y1 + _l)\r\n            || (y < y0 - _l && y < y1 - _l)\r\n            || (x > x0 + _l && x > x1 + _l)\r\n            || (x < x0 - _l && x < x1 - _l)) {\r\n            return false;\r\n        }\r\n        if (x0 !== x1) {\r\n            _a = (y0 - y1) / (x0 - x1);\r\n            _b = (x0 * y1 - x1 * y0) / (x0 - x1);\r\n        }\r\n        else {\r\n            return Math.abs(x - x0) <= _l / 2;\r\n        }\r\n        var tmp = _a * x - y + _b;\r\n        var _s = tmp * tmp / (_a * _a + 1);\r\n        return _s <= _l / 2 * _l / 2;\r\n    }\n\n    function containStroke$1(x0, y0, x1, y1, x2, y2, x3, y3, lineWidth, x, y) {\r\n        if (lineWidth === 0) {\r\n            return false;\r\n        }\r\n        var _l = lineWidth;\r\n        if ((y > y0 + _l && y > y1 + _l && y > y2 + _l && y > y3 + _l)\r\n            || (y < y0 - _l && y < y1 - _l && y < y2 - _l && y < y3 - _l)\r\n            || (x > x0 + _l && x > x1 + _l && x > x2 + _l && x > x3 + _l)\r\n            || (x < x0 - _l && x < x1 - _l && x < x2 - _l && x < x3 - _l)) {\r\n            return false;\r\n        }\r\n        var d = cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, null);\r\n        return d <= _l / 2;\r\n    }\n\n    function containStroke$2(x0, y0, x1, y1, x2, y2, lineWidth, x, y) {\r\n        if (lineWidth === 0) {\r\n            return false;\r\n        }\r\n        var _l = lineWidth;\r\n        if ((y > y0 + _l && y > y1 + _l && y > y2 + _l)\r\n            || (y < y0 - _l && y < y1 - _l && y < y2 - _l)\r\n            || (x > x0 + _l && x > x1 + _l && x > x2 + _l)\r\n            || (x < x0 - _l && x < x1 - _l && x < x2 - _l)) {\r\n            return false;\r\n        }\r\n        var d = quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, null);\r\n        return d <= _l / 2;\r\n    }\n\n    var PI2$2 = Math.PI * 2;\r\n    function normalizeRadian(angle) {\r\n        angle %= PI2$2;\r\n        if (angle < 0) {\r\n            angle += PI2$2;\r\n        }\r\n        return angle;\r\n    }\n\n    var PI2$3 = Math.PI * 2;\r\n    function containStroke$3(cx, cy, r, startAngle, endAngle, anticlockwise, lineWidth, x, y) {\r\n        if (lineWidth === 0) {\r\n            return false;\r\n        }\r\n        var _l = lineWidth;\r\n        x -= cx;\r\n        y -= cy;\r\n        var d = Math.sqrt(x * x + y * y);\r\n        if ((d - _l > r) || (d + _l < r)) {\r\n            return false;\r\n        }\r\n        if (Math.abs(startAngle - endAngle) % PI2$3 < 1e-4) {\r\n            return true;\r\n        }\r\n        if (anticlockwise) {\r\n            var tmp = startAngle;\r\n            startAngle = normalizeRadian(endAngle);\r\n            endAngle = normalizeRadian(tmp);\r\n        }\r\n        else {\r\n            startAngle = normalizeRadian(startAngle);\r\n            endAngle = normalizeRadian(endAngle);\r\n        }\r\n        if (startAngle > endAngle) {\r\n            endAngle += PI2$3;\r\n        }\r\n        var angle = Math.atan2(y, x);\r\n        if (angle < 0) {\r\n            angle += PI2$3;\r\n        }\r\n        return (angle >= startAngle && angle <= endAngle)\r\n            || (angle + PI2$3 >= startAngle && angle + PI2$3 <= endAngle);\r\n    }\n\n    function windingLine(x0, y0, x1, y1, x, y) {\r\n        if ((y > y0 && y > y1) || (y < y0 && y < y1)) {\r\n            return 0;\r\n        }\r\n        if (y1 === y0) {\r\n            return 0;\r\n        }\r\n        var t = (y - y0) / (y1 - y0);\r\n        var dir = y1 < y0 ? 1 : -1;\r\n        if (t === 1 || t === 0) {\r\n            dir = y1 < y0 ? 0.5 : -0.5;\r\n        }\r\n        var x_ = t * (x1 - x0) + x0;\r\n        return x_ === x ? Infinity : x_ > x ? dir : 0;\r\n    }\n\n    var CMD$1 = PathProxy.CMD;\r\n    var PI2$4 = Math.PI * 2;\r\n    var EPSILON$2 = 1e-4;\r\n    function isAroundEqual(a, b) {\r\n        return Math.abs(a - b) < EPSILON$2;\r\n    }\r\n    var roots = [-1, -1, -1];\r\n    var extrema = [-1, -1];\r\n    function swapExtrema() {\r\n        var tmp = extrema[0];\r\n        extrema[0] = extrema[1];\r\n        extrema[1] = tmp;\r\n    }\r\n    function windingCubic(x0, y0, x1, y1, x2, y2, x3, y3, x, y) {\r\n        if ((y > y0 && y > y1 && y > y2 && y > y3)\r\n            || (y < y0 && y < y1 && y < y2 && y < y3)) {\r\n            return 0;\r\n        }\r\n        var nRoots = cubicRootAt(y0, y1, y2, y3, y, roots);\r\n        if (nRoots === 0) {\r\n            return 0;\r\n        }\r\n        else {\r\n            var w = 0;\r\n            var nExtrema = -1;\r\n            var y0_ = void 0;\r\n            var y1_ = void 0;\r\n            for (var i = 0; i < nRoots; i++) {\r\n                var t = roots[i];\r\n                var unit = (t === 0 || t === 1) ? 0.5 : 1;\r\n                var x_ = cubicAt(x0, x1, x2, x3, t);\r\n                if (x_ < x) {\r\n                    continue;\r\n                }\r\n                if (nExtrema < 0) {\r\n                    nExtrema = cubicExtrema(y0, y1, y2, y3, extrema);\r\n                    if (extrema[1] < extrema[0] && nExtrema > 1) {\r\n                        swapExtrema();\r\n                    }\r\n                    y0_ = cubicAt(y0, y1, y2, y3, extrema[0]);\r\n                    if (nExtrema > 1) {\r\n                        y1_ = cubicAt(y0, y1, y2, y3, extrema[1]);\r\n                    }\r\n                }\r\n                if (nExtrema === 2) {\r\n                    if (t < extrema[0]) {\r\n                        w += y0_ < y0 ? unit : -unit;\r\n                    }\r\n                    else if (t < extrema[1]) {\r\n                        w += y1_ < y0_ ? unit : -unit;\r\n                    }\r\n                    else {\r\n                        w += y3 < y1_ ? unit : -unit;\r\n                    }\r\n                }\r\n                else {\r\n                    if (t < extrema[0]) {\r\n                        w += y0_ < y0 ? unit : -unit;\r\n                    }\r\n                    else {\r\n                        w += y3 < y0_ ? unit : -unit;\r\n                    }\r\n                }\r\n            }\r\n            return w;\r\n        }\r\n    }\r\n    function windingQuadratic(x0, y0, x1, y1, x2, y2, x, y) {\r\n        if ((y > y0 && y > y1 && y > y2)\r\n            || (y < y0 && y < y1 && y < y2)) {\r\n            return 0;\r\n        }\r\n        var nRoots = quadraticRootAt(y0, y1, y2, y, roots);\r\n        if (nRoots === 0) {\r\n            return 0;\r\n        }\r\n        else {\r\n            var t = quadraticExtremum(y0, y1, y2);\r\n            if (t >= 0 && t <= 1) {\r\n                var w = 0;\r\n                var y_ = quadraticAt(y0, y1, y2, t);\r\n                for (var i = 0; i < nRoots; i++) {\r\n                    var unit = (roots[i] === 0 || roots[i] === 1) ? 0.5 : 1;\r\n                    var x_ = quadraticAt(x0, x1, x2, roots[i]);\r\n                    if (x_ < x) {\r\n                        continue;\r\n                    }\r\n                    if (roots[i] < t) {\r\n                        w += y_ < y0 ? unit : -unit;\r\n                    }\r\n                    else {\r\n                        w += y2 < y_ ? unit : -unit;\r\n                    }\r\n                }\r\n                return w;\r\n            }\r\n            else {\r\n                var unit = (roots[0] === 0 || roots[0] === 1) ? 0.5 : 1;\r\n                var x_ = quadraticAt(x0, x1, x2, roots[0]);\r\n                if (x_ < x) {\r\n                    return 0;\r\n                }\r\n                return y2 < y0 ? unit : -unit;\r\n            }\r\n        }\r\n    }\r\n    function windingArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y) {\r\n        y -= cy;\r\n        if (y > r || y < -r) {\r\n            return 0;\r\n        }\r\n        var tmp = Math.sqrt(r * r - y * y);\r\n        roots[0] = -tmp;\r\n        roots[1] = tmp;\r\n        var dTheta = Math.abs(startAngle - endAngle);\r\n        if (dTheta < 1e-4) {\r\n            return 0;\r\n        }\r\n        if (dTheta >= PI2$4 - 1e-4) {\r\n            startAngle = 0;\r\n            endAngle = PI2$4;\r\n            var dir = anticlockwise ? 1 : -1;\r\n            if (x >= roots[0] + cx && x <= roots[1] + cx) {\r\n                return dir;\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        }\r\n        if (startAngle > endAngle) {\r\n            var tmp_1 = startAngle;\r\n            startAngle = endAngle;\r\n            endAngle = tmp_1;\r\n        }\r\n        if (startAngle < 0) {\r\n            startAngle += PI2$4;\r\n            endAngle += PI2$4;\r\n        }\r\n        var w = 0;\r\n        for (var i = 0; i < 2; i++) {\r\n            var x_ = roots[i];\r\n            if (x_ + cx > x) {\r\n                var angle = Math.atan2(y, x_);\r\n                var dir = anticlockwise ? 1 : -1;\r\n                if (angle < 0) {\r\n                    angle = PI2$4 + angle;\r\n                }\r\n                if ((angle >= startAngle && angle <= endAngle)\r\n                    || (angle + PI2$4 >= startAngle && angle + PI2$4 <= endAngle)) {\r\n                    if (angle > Math.PI / 2 && angle < Math.PI * 1.5) {\r\n                        dir = -dir;\r\n                    }\r\n                    w += dir;\r\n                }\r\n            }\r\n        }\r\n        return w;\r\n    }\r\n    function containPath(data, lineWidth, isStroke, x, y) {\r\n        var w = 0;\r\n        var xi = 0;\r\n        var yi = 0;\r\n        var x0 = 0;\r\n        var y0 = 0;\r\n        var x1;\r\n        var y1;\r\n        for (var i = 0; i < data.length;) {\r\n            var cmd = data[i++];\r\n            var isFirst = i === 1;\r\n            if (cmd === CMD$1.M && i > 1) {\r\n                if (!isStroke) {\r\n                    w += windingLine(xi, yi, x0, y0, x, y);\r\n                }\r\n            }\r\n            if (isFirst) {\r\n                xi = data[i];\r\n                yi = data[i + 1];\r\n                x0 = xi;\r\n                y0 = yi;\r\n            }\r\n            switch (cmd) {\r\n                case CMD$1.M:\r\n                    x0 = data[i++];\r\n                    y0 = data[i++];\r\n                    xi = x0;\r\n                    yi = y0;\r\n                    break;\r\n                case CMD$1.L:\r\n                    if (isStroke) {\r\n                        if (containStroke(xi, yi, data[i], data[i + 1], lineWidth, x, y)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                    else {\r\n                        w += windingLine(xi, yi, data[i], data[i + 1], x, y) || 0;\r\n                    }\r\n                    xi = data[i++];\r\n                    yi = data[i++];\r\n                    break;\r\n                case CMD$1.C:\r\n                    if (isStroke) {\r\n                        if (containStroke$1(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                    else {\r\n                        w += windingCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\r\n                    }\r\n                    xi = data[i++];\r\n                    yi = data[i++];\r\n                    break;\r\n                case CMD$1.Q:\r\n                    if (isStroke) {\r\n                        if (containStroke$2(xi, yi, data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                    else {\r\n                        w += windingQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\r\n                    }\r\n                    xi = data[i++];\r\n                    yi = data[i++];\r\n                    break;\r\n                case CMD$1.A:\r\n                    var cx = data[i++];\r\n                    var cy = data[i++];\r\n                    var rx = data[i++];\r\n                    var ry = data[i++];\r\n                    var theta = data[i++];\r\n                    var dTheta = data[i++];\r\n                    i += 1;\r\n                    var anticlockwise = !!(1 - data[i++]);\r\n                    x1 = Math.cos(theta) * rx + cx;\r\n                    y1 = Math.sin(theta) * ry + cy;\r\n                    if (!isFirst) {\r\n                        w += windingLine(xi, yi, x1, y1, x, y);\r\n                    }\r\n                    else {\r\n                        x0 = x1;\r\n                        y0 = y1;\r\n                    }\r\n                    var _x = (x - cx) * ry / rx + cx;\r\n                    if (isStroke) {\r\n                        if (containStroke$3(cx, cy, ry, theta, theta + dTheta, anticlockwise, lineWidth, _x, y)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                    else {\r\n                        w += windingArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y);\r\n                    }\r\n                    xi = Math.cos(theta + dTheta) * rx + cx;\r\n                    yi = Math.sin(theta + dTheta) * ry + cy;\r\n                    break;\r\n                case CMD$1.R:\r\n                    x0 = xi = data[i++];\r\n                    y0 = yi = data[i++];\r\n                    var width = data[i++];\r\n                    var height = data[i++];\r\n                    x1 = x0 + width;\r\n                    y1 = y0 + height;\r\n                    if (isStroke) {\r\n                        if (containStroke(x0, y0, x1, y0, lineWidth, x, y)\r\n                            || containStroke(x1, y0, x1, y1, lineWidth, x, y)\r\n                            || containStroke(x1, y1, x0, y1, lineWidth, x, y)\r\n                            || containStroke(x0, y1, x0, y0, lineWidth, x, y)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                    else {\r\n                        w += windingLine(x1, y0, x1, y1, x, y);\r\n                        w += windingLine(x0, y1, x0, y0, x, y);\r\n                    }\r\n                    break;\r\n                case CMD$1.Z:\r\n                    if (isStroke) {\r\n                        if (containStroke(xi, yi, x0, y0, lineWidth, x, y)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                    else {\r\n                        w += windingLine(xi, yi, x0, y0, x, y);\r\n                    }\r\n                    xi = x0;\r\n                    yi = y0;\r\n                    break;\r\n            }\r\n        }\r\n        if (!isStroke && !isAroundEqual(yi, y0)) {\r\n            w += windingLine(xi, yi, x0, y0, x, y) || 0;\r\n        }\r\n        return w !== 0;\r\n    }\r\n    function contain(pathData, x, y) {\r\n        return containPath(pathData, 0, false, x, y);\r\n    }\r\n    function containStroke$4(pathData, lineWidth, x, y) {\r\n        return containPath(pathData, lineWidth, true, x, y);\r\n    }\n\n    var DEFAULT_PATH_STYLE = defaults({\r\n        fill: '#000',\r\n        stroke: null,\r\n        strokePercent: 1,\r\n        fillOpacity: 1,\r\n        strokeOpacity: 1,\r\n        lineDashOffset: 0,\r\n        lineWidth: 1,\r\n        lineCap: 'butt',\r\n        miterLimit: 10,\r\n        strokeNoScale: false,\r\n        strokeFirst: false\r\n    }, DEFAULT_COMMON_STYLE);\r\n    var DEFAULT_PATH_ANIMATION_PROPS = {\r\n        style: defaults({\r\n            fill: true,\r\n            stroke: true,\r\n            strokePercent: true,\r\n            fillOpacity: true,\r\n            strokeOpacity: true,\r\n            lineDashOffset: true,\r\n            lineWidth: true,\r\n            miterLimit: true\r\n        }, DEFAULT_COMMON_ANIMATION_PROPS.style)\r\n    };\r\n    var Path = (function (_super) {\r\n        __extends(Path, _super);\r\n        function Path(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Path.prototype._init = function (props) {\r\n            var keysArr = keys(props);\r\n            this.shape = this.getDefaultShape();\r\n            var defaultStyle = this.getDefaultStyle();\r\n            if (defaultStyle) {\r\n                this.useStyle(defaultStyle);\r\n            }\r\n            for (var i = 0; i < keysArr.length; i++) {\r\n                var key = keysArr[i];\r\n                var value = props[key];\r\n                if (key === 'style') {\r\n                    if (!this.style) {\r\n                        this.useStyle(value);\r\n                    }\r\n                    else {\r\n                        extend(this.style, value);\r\n                    }\r\n                }\r\n                else if (key === 'shape') {\r\n                    extend(this.shape, value);\r\n                }\r\n                else {\r\n                    _super.prototype.attrKV.call(this, key, value);\r\n                }\r\n            }\r\n            if (!this.style) {\r\n                this.useStyle({});\r\n            }\r\n        };\r\n        Path.prototype.getDefaultStyle = function () {\r\n            return null;\r\n        };\r\n        Path.prototype.getDefaultShape = function () {\r\n            return {};\r\n        };\r\n        Path.prototype.canBeInsideText = function () {\r\n            return this.hasFill();\r\n        };\r\n        Path.prototype.getInsideTextFill = function () {\r\n            var pathFill = this.style.fill;\r\n            if (pathFill !== 'none') {\r\n                if (isString(pathFill)) {\r\n                    var fillLum = lum(pathFill, 0);\r\n                    if (fillLum > 0.5) {\r\n                        return DARK_LABEL_COLOR;\r\n                    }\r\n                    else if (fillLum > 0.2) {\r\n                        return LIGHTER_LABEL_COLOR;\r\n                    }\r\n                    return LIGHT_LABEL_COLOR;\r\n                }\r\n                else if (pathFill) {\r\n                    return LIGHT_LABEL_COLOR;\r\n                }\r\n            }\r\n            return DARK_LABEL_COLOR;\r\n        };\r\n        Path.prototype.getInsideTextStroke = function (textFill) {\r\n            var pathFill = this.style.fill;\r\n            if (isString(pathFill)) {\r\n                var zr = this.__zr;\r\n                var isDarkMode = !!(zr && zr.isDarkMode());\r\n                var isDarkLabel = lum(textFill, 0) < DARK_MODE_THRESHOLD;\r\n                if (isDarkMode === isDarkLabel) {\r\n                    return pathFill;\r\n                }\r\n            }\r\n        };\r\n        Path.prototype.buildPath = function (ctx, shapeCfg, inBundle) { };\r\n        Path.prototype.pathUpdated = function () {\r\n            this.__dirty &= ~Path.SHAPE_CHANGED_BIT;\r\n        };\r\n        Path.prototype.createPathProxy = function () {\r\n            this.path = new PathProxy(false);\r\n        };\r\n        Path.prototype.hasStroke = function () {\r\n            var style = this.style;\r\n            var stroke = style.stroke;\r\n            return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\r\n        };\r\n        Path.prototype.hasFill = function () {\r\n            var style = this.style;\r\n            var fill = style.fill;\r\n            return fill != null && fill !== 'none';\r\n        };\r\n        Path.prototype.getBoundingRect = function () {\r\n            var rect = this._rect;\r\n            var style = this.style;\r\n            var needsUpdateRect = !rect;\r\n            if (needsUpdateRect) {\r\n                var firstInvoke = false;\r\n                if (!this.path) {\r\n                    firstInvoke = true;\r\n                    this.createPathProxy();\r\n                }\r\n                var path = this.path;\r\n                if (firstInvoke || (this.__dirty & Path.SHAPE_CHANGED_BIT)) {\r\n                    path.beginPath();\r\n                    this.buildPath(path, this.shape, false);\r\n                    this.pathUpdated();\r\n                }\r\n                rect = path.getBoundingRect();\r\n            }\r\n            this._rect = rect;\r\n            if (this.hasStroke()) {\r\n                var rectWithStroke = this._rectWithStroke || (this._rectWithStroke = rect.clone());\r\n                if (this.__dirty || needsUpdateRect) {\r\n                    rectWithStroke.copy(rect);\r\n                    var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\r\n                    var w = style.lineWidth;\r\n                    if (!this.hasFill()) {\r\n                        var strokeContainThreshold = this.strokeContainThreshold;\r\n                        w = Math.max(w, strokeContainThreshold == null ? 4 : strokeContainThreshold);\r\n                    }\r\n                    if (lineScale > 1e-10) {\r\n                        rectWithStroke.width += w / lineScale;\r\n                        rectWithStroke.height += w / lineScale;\r\n                        rectWithStroke.x -= w / lineScale / 2;\r\n                        rectWithStroke.y -= w / lineScale / 2;\r\n                    }\r\n                }\r\n                return rectWithStroke;\r\n            }\r\n            return rect;\r\n        };\r\n        Path.prototype.contain = function (x, y) {\r\n            var localPos = this.transformCoordToLocal(x, y);\r\n            var rect = this.getBoundingRect();\r\n            var style = this.style;\r\n            x = localPos[0];\r\n            y = localPos[1];\r\n            if (rect.contain(x, y)) {\r\n                var pathData = this.path.data;\r\n                if (this.hasStroke()) {\r\n                    var lineWidth = style.lineWidth;\r\n                    var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\r\n                    if (lineScale > 1e-10) {\r\n                        if (!this.hasFill()) {\r\n                            lineWidth = Math.max(lineWidth, this.strokeContainThreshold);\r\n                        }\r\n                        if (containStroke$4(pathData, lineWidth / lineScale, x, y)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n                if (this.hasFill()) {\r\n                    return contain(pathData, x, y);\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        Path.prototype.dirtyShape = function () {\r\n            this.__dirty |= Path.SHAPE_CHANGED_BIT;\r\n            if (this._rect) {\r\n                this._rect = null;\r\n            }\r\n            this.markRedraw();\r\n        };\r\n        Path.prototype.dirty = function () {\r\n            this.dirtyStyle();\r\n            this.dirtyShape();\r\n        };\r\n        Path.prototype.animateShape = function (loop) {\r\n            return this.animate('shape', loop);\r\n        };\r\n        Path.prototype.updateDuringAnimation = function (targetKey) {\r\n            if (targetKey === 'style') {\r\n                this.dirtyStyle();\r\n            }\r\n            else if (targetKey === 'shape') {\r\n                this.dirtyShape();\r\n            }\r\n            else {\r\n                this.markRedraw();\r\n            }\r\n        };\r\n        Path.prototype.attrKV = function (key, value) {\r\n            if (key === 'shape') {\r\n                this.setShape(value);\r\n            }\r\n            else {\r\n                _super.prototype.attrKV.call(this, key, value);\r\n            }\r\n        };\r\n        Path.prototype.setShape = function (keyOrObj, value) {\r\n            var shape = this.shape;\r\n            if (!shape) {\r\n                shape = this.shape = {};\r\n            }\r\n            if (typeof keyOrObj === 'string') {\r\n                shape[keyOrObj] = value;\r\n            }\r\n            else {\r\n                extend(shape, keyOrObj);\r\n            }\r\n            this.dirtyShape();\r\n            return this;\r\n        };\r\n        Path.prototype.shapeChanged = function () {\r\n            return !!(this.__dirty & Path.SHAPE_CHANGED_BIT);\r\n        };\r\n        Path.prototype.createStyle = function (obj) {\r\n            return createObject(DEFAULT_PATH_STYLE, obj);\r\n        };\r\n        Path.prototype._innerSaveToNormal = function (toState) {\r\n            _super.prototype._innerSaveToNormal.call(this, toState);\r\n            var normalState = this._normalState;\r\n            if (toState.shape && !normalState.shape) {\r\n                normalState.shape = extend({}, this.shape);\r\n            }\r\n        };\r\n        Path.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\r\n            _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\r\n            var needsRestoreToNormal = !(state && keepCurrentStates);\r\n            var targetShape;\r\n            if (state && state.shape) {\r\n                if (transition) {\r\n                    if (keepCurrentStates) {\r\n                        targetShape = state.shape;\r\n                    }\r\n                    else {\r\n                        targetShape = extend({}, normalState.shape);\r\n                        extend(targetShape, state.shape);\r\n                    }\r\n                }\r\n                else {\r\n                    targetShape = extend({}, keepCurrentStates ? this.shape : normalState.shape);\r\n                    extend(targetShape, state.shape);\r\n                }\r\n            }\r\n            else if (needsRestoreToNormal) {\r\n                targetShape = normalState.shape;\r\n            }\r\n            if (targetShape) {\r\n                if (transition) {\r\n                    this.shape = extend({}, this.shape);\r\n                    var targetShapePrimaryProps = {};\r\n                    var shapeKeys = keys(targetShape);\r\n                    for (var i = 0; i < shapeKeys.length; i++) {\r\n                        var key = shapeKeys[i];\r\n                        if (typeof targetShape[key] === 'object') {\r\n                            this.shape[key] = targetShape[key];\r\n                        }\r\n                        else {\r\n                            targetShapePrimaryProps[key] = targetShape[key];\r\n                        }\r\n                    }\r\n                    this._transitionState(stateName, {\r\n                        shape: targetShapePrimaryProps\r\n                    }, animationCfg);\r\n                }\r\n                else {\r\n                    this.shape = targetShape;\r\n                    this.dirtyShape();\r\n                }\r\n            }\r\n        };\r\n        Path.prototype._mergeStates = function (states) {\r\n            var mergedState = _super.prototype._mergeStates.call(this, states);\r\n            var mergedShape;\r\n            for (var i = 0; i < states.length; i++) {\r\n                var state = states[i];\r\n                if (state.shape) {\r\n                    mergedShape = mergedShape || {};\r\n                    this._mergeStyle(mergedShape, state.shape);\r\n                }\r\n            }\r\n            if (mergedShape) {\r\n                mergedState.shape = mergedShape;\r\n            }\r\n            return mergedState;\r\n        };\r\n        Path.prototype._getAnimationStyleProps = function () {\r\n            return DEFAULT_PATH_ANIMATION_PROPS;\r\n        };\r\n        Path.prototype.isZeroArea = function () {\r\n            return false;\r\n        };\r\n        Path.extend = function (defaultProps) {\r\n            var Sub = (function (_super) {\r\n                __extends(Sub, _super);\r\n                function Sub(opts) {\r\n                    var _this = _super.call(this, opts) || this;\r\n                    defaultProps.init && defaultProps.init.call(_this, opts);\r\n                    return _this;\r\n                }\r\n                Sub.prototype.getDefaultStyle = function () {\r\n                    return clone(defaultProps.style);\r\n                };\r\n                Sub.prototype.getDefaultShape = function () {\r\n                    return clone(defaultProps.shape);\r\n                };\r\n                return Sub;\r\n            }(Path));\r\n            for (var key in defaultProps) {\r\n                if (typeof defaultProps[key] === 'function') {\r\n                    Sub.prototype[key] = defaultProps[key];\r\n                }\r\n            }\r\n            return Sub;\r\n        };\r\n        Path.SHAPE_CHANGED_BIT = 4;\r\n        Path.initDefaultProps = (function () {\r\n            var pathProto = Path.prototype;\r\n            pathProto.type = 'path';\r\n            pathProto.strokeContainThreshold = 5;\r\n            pathProto.segmentIgnoreThreshold = 0;\r\n            pathProto.subPixelOptimize = false;\r\n            pathProto.autoBatch = false;\r\n            pathProto.__dirty = Element.REDARAW_BIT | Displayable.STYLE_CHANGED_BIT | Path.SHAPE_CHANGED_BIT;\r\n        })();\r\n        return Path;\r\n    }(Displayable));\n\n    var CMD$2 = PathProxy.CMD;\r\n    var points = [[], [], []];\r\n    var mathSqrt$2 = Math.sqrt;\r\n    var mathAtan2 = Math.atan2;\r\n    function transformPath (path, m) {\r\n        var data = path.data;\r\n        var cmd;\r\n        var nPoint;\r\n        var i;\r\n        var j;\r\n        var k;\r\n        var p;\r\n        var M = CMD$2.M;\r\n        var C = CMD$2.C;\r\n        var L = CMD$2.L;\r\n        var R = CMD$2.R;\r\n        var A = CMD$2.A;\r\n        var Q = CMD$2.Q;\r\n        for (i = 0, j = 0; i < data.length;) {\r\n            cmd = data[i++];\r\n            j = i;\r\n            nPoint = 0;\r\n            switch (cmd) {\r\n                case M:\r\n                    nPoint = 1;\r\n                    break;\r\n                case L:\r\n                    nPoint = 1;\r\n                    break;\r\n                case C:\r\n                    nPoint = 3;\r\n                    break;\r\n                case Q:\r\n                    nPoint = 2;\r\n                    break;\r\n                case A:\r\n                    var x = m[4];\r\n                    var y = m[5];\r\n                    var sx = mathSqrt$2(m[0] * m[0] + m[1] * m[1]);\r\n                    var sy = mathSqrt$2(m[2] * m[2] + m[3] * m[3]);\r\n                    var angle = mathAtan2(-m[1] / sy, m[0] / sx);\r\n                    data[i] *= sx;\r\n                    data[i++] += x;\r\n                    data[i] *= sy;\r\n                    data[i++] += y;\r\n                    data[i++] *= sx;\r\n                    data[i++] *= sy;\r\n                    data[i++] += angle;\r\n                    data[i++] += angle;\r\n                    i += 2;\r\n                    j = i;\r\n                    break;\r\n                case R:\r\n                    p[0] = data[i++];\r\n                    p[1] = data[i++];\r\n                    applyTransform(p, p, m);\r\n                    data[j++] = p[0];\r\n                    data[j++] = p[1];\r\n                    p[0] += data[i++];\r\n                    p[1] += data[i++];\r\n                    applyTransform(p, p, m);\r\n                    data[j++] = p[0];\r\n                    data[j++] = p[1];\r\n            }\r\n            for (k = 0; k < nPoint; k++) {\r\n                var p_1 = points[k];\r\n                p_1[0] = data[i++];\r\n                p_1[1] = data[i++];\r\n                applyTransform(p_1, p_1, m);\r\n                data[j++] = p_1[0];\r\n                data[j++] = p_1[1];\r\n            }\r\n        }\r\n        path.increaseVersion();\r\n    }\n\n    var mathSqrt$3 = Math.sqrt;\r\n    var mathSin$2 = Math.sin;\r\n    var mathCos$2 = Math.cos;\r\n    var PI$1 = Math.PI;\r\n    function vMag(v) {\r\n        return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\r\n    }\r\n    function vRatio(u, v) {\r\n        return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\r\n    }\r\n    function vAngle(u, v) {\r\n        return (u[0] * v[1] < u[1] * v[0] ? -1 : 1)\r\n            * Math.acos(vRatio(u, v));\r\n    }\r\n    function processArc(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg, cmd, path) {\r\n        var psi = psiDeg * (PI$1 / 180.0);\r\n        var xp = mathCos$2(psi) * (x1 - x2) / 2.0\r\n            + mathSin$2(psi) * (y1 - y2) / 2.0;\r\n        var yp = -1 * mathSin$2(psi) * (x1 - x2) / 2.0\r\n            + mathCos$2(psi) * (y1 - y2) / 2.0;\r\n        var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\r\n        if (lambda > 1) {\r\n            rx *= mathSqrt$3(lambda);\r\n            ry *= mathSqrt$3(lambda);\r\n        }\r\n        var f = (fa === fs ? -1 : 1)\r\n            * mathSqrt$3((((rx * rx) * (ry * ry))\r\n                - ((rx * rx) * (yp * yp))\r\n                - ((ry * ry) * (xp * xp))) / ((rx * rx) * (yp * yp)\r\n                + (ry * ry) * (xp * xp))) || 0;\r\n        var cxp = f * rx * yp / ry;\r\n        var cyp = f * -ry * xp / rx;\r\n        var cx = (x1 + x2) / 2.0\r\n            + mathCos$2(psi) * cxp\r\n            - mathSin$2(psi) * cyp;\r\n        var cy = (y1 + y2) / 2.0\r\n            + mathSin$2(psi) * cxp\r\n            + mathCos$2(psi) * cyp;\r\n        var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\r\n        var u = [(xp - cxp) / rx, (yp - cyp) / ry];\r\n        var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\r\n        var dTheta = vAngle(u, v);\r\n        if (vRatio(u, v) <= -1) {\r\n            dTheta = PI$1;\r\n        }\r\n        if (vRatio(u, v) >= 1) {\r\n            dTheta = 0;\r\n        }\r\n        if (dTheta < 0) {\r\n            var n = Math.round(dTheta / PI$1 * 1e6) / 1e6;\r\n            dTheta = PI$1 * 2 + (n % 2) * PI$1;\r\n        }\r\n        path.addData(cmd, cx, cy, rx, ry, theta, dTheta, psi, fs);\r\n    }\r\n    var commandReg = /([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig;\r\n    var numberReg = /-?([0-9]*\\.)?[0-9]+([eE]-?[0-9]+)?/g;\r\n    function createPathProxyFromString(data) {\r\n        if (!data) {\r\n            return new PathProxy();\r\n        }\r\n        var cpx = 0;\r\n        var cpy = 0;\r\n        var subpathX = cpx;\r\n        var subpathY = cpy;\r\n        var prevCmd;\r\n        var path = new PathProxy();\r\n        var CMD = PathProxy.CMD;\r\n        var cmdList = data.match(commandReg);\r\n        for (var l = 0; l < cmdList.length; l++) {\r\n            var cmdText = cmdList[l];\r\n            var cmdStr = cmdText.charAt(0);\r\n            var cmd = void 0;\r\n            var p = cmdText.match(numberReg) || [];\r\n            var pLen = p.length;\r\n            for (var i = 0; i < pLen; i++) {\r\n                p[i] = parseFloat(p[i]);\r\n            }\r\n            var off = 0;\r\n            while (off < pLen) {\r\n                var ctlPtx = void 0;\r\n                var ctlPty = void 0;\r\n                var rx = void 0;\r\n                var ry = void 0;\r\n                var psi = void 0;\r\n                var fa = void 0;\r\n                var fs = void 0;\r\n                var x1 = cpx;\r\n                var y1 = cpy;\r\n                var len = void 0;\r\n                var pathData = void 0;\r\n                switch (cmdStr) {\r\n                    case 'l':\r\n                        cpx += p[off++];\r\n                        cpy += p[off++];\r\n                        cmd = CMD.L;\r\n                        path.addData(cmd, cpx, cpy);\r\n                        break;\r\n                    case 'L':\r\n                        cpx = p[off++];\r\n                        cpy = p[off++];\r\n                        cmd = CMD.L;\r\n                        path.addData(cmd, cpx, cpy);\r\n                        break;\r\n                    case 'm':\r\n                        cpx += p[off++];\r\n                        cpy += p[off++];\r\n                        cmd = CMD.M;\r\n                        path.addData(cmd, cpx, cpy);\r\n                        subpathX = cpx;\r\n                        subpathY = cpy;\r\n                        cmdStr = 'l';\r\n                        break;\r\n                    case 'M':\r\n                        cpx = p[off++];\r\n                        cpy = p[off++];\r\n                        cmd = CMD.M;\r\n                        path.addData(cmd, cpx, cpy);\r\n                        subpathX = cpx;\r\n                        subpathY = cpy;\r\n                        cmdStr = 'L';\r\n                        break;\r\n                    case 'h':\r\n                        cpx += p[off++];\r\n                        cmd = CMD.L;\r\n                        path.addData(cmd, cpx, cpy);\r\n                        break;\r\n                    case 'H':\r\n                        cpx = p[off++];\r\n                        cmd = CMD.L;\r\n                        path.addData(cmd, cpx, cpy);\r\n                        break;\r\n                    case 'v':\r\n                        cpy += p[off++];\r\n                        cmd = CMD.L;\r\n                        path.addData(cmd, cpx, cpy);\r\n                        break;\r\n                    case 'V':\r\n                        cpy = p[off++];\r\n                        cmd = CMD.L;\r\n                        path.addData(cmd, cpx, cpy);\r\n                        break;\r\n                    case 'C':\r\n                        cmd = CMD.C;\r\n                        path.addData(cmd, p[off++], p[off++], p[off++], p[off++], p[off++], p[off++]);\r\n                        cpx = p[off - 2];\r\n                        cpy = p[off - 1];\r\n                        break;\r\n                    case 'c':\r\n                        cmd = CMD.C;\r\n                        path.addData(cmd, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy);\r\n                        cpx += p[off - 2];\r\n                        cpy += p[off - 1];\r\n                        break;\r\n                    case 'S':\r\n                        ctlPtx = cpx;\r\n                        ctlPty = cpy;\r\n                        len = path.len();\r\n                        pathData = path.data;\r\n                        if (prevCmd === CMD.C) {\r\n                            ctlPtx += cpx - pathData[len - 4];\r\n                            ctlPty += cpy - pathData[len - 3];\r\n                        }\r\n                        cmd = CMD.C;\r\n                        x1 = p[off++];\r\n                        y1 = p[off++];\r\n                        cpx = p[off++];\r\n                        cpy = p[off++];\r\n                        path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\r\n                        break;\r\n                    case 's':\r\n                        ctlPtx = cpx;\r\n                        ctlPty = cpy;\r\n                        len = path.len();\r\n                        pathData = path.data;\r\n                        if (prevCmd === CMD.C) {\r\n                            ctlPtx += cpx - pathData[len - 4];\r\n                            ctlPty += cpy - pathData[len - 3];\r\n                        }\r\n                        cmd = CMD.C;\r\n                        x1 = cpx + p[off++];\r\n                        y1 = cpy + p[off++];\r\n                        cpx += p[off++];\r\n                        cpy += p[off++];\r\n                        path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\r\n                        break;\r\n                    case 'Q':\r\n                        x1 = p[off++];\r\n                        y1 = p[off++];\r\n                        cpx = p[off++];\r\n                        cpy = p[off++];\r\n                        cmd = CMD.Q;\r\n                        path.addData(cmd, x1, y1, cpx, cpy);\r\n                        break;\r\n                    case 'q':\r\n                        x1 = p[off++] + cpx;\r\n                        y1 = p[off++] + cpy;\r\n                        cpx += p[off++];\r\n                        cpy += p[off++];\r\n                        cmd = CMD.Q;\r\n                        path.addData(cmd, x1, y1, cpx, cpy);\r\n                        break;\r\n                    case 'T':\r\n                        ctlPtx = cpx;\r\n                        ctlPty = cpy;\r\n                        len = path.len();\r\n                        pathData = path.data;\r\n                        if (prevCmd === CMD.Q) {\r\n                            ctlPtx += cpx - pathData[len - 4];\r\n                            ctlPty += cpy - pathData[len - 3];\r\n                        }\r\n                        cpx = p[off++];\r\n                        cpy = p[off++];\r\n                        cmd = CMD.Q;\r\n                        path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\r\n                        break;\r\n                    case 't':\r\n                        ctlPtx = cpx;\r\n                        ctlPty = cpy;\r\n                        len = path.len();\r\n                        pathData = path.data;\r\n                        if (prevCmd === CMD.Q) {\r\n                            ctlPtx += cpx - pathData[len - 4];\r\n                            ctlPty += cpy - pathData[len - 3];\r\n                        }\r\n                        cpx += p[off++];\r\n                        cpy += p[off++];\r\n                        cmd = CMD.Q;\r\n                        path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\r\n                        break;\r\n                    case 'A':\r\n                        rx = p[off++];\r\n                        ry = p[off++];\r\n                        psi = p[off++];\r\n                        fa = p[off++];\r\n                        fs = p[off++];\r\n                        x1 = cpx, y1 = cpy;\r\n                        cpx = p[off++];\r\n                        cpy = p[off++];\r\n                        cmd = CMD.A;\r\n                        processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\r\n                        break;\r\n                    case 'a':\r\n                        rx = p[off++];\r\n                        ry = p[off++];\r\n                        psi = p[off++];\r\n                        fa = p[off++];\r\n                        fs = p[off++];\r\n                        x1 = cpx, y1 = cpy;\r\n                        cpx += p[off++];\r\n                        cpy += p[off++];\r\n                        cmd = CMD.A;\r\n                        processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\r\n                        break;\r\n                }\r\n            }\r\n            if (cmdStr === 'z' || cmdStr === 'Z') {\r\n                cmd = CMD.Z;\r\n                path.addData(cmd);\r\n                cpx = subpathX;\r\n                cpy = subpathY;\r\n            }\r\n            prevCmd = cmd;\r\n        }\r\n        path.toStatic();\r\n        return path;\r\n    }\r\n    var SVGPath = (function (_super) {\r\n        __extends(SVGPath, _super);\r\n        function SVGPath() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        SVGPath.prototype.applyTransform = function (m) { };\r\n        return SVGPath;\r\n    }(Path));\r\n    function isPathProxy(path) {\r\n        return path.setData != null;\r\n    }\r\n    function createPathOptions(str, opts) {\r\n        var pathProxy = createPathProxyFromString(str);\r\n        var innerOpts = extend({}, opts);\r\n        innerOpts.buildPath = function (path) {\r\n            if (isPathProxy(path)) {\r\n                path.setData(pathProxy.data);\r\n                var ctx = path.getContext();\r\n                if (ctx) {\r\n                    path.rebuildPath(ctx, 1);\r\n                }\r\n            }\r\n            else {\r\n                var ctx = path;\r\n                pathProxy.rebuildPath(ctx, 1);\r\n            }\r\n        };\r\n        innerOpts.applyTransform = function (m) {\r\n            transformPath(pathProxy, m);\r\n            this.dirtyShape();\r\n        };\r\n        return innerOpts;\r\n    }\r\n    function createFromString(str, opts) {\r\n        return new SVGPath(createPathOptions(str, opts));\r\n    }\n\n    var Group = (function (_super) {\r\n        __extends(Group, _super);\r\n        function Group(opts) {\r\n            var _this = _super.call(this) || this;\r\n            _this.isGroup = true;\r\n            _this._children = [];\r\n            _this.attr(opts);\r\n            return _this;\r\n        }\r\n        Group.prototype.childrenRef = function () {\r\n            return this._children;\r\n        };\r\n        Group.prototype.children = function () {\r\n            return this._children.slice();\r\n        };\r\n        Group.prototype.childAt = function (idx) {\r\n            return this._children[idx];\r\n        };\r\n        Group.prototype.childOfName = function (name) {\r\n            var children = this._children;\r\n            for (var i = 0; i < children.length; i++) {\r\n                if (children[i].name === name) {\r\n                    return children[i];\r\n                }\r\n            }\r\n        };\r\n        Group.prototype.childCount = function () {\r\n            return this._children.length;\r\n        };\r\n        Group.prototype.add = function (child) {\r\n            if (child) {\r\n                if (child !== this && child.parent !== this) {\r\n                    this._children.push(child);\r\n                    this._doAdd(child);\r\n                }\r\n                if (child.__hostTarget) {\r\n                    throw 'This elemenet has been used as an attachment';\r\n                }\r\n            }\r\n            return this;\r\n        };\r\n        Group.prototype.addBefore = function (child, nextSibling) {\r\n            if (child && child !== this && child.parent !== this\r\n                && nextSibling && nextSibling.parent === this) {\r\n                var children = this._children;\r\n                var idx = children.indexOf(nextSibling);\r\n                if (idx >= 0) {\r\n                    children.splice(idx, 0, child);\r\n                    this._doAdd(child);\r\n                }\r\n            }\r\n            return this;\r\n        };\r\n        Group.prototype.replaceAt = function (child, index) {\r\n            var children = this._children;\r\n            var old = children[index];\r\n            if (child && child !== this && child.parent !== this && child !== old) {\r\n                children[index] = child;\r\n                old.parent = null;\r\n                var zr = this.__zr;\r\n                if (zr) {\r\n                    old.removeSelfFromZr(zr);\r\n                }\r\n                this._doAdd(child);\r\n            }\r\n            return this;\r\n        };\r\n        Group.prototype._doAdd = function (child) {\r\n            if (child.parent) {\r\n                child.parent.remove(child);\r\n            }\r\n            child.parent = this;\r\n            var zr = this.__zr;\r\n            if (zr && zr !== child.__zr) {\r\n                child.addSelfToZr(zr);\r\n            }\r\n            zr && zr.refresh();\r\n        };\r\n        Group.prototype.remove = function (child) {\r\n            var zr = this.__zr;\r\n            var children = this._children;\r\n            var idx = indexOf(children, child);\r\n            if (idx < 0) {\r\n                return this;\r\n            }\r\n            children.splice(idx, 1);\r\n            child.parent = null;\r\n            if (zr) {\r\n                child.removeSelfFromZr(zr);\r\n            }\r\n            zr && zr.refresh();\r\n            return this;\r\n        };\r\n        Group.prototype.removeAll = function () {\r\n            var children = this._children;\r\n            var zr = this.__zr;\r\n            for (var i = 0; i < children.length; i++) {\r\n                var child = children[i];\r\n                if (zr) {\r\n                    child.removeSelfFromZr(zr);\r\n                }\r\n                child.parent = null;\r\n            }\r\n            children.length = 0;\r\n            return this;\r\n        };\r\n        Group.prototype.eachChild = function (cb, context) {\r\n            var children = this._children;\r\n            for (var i = 0; i < children.length; i++) {\r\n                var child = children[i];\r\n                cb.call(context, child, i);\r\n            }\r\n            return this;\r\n        };\r\n        Group.prototype.traverse = function (cb, context) {\r\n            for (var i = 0; i < this._children.length; i++) {\r\n                var child = this._children[i];\r\n                var stopped = cb.call(context, child);\r\n                if (child.isGroup && !stopped) {\r\n                    child.traverse(cb, context);\r\n                }\r\n            }\r\n            return this;\r\n        };\r\n        Group.prototype.addSelfToZr = function (zr) {\r\n            _super.prototype.addSelfToZr.call(this, zr);\r\n            for (var i = 0; i < this._children.length; i++) {\r\n                var child = this._children[i];\r\n                child.addSelfToZr(zr);\r\n            }\r\n        };\r\n        Group.prototype.removeSelfFromZr = function (zr) {\r\n            _super.prototype.removeSelfFromZr.call(this, zr);\r\n            for (var i = 0; i < this._children.length; i++) {\r\n                var child = this._children[i];\r\n                child.removeSelfFromZr(zr);\r\n            }\r\n        };\r\n        Group.prototype.getBoundingRect = function (includeChildren) {\r\n            var tmpRect = new BoundingRect(0, 0, 0, 0);\r\n            var children = includeChildren || this._children;\r\n            var tmpMat = [];\r\n            var rect = null;\r\n            for (var i = 0; i < children.length; i++) {\r\n                var child = children[i];\r\n                if (child.ignore || child.invisible) {\r\n                    continue;\r\n                }\r\n                var childRect = child.getBoundingRect();\r\n                var transform = child.getLocalTransform(tmpMat);\r\n                if (transform) {\r\n                    BoundingRect.applyTransform(tmpRect, childRect, transform);\r\n                    rect = rect || tmpRect.clone();\r\n                    rect.union(tmpRect);\r\n                }\r\n                else {\r\n                    rect = rect || childRect.clone();\r\n                    rect.union(childRect);\r\n                }\r\n            }\r\n            return rect || tmpRect;\r\n        };\r\n        return Group;\r\n    }(Element));\r\n    Group.prototype.type = 'group';\n\n    var DEFAULT_IMAGE_STYLE = defaults({\r\n        x: 0,\r\n        y: 0\r\n    }, DEFAULT_COMMON_STYLE);\r\n    var DEFAULT_IMAGE_ANIMATION_PROPS = {\r\n        style: defaults({\r\n            x: true,\r\n            y: true,\r\n            width: true,\r\n            height: true,\r\n            sx: true,\r\n            sy: true,\r\n            sWidth: true,\r\n            sHeight: true\r\n        }, DEFAULT_COMMON_ANIMATION_PROPS.style)\r\n    };\r\n    var ZRImage = (function (_super) {\r\n        __extends(ZRImage, _super);\r\n        function ZRImage() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ZRImage.prototype.createStyle = function (obj) {\r\n            return createObject(DEFAULT_IMAGE_STYLE, obj);\r\n        };\r\n        ZRImage.prototype._getAnimationStyleProps = function () {\r\n            return DEFAULT_IMAGE_ANIMATION_PROPS;\r\n        };\r\n        ZRImage.prototype.getBoundingRect = function () {\r\n            var style = this.style;\r\n            if (!this._rect) {\r\n                this._rect = new BoundingRect(style.x || 0, style.y || 0, style.width || 0, style.height || 0);\r\n            }\r\n            return this._rect;\r\n        };\r\n        return ZRImage;\r\n    }(Displayable));\r\n    ZRImage.prototype.type = 'image';\n\n    var CircleShape = (function () {\r\n        function CircleShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.r = 0;\r\n        }\r\n        return CircleShape;\r\n    }());\r\n    var Circle = (function (_super) {\r\n        __extends(Circle, _super);\r\n        function Circle(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Circle.prototype.getDefaultShape = function () {\r\n            return new CircleShape();\r\n        };\r\n        Circle.prototype.buildPath = function (ctx, shape, inBundle) {\r\n            if (inBundle) {\r\n                ctx.moveTo(shape.cx + shape.r, shape.cy);\r\n            }\r\n            ctx.arc(shape.cx, shape.cy, shape.r, 0, Math.PI * 2);\r\n        };\r\n        return Circle;\r\n    }(Path));\r\n    Circle.prototype.type = 'circle';\n\n    function buildPath(ctx, shape) {\r\n        var x = shape.x;\r\n        var y = shape.y;\r\n        var width = shape.width;\r\n        var height = shape.height;\r\n        var r = shape.r;\r\n        var r1;\r\n        var r2;\r\n        var r3;\r\n        var r4;\r\n        if (width < 0) {\r\n            x = x + width;\r\n            width = -width;\r\n        }\r\n        if (height < 0) {\r\n            y = y + height;\r\n            height = -height;\r\n        }\r\n        if (typeof r === 'number') {\r\n            r1 = r2 = r3 = r4 = r;\r\n        }\r\n        else if (r instanceof Array) {\r\n            if (r.length === 1) {\r\n                r1 = r2 = r3 = r4 = r[0];\r\n            }\r\n            else if (r.length === 2) {\r\n                r1 = r3 = r[0];\r\n                r2 = r4 = r[1];\r\n            }\r\n            else if (r.length === 3) {\r\n                r1 = r[0];\r\n                r2 = r4 = r[1];\r\n                r3 = r[2];\r\n            }\r\n            else {\r\n                r1 = r[0];\r\n                r2 = r[1];\r\n                r3 = r[2];\r\n                r4 = r[3];\r\n            }\r\n        }\r\n        else {\r\n            r1 = r2 = r3 = r4 = 0;\r\n        }\r\n        var total;\r\n        if (r1 + r2 > width) {\r\n            total = r1 + r2;\r\n            r1 *= width / total;\r\n            r2 *= width / total;\r\n        }\r\n        if (r3 + r4 > width) {\r\n            total = r3 + r4;\r\n            r3 *= width / total;\r\n            r4 *= width / total;\r\n        }\r\n        if (r2 + r3 > height) {\r\n            total = r2 + r3;\r\n            r2 *= height / total;\r\n            r3 *= height / total;\r\n        }\r\n        if (r1 + r4 > height) {\r\n            total = r1 + r4;\r\n            r1 *= height / total;\r\n            r4 *= height / total;\r\n        }\r\n        ctx.moveTo(x + r1, y);\r\n        ctx.lineTo(x + width - r2, y);\r\n        r2 !== 0 && ctx.arc(x + width - r2, y + r2, r2, -Math.PI / 2, 0);\r\n        ctx.lineTo(x + width, y + height - r3);\r\n        r3 !== 0 && ctx.arc(x + width - r3, y + height - r3, r3, 0, Math.PI / 2);\r\n        ctx.lineTo(x + r4, y + height);\r\n        r4 !== 0 && ctx.arc(x + r4, y + height - r4, r4, Math.PI / 2, Math.PI);\r\n        ctx.lineTo(x, y + r1);\r\n        r1 !== 0 && ctx.arc(x + r1, y + r1, r1, Math.PI, Math.PI * 1.5);\r\n    }\n\n    var round = Math.round;\r\n    function subPixelOptimizeLine(outputShape, inputShape, style) {\r\n        if (!inputShape) {\r\n            return;\r\n        }\r\n        var x1 = inputShape.x1;\r\n        var x2 = inputShape.x2;\r\n        var y1 = inputShape.y1;\r\n        var y2 = inputShape.y2;\r\n        outputShape.x1 = x1;\r\n        outputShape.x2 = x2;\r\n        outputShape.y1 = y1;\r\n        outputShape.y2 = y2;\r\n        var lineWidth = style && style.lineWidth;\r\n        if (!lineWidth) {\r\n            return outputShape;\r\n        }\r\n        if (round(x1 * 2) === round(x2 * 2)) {\r\n            outputShape.x1 = outputShape.x2 = subPixelOptimize(x1, lineWidth, true);\r\n        }\r\n        if (round(y1 * 2) === round(y2 * 2)) {\r\n            outputShape.y1 = outputShape.y2 = subPixelOptimize(y1, lineWidth, true);\r\n        }\r\n        return outputShape;\r\n    }\r\n    function subPixelOptimizeRect(outputShape, inputShape, style) {\r\n        if (!inputShape) {\r\n            return;\r\n        }\r\n        var originX = inputShape.x;\r\n        var originY = inputShape.y;\r\n        var originWidth = inputShape.width;\r\n        var originHeight = inputShape.height;\r\n        outputShape.x = originX;\r\n        outputShape.y = originY;\r\n        outputShape.width = originWidth;\r\n        outputShape.height = originHeight;\r\n        var lineWidth = style && style.lineWidth;\r\n        if (!lineWidth) {\r\n            return outputShape;\r\n        }\r\n        outputShape.x = subPixelOptimize(originX, lineWidth, true);\r\n        outputShape.y = subPixelOptimize(originY, lineWidth, true);\r\n        outputShape.width = Math.max(subPixelOptimize(originX + originWidth, lineWidth, false) - outputShape.x, originWidth === 0 ? 0 : 1);\r\n        outputShape.height = Math.max(subPixelOptimize(originY + originHeight, lineWidth, false) - outputShape.y, originHeight === 0 ? 0 : 1);\r\n        return outputShape;\r\n    }\r\n    function subPixelOptimize(position, lineWidth, positiveOrNegative) {\r\n        if (!lineWidth) {\r\n            return position;\r\n        }\r\n        var doubledPosition = round(position * 2);\r\n        return (doubledPosition + round(lineWidth)) % 2 === 0\r\n            ? doubledPosition / 2\r\n            : (doubledPosition + (positiveOrNegative ? 1 : -1)) / 2;\r\n    }\n\n    var RectShape = (function () {\r\n        function RectShape() {\r\n            this.x = 0;\r\n            this.y = 0;\r\n            this.width = 0;\r\n            this.height = 0;\r\n        }\r\n        return RectShape;\r\n    }());\r\n    var subPixelOptimizeOutputShape = {};\r\n    var Rect = (function (_super) {\r\n        __extends(Rect, _super);\r\n        function Rect(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Rect.prototype.getDefaultShape = function () {\r\n            return new RectShape();\r\n        };\r\n        Rect.prototype.buildPath = function (ctx, shape) {\r\n            var x;\r\n            var y;\r\n            var width;\r\n            var height;\r\n            if (this.subPixelOptimize) {\r\n                var optimizedShape = subPixelOptimizeRect(subPixelOptimizeOutputShape, shape, this.style);\r\n                x = optimizedShape.x;\r\n                y = optimizedShape.y;\r\n                width = optimizedShape.width;\r\n                height = optimizedShape.height;\r\n                optimizedShape.r = shape.r;\r\n                shape = optimizedShape;\r\n            }\r\n            else {\r\n                x = shape.x;\r\n                y = shape.y;\r\n                width = shape.width;\r\n                height = shape.height;\r\n            }\r\n            if (!shape.r) {\r\n                ctx.rect(x, y, width, height);\r\n            }\r\n            else {\r\n                buildPath(ctx, shape);\r\n            }\r\n        };\r\n        Rect.prototype.isZeroArea = function () {\r\n            return !this.shape.width || !this.shape.height;\r\n        };\r\n        return Rect;\r\n    }(Path));\r\n    Rect.prototype.type = 'rect';\n\n    var EllipseShape = (function () {\r\n        function EllipseShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.rx = 0;\r\n            this.ry = 0;\r\n        }\r\n        return EllipseShape;\r\n    }());\r\n    var Ellipse = (function (_super) {\r\n        __extends(Ellipse, _super);\r\n        function Ellipse(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Ellipse.prototype.getDefaultShape = function () {\r\n            return new EllipseShape();\r\n        };\r\n        Ellipse.prototype.buildPath = function (ctx, shape) {\r\n            var k = 0.5522848;\r\n            var x = shape.cx;\r\n            var y = shape.cy;\r\n            var a = shape.rx;\r\n            var b = shape.ry;\r\n            var ox = a * k;\r\n            var oy = b * k;\r\n            ctx.moveTo(x - a, y);\r\n            ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\r\n            ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\r\n            ctx.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b);\r\n            ctx.bezierCurveTo(x - ox, y + b, x - a, y + oy, x - a, y);\r\n            ctx.closePath();\r\n        };\r\n        return Ellipse;\r\n    }(Path));\r\n    Ellipse.prototype.type = 'ellipse';\n\n    var subPixelOptimizeOutputShape$1 = {};\r\n    var LineShape = (function () {\r\n        function LineShape() {\r\n            this.x1 = 0;\r\n            this.y1 = 0;\r\n            this.x2 = 0;\r\n            this.y2 = 0;\r\n            this.percent = 1;\r\n        }\r\n        return LineShape;\r\n    }());\r\n    var Line = (function (_super) {\r\n        __extends(Line, _super);\r\n        function Line(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Line.prototype.getDefaultStyle = function () {\r\n            return {\r\n                stroke: '#000',\r\n                fill: null\r\n            };\r\n        };\r\n        Line.prototype.getDefaultShape = function () {\r\n            return new LineShape();\r\n        };\r\n        Line.prototype.buildPath = function (ctx, shape) {\r\n            var x1;\r\n            var y1;\r\n            var x2;\r\n            var y2;\r\n            if (this.subPixelOptimize) {\r\n                var optimizedShape = subPixelOptimizeLine(subPixelOptimizeOutputShape$1, shape, this.style);\r\n                x1 = optimizedShape.x1;\r\n                y1 = optimizedShape.y1;\r\n                x2 = optimizedShape.x2;\r\n                y2 = optimizedShape.y2;\r\n            }\r\n            else {\r\n                x1 = shape.x1;\r\n                y1 = shape.y1;\r\n                x2 = shape.x2;\r\n                y2 = shape.y2;\r\n            }\r\n            var percent = shape.percent;\r\n            if (percent === 0) {\r\n                return;\r\n            }\r\n            ctx.moveTo(x1, y1);\r\n            if (percent < 1) {\r\n                x2 = x1 * (1 - percent) + x2 * percent;\r\n                y2 = y1 * (1 - percent) + y2 * percent;\r\n            }\r\n            ctx.lineTo(x2, y2);\r\n        };\r\n        Line.prototype.pointAt = function (p) {\r\n            var shape = this.shape;\r\n            return [\r\n                shape.x1 * (1 - p) + shape.x2 * p,\r\n                shape.y1 * (1 - p) + shape.y2 * p\r\n            ];\r\n        };\r\n        return Line;\r\n    }(Path));\r\n    Line.prototype.type = 'line';\n\n    function interpolate(p0, p1, p2, p3, t, t2, t3) {\r\n        var v0 = (p2 - p0) * 0.5;\r\n        var v1 = (p3 - p1) * 0.5;\r\n        return (2 * (p1 - p2) + v0 + v1) * t3\r\n            + (-3 * (p1 - p2) - 2 * v0 - v1) * t2\r\n            + v0 * t + p1;\r\n    }\r\n    function smoothSpline (points, isLoop) {\r\n        var len = points.length;\r\n        var ret = [];\r\n        var distance$1 = 0;\r\n        for (var i = 1; i < len; i++) {\r\n            distance$1 += distance(points[i - 1], points[i]);\r\n        }\r\n        var segs = distance$1 / 2;\r\n        segs = segs < len ? len : segs;\r\n        for (var i = 0; i < segs; i++) {\r\n            var pos = i / (segs - 1) * (isLoop ? len : len - 1);\r\n            var idx = Math.floor(pos);\r\n            var w = pos - idx;\r\n            var p0 = void 0;\r\n            var p1 = points[idx % len];\r\n            var p2 = void 0;\r\n            var p3 = void 0;\r\n            if (!isLoop) {\r\n                p0 = points[idx === 0 ? idx : idx - 1];\r\n                p2 = points[idx > len - 2 ? len - 1 : idx + 1];\r\n                p3 = points[idx > len - 3 ? len - 1 : idx + 2];\r\n            }\r\n            else {\r\n                p0 = points[(idx - 1 + len) % len];\r\n                p2 = points[(idx + 1) % len];\r\n                p3 = points[(idx + 2) % len];\r\n            }\r\n            var w2 = w * w;\r\n            var w3 = w * w2;\r\n            ret.push([\r\n                interpolate(p0[0], p1[0], p2[0], p3[0], w, w2, w3),\r\n                interpolate(p0[1], p1[1], p2[1], p3[1], w, w2, w3)\r\n            ]);\r\n        }\r\n        return ret;\r\n    }\n\n    function smoothBezier (points, smooth, isLoop, constraint) {\r\n        var cps = [];\r\n        var v = [];\r\n        var v1 = [];\r\n        var v2 = [];\r\n        var prevPoint;\r\n        var nextPoint;\r\n        var min$1;\r\n        var max$1;\r\n        if (constraint) {\r\n            min$1 = [Infinity, Infinity];\r\n            max$1 = [-Infinity, -Infinity];\r\n            for (var i = 0, len = points.length; i < len; i++) {\r\n                min(min$1, min$1, points[i]);\r\n                max(max$1, max$1, points[i]);\r\n            }\r\n            min(min$1, min$1, constraint[0]);\r\n            max(max$1, max$1, constraint[1]);\r\n        }\r\n        for (var i = 0, len = points.length; i < len; i++) {\r\n            var point = points[i];\r\n            if (isLoop) {\r\n                prevPoint = points[i ? i - 1 : len - 1];\r\n                nextPoint = points[(i + 1) % len];\r\n            }\r\n            else {\r\n                if (i === 0 || i === len - 1) {\r\n                    cps.push(clone$1(points[i]));\r\n                    continue;\r\n                }\r\n                else {\r\n                    prevPoint = points[i - 1];\r\n                    nextPoint = points[i + 1];\r\n                }\r\n            }\r\n            sub(v, nextPoint, prevPoint);\r\n            scale(v, v, smooth);\r\n            var d0 = distance(point, prevPoint);\r\n            var d1 = distance(point, nextPoint);\r\n            var sum = d0 + d1;\r\n            if (sum !== 0) {\r\n                d0 /= sum;\r\n                d1 /= sum;\r\n            }\r\n            scale(v1, v, -d0);\r\n            scale(v2, v, d1);\r\n            var cp0 = add([], point, v1);\r\n            var cp1 = add([], point, v2);\r\n            if (constraint) {\r\n                max(cp0, cp0, min$1);\r\n                min(cp0, cp0, max$1);\r\n                max(cp1, cp1, min$1);\r\n                min(cp1, cp1, max$1);\r\n            }\r\n            cps.push(cp0);\r\n            cps.push(cp1);\r\n        }\r\n        if (isLoop) {\r\n            cps.push(cps.shift());\r\n        }\r\n        return cps;\r\n    }\n\n    function buildPath$1(ctx, shape, closePath) {\r\n        var smooth = shape.smooth;\r\n        var points = shape.points;\r\n        if (points && points.length >= 2) {\r\n            if (smooth && smooth !== 'spline') {\r\n                var controlPoints = smoothBezier(points, smooth, closePath, shape.smoothConstraint);\r\n                ctx.moveTo(points[0][0], points[0][1]);\r\n                var len = points.length;\r\n                for (var i = 0; i < (closePath ? len : len - 1); i++) {\r\n                    var cp1 = controlPoints[i * 2];\r\n                    var cp2 = controlPoints[i * 2 + 1];\r\n                    var p = points[(i + 1) % len];\r\n                    ctx.bezierCurveTo(cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]);\r\n                }\r\n            }\r\n            else {\r\n                if (smooth === 'spline') {\r\n                    points = smoothSpline(points, closePath);\r\n                }\r\n                ctx.moveTo(points[0][0], points[0][1]);\r\n                for (var i = 1, l = points.length; i < l; i++) {\r\n                    ctx.lineTo(points[i][0], points[i][1]);\r\n                }\r\n            }\r\n            closePath && ctx.closePath();\r\n        }\r\n    }\n\n    var PolygonShape = (function () {\r\n        function PolygonShape() {\r\n            this.points = null;\r\n            this.smooth = 0;\r\n            this.smoothConstraint = null;\r\n        }\r\n        return PolygonShape;\r\n    }());\r\n    var Polygon = (function (_super) {\r\n        __extends(Polygon, _super);\r\n        function Polygon(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Polygon.prototype.getDefaultShape = function () {\r\n            return new PolygonShape();\r\n        };\r\n        Polygon.prototype.buildPath = function (ctx, shape) {\r\n            buildPath$1(ctx, shape, true);\r\n        };\r\n        return Polygon;\r\n    }(Path));\r\n    Polygon.prototype.type = 'polygon';\n\n    var PolylineShape = (function () {\r\n        function PolylineShape() {\r\n            this.points = null;\r\n            this.percent = 1;\r\n            this.smooth = 0;\r\n            this.smoothConstraint = null;\r\n        }\r\n        return PolylineShape;\r\n    }());\r\n    var Polyline = (function (_super) {\r\n        __extends(Polyline, _super);\r\n        function Polyline(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Polyline.prototype.getDefaultStyle = function () {\r\n            return {\r\n                stroke: '#000',\r\n                fill: null\r\n            };\r\n        };\r\n        Polyline.prototype.getDefaultShape = function () {\r\n            return new PolylineShape();\r\n        };\r\n        Polyline.prototype.buildPath = function (ctx, shape) {\r\n            buildPath$1(ctx, shape, false);\r\n        };\r\n        return Polyline;\r\n    }(Path));\r\n    Polyline.prototype.type = 'polyline';\n\n    var Gradient = (function () {\r\n        function Gradient(colorStops) {\r\n            this.colorStops = colorStops || [];\r\n        }\r\n        Gradient.prototype.addColorStop = function (offset, color) {\r\n            this.colorStops.push({\r\n                offset: offset,\r\n                color: color\r\n            });\r\n        };\r\n        return Gradient;\r\n    }());\n\n    var LinearGradient = (function (_super) {\r\n        __extends(LinearGradient, _super);\r\n        function LinearGradient(x, y, x2, y2, colorStops, globalCoord) {\r\n            var _this = _super.call(this, colorStops) || this;\r\n            _this.x = x == null ? 0 : x;\r\n            _this.y = y == null ? 0 : y;\r\n            _this.x2 = x2 == null ? 1 : x2;\r\n            _this.y2 = y2 == null ? 0 : y2;\r\n            _this.type = 'linear';\r\n            _this.global = globalCoord || false;\r\n            return _this;\r\n        }\r\n        return LinearGradient;\r\n    }(Gradient));\n\n    var DEFAULT_TSPAN_STYLE = defaults({\r\n        strokeFirst: true,\r\n        font: DEFAULT_FONT,\r\n        x: 0,\r\n        y: 0,\r\n        textAlign: 'left',\r\n        textBaseline: 'top'\r\n    }, DEFAULT_PATH_STYLE);\r\n    var TSpan = (function (_super) {\r\n        __extends(TSpan, _super);\r\n        function TSpan() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        TSpan.prototype.hasStroke = function () {\r\n            var style = this.style;\r\n            var stroke = style.stroke;\r\n            return stroke != null && stroke !== 'none' && style.lineWidth > 0;\r\n        };\r\n        TSpan.prototype.hasFill = function () {\r\n            var style = this.style;\r\n            var fill = style.fill;\r\n            return fill != null && fill !== 'none';\r\n        };\r\n        TSpan.prototype.createStyle = function (obj) {\r\n            return createObject(DEFAULT_TSPAN_STYLE, obj);\r\n        };\r\n        TSpan.prototype.setBoundingRect = function (rect) {\r\n            this._rect = rect;\r\n        };\r\n        TSpan.prototype.getBoundingRect = function () {\r\n            var style = this.style;\r\n            if (!this._rect) {\r\n                var text = style.text;\r\n                text != null ? (text += '') : (text = '');\r\n                var rect = getBoundingRect(text, style.font, style.textAlign, style.textBaseline);\r\n                rect.x += style.x || 0;\r\n                rect.y += style.y || 0;\r\n                if (this.hasStroke()) {\r\n                    var w = style.lineWidth;\r\n                    rect.x -= w / 2;\r\n                    rect.y -= w / 2;\r\n                    rect.width += w;\r\n                    rect.height += w;\r\n                }\r\n                this._rect = rect;\r\n            }\r\n            return this._rect;\r\n        };\r\n        return TSpan;\r\n    }(Displayable));\r\n    TSpan.prototype.type = 'tspan';\n\n    function parseXML(svg) {\r\n        if (isString(svg)) {\r\n            var parser = new DOMParser();\r\n            svg = parser.parseFromString(svg, 'text/xml');\r\n        }\r\n        var svgNode = svg;\r\n        if (svgNode.nodeType === 9) {\r\n            svgNode = svgNode.firstChild;\r\n        }\r\n        while (svgNode.nodeName.toLowerCase() !== 'svg' || svgNode.nodeType !== 1) {\r\n            svgNode = svgNode.nextSibling;\r\n        }\r\n        return svgNode;\r\n    }\n\n    var CompoundPath = (function (_super) {\r\n        __extends(CompoundPath, _super);\r\n        function CompoundPath() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = 'compound';\r\n            return _this;\r\n        }\r\n        CompoundPath.prototype._updatePathDirty = function () {\r\n            var paths = this.shape.paths;\r\n            var dirtyPath = this.shapeChanged();\r\n            for (var i = 0; i < paths.length; i++) {\r\n                dirtyPath = dirtyPath || paths[i].shapeChanged();\r\n            }\r\n            if (dirtyPath) {\r\n                this.dirtyShape();\r\n            }\r\n        };\r\n        CompoundPath.prototype.beforeBrush = function () {\r\n            this._updatePathDirty();\r\n            var paths = this.shape.paths || [];\r\n            var scale = this.getGlobalScale();\r\n            for (var i = 0; i < paths.length; i++) {\r\n                if (!paths[i].path) {\r\n                    paths[i].createPathProxy();\r\n                }\r\n                paths[i].path.setScale(scale[0], scale[1], paths[i].segmentIgnoreThreshold);\r\n            }\r\n        };\r\n        CompoundPath.prototype.buildPath = function (ctx, shape) {\r\n            var paths = shape.paths || [];\r\n            for (var i = 0; i < paths.length; i++) {\r\n                paths[i].buildPath(ctx, paths[i].shape, true);\r\n            }\r\n        };\r\n        CompoundPath.prototype.afterBrush = function () {\r\n            var paths = this.shape.paths || [];\r\n            for (var i = 0; i < paths.length; i++) {\r\n                paths[i].pathUpdated();\r\n            }\r\n        };\r\n        CompoundPath.prototype.getBoundingRect = function () {\r\n            this._updatePathDirty.call(this);\r\n            return Path.prototype.getBoundingRect.call(this);\r\n        };\r\n        return CompoundPath;\r\n    }(Path));\n\n    var m = [];\r\n    var IncrementalDisplayble = (function (_super) {\r\n        __extends(IncrementalDisplayble, _super);\r\n        function IncrementalDisplayble() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.notClear = true;\r\n            _this.incremental = true;\r\n            _this._displayables = [];\r\n            _this._temporaryDisplayables = [];\r\n            _this._cursor = 0;\r\n            return _this;\r\n        }\r\n        IncrementalDisplayble.prototype.traverse = function (cb, context) {\r\n            cb.call(context, this);\r\n        };\r\n        IncrementalDisplayble.prototype.useStyle = function () {\r\n            this.style = {};\r\n        };\r\n        IncrementalDisplayble.prototype.getCursor = function () {\r\n            return this._cursor;\r\n        };\r\n        IncrementalDisplayble.prototype.innerAfterBrush = function () {\r\n            this._cursor = this._displayables.length;\r\n        };\r\n        IncrementalDisplayble.prototype.clearDisplaybles = function () {\r\n            this._displayables = [];\r\n            this._temporaryDisplayables = [];\r\n            this._cursor = 0;\r\n            this.markRedraw();\r\n            this.notClear = false;\r\n        };\r\n        IncrementalDisplayble.prototype.clearTemporalDisplayables = function () {\r\n            this._temporaryDisplayables = [];\r\n        };\r\n        IncrementalDisplayble.prototype.addDisplayable = function (displayable, notPersistent) {\r\n            if (notPersistent) {\r\n                this._temporaryDisplayables.push(displayable);\r\n            }\r\n            else {\r\n                this._displayables.push(displayable);\r\n            }\r\n            this.markRedraw();\r\n        };\r\n        IncrementalDisplayble.prototype.addDisplayables = function (displayables, notPersistent) {\r\n            notPersistent = notPersistent || false;\r\n            for (var i = 0; i < displayables.length; i++) {\r\n                this.addDisplayable(displayables[i], notPersistent);\r\n            }\r\n        };\r\n        IncrementalDisplayble.prototype.getDisplayables = function () {\r\n            return this._displayables;\r\n        };\r\n        IncrementalDisplayble.prototype.getTemporalDisplayables = function () {\r\n            return this._temporaryDisplayables;\r\n        };\r\n        IncrementalDisplayble.prototype.eachPendingDisplayable = function (cb) {\r\n            for (var i = this._cursor; i < this._displayables.length; i++) {\r\n                cb && cb(this._displayables[i]);\r\n            }\r\n            for (var i = 0; i < this._temporaryDisplayables.length; i++) {\r\n                cb && cb(this._temporaryDisplayables[i]);\r\n            }\r\n        };\r\n        IncrementalDisplayble.prototype.update = function () {\r\n            this.updateTransform();\r\n            for (var i = this._cursor; i < this._displayables.length; i++) {\r\n                var displayable = this._displayables[i];\r\n                displayable.parent = this;\r\n                displayable.update();\r\n                displayable.parent = null;\r\n            }\r\n            for (var i = 0; i < this._temporaryDisplayables.length; i++) {\r\n                var displayable = this._temporaryDisplayables[i];\r\n                displayable.parent = this;\r\n                displayable.update();\r\n                displayable.parent = null;\r\n            }\r\n        };\r\n        IncrementalDisplayble.prototype.getBoundingRect = function () {\r\n            if (!this._rect) {\r\n                var rect = new BoundingRect(Infinity, Infinity, -Infinity, -Infinity);\r\n                for (var i = 0; i < this._displayables.length; i++) {\r\n                    var displayable = this._displayables[i];\r\n                    var childRect = displayable.getBoundingRect().clone();\r\n                    if (displayable.needLocalTransform()) {\r\n                        childRect.applyTransform(displayable.getLocalTransform(m));\r\n                    }\r\n                    rect.union(childRect);\r\n                }\r\n                this._rect = rect;\r\n            }\r\n            return this._rect;\r\n        };\r\n        IncrementalDisplayble.prototype.contain = function (x, y) {\r\n            var localPos = this.transformCoordToLocal(x, y);\r\n            var rect = this.getBoundingRect();\r\n            if (rect.contain(localPos[0], localPos[1])) {\r\n                for (var i = 0; i < this._displayables.length; i++) {\r\n                    var displayable = this._displayables[i];\r\n                    if (displayable.contain(x, y)) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        return IncrementalDisplayble;\r\n    }(Displayable));\n\n    var globalImageCache = new LRU(50);\r\n    function findExistImage(newImageOrSrc) {\r\n        if (typeof newImageOrSrc === 'string') {\r\n            var cachedImgObj = globalImageCache.get(newImageOrSrc);\r\n            return cachedImgObj && cachedImgObj.image;\r\n        }\r\n        else {\r\n            return newImageOrSrc;\r\n        }\r\n    }\r\n    function createOrUpdateImage(newImageOrSrc, image, hostEl, cb, cbPayload) {\r\n        if (!newImageOrSrc) {\r\n            return image;\r\n        }\r\n        else if (typeof newImageOrSrc === 'string') {\r\n            if ((image && image.__zrImageSrc === newImageOrSrc) || !hostEl) {\r\n                return image;\r\n            }\r\n            var cachedImgObj = globalImageCache.get(newImageOrSrc);\r\n            var pendingWrap = { hostEl: hostEl, cb: cb, cbPayload: cbPayload };\r\n            if (cachedImgObj) {\r\n                image = cachedImgObj.image;\r\n                !isImageReady(image) && cachedImgObj.pending.push(pendingWrap);\r\n            }\r\n            else {\r\n                image = new Image();\r\n                image.onload = image.onerror = imageOnLoad;\r\n                globalImageCache.put(newImageOrSrc, image.__cachedImgObj = {\r\n                    image: image,\r\n                    pending: [pendingWrap]\r\n                });\r\n                image.src = image.__zrImageSrc = newImageOrSrc;\r\n            }\r\n            return image;\r\n        }\r\n        else {\r\n            return newImageOrSrc;\r\n        }\r\n    }\r\n    function imageOnLoad() {\r\n        var cachedImgObj = this.__cachedImgObj;\r\n        this.onload = this.onerror = this.__cachedImgObj = null;\r\n        for (var i = 0; i < cachedImgObj.pending.length; i++) {\r\n            var pendingWrap = cachedImgObj.pending[i];\r\n            var cb = pendingWrap.cb;\r\n            cb && cb(this, pendingWrap.cbPayload);\r\n            pendingWrap.hostEl.dirty();\r\n        }\r\n        cachedImgObj.pending.length = 0;\r\n    }\r\n    function isImageReady(image) {\r\n        return image && image.width && image.height;\r\n    }\n\n    var STYLE_REG = /\\{([a-zA-Z0-9_]+)\\|([^}]*)\\}/g;\r\n    function truncateText(text, containerWidth, font, ellipsis, options) {\r\n        if (!containerWidth) {\r\n            return '';\r\n        }\r\n        var textLines = (text + '').split('\\n');\r\n        options = prepareTruncateOptions(containerWidth, font, ellipsis, options);\r\n        for (var i = 0, len = textLines.length; i < len; i++) {\r\n            textLines[i] = truncateSingleLine(textLines[i], options);\r\n        }\r\n        return textLines.join('\\n');\r\n    }\r\n    function prepareTruncateOptions(containerWidth, font, ellipsis, options) {\r\n        options = options || {};\r\n        var preparedOpts = extend({}, options);\r\n        preparedOpts.font = font;\r\n        ellipsis = retrieve2(ellipsis, '...');\r\n        preparedOpts.maxIterations = retrieve2(options.maxIterations, 2);\r\n        var minChar = preparedOpts.minChar = retrieve2(options.minChar, 0);\r\n        preparedOpts.cnCharWidth = getWidth('国', font);\r\n        var ascCharWidth = preparedOpts.ascCharWidth = getWidth('a', font);\r\n        preparedOpts.placeholder = retrieve2(options.placeholder, '');\r\n        var contentWidth = containerWidth = Math.max(0, containerWidth - 1);\r\n        for (var i = 0; i < minChar && contentWidth >= ascCharWidth; i++) {\r\n            contentWidth -= ascCharWidth;\r\n        }\r\n        var ellipsisWidth = getWidth(ellipsis, font);\r\n        if (ellipsisWidth > contentWidth) {\r\n            ellipsis = '';\r\n            ellipsisWidth = 0;\r\n        }\r\n        contentWidth = containerWidth - ellipsisWidth;\r\n        preparedOpts.ellipsis = ellipsis;\r\n        preparedOpts.ellipsisWidth = ellipsisWidth;\r\n        preparedOpts.contentWidth = contentWidth;\r\n        preparedOpts.containerWidth = containerWidth;\r\n        return preparedOpts;\r\n    }\r\n    function truncateSingleLine(textLine, options) {\r\n        var containerWidth = options.containerWidth;\r\n        var font = options.font;\r\n        var contentWidth = options.contentWidth;\r\n        if (!containerWidth) {\r\n            return '';\r\n        }\r\n        var lineWidth = getWidth(textLine, font);\r\n        if (lineWidth <= containerWidth) {\r\n            return textLine;\r\n        }\r\n        for (var j = 0;; j++) {\r\n            if (lineWidth <= contentWidth || j >= options.maxIterations) {\r\n                textLine += options.ellipsis;\r\n                break;\r\n            }\r\n            var subLength = j === 0\r\n                ? estimateLength(textLine, contentWidth, options.ascCharWidth, options.cnCharWidth)\r\n                : lineWidth > 0\r\n                    ? Math.floor(textLine.length * contentWidth / lineWidth)\r\n                    : 0;\r\n            textLine = textLine.substr(0, subLength);\r\n            lineWidth = getWidth(textLine, font);\r\n        }\r\n        if (textLine === '') {\r\n            textLine = options.placeholder;\r\n        }\r\n        return textLine;\r\n    }\r\n    function estimateLength(text, contentWidth, ascCharWidth, cnCharWidth) {\r\n        var width = 0;\r\n        var i = 0;\r\n        for (var len = text.length; i < len && width < contentWidth; i++) {\r\n            var charCode = text.charCodeAt(i);\r\n            width += (0 <= charCode && charCode <= 127) ? ascCharWidth : cnCharWidth;\r\n        }\r\n        return i;\r\n    }\r\n    function parsePlainText(text, style) {\r\n        text != null && (text += '');\r\n        var overflow = style.overflow;\r\n        var padding = style.padding;\r\n        var font = style.font;\r\n        var truncate = overflow === 'truncate';\r\n        var calculatedLineHeight = getLineHeight(font);\r\n        var lineHeight = retrieve2(style.lineHeight, calculatedLineHeight);\r\n        var truncateLineOverflow = style.lineOverflow === 'truncate';\r\n        var width = style.width;\r\n        var lines;\r\n        if (width != null && overflow === 'break' || overflow === 'breakAll') {\r\n            lines = text ? wrapText(text, style.font, width, overflow === 'breakAll', 0).lines : [];\r\n        }\r\n        else {\r\n            lines = text ? text.split('\\n') : [];\r\n        }\r\n        var contentHeight = lines.length * lineHeight;\r\n        var height = retrieve2(style.height, contentHeight);\r\n        if (contentHeight > height && truncateLineOverflow) {\r\n            var lineCount = Math.floor(height / lineHeight);\r\n            lines = lines.slice(0, lineCount);\r\n        }\r\n        var outerHeight = height;\r\n        var outerWidth = width;\r\n        if (padding) {\r\n            outerHeight += padding[0] + padding[2];\r\n            if (outerWidth != null) {\r\n                outerWidth += padding[1] + padding[3];\r\n            }\r\n        }\r\n        if (text && truncate && outerWidth != null) {\r\n            var options = prepareTruncateOptions(width, font, style.ellipsis, {\r\n                minChar: style.truncateMinChar,\r\n                placeholder: style.placeholder\r\n            });\r\n            for (var i = 0; i < lines.length; i++) {\r\n                lines[i] = truncateSingleLine(lines[i], options);\r\n            }\r\n        }\r\n        if (width == null) {\r\n            var maxWidth = 0;\r\n            for (var i = 0; i < lines.length; i++) {\r\n                maxWidth = Math.max(getWidth(lines[i], font), maxWidth);\r\n            }\r\n            width = maxWidth;\r\n        }\r\n        return {\r\n            lines: lines,\r\n            height: height,\r\n            outerHeight: outerHeight,\r\n            lineHeight: lineHeight,\r\n            calculatedLineHeight: calculatedLineHeight,\r\n            contentHeight: contentHeight,\r\n            width: width\r\n        };\r\n    }\r\n    var RichTextToken = (function () {\r\n        function RichTextToken() {\r\n        }\r\n        return RichTextToken;\r\n    }());\r\n    var RichTextLine = (function () {\r\n        function RichTextLine(tokens) {\r\n            this.tokens = [];\r\n            if (tokens) {\r\n                this.tokens = tokens;\r\n            }\r\n        }\r\n        return RichTextLine;\r\n    }());\r\n    var RichTextContentBlock = (function () {\r\n        function RichTextContentBlock() {\r\n            this.width = 0;\r\n            this.height = 0;\r\n            this.contentWidth = 0;\r\n            this.contentHeight = 0;\r\n            this.outerWidth = 0;\r\n            this.outerHeight = 0;\r\n            this.lines = [];\r\n        }\r\n        return RichTextContentBlock;\r\n    }());\r\n    function parseRichText(text, style) {\r\n        var contentBlock = new RichTextContentBlock();\r\n        text != null && (text += '');\r\n        if (!text) {\r\n            return contentBlock;\r\n        }\r\n        var topWidth = style.width;\r\n        var topHeight = style.height;\r\n        var overflow = style.overflow;\r\n        var wrapInfo = (overflow === 'break' || overflow === 'breakAll') && topWidth != null\r\n            ? { width: topWidth, accumWidth: 0, breakAll: overflow === 'breakAll' }\r\n            : null;\r\n        var lastIndex = STYLE_REG.lastIndex = 0;\r\n        var result;\r\n        while ((result = STYLE_REG.exec(text)) != null) {\r\n            var matchedIndex = result.index;\r\n            if (matchedIndex > lastIndex) {\r\n                pushTokens(contentBlock, text.substring(lastIndex, matchedIndex), style, wrapInfo);\r\n            }\r\n            pushTokens(contentBlock, result[2], style, wrapInfo, result[1]);\r\n            lastIndex = STYLE_REG.lastIndex;\r\n        }\r\n        if (lastIndex < text.length) {\r\n            pushTokens(contentBlock, text.substring(lastIndex, text.length), style, wrapInfo);\r\n        }\r\n        var pendingList = [];\r\n        var calculatedHeight = 0;\r\n        var calculatedWidth = 0;\r\n        var stlPadding = style.padding;\r\n        var truncate = overflow === 'truncate';\r\n        var truncateLine = style.lineOverflow === 'truncate';\r\n        outer: for (var i = 0; i < contentBlock.lines.length; i++) {\r\n            var line = contentBlock.lines[i];\r\n            var lineHeight = 0;\r\n            var lineWidth = 0;\r\n            for (var j = 0; j < line.tokens.length; j++) {\r\n                var token = line.tokens[j];\r\n                var tokenStyle = token.styleName && style.rich[token.styleName] || {};\r\n                var textPadding = token.textPadding = tokenStyle.padding;\r\n                var paddingH = textPadding ? textPadding[1] + textPadding[3] : 0;\r\n                var font = token.font = tokenStyle.font || style.font;\r\n                token.contentHeight = getLineHeight(font);\r\n                var tokenHeight = retrieve2(tokenStyle.height, token.contentHeight);\r\n                token.innerHeight = tokenHeight;\r\n                textPadding && (tokenHeight += textPadding[0] + textPadding[2]);\r\n                token.height = tokenHeight;\r\n                token.lineHeight = retrieve3(tokenStyle.lineHeight, style.lineHeight, tokenHeight);\r\n                token.align = tokenStyle && tokenStyle.align || style.align;\r\n                token.verticalAlign = tokenStyle && tokenStyle.verticalAlign || 'middle';\r\n                if (truncateLine && topHeight != null && calculatedHeight + token.lineHeight > topHeight) {\r\n                    if (j > 0) {\r\n                        line.tokens = line.tokens.slice(0, j);\r\n                        contentBlock.lines = contentBlock.lines.slice(0, i + 1);\r\n                    }\r\n                    else {\r\n                        contentBlock.lines = contentBlock.lines.slice(0, i);\r\n                    }\r\n                    break outer;\r\n                }\r\n                var styleTokenWidth = tokenStyle.width;\r\n                var tokenWidthNotSpecified = styleTokenWidth == null || styleTokenWidth === 'auto';\r\n                if (typeof styleTokenWidth === 'string' && styleTokenWidth.charAt(styleTokenWidth.length - 1) === '%') {\r\n                    token.percentWidth = styleTokenWidth;\r\n                    pendingList.push(token);\r\n                    token.contentWidth = getWidth(token.text, font);\r\n                }\r\n                else {\r\n                    if (tokenWidthNotSpecified) {\r\n                        var textBackgroundColor = tokenStyle.backgroundColor;\r\n                        var bgImg = textBackgroundColor && textBackgroundColor.image;\r\n                        if (bgImg) {\r\n                            bgImg = findExistImage(bgImg);\r\n                            if (isImageReady(bgImg)) {\r\n                                token.width = Math.max(token.width, bgImg.width * tokenHeight / bgImg.height);\r\n                            }\r\n                        }\r\n                    }\r\n                    var remainTruncWidth = truncate && topWidth != null\r\n                        ? topWidth - lineWidth : null;\r\n                    if (remainTruncWidth != null && remainTruncWidth < token.width) {\r\n                        if (!tokenWidthNotSpecified || remainTruncWidth < paddingH) {\r\n                            token.text = '';\r\n                            token.width = token.contentWidth = 0;\r\n                        }\r\n                        else {\r\n                            token.text = truncateText(token.text, remainTruncWidth - paddingH, font, style.ellipsis, { minChar: style.truncateMinChar });\r\n                            token.width = token.contentWidth = getWidth(token.text, font);\r\n                        }\r\n                    }\r\n                    else {\r\n                        token.contentWidth = getWidth(token.text, font);\r\n                    }\r\n                }\r\n                token.width += paddingH;\r\n                lineWidth += token.width;\r\n                tokenStyle && (lineHeight = Math.max(lineHeight, token.lineHeight));\r\n            }\r\n            line.width = lineWidth;\r\n            line.lineHeight = lineHeight;\r\n            calculatedHeight += lineHeight;\r\n            calculatedWidth = Math.max(calculatedWidth, lineWidth);\r\n        }\r\n        contentBlock.outerWidth = contentBlock.width = retrieve2(topWidth, calculatedWidth);\r\n        contentBlock.outerHeight = contentBlock.height = retrieve2(topHeight, calculatedHeight);\r\n        contentBlock.contentHeight = calculatedHeight;\r\n        contentBlock.contentWidth = calculatedWidth;\r\n        if (stlPadding) {\r\n            contentBlock.outerWidth += stlPadding[1] + stlPadding[3];\r\n            contentBlock.outerHeight += stlPadding[0] + stlPadding[2];\r\n        }\r\n        for (var i = 0; i < pendingList.length; i++) {\r\n            var token = pendingList[i];\r\n            var percentWidth = token.percentWidth;\r\n            token.width = parseInt(percentWidth, 10) / 100 * contentBlock.width;\r\n        }\r\n        return contentBlock;\r\n    }\r\n    function pushTokens(block, str, style, wrapInfo, styleName) {\r\n        var isEmptyStr = str === '';\r\n        var tokenStyle = styleName && style.rich[styleName] || {};\r\n        var lines = block.lines;\r\n        var font = tokenStyle.font || style.font;\r\n        var newLine = false;\r\n        var strLines;\r\n        var linesWidths;\r\n        if (wrapInfo) {\r\n            var tokenPadding = tokenStyle.padding;\r\n            var tokenPaddingH = tokenPadding ? tokenPadding[1] + tokenPadding[3] : 0;\r\n            if (tokenStyle.width != null && tokenStyle.width !== 'auto') {\r\n                var outerWidth_1 = parsePercent$1(tokenStyle.width, wrapInfo.width) + tokenPaddingH;\r\n                if (lines.length > 0) {\r\n                    if (outerWidth_1 + wrapInfo.accumWidth > wrapInfo.width) {\r\n                        strLines = str.split('\\n');\r\n                        newLine = true;\r\n                    }\r\n                }\r\n                wrapInfo.accumWidth = outerWidth_1;\r\n            }\r\n            else {\r\n                var res = wrapText(str, font, wrapInfo.width, wrapInfo.breakAll, wrapInfo.accumWidth);\r\n                wrapInfo.accumWidth = res.accumWidth + tokenPaddingH;\r\n                linesWidths = res.linesWidths;\r\n                strLines = res.lines;\r\n            }\r\n        }\r\n        else {\r\n            strLines = str.split('\\n');\r\n        }\r\n        for (var i = 0; i < strLines.length; i++) {\r\n            var text = strLines[i];\r\n            var token = new RichTextToken();\r\n            token.styleName = styleName;\r\n            token.text = text;\r\n            token.isLineHolder = !text && !isEmptyStr;\r\n            if (typeof tokenStyle.width === 'number') {\r\n                token.width = tokenStyle.width;\r\n            }\r\n            else {\r\n                token.width = linesWidths\r\n                    ? linesWidths[i]\r\n                    : getWidth(text, font);\r\n            }\r\n            if (!i && !newLine) {\r\n                var tokens = (lines[lines.length - 1] || (lines[0] = new RichTextLine())).tokens;\r\n                var tokensLen = tokens.length;\r\n                (tokensLen === 1 && tokens[0].isLineHolder)\r\n                    ? (tokens[0] = token)\r\n                    : ((text || !tokensLen || isEmptyStr) && tokens.push(token));\r\n            }\r\n            else {\r\n                lines.push(new RichTextLine([token]));\r\n            }\r\n        }\r\n    }\r\n    function isLatin(ch) {\r\n        var code = ch.charCodeAt(0);\r\n        return code >= 0x21 && code <= 0xFF;\r\n    }\r\n    var breakCharMap = reduce(',&?/;] '.split(''), function (obj, ch) {\r\n        obj[ch] = true;\r\n        return obj;\r\n    }, {});\r\n    function isWordBreakChar(ch) {\r\n        if (isLatin(ch)) {\r\n            if (breakCharMap[ch]) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    function wrapText(text, font, lineWidth, isBreakAll, lastAccumWidth) {\r\n        var lines = [];\r\n        var linesWidths = [];\r\n        var line = '';\r\n        var currentWord = '';\r\n        var currentWordWidth = 0;\r\n        var accumWidth = 0;\r\n        for (var i = 0; i < text.length; i++) {\r\n            var ch = text.charAt(i);\r\n            if (ch === '\\n') {\r\n                if (currentWord) {\r\n                    line += currentWord;\r\n                    accumWidth += currentWordWidth;\r\n                }\r\n                lines.push(line);\r\n                linesWidths.push(accumWidth);\r\n                line = '';\r\n                currentWord = '';\r\n                currentWordWidth = 0;\r\n                accumWidth = 0;\r\n                continue;\r\n            }\r\n            var chWidth = getWidth(ch, font);\r\n            var inWord = isBreakAll ? false : !isWordBreakChar(ch);\r\n            if (!lines.length\r\n                ? lastAccumWidth + accumWidth + chWidth > lineWidth\r\n                : accumWidth + chWidth > lineWidth) {\r\n                if (!accumWidth) {\r\n                    if (inWord) {\r\n                        lines.push(currentWord);\r\n                        linesWidths.push(currentWordWidth);\r\n                        currentWord = ch;\r\n                        currentWordWidth = chWidth;\r\n                    }\r\n                    else {\r\n                        lines.push(ch);\r\n                        linesWidths.push(chWidth);\r\n                    }\r\n                }\r\n                else if (line || currentWord) {\r\n                    if (inWord) {\r\n                        if (!line) {\r\n                            line = currentWord;\r\n                            currentWord = '';\r\n                            currentWordWidth = 0;\r\n                            accumWidth = currentWordWidth;\r\n                        }\r\n                        lines.push(line);\r\n                        linesWidths.push(accumWidth - currentWordWidth);\r\n                        currentWord += ch;\r\n                        currentWordWidth += chWidth;\r\n                        line = '';\r\n                        accumWidth = currentWordWidth;\r\n                    }\r\n                    else {\r\n                        if (currentWord) {\r\n                            line += currentWord;\r\n                            accumWidth += currentWordWidth;\r\n                            currentWord = '';\r\n                            currentWordWidth = 0;\r\n                        }\r\n                        lines.push(line);\r\n                        linesWidths.push(accumWidth);\r\n                        line = ch;\r\n                        accumWidth = chWidth;\r\n                    }\r\n                }\r\n                continue;\r\n            }\r\n            accumWidth += chWidth;\r\n            if (inWord) {\r\n                currentWord += ch;\r\n                currentWordWidth += chWidth;\r\n            }\r\n            else {\r\n                if (currentWord) {\r\n                    line += currentWord;\r\n                    currentWord = '';\r\n                    currentWordWidth = 0;\r\n                }\r\n                line += ch;\r\n            }\r\n        }\r\n        if (!lines.length && !line) {\r\n            line = text;\r\n            currentWord = '';\r\n            currentWordWidth = 0;\r\n        }\r\n        if (currentWord) {\r\n            line += currentWord;\r\n        }\r\n        if (line) {\r\n            lines.push(line);\r\n            linesWidths.push(accumWidth);\r\n        }\r\n        if (lines.length === 1) {\r\n            accumWidth += lastAccumWidth;\r\n        }\r\n        return {\r\n            accumWidth: accumWidth,\r\n            lines: lines,\r\n            linesWidths: linesWidths\r\n        };\r\n    }\r\n    function parsePercent$1(value, maxValue) {\r\n        if (typeof value === 'string') {\r\n            if (value.lastIndexOf('%') >= 0) {\r\n                return parseFloat(value) / 100 * maxValue;\r\n            }\r\n            return parseFloat(value);\r\n        }\r\n        return value;\r\n    }\n\n    var DEFAULT_RICH_TEXT_COLOR = {\r\n        fill: '#000'\r\n    };\r\n    var DEFAULT_STROKE_LINE_WIDTH = 2;\r\n    var DEFAULT_TEXT_ANIMATION_PROPS = {\r\n        style: defaults({\r\n            fill: true,\r\n            stroke: true,\r\n            fillOpacity: true,\r\n            strokeOpacity: true,\r\n            lineWidth: true,\r\n            fontSize: true,\r\n            lineHeight: true,\r\n            width: true,\r\n            height: true,\r\n            textShadowColor: true,\r\n            textShadowBlur: true,\r\n            textShadowOffsetX: true,\r\n            textShadowOffsetY: true,\r\n            backgroundColor: true,\r\n            padding: true,\r\n            borderColor: true,\r\n            borderWidth: true,\r\n            borderRadius: true\r\n        }, DEFAULT_COMMON_ANIMATION_PROPS.style)\r\n    };\r\n    var ZRText = (function (_super) {\r\n        __extends(ZRText, _super);\r\n        function ZRText(opts) {\r\n            var _this = _super.call(this) || this;\r\n            _this.type = 'text';\r\n            _this._children = [];\r\n            _this._defaultStyle = DEFAULT_RICH_TEXT_COLOR;\r\n            _this.attr(opts);\r\n            return _this;\r\n        }\r\n        ZRText.prototype.childrenRef = function () {\r\n            return this._children;\r\n        };\r\n        ZRText.prototype.update = function () {\r\n            if (this.styleChanged()) {\r\n                this._updateSubTexts();\r\n            }\r\n            for (var i = 0; i < this._children.length; i++) {\r\n                var child = this._children[i];\r\n                child.zlevel = this.zlevel;\r\n                child.z = this.z;\r\n                child.z2 = this.z2;\r\n                child.culling = this.culling;\r\n                child.cursor = this.cursor;\r\n                child.invisible = this.invisible;\r\n            }\r\n            var attachedTransform = this.attachedTransform;\r\n            if (attachedTransform) {\r\n                attachedTransform.updateTransform();\r\n                var m = attachedTransform.transform;\r\n                if (m) {\r\n                    this.transform = this.transform || [];\r\n                    copy(this.transform, m);\r\n                }\r\n                else {\r\n                    this.transform = null;\r\n                }\r\n            }\r\n            else {\r\n                _super.prototype.update.call(this);\r\n            }\r\n        };\r\n        ZRText.prototype.getComputedTransform = function () {\r\n            if (this.__hostTarget) {\r\n                this.__hostTarget.getComputedTransform();\r\n                this.__hostTarget.updateInnerText(true);\r\n            }\r\n            return this.attachedTransform ? this.attachedTransform.getComputedTransform()\r\n                : _super.prototype.getComputedTransform.call(this);\r\n        };\r\n        ZRText.prototype._updateSubTexts = function () {\r\n            this._childCursor = 0;\r\n            normalizeTextStyle(this.style);\r\n            this.style.rich\r\n                ? this._updateRichTexts()\r\n                : this._updatePlainTexts();\r\n            this._children.length = this._childCursor;\r\n            this.styleUpdated();\r\n        };\r\n        ZRText.prototype.addSelfToZr = function (zr) {\r\n            _super.prototype.addSelfToZr.call(this, zr);\r\n            for (var i = 0; i < this._children.length; i++) {\r\n                this._children[i].__zr = zr;\r\n            }\r\n        };\r\n        ZRText.prototype.removeSelfFromZr = function (zr) {\r\n            _super.prototype.removeSelfFromZr.call(this, zr);\r\n            for (var i = 0; i < this._children.length; i++) {\r\n                this._children[i].__zr = null;\r\n            }\r\n        };\r\n        ZRText.prototype.getBoundingRect = function () {\r\n            if (this.styleChanged()) {\r\n                this._updateSubTexts();\r\n            }\r\n            if (!this._rect) {\r\n                var tmpRect = new BoundingRect(0, 0, 0, 0);\r\n                var children = this._children;\r\n                var tmpMat = [];\r\n                var rect = null;\r\n                for (var i = 0; i < children.length; i++) {\r\n                    var child = children[i];\r\n                    var childRect = child.getBoundingRect();\r\n                    var transform = child.getLocalTransform(tmpMat);\r\n                    if (transform) {\r\n                        tmpRect.copy(childRect);\r\n                        tmpRect.applyTransform(transform);\r\n                        rect = rect || tmpRect.clone();\r\n                        rect.union(tmpRect);\r\n                    }\r\n                    else {\r\n                        rect = rect || childRect.clone();\r\n                        rect.union(childRect);\r\n                    }\r\n                }\r\n                this._rect = rect || tmpRect;\r\n            }\r\n            return this._rect;\r\n        };\r\n        ZRText.prototype.setDefaultTextStyle = function (defaultTextStyle) {\r\n            this._defaultStyle = defaultTextStyle || DEFAULT_RICH_TEXT_COLOR;\r\n        };\r\n        ZRText.prototype.setTextContent = function (textContent) {\r\n            throw new Error('Can\\'t attach text on another text');\r\n        };\r\n        ZRText.prototype._mergeStyle = function (targetStyle, sourceStyle) {\r\n            if (!sourceStyle) {\r\n                return targetStyle;\r\n            }\r\n            var sourceRich = sourceStyle.rich;\r\n            var targetRich = targetStyle.rich || (sourceRich && {});\r\n            extend(targetStyle, sourceStyle);\r\n            if (sourceRich && targetRich) {\r\n                this._mergeRich(targetRich, sourceRich);\r\n                targetStyle.rich = targetRich;\r\n            }\r\n            else if (targetRich) {\r\n                targetStyle.rich = targetRich;\r\n            }\r\n            return targetStyle;\r\n        };\r\n        ZRText.prototype._mergeRich = function (targetRich, sourceRich) {\r\n            var richNames = keys(sourceRich);\r\n            for (var i = 0; i < richNames.length; i++) {\r\n                var richName = richNames[i];\r\n                targetRich[richName] = targetRich[richName] || {};\r\n                extend(targetRich[richName], sourceRich[richName]);\r\n            }\r\n        };\r\n        ZRText.prototype._getAnimationStyleProps = function () {\r\n            return DEFAULT_TEXT_ANIMATION_PROPS;\r\n        };\r\n        ZRText.prototype._getOrCreateChild = function (Ctor) {\r\n            var child = this._children[this._childCursor];\r\n            if (!child || !(child instanceof Ctor)) {\r\n                child = new Ctor();\r\n            }\r\n            this._children[this._childCursor++] = child;\r\n            child.__zr = this.__zr;\r\n            child.parent = this;\r\n            return child;\r\n        };\r\n        ZRText.prototype._updatePlainTexts = function () {\r\n            var style = this.style;\r\n            var textFont = style.font || DEFAULT_FONT;\r\n            var textPadding = style.padding;\r\n            var text = getStyleText(style);\r\n            var contentBlock = parsePlainText(text, style);\r\n            var needDrawBg = needDrawBackground(style);\r\n            var bgColorDrawn = !!(style.backgroundColor);\r\n            var outerHeight = contentBlock.outerHeight;\r\n            var textLines = contentBlock.lines;\r\n            var lineHeight = contentBlock.lineHeight;\r\n            var defaultStyle = this._defaultStyle;\r\n            var baseX = style.x || 0;\r\n            var baseY = style.y || 0;\r\n            var textAlign = style.align || defaultStyle.align || 'left';\r\n            var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign || 'top';\r\n            var textX = baseX;\r\n            var textY = adjustTextY(baseY, contentBlock.contentHeight, verticalAlign);\r\n            if (needDrawBg || textPadding) {\r\n                var outerWidth_1 = contentBlock.width;\r\n                textPadding && (outerWidth_1 += textPadding[1] + textPadding[3]);\r\n                var boxX = adjustTextX(baseX, outerWidth_1, textAlign);\r\n                var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\r\n                needDrawBg && this._renderBackground(style, style, boxX, boxY, outerWidth_1, outerHeight);\r\n            }\r\n            textY += lineHeight / 2;\r\n            if (textPadding) {\r\n                textX = getTextXForPadding(baseX, textAlign, textPadding);\r\n                if (verticalAlign === 'top') {\r\n                    textY += textPadding[0];\r\n                }\r\n                else if (verticalAlign === 'bottom') {\r\n                    textY -= textPadding[2];\r\n                }\r\n            }\r\n            var defaultLineWidth = 0;\r\n            var useDefaultFill = false;\r\n            var textFill = getFill('fill' in style\r\n                ? style.fill\r\n                : (useDefaultFill = true, defaultStyle.fill));\r\n            var textStroke = getStroke('stroke' in style\r\n                ? style.stroke\r\n                : (!bgColorDrawn\r\n                    && (!defaultStyle.autoStroke || useDefaultFill))\r\n                    ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\r\n                    : null);\r\n            var hasShadow = style.textShadowBlur > 0;\r\n            var fixedBoundingRect = style.width != null\r\n                && (style.overflow === 'truncate' || style.overflow === 'break' || style.overflow === 'breakAll');\r\n            var calculatedLineHeight = contentBlock.calculatedLineHeight;\r\n            for (var i = 0; i < textLines.length; i++) {\r\n                var el = this._getOrCreateChild(TSpan);\r\n                var subElStyle = el.createStyle();\r\n                el.useStyle(subElStyle);\r\n                subElStyle.text = textLines[i];\r\n                subElStyle.x = textX;\r\n                subElStyle.y = textY;\r\n                if (textAlign) {\r\n                    subElStyle.textAlign = textAlign;\r\n                }\r\n                subElStyle.textBaseline = 'middle';\r\n                subElStyle.opacity = style.opacity;\r\n                subElStyle.strokeFirst = true;\r\n                if (hasShadow) {\r\n                    subElStyle.shadowBlur = style.textShadowBlur || 0;\r\n                    subElStyle.shadowColor = style.textShadowColor || 'transparent';\r\n                    subElStyle.shadowOffsetX = style.textShadowOffsetX || 0;\r\n                    subElStyle.shadowOffsetY = style.textShadowOffsetY || 0;\r\n                }\r\n                if (textStroke) {\r\n                    subElStyle.stroke = textStroke;\r\n                    subElStyle.lineWidth = style.lineWidth || defaultLineWidth;\r\n                    subElStyle.lineDash = style.lineDash;\r\n                    subElStyle.lineDashOffset = style.lineDashOffset || 0;\r\n                }\r\n                if (textFill) {\r\n                    subElStyle.fill = textFill;\r\n                }\r\n                subElStyle.font = textFont;\r\n                textY += lineHeight;\r\n                if (fixedBoundingRect) {\r\n                    el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, style.width, subElStyle.textAlign), adjustTextY(subElStyle.y, calculatedLineHeight, subElStyle.textBaseline), style.width, calculatedLineHeight));\r\n                }\r\n            }\r\n        };\r\n        ZRText.prototype._updateRichTexts = function () {\r\n            var style = this.style;\r\n            var text = getStyleText(style);\r\n            var contentBlock = parseRichText(text, style);\r\n            var contentWidth = contentBlock.width;\r\n            var outerWidth = contentBlock.outerWidth;\r\n            var outerHeight = contentBlock.outerHeight;\r\n            var textPadding = style.padding;\r\n            var baseX = style.x || 0;\r\n            var baseY = style.y || 0;\r\n            var defaultStyle = this._defaultStyle;\r\n            var textAlign = style.align || defaultStyle.align;\r\n            var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign;\r\n            var boxX = adjustTextX(baseX, outerWidth, textAlign);\r\n            var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\r\n            var xLeft = boxX;\r\n            var lineTop = boxY;\r\n            if (textPadding) {\r\n                xLeft += textPadding[3];\r\n                lineTop += textPadding[0];\r\n            }\r\n            var xRight = xLeft + contentWidth;\r\n            if (needDrawBackground(style)) {\r\n                this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\r\n            }\r\n            var bgColorDrawn = !!(style.backgroundColor);\r\n            for (var i = 0; i < contentBlock.lines.length; i++) {\r\n                var line = contentBlock.lines[i];\r\n                var tokens = line.tokens;\r\n                var tokenCount = tokens.length;\r\n                var lineHeight = line.lineHeight;\r\n                var remainedWidth = line.width;\r\n                var leftIndex = 0;\r\n                var lineXLeft = xLeft;\r\n                var lineXRight = xRight;\r\n                var rightIndex = tokenCount - 1;\r\n                var token = void 0;\r\n                while (leftIndex < tokenCount\r\n                    && (token = tokens[leftIndex], !token.align || token.align === 'left')) {\r\n                    this._placeToken(token, style, lineHeight, lineTop, lineXLeft, 'left', bgColorDrawn);\r\n                    remainedWidth -= token.width;\r\n                    lineXLeft += token.width;\r\n                    leftIndex++;\r\n                }\r\n                while (rightIndex >= 0\r\n                    && (token = tokens[rightIndex], token.align === 'right')) {\r\n                    this._placeToken(token, style, lineHeight, lineTop, lineXRight, 'right', bgColorDrawn);\r\n                    remainedWidth -= token.width;\r\n                    lineXRight -= token.width;\r\n                    rightIndex--;\r\n                }\r\n                lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - remainedWidth) / 2;\r\n                while (leftIndex <= rightIndex) {\r\n                    token = tokens[leftIndex];\r\n                    this._placeToken(token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center', bgColorDrawn);\r\n                    lineXLeft += token.width;\r\n                    leftIndex++;\r\n                }\r\n                lineTop += lineHeight;\r\n            }\r\n        };\r\n        ZRText.prototype._placeToken = function (token, style, lineHeight, lineTop, x, textAlign, parentBgColorDrawn) {\r\n            var tokenStyle = style.rich[token.styleName] || {};\r\n            tokenStyle.text = token.text;\r\n            var verticalAlign = token.verticalAlign;\r\n            var y = lineTop + lineHeight / 2;\r\n            if (verticalAlign === 'top') {\r\n                y = lineTop + token.height / 2;\r\n            }\r\n            else if (verticalAlign === 'bottom') {\r\n                y = lineTop + lineHeight - token.height / 2;\r\n            }\r\n            var needDrawBg = !token.isLineHolder && needDrawBackground(tokenStyle);\r\n            needDrawBg && this._renderBackground(tokenStyle, style, textAlign === 'right'\r\n                ? x - token.width\r\n                : textAlign === 'center'\r\n                    ? x - token.width / 2\r\n                    : x, y - token.height / 2, token.width, token.height);\r\n            var bgColorDrawn = !!tokenStyle.backgroundColor;\r\n            var textPadding = token.textPadding;\r\n            if (textPadding) {\r\n                x = getTextXForPadding(x, textAlign, textPadding);\r\n                y -= token.height / 2 - textPadding[0] - token.innerHeight / 2;\r\n            }\r\n            var el = this._getOrCreateChild(TSpan);\r\n            var subElStyle = el.createStyle();\r\n            el.useStyle(subElStyle);\r\n            var defaultStyle = this._defaultStyle;\r\n            var useDefaultFill = false;\r\n            var defaultLineWidth = 0;\r\n            var textFill = getStroke('fill' in tokenStyle ? tokenStyle.fill\r\n                : 'fill' in style ? style.fill\r\n                    : (useDefaultFill = true, defaultStyle.fill));\r\n            var textStroke = getStroke('stroke' in tokenStyle ? tokenStyle.stroke\r\n                : 'stroke' in style ? style.stroke\r\n                    : (!bgColorDrawn\r\n                        && !parentBgColorDrawn\r\n                        && (!defaultStyle.autoStroke || useDefaultFill)) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\r\n                        : null);\r\n            var hasShadow = tokenStyle.textShadowBlur > 0\r\n                || style.textShadowBlur > 0;\r\n            subElStyle.text = token.text;\r\n            subElStyle.x = x;\r\n            subElStyle.y = y;\r\n            if (hasShadow) {\r\n                subElStyle.shadowBlur = tokenStyle.textShadowBlur || style.textShadowBlur || 0;\r\n                subElStyle.shadowColor = tokenStyle.textShadowColor || style.textShadowColor || 'transparent';\r\n                subElStyle.shadowOffsetX = tokenStyle.textShadowOffsetX || style.textShadowOffsetX || 0;\r\n                subElStyle.shadowOffsetY = tokenStyle.textShadowOffsetY || style.textShadowOffsetY || 0;\r\n            }\r\n            subElStyle.textAlign = textAlign;\r\n            subElStyle.textBaseline = 'middle';\r\n            subElStyle.font = token.font || DEFAULT_FONT;\r\n            subElStyle.opacity = retrieve3(tokenStyle.opacity, style.opacity, 1);\r\n            if (textStroke) {\r\n                subElStyle.lineWidth = retrieve3(tokenStyle.lineWidth, style.lineWidth, defaultLineWidth);\r\n                subElStyle.lineDash = retrieve2(tokenStyle.lineDash, style.lineDash);\r\n                subElStyle.lineDashOffset = style.lineDashOffset || 0;\r\n                subElStyle.stroke = textStroke;\r\n            }\r\n            if (textFill) {\r\n                subElStyle.fill = textFill;\r\n            }\r\n            var textWidth = token.contentWidth;\r\n            var textHeight = token.contentHeight;\r\n            el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, textWidth, subElStyle.textAlign), adjustTextY(subElStyle.y, textHeight, subElStyle.textBaseline), textWidth, textHeight));\r\n        };\r\n        ZRText.prototype._renderBackground = function (style, topStyle, x, y, width, height) {\r\n            var textBackgroundColor = style.backgroundColor;\r\n            var textBorderWidth = style.borderWidth;\r\n            var textBorderColor = style.borderColor;\r\n            var isPlainBg = isString(textBackgroundColor);\r\n            var textBorderRadius = style.borderRadius;\r\n            var self = this;\r\n            var rectEl;\r\n            var imgEl;\r\n            if (isPlainBg || (textBorderWidth && textBorderColor)) {\r\n                rectEl = this._getOrCreateChild(Rect);\r\n                rectEl.useStyle(rectEl.createStyle());\r\n                rectEl.style.fill = null;\r\n                var rectShape = rectEl.shape;\r\n                rectShape.x = x;\r\n                rectShape.y = y;\r\n                rectShape.width = width;\r\n                rectShape.height = height;\r\n                rectShape.r = textBorderRadius;\r\n                rectEl.dirtyShape();\r\n            }\r\n            if (isPlainBg) {\r\n                var rectStyle = rectEl.style;\r\n                rectStyle.fill = textBackgroundColor || null;\r\n                rectStyle.fillOpacity = retrieve2(style.fillOpacity, 1);\r\n            }\r\n            else if (textBackgroundColor && textBackgroundColor.image) {\r\n                imgEl = this._getOrCreateChild(ZRImage);\r\n                imgEl.onload = function () {\r\n                    self.dirtyStyle();\r\n                };\r\n                var imgStyle = imgEl.style;\r\n                imgStyle.image = textBackgroundColor.image;\r\n                imgStyle.x = x;\r\n                imgStyle.y = y;\r\n                imgStyle.width = width;\r\n                imgStyle.height = height;\r\n            }\r\n            if (textBorderWidth && textBorderColor) {\r\n                var rectStyle = rectEl.style;\r\n                rectStyle.lineWidth = textBorderWidth;\r\n                rectStyle.stroke = textBorderColor;\r\n                rectStyle.strokeOpacity = retrieve2(style.strokeOpacity, 1);\r\n                rectStyle.lineDash = style.borderDash;\r\n                rectStyle.lineDashOffset = style.borderDashOffset || 0;\r\n                rectEl.strokeContainThreshold = 0;\r\n                if (rectEl.hasFill() && rectEl.hasStroke()) {\r\n                    rectStyle.strokeFirst = true;\r\n                    rectStyle.lineWidth *= 2;\r\n                }\r\n            }\r\n            var commonStyle = (rectEl || imgEl).style;\r\n            commonStyle.shadowBlur = style.shadowBlur || 0;\r\n            commonStyle.shadowColor = style.shadowColor || 'transparent';\r\n            commonStyle.shadowOffsetX = style.shadowOffsetX || 0;\r\n            commonStyle.shadowOffsetY = style.shadowOffsetY || 0;\r\n            commonStyle.opacity = retrieve3(style.opacity, topStyle.opacity, 1);\r\n        };\r\n        ZRText.makeFont = function (style) {\r\n            var font = '';\r\n            if (style.fontSize || style.fontFamily || style.fontWeight) {\r\n                var fontSize = '';\r\n                if (typeof style.fontSize === 'string'\r\n                    && (style.fontSize.indexOf('px') !== -1\r\n                        || style.fontSize.indexOf('rem') !== -1\r\n                        || style.fontSize.indexOf('em') !== -1)) {\r\n                    fontSize = style.fontSize;\r\n                }\r\n                else if (!isNaN(+style.fontSize)) {\r\n                    fontSize = style.fontSize + 'px';\r\n                }\r\n                else {\r\n                    fontSize = '12px';\r\n                }\r\n                font = [\r\n                    style.fontStyle,\r\n                    style.fontWeight,\r\n                    fontSize,\r\n                    style.fontFamily || 'sans-serif'\r\n                ].join(' ');\r\n            }\r\n            return font && trim(font) || style.textFont || style.font;\r\n        };\r\n        return ZRText;\r\n    }(Displayable));\r\n    var VALID_TEXT_ALIGN = { left: true, right: 1, center: 1 };\r\n    var VALID_TEXT_VERTICAL_ALIGN = { top: 1, bottom: 1, middle: 1 };\r\n    function normalizeTextStyle(style) {\r\n        normalizeStyle(style);\r\n        each(style.rich, normalizeStyle);\r\n        return style;\r\n    }\r\n    function normalizeStyle(style) {\r\n        if (style) {\r\n            style.font = ZRText.makeFont(style);\r\n            var textAlign = style.align;\r\n            textAlign === 'middle' && (textAlign = 'center');\r\n            style.align = (textAlign == null || VALID_TEXT_ALIGN[textAlign]) ? textAlign : 'left';\r\n            var verticalAlign = style.verticalAlign;\r\n            verticalAlign === 'center' && (verticalAlign = 'middle');\r\n            style.verticalAlign = (verticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[verticalAlign]) ? verticalAlign : 'top';\r\n            var textPadding = style.padding;\r\n            if (textPadding) {\r\n                style.padding = normalizeCssArray(style.padding);\r\n            }\r\n        }\r\n    }\r\n    function getStroke(stroke, lineWidth) {\r\n        return (stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none')\r\n            ? null\r\n            : (stroke.image || stroke.colorStops)\r\n                ? '#000'\r\n                : stroke;\r\n    }\r\n    function getFill(fill) {\r\n        return (fill == null || fill === 'none')\r\n            ? null\r\n            : (fill.image || fill.colorStops)\r\n                ? '#000'\r\n                : fill;\r\n    }\r\n    function getTextXForPadding(x, textAlign, textPadding) {\r\n        return textAlign === 'right'\r\n            ? (x - textPadding[1])\r\n            : textAlign === 'center'\r\n                ? (x + textPadding[3] / 2 - textPadding[1] / 2)\r\n                : (x + textPadding[3]);\r\n    }\r\n    function getStyleText(style) {\r\n        var text = style.text;\r\n        text != null && (text += '');\r\n        return text;\r\n    }\r\n    function needDrawBackground(style) {\r\n        return !!(style.backgroundColor\r\n            || (style.borderWidth && style.borderColor));\r\n    }\n\n    var ArcShape = (function () {\r\n        function ArcShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.r = 0;\r\n            this.startAngle = 0;\r\n            this.endAngle = Math.PI * 2;\r\n            this.clockwise = true;\r\n        }\r\n        return ArcShape;\r\n    }());\r\n    var Arc = (function (_super) {\r\n        __extends(Arc, _super);\r\n        function Arc(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Arc.prototype.getDefaultStyle = function () {\r\n            return {\r\n                stroke: '#000',\r\n                fill: null\r\n            };\r\n        };\r\n        Arc.prototype.getDefaultShape = function () {\r\n            return new ArcShape();\r\n        };\r\n        Arc.prototype.buildPath = function (ctx, shape) {\r\n            var x = shape.cx;\r\n            var y = shape.cy;\r\n            var r = Math.max(shape.r, 0);\r\n            var startAngle = shape.startAngle;\r\n            var endAngle = shape.endAngle;\r\n            var clockwise = shape.clockwise;\r\n            var unitX = Math.cos(startAngle);\r\n            var unitY = Math.sin(startAngle);\r\n            ctx.moveTo(unitX * r + x, unitY * r + y);\r\n            ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\r\n        };\r\n        return Arc;\r\n    }(Path));\r\n    Arc.prototype.type = 'arc';\n\n    var out = [];\r\n    var BezierCurveShape = (function () {\r\n        function BezierCurveShape() {\r\n            this.x1 = 0;\r\n            this.y1 = 0;\r\n            this.x2 = 0;\r\n            this.y2 = 0;\r\n            this.cpx1 = 0;\r\n            this.cpy1 = 0;\r\n            this.percent = 1;\r\n        }\r\n        return BezierCurveShape;\r\n    }());\r\n    function someVectorAt(shape, t, isTangent) {\r\n        var cpx2 = shape.cpx2;\r\n        var cpy2 = shape.cpy2;\r\n        if (cpx2 === null || cpy2 === null) {\r\n            return [\r\n                (isTangent ? cubicDerivativeAt : cubicAt)(shape.x1, shape.cpx1, shape.cpx2, shape.x2, t),\r\n                (isTangent ? cubicDerivativeAt : cubicAt)(shape.y1, shape.cpy1, shape.cpy2, shape.y2, t)\r\n            ];\r\n        }\r\n        else {\r\n            return [\r\n                (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.x1, shape.cpx1, shape.x2, t),\r\n                (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.y1, shape.cpy1, shape.y2, t)\r\n            ];\r\n        }\r\n    }\r\n    var BezierCurve = (function (_super) {\r\n        __extends(BezierCurve, _super);\r\n        function BezierCurve(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        BezierCurve.prototype.getDefaultStyle = function () {\r\n            return {\r\n                stroke: '#000',\r\n                fill: null\r\n            };\r\n        };\r\n        BezierCurve.prototype.getDefaultShape = function () {\r\n            return new BezierCurveShape();\r\n        };\r\n        BezierCurve.prototype.buildPath = function (ctx, shape) {\r\n            var x1 = shape.x1;\r\n            var y1 = shape.y1;\r\n            var x2 = shape.x2;\r\n            var y2 = shape.y2;\r\n            var cpx1 = shape.cpx1;\r\n            var cpy1 = shape.cpy1;\r\n            var cpx2 = shape.cpx2;\r\n            var cpy2 = shape.cpy2;\r\n            var percent = shape.percent;\r\n            if (percent === 0) {\r\n                return;\r\n            }\r\n            ctx.moveTo(x1, y1);\r\n            if (cpx2 == null || cpy2 == null) {\r\n                if (percent < 1) {\r\n                    quadraticSubdivide(x1, cpx1, x2, percent, out);\r\n                    cpx1 = out[1];\r\n                    x2 = out[2];\r\n                    quadraticSubdivide(y1, cpy1, y2, percent, out);\r\n                    cpy1 = out[1];\r\n                    y2 = out[2];\r\n                }\r\n                ctx.quadraticCurveTo(cpx1, cpy1, x2, y2);\r\n            }\r\n            else {\r\n                if (percent < 1) {\r\n                    cubicSubdivide(x1, cpx1, cpx2, x2, percent, out);\r\n                    cpx1 = out[1];\r\n                    cpx2 = out[2];\r\n                    x2 = out[3];\r\n                    cubicSubdivide(y1, cpy1, cpy2, y2, percent, out);\r\n                    cpy1 = out[1];\r\n                    cpy2 = out[2];\r\n                    y2 = out[3];\r\n                }\r\n                ctx.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, x2, y2);\r\n            }\r\n        };\r\n        BezierCurve.prototype.pointAt = function (t) {\r\n            return someVectorAt(this.shape, t, false);\r\n        };\r\n        BezierCurve.prototype.tangentAt = function (t) {\r\n            var p = someVectorAt(this.shape, t, true);\r\n            return normalize(p, p);\r\n        };\r\n        return BezierCurve;\r\n    }(Path));\r\n    BezierCurve.prototype.type = 'bezier-curve';\n\n    var DropletShape = (function () {\r\n        function DropletShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.width = 0;\r\n            this.height = 0;\r\n        }\r\n        return DropletShape;\r\n    }());\r\n    var Droplet = (function (_super) {\r\n        __extends(Droplet, _super);\r\n        function Droplet(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Droplet.prototype.getDefaultShape = function () {\r\n            return new DropletShape();\r\n        };\r\n        Droplet.prototype.buildPath = function (ctx, shape) {\r\n            var x = shape.cx;\r\n            var y = shape.cy;\r\n            var a = shape.width;\r\n            var b = shape.height;\r\n            ctx.moveTo(x, y + a);\r\n            ctx.bezierCurveTo(x + a, y + a, x + a * 3 / 2, y - a / 3, x, y - b);\r\n            ctx.bezierCurveTo(x - a * 3 / 2, y - a / 3, x - a, y + a, x, y + a);\r\n            ctx.closePath();\r\n        };\r\n        return Droplet;\r\n    }(Path));\r\n    Droplet.prototype.type = 'droplet';\n\n    var HeartShape = (function () {\r\n        function HeartShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.width = 0;\r\n            this.height = 0;\r\n        }\r\n        return HeartShape;\r\n    }());\r\n    var Heart = (function (_super) {\r\n        __extends(Heart, _super);\r\n        function Heart(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Heart.prototype.getDefaultShape = function () {\r\n            return new HeartShape();\r\n        };\r\n        Heart.prototype.buildPath = function (ctx, shape) {\r\n            var x = shape.cx;\r\n            var y = shape.cy;\r\n            var a = shape.width;\r\n            var b = shape.height;\r\n            ctx.moveTo(x, y);\r\n            ctx.bezierCurveTo(x + a / 2, y - b * 2 / 3, x + a * 2, y + b / 3, x, y + b);\r\n            ctx.bezierCurveTo(x - a * 2, y + b / 3, x - a / 2, y - b * 2 / 3, x, y);\r\n        };\r\n        return Heart;\r\n    }(Path));\r\n    Heart.prototype.type = 'heart';\n\n    var PI$2 = Math.PI;\r\n    var sin = Math.sin;\r\n    var cos = Math.cos;\r\n    var IsogonShape = (function () {\r\n        function IsogonShape() {\r\n            this.x = 0;\r\n            this.y = 0;\r\n            this.r = 0;\r\n            this.n = 0;\r\n        }\r\n        return IsogonShape;\r\n    }());\r\n    var Isogon = (function (_super) {\r\n        __extends(Isogon, _super);\r\n        function Isogon(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Isogon.prototype.getDefaultShape = function () {\r\n            return new IsogonShape();\r\n        };\r\n        Isogon.prototype.buildPath = function (ctx, shape) {\r\n            var n = shape.n;\r\n            if (!n || n < 2) {\r\n                return;\r\n            }\r\n            var x = shape.x;\r\n            var y = shape.y;\r\n            var r = shape.r;\r\n            var dStep = 2 * PI$2 / n;\r\n            var deg = -PI$2 / 2;\r\n            ctx.moveTo(x + r * cos(deg), y + r * sin(deg));\r\n            for (var i = 0, end = n - 1; i < end; i++) {\r\n                deg += dStep;\r\n                ctx.lineTo(x + r * cos(deg), y + r * sin(deg));\r\n            }\r\n            ctx.closePath();\r\n            return;\r\n        };\r\n        return Isogon;\r\n    }(Path));\r\n    Isogon.prototype.type = 'isogon';\n\n    var RingShape = (function () {\r\n        function RingShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.r = 0;\r\n            this.r0 = 0;\r\n        }\r\n        return RingShape;\r\n    }());\r\n    var Ring = (function (_super) {\r\n        __extends(Ring, _super);\r\n        function Ring(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Ring.prototype.getDefaultShape = function () {\r\n            return new RingShape();\r\n        };\r\n        Ring.prototype.buildPath = function (ctx, shape) {\r\n            var x = shape.cx;\r\n            var y = shape.cy;\r\n            var PI2 = Math.PI * 2;\r\n            ctx.moveTo(x + shape.r, y);\r\n            ctx.arc(x, y, shape.r, 0, PI2, false);\r\n            ctx.moveTo(x + shape.r0, y);\r\n            ctx.arc(x, y, shape.r0, 0, PI2, true);\r\n        };\r\n        return Ring;\r\n    }(Path));\r\n    Ring.prototype.type = 'ring';\n\n    var sin$1 = Math.sin;\r\n    var cos$1 = Math.cos;\r\n    var radian = Math.PI / 180;\r\n    var RoseShape = (function () {\r\n        function RoseShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.r = [];\r\n            this.k = 0;\r\n            this.n = 1;\r\n        }\r\n        return RoseShape;\r\n    }());\r\n    var Rose = (function (_super) {\r\n        __extends(Rose, _super);\r\n        function Rose(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Rose.prototype.getDefaultStyle = function () {\r\n            return {\r\n                stroke: '#000',\r\n                fill: null\r\n            };\r\n        };\r\n        Rose.prototype.getDefaultShape = function () {\r\n            return new RoseShape();\r\n        };\r\n        Rose.prototype.buildPath = function (ctx, shape) {\r\n            var R = shape.r;\r\n            var k = shape.k;\r\n            var n = shape.n;\r\n            var x0 = shape.cx;\r\n            var y0 = shape.cy;\r\n            var x;\r\n            var y;\r\n            var r;\r\n            ctx.moveTo(x0, y0);\r\n            for (var i = 0, len = R.length; i < len; i++) {\r\n                r = R[i];\r\n                for (var j = 0; j <= 360 * n; j++) {\r\n                    x = r\r\n                        * sin$1(k / n * j % 360 * radian)\r\n                        * cos$1(j * radian)\r\n                        + x0;\r\n                    y = r\r\n                        * sin$1(k / n * j % 360 * radian)\r\n                        * sin$1(j * radian)\r\n                        + y0;\r\n                    ctx.lineTo(x, y);\r\n                }\r\n            }\r\n        };\r\n        return Rose;\r\n    }(Path));\r\n    Rose.prototype.type = 'rose';\n\n    var PI$3 = Math.PI;\r\n    var PI2$5 = PI$3 * 2;\r\n    var mathSin$3 = Math.sin;\r\n    var mathCos$3 = Math.cos;\r\n    var mathACos = Math.acos;\r\n    var mathATan2 = Math.atan2;\r\n    var mathAbs$1 = Math.abs;\r\n    var mathSqrt$4 = Math.sqrt;\r\n    var mathMax$3 = Math.max;\r\n    var mathMin$3 = Math.min;\r\n    var e = 1e-4;\r\n    function intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\r\n        var x10 = x1 - x0;\r\n        var y10 = y1 - y0;\r\n        var x32 = x3 - x2;\r\n        var y32 = y3 - y2;\r\n        var t = y32 * x10 - x32 * y10;\r\n        if (t * t < e) {\r\n            return;\r\n        }\r\n        t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / t;\r\n        return [x0 + t * x10, y0 + t * y10];\r\n    }\r\n    function computeCornerTangents(x0, y0, x1, y1, radius, cr, clockwise) {\r\n        var x01 = x0 - x1;\r\n        var y01 = y0 - y1;\r\n        var lo = (clockwise ? cr : -cr) / mathSqrt$4(x01 * x01 + y01 * y01);\r\n        var ox = lo * y01;\r\n        var oy = -lo * x01;\r\n        var x11 = x0 + ox;\r\n        var y11 = y0 + oy;\r\n        var x10 = x1 + ox;\r\n        var y10 = y1 + oy;\r\n        var x00 = (x11 + x10) / 2;\r\n        var y00 = (y11 + y10) / 2;\r\n        var dx = x10 - x11;\r\n        var dy = y10 - y11;\r\n        var d2 = dx * dx + dy * dy;\r\n        var r = radius - cr;\r\n        var s = x11 * y10 - x10 * y11;\r\n        var d = (dy < 0 ? -1 : 1) * mathSqrt$4(mathMax$3(0, r * r * d2 - s * s));\r\n        var cx0 = (s * dy - dx * d) / d2;\r\n        var cy0 = (-s * dx - dy * d) / d2;\r\n        var cx1 = (s * dy + dx * d) / d2;\r\n        var cy1 = (-s * dx + dy * d) / d2;\r\n        var dx0 = cx0 - x00;\r\n        var dy0 = cy0 - y00;\r\n        var dx1 = cx1 - x00;\r\n        var dy1 = cy1 - y00;\r\n        if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) {\r\n            cx0 = cx1;\r\n            cy0 = cy1;\r\n        }\r\n        return {\r\n            cx: cx0,\r\n            cy: cy0,\r\n            x01: -ox,\r\n            y01: -oy,\r\n            x11: cx0 * (radius / r - 1),\r\n            y11: cy0 * (radius / r - 1)\r\n        };\r\n    }\r\n    function buildPath$2(ctx, shape) {\r\n        var radius = mathMax$3(shape.r, 0);\r\n        var innerRadius = mathMax$3(shape.r0 || 0, 0);\r\n        var hasRadius = radius > 0;\r\n        var hasInnerRadius = innerRadius > 0;\r\n        if (!hasRadius && !hasInnerRadius) {\r\n            return;\r\n        }\r\n        if (!hasRadius) {\r\n            radius = innerRadius;\r\n            innerRadius = 0;\r\n        }\r\n        if (innerRadius > radius) {\r\n            var tmp = radius;\r\n            radius = innerRadius;\r\n            innerRadius = tmp;\r\n        }\r\n        var x = shape.cx;\r\n        var y = shape.cy;\r\n        var clockwise = !!shape.clockwise;\r\n        var startAngle = shape.startAngle;\r\n        var endAngle = shape.endAngle;\r\n        var cornerRadius = shape.cornerRadius || 0;\r\n        var innerCornerRadius = shape.innerCornerRadius || 0;\r\n        var tmpAngles = [startAngle, endAngle];\r\n        normalizeArcAngles(tmpAngles, !clockwise);\r\n        var arc = mathAbs$1(tmpAngles[0] - tmpAngles[1]);\r\n        if (!(radius > e)) {\r\n            ctx.moveTo(x, y);\r\n        }\r\n        else if (arc > PI2$5 - e) {\r\n            ctx.moveTo(x + radius * mathCos$3(startAngle), y + radius * mathSin$3(startAngle));\r\n            ctx.arc(x, y, radius, startAngle, endAngle, !clockwise);\r\n            if (innerRadius > e) {\r\n                ctx.moveTo(x + innerRadius * mathCos$3(endAngle), y + innerRadius * mathSin$3(endAngle));\r\n                ctx.arc(x, y, innerRadius, endAngle, startAngle, clockwise);\r\n            }\r\n        }\r\n        else {\r\n            var halfRd = mathAbs$1(radius - innerRadius) / 2;\r\n            var cr = mathMin$3(halfRd, cornerRadius);\r\n            var icr = mathMin$3(halfRd, innerCornerRadius);\r\n            var cr0 = icr;\r\n            var cr1 = cr;\r\n            var xrs = radius * mathCos$3(startAngle);\r\n            var yrs = radius * mathSin$3(startAngle);\r\n            var xire = innerRadius * mathCos$3(endAngle);\r\n            var yire = innerRadius * mathSin$3(endAngle);\r\n            var xre = void 0;\r\n            var yre = void 0;\r\n            var xirs = void 0;\r\n            var yirs = void 0;\r\n            if (cr > e || icr > e) {\r\n                xre = radius * mathCos$3(endAngle);\r\n                yre = radius * mathSin$3(endAngle);\r\n                xirs = innerRadius * mathCos$3(startAngle);\r\n                yirs = innerRadius * mathSin$3(startAngle);\r\n                if (arc < PI$3) {\r\n                    var it = intersect(xrs, yrs, xirs, yirs, xre, yre, xire, yire);\r\n                    if (it) {\r\n                        var x0 = xrs - it[0];\r\n                        var y0 = yrs - it[1];\r\n                        var x1 = xre - it[0];\r\n                        var y1 = yre - it[1];\r\n                        var a = 1 / mathSin$3(mathACos((x0 * x1 + y0 * y1) / (mathSqrt$4(x0 * x0 + y0 * y0) * mathSqrt$4(x1 * x1 + y1 * y1))) / 2);\r\n                        var b = mathSqrt$4(it[0] * it[0] + it[1] * it[1]);\r\n                        cr0 = mathMin$3(icr, (innerRadius - b) / (a - 1));\r\n                        cr1 = mathMin$3(cr, (radius - b) / (a + 1));\r\n                    }\r\n                }\r\n            }\r\n            if (!(arc > e)) {\r\n                ctx.moveTo(x + xrs, y + yrs);\r\n            }\r\n            else if (cr1 > e) {\r\n                var ct0 = computeCornerTangents(xirs, yirs, xrs, yrs, radius, cr1, clockwise);\r\n                var ct1 = computeCornerTangents(xre, yre, xire, yire, radius, cr1, clockwise);\r\n                ctx.moveTo(x + ct0.cx + ct0.x01, y + ct0.cy + ct0.y01);\r\n                if (cr1 < cr) {\r\n                    ctx.arc(x + ct0.cx, y + ct0.cy, cr1, mathATan2(ct0.y01, ct0.x01), mathATan2(ct1.y01, ct1.x01), !clockwise);\r\n                }\r\n                else {\r\n                    ctx.arc(x + ct0.cx, y + ct0.cy, cr1, mathATan2(ct0.y01, ct0.x01), mathATan2(ct0.y11, ct0.x11), !clockwise);\r\n                    ctx.arc(x, y, radius, mathATan2(ct0.cy + ct0.y11, ct0.cx + ct0.x11), mathATan2(ct1.cy + ct1.y11, ct1.cx + ct1.x11), !clockwise);\r\n                    ctx.arc(x + ct1.cx, y + ct1.cy, cr1, mathATan2(ct1.y11, ct1.x11), mathATan2(ct1.y01, ct1.x01), !clockwise);\r\n                }\r\n            }\r\n            else {\r\n                ctx.moveTo(x + xrs, y + yrs);\r\n                ctx.arc(x, y, radius, startAngle, endAngle, !clockwise);\r\n            }\r\n            if (!(innerRadius > e)) {\r\n                ctx.lineTo(x + xire, y + yire);\r\n            }\r\n            else if (cr0 > e) {\r\n                var ct0 = computeCornerTangents(xire, yire, xre, yre, innerRadius, -cr0, clockwise);\r\n                var ct1 = computeCornerTangents(xrs, yrs, xirs, yirs, innerRadius, -cr0, clockwise);\r\n                ctx.lineTo(x + ct0.cx + ct0.x01, y + ct0.cy + ct0.y01);\r\n                if (cr0 < icr) {\r\n                    ctx.arc(x + ct0.cx, y + ct0.cy, cr0, mathATan2(ct0.y01, ct0.x01), mathATan2(ct1.y01, ct1.x01), !clockwise);\r\n                }\r\n                else {\r\n                    ctx.arc(x + ct0.cx, y + ct0.cy, cr0, mathATan2(ct0.y01, ct0.x01), mathATan2(ct0.y11, ct0.x11), !clockwise);\r\n                    ctx.arc(x, y, innerRadius, mathATan2(ct0.cy + ct0.y11, ct0.cx + ct0.x11), mathATan2(ct1.cy + ct1.y11, ct1.cx + ct1.x11), clockwise);\r\n                    ctx.arc(x + ct1.cx, y + ct1.cy, cr0, mathATan2(ct1.y11, ct1.x11), mathATan2(ct1.y01, ct1.x01), !clockwise);\r\n                }\r\n            }\r\n            else {\r\n                ctx.lineTo(x + xire, y + yire);\r\n                ctx.arc(x, y, innerRadius, endAngle, startAngle, clockwise);\r\n            }\r\n        }\r\n        ctx.closePath();\r\n    }\n\n    var SectorShape = (function () {\r\n        function SectorShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.r0 = 0;\r\n            this.r = 0;\r\n            this.startAngle = 0;\r\n            this.endAngle = Math.PI * 2;\r\n            this.clockwise = true;\r\n            this.cornerRadius = 0;\r\n            this.innerCornerRadius = 0;\r\n        }\r\n        return SectorShape;\r\n    }());\r\n    var Sector = (function (_super) {\r\n        __extends(Sector, _super);\r\n        function Sector(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Sector.prototype.getDefaultShape = function () {\r\n            return new SectorShape();\r\n        };\r\n        Sector.prototype.buildPath = function (ctx, shape) {\r\n            buildPath$2(ctx, shape);\r\n        };\r\n        Sector.prototype.isZeroArea = function () {\r\n            return this.shape.startAngle === this.shape.endAngle\r\n                || this.shape.r === this.shape.r0;\r\n        };\r\n        return Sector;\r\n    }(Path));\r\n    Sector.prototype.type = 'sector';\n\n    var PI$4 = Math.PI;\r\n    var cos$2 = Math.cos;\r\n    var sin$2 = Math.sin;\r\n    var StarShape = (function () {\r\n        function StarShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.n = 3;\r\n            this.r = 0;\r\n        }\r\n        return StarShape;\r\n    }());\r\n    var Star = (function (_super) {\r\n        __extends(Star, _super);\r\n        function Star(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Star.prototype.getDefaultShape = function () {\r\n            return new StarShape();\r\n        };\r\n        Star.prototype.buildPath = function (ctx, shape) {\r\n            var n = shape.n;\r\n            if (!n || n < 2) {\r\n                return;\r\n            }\r\n            var x = shape.cx;\r\n            var y = shape.cy;\r\n            var r = shape.r;\r\n            var r0 = shape.r0;\r\n            if (r0 == null) {\r\n                r0 = n > 4\r\n                    ? r * cos$2(2 * PI$4 / n) / cos$2(PI$4 / n)\r\n                    : r / 3;\r\n            }\r\n            var dStep = PI$4 / n;\r\n            var deg = -PI$4 / 2;\r\n            var xStart = x + r * cos$2(deg);\r\n            var yStart = y + r * sin$2(deg);\r\n            deg += dStep;\r\n            ctx.moveTo(xStart, yStart);\r\n            for (var i = 0, end = n * 2 - 1, ri = void 0; i < end; i++) {\r\n                ri = i % 2 === 0 ? r0 : r;\r\n                ctx.lineTo(x + ri * cos$2(deg), y + ri * sin$2(deg));\r\n                deg += dStep;\r\n            }\r\n            ctx.closePath();\r\n        };\r\n        return Star;\r\n    }(Path));\r\n    Star.prototype.type = 'star';\n\n    var cos$3 = Math.cos;\r\n    var sin$3 = Math.sin;\r\n    var TrochoidShape = (function () {\r\n        function TrochoidShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.r = 0;\r\n            this.r0 = 0;\r\n            this.d = 0;\r\n            this.location = 'out';\r\n        }\r\n        return TrochoidShape;\r\n    }());\r\n    var Trochoid = (function (_super) {\r\n        __extends(Trochoid, _super);\r\n        function Trochoid(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Trochoid.prototype.getDefaultStyle = function () {\r\n            return {\r\n                stroke: '#000',\r\n                fill: null\r\n            };\r\n        };\r\n        Trochoid.prototype.getDefaultShape = function () {\r\n            return new TrochoidShape();\r\n        };\r\n        Trochoid.prototype.buildPath = function (ctx, shape) {\r\n            var R = shape.r;\r\n            var r = shape.r0;\r\n            var d = shape.d;\r\n            var offsetX = shape.cx;\r\n            var offsetY = shape.cy;\r\n            var delta = shape.location === 'out' ? 1 : -1;\r\n            var x1;\r\n            var y1;\r\n            var x2;\r\n            var y2;\r\n            if (shape.location && R <= r) {\r\n                return;\r\n            }\r\n            var num = 0;\r\n            var i = 1;\r\n            var theta;\r\n            x1 = (R + delta * r) * cos$3(0)\r\n                - delta * d * cos$3(0) + offsetX;\r\n            y1 = (R + delta * r) * sin$3(0)\r\n                - d * sin$3(0) + offsetY;\r\n            ctx.moveTo(x1, y1);\r\n            do {\r\n                num++;\r\n            } while ((r * num) % (R + delta * r) !== 0);\r\n            do {\r\n                theta = Math.PI / 180 * i;\r\n                x2 = (R + delta * r) * cos$3(theta)\r\n                    - delta * d * cos$3((R / r + delta) * theta)\r\n                    + offsetX;\r\n                y2 = (R + delta * r) * sin$3(theta)\r\n                    - d * sin$3((R / r + delta) * theta)\r\n                    + offsetY;\r\n                ctx.lineTo(x2, y2);\r\n                i++;\r\n            } while (i <= (r * num) / (R + delta * r) * 360);\r\n        };\r\n        return Trochoid;\r\n    }(Path));\r\n    Trochoid.prototype.type = 'trochoid';\n\n    var RadialGradient = (function (_super) {\r\n        __extends(RadialGradient, _super);\r\n        function RadialGradient(x, y, r, colorStops, globalCoord) {\r\n            var _this = _super.call(this, colorStops) || this;\r\n            _this.x = x == null ? 0.5 : x;\r\n            _this.y = y == null ? 0.5 : y;\r\n            _this.r = r == null ? 0.5 : r;\r\n            _this.type = 'radial';\r\n            _this.global = globalCoord || false;\r\n            return _this;\r\n        }\r\n        return RadialGradient;\r\n    }(Gradient));\n\n    var extent = [0, 0];\r\n    var extent2 = [0, 0];\r\n    var minTv$1 = new Point();\r\n    var maxTv$1 = new Point();\r\n    var OrientedBoundingRect = (function () {\r\n        function OrientedBoundingRect(rect, transform) {\r\n            this._corners = [];\r\n            this._axes = [];\r\n            this._origin = [0, 0];\r\n            for (var i = 0; i < 4; i++) {\r\n                this._corners[i] = new Point();\r\n            }\r\n            for (var i = 0; i < 2; i++) {\r\n                this._axes[i] = new Point();\r\n            }\r\n            if (rect) {\r\n                this.fromBoundingRect(rect, transform);\r\n            }\r\n        }\r\n        OrientedBoundingRect.prototype.fromBoundingRect = function (rect, transform) {\r\n            var corners = this._corners;\r\n            var axes = this._axes;\r\n            var x = rect.x;\r\n            var y = rect.y;\r\n            var x2 = x + rect.width;\r\n            var y2 = y + rect.height;\r\n            corners[0].set(x, y);\r\n            corners[1].set(x2, y);\r\n            corners[2].set(x2, y2);\r\n            corners[3].set(x, y2);\r\n            if (transform) {\r\n                for (var i = 0; i < 4; i++) {\r\n                    corners[i].transform(transform);\r\n                }\r\n            }\r\n            Point.sub(axes[0], corners[1], corners[0]);\r\n            Point.sub(axes[1], corners[3], corners[0]);\r\n            axes[0].normalize();\r\n            axes[1].normalize();\r\n            for (var i = 0; i < 2; i++) {\r\n                this._origin[i] = axes[i].dot(corners[0]);\r\n            }\r\n        };\r\n        OrientedBoundingRect.prototype.intersect = function (other, mtv) {\r\n            var overlapped = true;\r\n            var noMtv = !mtv;\r\n            minTv$1.set(Infinity, Infinity);\r\n            maxTv$1.set(0, 0);\r\n            if (!this._intersectCheckOneSide(this, other, minTv$1, maxTv$1, noMtv, 1)) {\r\n                overlapped = false;\r\n                if (noMtv) {\r\n                    return overlapped;\r\n                }\r\n            }\r\n            if (!this._intersectCheckOneSide(other, this, minTv$1, maxTv$1, noMtv, -1)) {\r\n                overlapped = false;\r\n                if (noMtv) {\r\n                    return overlapped;\r\n                }\r\n            }\r\n            if (!noMtv) {\r\n                Point.copy(mtv, overlapped ? minTv$1 : maxTv$1);\r\n            }\r\n            return overlapped;\r\n        };\r\n        OrientedBoundingRect.prototype._intersectCheckOneSide = function (self, other, minTv, maxTv, noMtv, inverse) {\r\n            var overlapped = true;\r\n            for (var i = 0; i < 2; i++) {\r\n                var axis = this._axes[i];\r\n                this._getProjMinMaxOnAxis(i, self._corners, extent);\r\n                this._getProjMinMaxOnAxis(i, other._corners, extent2);\r\n                if (extent[1] < extent2[0] || extent[0] > extent2[1]) {\r\n                    overlapped = false;\r\n                    if (noMtv) {\r\n                        return overlapped;\r\n                    }\r\n                    var dist0 = Math.abs(extent2[0] - extent[1]);\r\n                    var dist1 = Math.abs(extent[0] - extent2[1]);\r\n                    if (Math.min(dist0, dist1) > maxTv.len()) {\r\n                        if (dist0 < dist1) {\r\n                            Point.scale(maxTv, axis, -dist0 * inverse);\r\n                        }\r\n                        else {\r\n                            Point.scale(maxTv, axis, dist1 * inverse);\r\n                        }\r\n                    }\r\n                }\r\n                else if (minTv) {\r\n                    var dist0 = Math.abs(extent2[0] - extent[1]);\r\n                    var dist1 = Math.abs(extent[0] - extent2[1]);\r\n                    if (Math.min(dist0, dist1) < minTv.len()) {\r\n                        if (dist0 < dist1) {\r\n                            Point.scale(minTv, axis, dist0 * inverse);\r\n                        }\r\n                        else {\r\n                            Point.scale(minTv, axis, -dist1 * inverse);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return overlapped;\r\n        };\r\n        OrientedBoundingRect.prototype._getProjMinMaxOnAxis = function (dim, corners, out) {\r\n            var axis = this._axes[dim];\r\n            var origin = this._origin;\r\n            var proj = corners[0].dot(axis) + origin[dim];\r\n            var min = proj;\r\n            var max = proj;\r\n            for (var i = 1; i < corners.length; i++) {\r\n                var proj_1 = corners[i].dot(axis) + origin[dim];\r\n                min = Math.min(proj_1, min);\r\n                max = Math.max(proj_1, max);\r\n            }\r\n            out[0] = min;\r\n            out[1] = max;\r\n        };\r\n        return OrientedBoundingRect;\r\n    }());\n\n    /*!\r\n    * ZRender, a high performance 2d drawing library.\r\n    *\r\n    * Copyright (c) 2013, Baidu Inc.\r\n    * All rights reserved.\r\n    *\r\n    * LICENSE\r\n    * https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\r\n    */\r\n    var useVML = !env.canvasSupported;\r\n    var painterCtors = {};\r\n    function delInstance(id) {\r\n    }\r\n    function isDarkMode(backgroundColor) {\r\n        if (!backgroundColor) {\r\n            return false;\r\n        }\r\n        if (typeof backgroundColor === 'string') {\r\n            return lum(backgroundColor, 1) < DARK_MODE_THRESHOLD;\r\n        }\r\n        else if (backgroundColor.colorStops) {\r\n            var colorStops = backgroundColor.colorStops;\r\n            var totalLum = 0;\r\n            var len = colorStops.length;\r\n            for (var i = 0; i < len; i++) {\r\n                totalLum += lum(colorStops[i].color, 1);\r\n            }\r\n            totalLum /= len;\r\n            return totalLum < DARK_MODE_THRESHOLD;\r\n        }\r\n        return false;\r\n    }\r\n    var ZRender = (function () {\r\n        function ZRender(id, dom, opts) {\r\n            var _this = this;\r\n            this._sleepAfterStill = 10;\r\n            this._stillFrameAccum = 0;\r\n            this._needsRefresh = true;\r\n            this._needsRefreshHover = true;\r\n            this._darkMode = false;\r\n            opts = opts || {};\r\n            this.dom = dom;\r\n            this.id = id;\r\n            var storage = new Storage();\r\n            var rendererType = opts.renderer;\r\n            if (useVML) {\r\n                if (!painterCtors.vml) {\r\n                    throw new Error('You need to require \\'zrender/vml/vml\\' to support IE8');\r\n                }\r\n                rendererType = 'vml';\r\n            }\r\n            else if (!rendererType) {\r\n                rendererType = 'canvas';\r\n            }\r\n            if (!painterCtors[rendererType]) {\r\n                throw new Error(\"Renderer '\" + rendererType + \"' is not imported. Please import it first.\");\r\n            }\r\n            var painter = new painterCtors[rendererType](dom, storage, opts, id);\r\n            this.storage = storage;\r\n            this.painter = painter;\r\n            var handerProxy = (!env.node && !env.worker)\r\n                ? new HandlerDomProxy(painter.getViewportRoot(), painter.root)\r\n                : null;\r\n            this.handler = new Handler(storage, painter, handerProxy, painter.root);\r\n            this.animation = new Animation({\r\n                stage: {\r\n                    update: function () { return _this._flush(true); }\r\n                }\r\n            });\r\n            this.animation.start();\r\n        }\r\n        ZRender.prototype.add = function (el) {\r\n            if (!el) {\r\n                return;\r\n            }\r\n            this.storage.addRoot(el);\r\n            el.addSelfToZr(this);\r\n            this.refresh();\r\n        };\r\n        ZRender.prototype.remove = function (el) {\r\n            if (!el) {\r\n                return;\r\n            }\r\n            this.storage.delRoot(el);\r\n            el.removeSelfFromZr(this);\r\n            this.refresh();\r\n        };\r\n        ZRender.prototype.configLayer = function (zLevel, config) {\r\n            if (this.painter.configLayer) {\r\n                this.painter.configLayer(zLevel, config);\r\n            }\r\n            this.refresh();\r\n        };\r\n        ZRender.prototype.setBackgroundColor = function (backgroundColor) {\r\n            if (this.painter.setBackgroundColor) {\r\n                this.painter.setBackgroundColor(backgroundColor);\r\n            }\r\n            this.refresh();\r\n            this._backgroundColor = backgroundColor;\r\n            this._darkMode = isDarkMode(backgroundColor);\r\n        };\r\n        ZRender.prototype.getBackgroundColor = function () {\r\n            return this._backgroundColor;\r\n        };\r\n        ZRender.prototype.setDarkMode = function (darkMode) {\r\n            this._darkMode = darkMode;\r\n        };\r\n        ZRender.prototype.isDarkMode = function () {\r\n            return this._darkMode;\r\n        };\r\n        ZRender.prototype.refreshImmediately = function (fromInside) {\r\n            if (!fromInside) {\r\n                this.animation.update(true);\r\n            }\r\n            this._needsRefresh = false;\r\n            this.painter.refresh();\r\n            this._needsRefresh = false;\r\n        };\r\n        ZRender.prototype.refresh = function () {\r\n            this._needsRefresh = true;\r\n            this.animation.start();\r\n        };\r\n        ZRender.prototype.flush = function () {\r\n            this._flush(false);\r\n        };\r\n        ZRender.prototype._flush = function (fromInside) {\r\n            var triggerRendered;\r\n            if (this._needsRefresh) {\r\n                triggerRendered = true;\r\n                this.refreshImmediately(true);\r\n            }\r\n            if (this._needsRefreshHover) {\r\n                triggerRendered = true;\r\n                this.refreshHoverImmediately();\r\n            }\r\n            if (triggerRendered) {\r\n                this._stillFrameAccum = 0;\r\n                this.trigger('rendered');\r\n            }\r\n            else if (this._sleepAfterStill > 0) {\r\n                this._stillFrameAccum++;\r\n                if (this._stillFrameAccum > this._sleepAfterStill) {\r\n                    this.animation.stop();\r\n                }\r\n            }\r\n        };\r\n        ZRender.prototype.setSleepAfterStill = function (stillFramesCount) {\r\n            this._sleepAfterStill = stillFramesCount;\r\n        };\r\n        ZRender.prototype.wakeUp = function () {\r\n            this.animation.start();\r\n            this._stillFrameAccum = 0;\r\n        };\r\n        ZRender.prototype.addHover = function (el) {\r\n        };\r\n        ZRender.prototype.removeHover = function (el) {\r\n        };\r\n        ZRender.prototype.clearHover = function () {\r\n        };\r\n        ZRender.prototype.refreshHover = function () {\r\n            this._needsRefreshHover = true;\r\n        };\r\n        ZRender.prototype.refreshHoverImmediately = function () {\r\n            this._needsRefreshHover = false;\r\n            if (this.painter.refreshHover) {\r\n                this.painter.refreshHover();\r\n            }\r\n        };\r\n        ZRender.prototype.resize = function (opts) {\r\n            opts = opts || {};\r\n            this.painter.resize(opts.width, opts.height);\r\n            this.handler.resize();\r\n        };\r\n        ZRender.prototype.clearAnimation = function () {\r\n            this.animation.clear();\r\n        };\r\n        ZRender.prototype.getWidth = function () {\r\n            return this.painter.getWidth();\r\n        };\r\n        ZRender.prototype.getHeight = function () {\r\n            return this.painter.getHeight();\r\n        };\r\n        ZRender.prototype.pathToImage = function (e, dpr) {\r\n            if (this.painter.pathToImage) {\r\n                return this.painter.pathToImage(e, dpr);\r\n            }\r\n        };\r\n        ZRender.prototype.setCursorStyle = function (cursorStyle) {\r\n            this.handler.setCursorStyle(cursorStyle);\r\n        };\r\n        ZRender.prototype.findHover = function (x, y) {\r\n            return this.handler.findHover(x, y);\r\n        };\r\n        ZRender.prototype.on = function (eventName, eventHandler, context) {\r\n            this.handler.on(eventName, eventHandler, context);\r\n            return this;\r\n        };\r\n        ZRender.prototype.off = function (eventName, eventHandler) {\r\n            this.handler.off(eventName, eventHandler);\r\n        };\r\n        ZRender.prototype.trigger = function (eventName, event) {\r\n            this.handler.trigger(eventName, event);\r\n        };\r\n        ZRender.prototype.clear = function () {\r\n            var roots = this.storage.getRoots();\r\n            for (var i = 0; i < roots.length; i++) {\r\n                if (roots[i] instanceof Group) {\r\n                    roots[i].removeSelfFromZr(this);\r\n                }\r\n            }\r\n            this.storage.delAllRoots();\r\n            this.painter.clear();\r\n        };\r\n        ZRender.prototype.dispose = function () {\r\n            this.animation.stop();\r\n            this.clear();\r\n            this.storage.dispose();\r\n            this.painter.dispose();\r\n            this.handler.dispose();\r\n            this.animation =\r\n                this.storage =\r\n                    this.painter =\r\n                        this.handler = null;\r\n            delInstance(this.id);\r\n        };\r\n        return ZRender;\r\n    }());\r\n    function init(dom, opts) {\r\n        var zr = new ZRender(guid(), dom, opts);\r\n        return zr;\r\n    }\r\n    function registerPainter(name, Ctor) {\r\n        painterCtors[name] = Ctor;\r\n    }\n\n    var RADIAN_EPSILON = 1e-4;\r\n    function _trim(str) {\r\n        return str.replace(/^\\s+|\\s+$/g, '');\r\n    }\r\n    function linearMap(val, domain, range, clamp) {\r\n        var subDomain = domain[1] - domain[0];\r\n        var subRange = range[1] - range[0];\r\n        if (subDomain === 0) {\r\n            return subRange === 0\r\n                ? range[0]\r\n                : (range[0] + range[1]) / 2;\r\n        }\r\n        if (clamp) {\r\n            if (subDomain > 0) {\r\n                if (val <= domain[0]) {\r\n                    return range[0];\r\n                }\r\n                else if (val >= domain[1]) {\r\n                    return range[1];\r\n                }\r\n            }\r\n            else {\r\n                if (val >= domain[0]) {\r\n                    return range[0];\r\n                }\r\n                else if (val <= domain[1]) {\r\n                    return range[1];\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (val === domain[0]) {\r\n                return range[0];\r\n            }\r\n            if (val === domain[1]) {\r\n                return range[1];\r\n            }\r\n        }\r\n        return (val - domain[0]) / subDomain * subRange + range[0];\r\n    }\r\n    function parsePercent$2(percent, all) {\r\n        switch (percent) {\r\n            case 'center':\r\n            case 'middle':\r\n                percent = '50%';\r\n                break;\r\n            case 'left':\r\n            case 'top':\r\n                percent = '0%';\r\n                break;\r\n            case 'right':\r\n            case 'bottom':\r\n                percent = '100%';\r\n                break;\r\n        }\r\n        if (typeof percent === 'string') {\r\n            if (_trim(percent).match(/%$/)) {\r\n                return parseFloat(percent) / 100 * all;\r\n            }\r\n            return parseFloat(percent);\r\n        }\r\n        return percent == null ? NaN : +percent;\r\n    }\r\n    function round$1(x, precision, returnStr) {\r\n        if (precision == null) {\r\n            precision = 10;\r\n        }\r\n        precision = Math.min(Math.max(0, precision), 20);\r\n        x = (+x).toFixed(precision);\r\n        return (returnStr ? x : +x);\r\n    }\r\n    function getPrecisionSafe(val) {\r\n        var str = val.toString();\r\n        var eIndex = str.indexOf('e');\r\n        if (eIndex > 0) {\r\n            var precision = +str.slice(eIndex + 1);\r\n            return precision < 0 ? -precision : 0;\r\n        }\r\n        else {\r\n            var dotIndex = str.indexOf('.');\r\n            return dotIndex < 0 ? 0 : str.length - 1 - dotIndex;\r\n        }\r\n    }\r\n    function getPixelPrecision(dataExtent, pixelExtent) {\r\n        var log = Math.log;\r\n        var LN10 = Math.LN10;\r\n        var dataQuantity = Math.floor(log(dataExtent[1] - dataExtent[0]) / LN10);\r\n        var sizeQuantity = Math.round(log(Math.abs(pixelExtent[1] - pixelExtent[0])) / LN10);\r\n        var precision = Math.min(Math.max(-dataQuantity + sizeQuantity, 0), 20);\r\n        return !isFinite(precision) ? 20 : precision;\r\n    }\r\n    function getPercentWithPrecision(valueList, idx, precision) {\r\n        if (!valueList[idx]) {\r\n            return 0;\r\n        }\r\n        var sum = reduce(valueList, function (acc, val) {\r\n            return acc + (isNaN(val) ? 0 : val);\r\n        }, 0);\r\n        if (sum === 0) {\r\n            return 0;\r\n        }\r\n        var digits = Math.pow(10, precision);\r\n        var votesPerQuota = map(valueList, function (val) {\r\n            return (isNaN(val) ? 0 : val) / sum * digits * 100;\r\n        });\r\n        var targetSeats = digits * 100;\r\n        var seats = map(votesPerQuota, function (votes) {\r\n            return Math.floor(votes);\r\n        });\r\n        var currentSum = reduce(seats, function (acc, val) {\r\n            return acc + val;\r\n        }, 0);\r\n        var remainder = map(votesPerQuota, function (votes, idx) {\r\n            return votes - seats[idx];\r\n        });\r\n        while (currentSum < targetSeats) {\r\n            var max = Number.NEGATIVE_INFINITY;\r\n            var maxId = null;\r\n            for (var i = 0, len = remainder.length; i < len; ++i) {\r\n                if (remainder[i] > max) {\r\n                    max = remainder[i];\r\n                    maxId = i;\r\n                }\r\n            }\r\n            ++seats[maxId];\r\n            remainder[maxId] = 0;\r\n            ++currentSum;\r\n        }\r\n        return seats[idx] / digits;\r\n    }\r\n    function remRadian(radian) {\r\n        var pi2 = Math.PI * 2;\r\n        return (radian % pi2 + pi2) % pi2;\r\n    }\r\n    function isRadianAroundZero(val) {\r\n        return val > -RADIAN_EPSILON && val < RADIAN_EPSILON;\r\n    }\r\n    var TIME_REG = /^(?:(\\d{4})(?:[-\\/](\\d{1,2})(?:[-\\/](\\d{1,2})(?:[T ](\\d{1,2})(?::(\\d{1,2})(?::(\\d{1,2})(?:[.,](\\d+))?)?)?(Z|[\\+\\-]\\d\\d:?\\d\\d)?)?)?)?)?$/;\r\n    function parseDate(value) {\r\n        if (value instanceof Date) {\r\n            return value;\r\n        }\r\n        else if (typeof value === 'string') {\r\n            var match = TIME_REG.exec(value);\r\n            if (!match) {\r\n                return new Date(NaN);\r\n            }\r\n            if (!match[8]) {\r\n                return new Date(+match[1], +(match[2] || 1) - 1, +match[3] || 1, +match[4] || 0, +(match[5] || 0), +match[6] || 0, +match[7] || 0);\r\n            }\r\n            else {\r\n                var hour = +match[4] || 0;\r\n                if (match[8].toUpperCase() !== 'Z') {\r\n                    hour -= +match[8].slice(0, 3);\r\n                }\r\n                return new Date(Date.UTC(+match[1], +(match[2] || 1) - 1, +match[3] || 1, hour, +(match[5] || 0), +match[6] || 0, +match[7] || 0));\r\n            }\r\n        }\r\n        else if (value == null) {\r\n            return new Date(NaN);\r\n        }\r\n        return new Date(Math.round(value));\r\n    }\r\n    function quantity(val) {\r\n        return Math.pow(10, quantityExponent(val));\r\n    }\r\n    function quantityExponent(val) {\r\n        if (val === 0) {\r\n            return 0;\r\n        }\r\n        var exp = Math.floor(Math.log(val) / Math.LN10);\r\n        if (val / Math.pow(10, exp) >= 10) {\r\n            exp++;\r\n        }\r\n        return exp;\r\n    }\r\n    function nice(val, round) {\r\n        var exponent = quantityExponent(val);\r\n        var exp10 = Math.pow(10, exponent);\r\n        var f = val / exp10;\r\n        var nf;\r\n        if (round) {\r\n            if (f < 1.5) {\r\n                nf = 1;\r\n            }\r\n            else if (f < 2.5) {\r\n                nf = 2;\r\n            }\r\n            else if (f < 4) {\r\n                nf = 3;\r\n            }\r\n            else if (f < 7) {\r\n                nf = 5;\r\n            }\r\n            else {\r\n                nf = 10;\r\n            }\r\n        }\r\n        else {\r\n            if (f < 1) {\r\n                nf = 1;\r\n            }\r\n            else if (f < 2) {\r\n                nf = 2;\r\n            }\r\n            else if (f < 3) {\r\n                nf = 3;\r\n            }\r\n            else if (f < 5) {\r\n                nf = 5;\r\n            }\r\n            else {\r\n                nf = 10;\r\n            }\r\n        }\r\n        val = nf * exp10;\r\n        return exponent >= -20 ? +val.toFixed(exponent < 0 ? -exponent : 0) : val;\r\n    }\r\n    function numericToNumber(val) {\r\n        var valFloat = parseFloat(val);\r\n        return (valFloat == val\r\n            && (valFloat !== 0 || typeof val !== 'string' || val.indexOf('x') <= 0)) ? valFloat : NaN;\r\n    }\r\n    function isNumeric(val) {\r\n        return !isNaN(numericToNumber(val));\r\n    }\r\n    function getRandomIdBase() {\r\n        return Math.round(Math.random() * 9);\r\n    }\n\n    var DUMMY_COMPONENT_NAME_PREFIX = 'series\\0';\r\n    var INTERNAL_COMPONENT_ID_PREFIX = '\\0_ec_\\0';\r\n    function normalizeToArray(value) {\r\n        return value instanceof Array\r\n            ? value\r\n            : value == null\r\n                ? []\r\n                : [value];\r\n    }\r\n    function defaultEmphasis(opt, key, subOpts) {\r\n        if (opt) {\r\n            opt[key] = opt[key] || {};\r\n            opt.emphasis = opt.emphasis || {};\r\n            opt.emphasis[key] = opt.emphasis[key] || {};\r\n            for (var i = 0, len = subOpts.length; i < len; i++) {\r\n                var subOptName = subOpts[i];\r\n                if (!opt.emphasis[key].hasOwnProperty(subOptName)\r\n                    && opt[key].hasOwnProperty(subOptName)) {\r\n                    opt.emphasis[key][subOptName] = opt[key][subOptName];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    var TEXT_STYLE_OPTIONS = [\r\n        'fontStyle', 'fontWeight', 'fontSize', 'fontFamily',\r\n        'rich', 'tag', 'color', 'textBorderColor', 'textBorderWidth',\r\n        'width', 'height', 'lineHeight', 'align', 'verticalAlign', 'baseline',\r\n        'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY',\r\n        'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY',\r\n        'backgroundColor', 'borderColor', 'borderWidth', 'borderRadius', 'padding'\r\n    ];\r\n    function getDataItemValue(dataItem) {\r\n        return (isObject(dataItem) && !isArray(dataItem) && !(dataItem instanceof Date))\r\n            ? dataItem.value : dataItem;\r\n    }\r\n    function isDataItemOption(dataItem) {\r\n        return isObject(dataItem)\r\n            && !(dataItem instanceof Array);\r\n    }\r\n    function mappingToExists(existings, newCmptOptions, mode) {\r\n        var isNormalMergeMode = mode === 'normalMerge';\r\n        var isReplaceMergeMode = mode === 'replaceMerge';\r\n        var isReplaceAllMode = mode === 'replaceAll';\r\n        existings = existings || [];\r\n        newCmptOptions = (newCmptOptions || []).slice();\r\n        var existingIdIdxMap = createHashMap();\r\n        each(newCmptOptions, function (cmptOption, index) {\r\n            if (!isObject(cmptOption)) {\r\n                newCmptOptions[index] = null;\r\n                return;\r\n            }\r\n            cmptOption.id == null || validateIdOrName(cmptOption.id);\r\n            cmptOption.name == null || validateIdOrName(cmptOption.name);\r\n        });\r\n        var result = prepareResult(existings, existingIdIdxMap, mode);\r\n        if (isNormalMergeMode || isReplaceMergeMode) {\r\n            mappingById(result, existings, existingIdIdxMap, newCmptOptions);\r\n        }\r\n        if (isNormalMergeMode) {\r\n            mappingByName(result, newCmptOptions);\r\n        }\r\n        if (isNormalMergeMode || isReplaceMergeMode) {\r\n            mappingByIndex(result, newCmptOptions, isReplaceMergeMode);\r\n        }\r\n        else if (isReplaceAllMode) {\r\n            mappingInReplaceAllMode(result, newCmptOptions);\r\n        }\r\n        makeIdAndName(result);\r\n        return result;\r\n    }\r\n    function prepareResult(existings, existingIdIdxMap, mode) {\r\n        var result = [];\r\n        if (mode === 'replaceAll') {\r\n            return result;\r\n        }\r\n        for (var index = 0; index < existings.length; index++) {\r\n            var existing = existings[index];\r\n            if (existing && existing.id != null) {\r\n                existingIdIdxMap.set(existing.id, index);\r\n            }\r\n            result.push({\r\n                existing: (mode === 'replaceMerge' || isComponentIdInternal(existing))\r\n                    ? null\r\n                    : existing,\r\n                newOption: null,\r\n                keyInfo: null,\r\n                brandNew: null\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n    function mappingById(result, existings, existingIdIdxMap, newCmptOptions) {\r\n        each(newCmptOptions, function (cmptOption, index) {\r\n            if (!cmptOption || cmptOption.id == null) {\r\n                return;\r\n            }\r\n            var optionId = makeComparableKey(cmptOption.id);\r\n            var existingIdx = existingIdIdxMap.get(optionId);\r\n            if (existingIdx != null) {\r\n                var resultItem = result[existingIdx];\r\n                assert(!resultItem.newOption, 'Duplicated option on id \"' + optionId + '\".');\r\n                resultItem.newOption = cmptOption;\r\n                resultItem.existing = existings[existingIdx];\r\n                newCmptOptions[index] = null;\r\n            }\r\n        });\r\n    }\r\n    function mappingByName(result, newCmptOptions) {\r\n        each(newCmptOptions, function (cmptOption, index) {\r\n            if (!cmptOption || cmptOption.name == null) {\r\n                return;\r\n            }\r\n            for (var i = 0; i < result.length; i++) {\r\n                var existing = result[i].existing;\r\n                if (!result[i].newOption\r\n                    && existing\r\n                    && (existing.id == null || cmptOption.id == null)\r\n                    && !isComponentIdInternal(cmptOption)\r\n                    && !isComponentIdInternal(existing)\r\n                    && keyExistAndEqual('name', existing, cmptOption)) {\r\n                    result[i].newOption = cmptOption;\r\n                    newCmptOptions[index] = null;\r\n                    return;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    function mappingByIndex(result, newCmptOptions, brandNew) {\r\n        var nextIdx = 0;\r\n        each(newCmptOptions, function (cmptOption) {\r\n            if (!cmptOption) {\r\n                return;\r\n            }\r\n            var resultItem;\r\n            while ((resultItem = result[nextIdx])\r\n                && (resultItem.newOption\r\n                    || isComponentIdInternal(resultItem.existing)\r\n                    || (resultItem.existing\r\n                        && cmptOption.id != null\r\n                        && !keyExistAndEqual('id', cmptOption, resultItem.existing)))) {\r\n                nextIdx++;\r\n            }\r\n            if (resultItem) {\r\n                resultItem.newOption = cmptOption;\r\n                resultItem.brandNew = brandNew;\r\n            }\r\n            else {\r\n                result.push({\r\n                    newOption: cmptOption,\r\n                    brandNew: brandNew,\r\n                    existing: null,\r\n                    keyInfo: null\r\n                });\r\n            }\r\n            nextIdx++;\r\n        });\r\n    }\r\n    function mappingInReplaceAllMode(result, newCmptOptions) {\r\n        each(newCmptOptions, function (cmptOption) {\r\n            result.push({\r\n                newOption: cmptOption,\r\n                brandNew: true,\r\n                existing: null,\r\n                keyInfo: null\r\n            });\r\n        });\r\n    }\r\n    function makeIdAndName(mapResult) {\r\n        var idMap = createHashMap();\r\n        each(mapResult, function (item) {\r\n            var existing = item.existing;\r\n            existing && idMap.set(existing.id, item);\r\n        });\r\n        each(mapResult, function (item) {\r\n            var opt = item.newOption;\r\n            assert(!opt || opt.id == null || !idMap.get(opt.id) || idMap.get(opt.id) === item, 'id duplicates: ' + (opt && opt.id));\r\n            opt && opt.id != null && idMap.set(opt.id, item);\r\n            !item.keyInfo && (item.keyInfo = {});\r\n        });\r\n        each(mapResult, function (item, index) {\r\n            var existing = item.existing;\r\n            var opt = item.newOption;\r\n            var keyInfo = item.keyInfo;\r\n            if (!isObject(opt)) {\r\n                return;\r\n            }\r\n            keyInfo.name = opt.name != null\r\n                ? makeComparableKey(opt.name)\r\n                : existing\r\n                    ? existing.name\r\n                    : DUMMY_COMPONENT_NAME_PREFIX + index;\r\n            if (existing) {\r\n                keyInfo.id = makeComparableKey(existing.id);\r\n            }\r\n            else if (opt.id != null) {\r\n                keyInfo.id = makeComparableKey(opt.id);\r\n            }\r\n            else {\r\n                var idNum = 0;\r\n                do {\r\n                    keyInfo.id = '\\0' + keyInfo.name + '\\0' + idNum++;\r\n                } while (idMap.get(keyInfo.id));\r\n            }\r\n            idMap.set(keyInfo.id, item);\r\n        });\r\n    }\r\n    function keyExistAndEqual(attr, obj1, obj2) {\r\n        var key1 = obj1[attr];\r\n        var key2 = obj2[attr];\r\n        return key1 != null && key2 != null && key1 + '' === key2 + '';\r\n    }\r\n    function makeComparableKey(val) {\r\n        if (__DEV__) {\r\n            if (val == null) {\r\n                throw new Error();\r\n            }\r\n        }\r\n        return convertOptionIdName(val, '');\r\n    }\r\n    function convertOptionIdName(idOrName, defaultValue) {\r\n        var type = typeof idOrName;\r\n        return type === 'string'\r\n            ? idOrName\r\n            : (type === 'number' || isStringSafe(idOrName))\r\n                ? idOrName + ''\r\n                : defaultValue;\r\n    }\r\n    function validateIdOrName(idOrName) {\r\n        if (__DEV__) {\r\n            assert(isValidIdOrName(idOrName), '`' + idOrName + '` is invalid id or name. Must be a string.');\r\n        }\r\n    }\r\n    function isValidIdOrName(idOrName) {\r\n        return isStringSafe(idOrName) || isNumeric(idOrName);\r\n    }\r\n    function isNameSpecified(componentModel) {\r\n        var name = componentModel.name;\r\n        return !!(name && name.indexOf(DUMMY_COMPONENT_NAME_PREFIX));\r\n    }\r\n    function isComponentIdInternal(cmptOption) {\r\n        return cmptOption\r\n            && cmptOption.id != null\r\n            && makeComparableKey(cmptOption.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX) === 0;\r\n    }\r\n    function setComponentTypeToKeyInfo(mappingResult, mainType, componentModelCtor) {\r\n        each(mappingResult, function (item) {\r\n            var newOption = item.newOption;\r\n            if (isObject(newOption)) {\r\n                item.keyInfo.mainType = mainType;\r\n                item.keyInfo.subType = determineSubType(mainType, newOption, item.existing, componentModelCtor);\r\n            }\r\n        });\r\n    }\r\n    function determineSubType(mainType, newCmptOption, existComponent, componentModelCtor) {\r\n        var subType = newCmptOption.type\r\n            ? newCmptOption.type\r\n            : existComponent\r\n                ? existComponent.subType\r\n                : componentModelCtor.determineSubType(mainType, newCmptOption);\r\n        return subType;\r\n    }\r\n    function queryDataIndex(data, payload) {\r\n        if (payload.dataIndexInside != null) {\r\n            return payload.dataIndexInside;\r\n        }\r\n        else if (payload.dataIndex != null) {\r\n            return isArray(payload.dataIndex)\r\n                ? map(payload.dataIndex, function (value) {\r\n                    return data.indexOfRawIndex(value);\r\n                })\r\n                : data.indexOfRawIndex(payload.dataIndex);\r\n        }\r\n        else if (payload.name != null) {\r\n            return isArray(payload.name)\r\n                ? map(payload.name, function (value) {\r\n                    return data.indexOfName(value);\r\n                })\r\n                : data.indexOfName(payload.name);\r\n        }\r\n    }\r\n    function makeInner() {\r\n        var key = '__ec_inner_' + innerUniqueIndex++;\r\n        return function (hostObj) {\r\n            return hostObj[key] || (hostObj[key] = {});\r\n        };\r\n    }\r\n    var innerUniqueIndex = getRandomIdBase();\r\n    function parseFinder(ecModel, finderInput, opt) {\r\n        var finder;\r\n        if (isString(finderInput)) {\r\n            var obj = {};\r\n            obj[finderInput + 'Index'] = 0;\r\n            finder = obj;\r\n        }\r\n        else {\r\n            finder = finderInput;\r\n        }\r\n        var defaultMainType = opt ? opt.defaultMainType : null;\r\n        var queryOptionMap = createHashMap();\r\n        var result = {};\r\n        each(finder, function (value, key) {\r\n            if (key === 'dataIndex' || key === 'dataIndexInside') {\r\n                result[key] = value;\r\n                return;\r\n            }\r\n            var parsedKey = key.match(/^(\\w+)(Index|Id|Name)$/) || [];\r\n            var mainType = parsedKey[1];\r\n            var queryType = (parsedKey[2] || '').toLowerCase();\r\n            if (!mainType\r\n                || !queryType\r\n                || (mainType !== defaultMainType && value == null)\r\n                || (opt && opt.includeMainTypes && indexOf(opt.includeMainTypes, mainType) < 0)) {\r\n                return;\r\n            }\r\n            var queryOption = queryOptionMap.get(mainType) || queryOptionMap.set(mainType, {});\r\n            queryOption[queryType] = value;\r\n        });\r\n        queryOptionMap.each(function (queryOption, mainType) {\r\n            var queryResult = queryReferringComponents(ecModel, mainType, queryOption, {\r\n                useDefault: mainType === defaultMainType,\r\n                enableAll: true,\r\n                enableNone: true\r\n            });\r\n            result[mainType + 'Models'] = queryResult.models;\r\n            result[mainType + 'Model'] = queryResult.models[0];\r\n        });\r\n        return result;\r\n    }\r\n    var SINGLE_REFERRING = { useDefault: true, enableAll: false, enableNone: false };\r\n    function queryReferringComponents(ecModel, mainType, userOption, opt) {\r\n        opt = opt || SINGLE_REFERRING;\r\n        var indexOption = userOption.index;\r\n        var idOption = userOption.id;\r\n        var nameOption = userOption.name;\r\n        var result = {\r\n            models: null,\r\n            specified: indexOption != null || idOption != null || nameOption != null\r\n        };\r\n        if (!result.specified) {\r\n            var firstCmpt = void 0;\r\n            result.models = (opt.useDefault && (firstCmpt = ecModel.getComponent(mainType))) ? [firstCmpt] : [];\r\n            return result;\r\n        }\r\n        if (indexOption === 'none' || indexOption === false) {\r\n            assert(opt.enableNone, '`\"none\"` or `false` is not a valid value on index option.');\r\n            result.models = [];\r\n            return result;\r\n        }\r\n        if (indexOption === 'all') {\r\n            assert(opt.enableAll, '`\"all\"` is not a valid value on index option.');\r\n            indexOption = idOption = nameOption = null;\r\n        }\r\n        result.models = ecModel.queryComponents({\r\n            mainType: mainType,\r\n            index: indexOption,\r\n            id: idOption,\r\n            name: nameOption\r\n        });\r\n        return result;\r\n    }\r\n    function setAttribute(dom, key, value) {\r\n        dom.setAttribute\r\n            ? dom.setAttribute(key, value)\r\n            : (dom[key] = value);\r\n    }\r\n    function getAttribute(dom, key) {\r\n        return dom.getAttribute\r\n            ? dom.getAttribute(key)\r\n            : dom[key];\r\n    }\r\n    function interpolateRawValues(data, precision, sourceValue, targetValue, percent) {\r\n        var isAutoPrecision = precision == null || precision === 'auto';\r\n        if (typeof targetValue === 'number') {\r\n            var value = interpolateNumber(sourceValue || 0, targetValue, percent);\r\n            return round$1(value, isAutoPrecision ? Math.max(getPrecisionSafe(sourceValue || 0), getPrecisionSafe(targetValue))\r\n                : precision);\r\n        }\r\n        else if (typeof targetValue === 'string') {\r\n            return percent < 1 ? sourceValue : targetValue;\r\n        }\r\n        else {\r\n            var interpolated = [];\r\n            var leftArr = sourceValue || [];\r\n            var rightArr = targetValue;\r\n            var length_1 = Math.max(leftArr.length, rightArr.length);\r\n            for (var i = 0; i < length_1; ++i) {\r\n                var info = data.getDimensionInfo(i);\r\n                if (info.type === 'ordinal') {\r\n                    interpolated[i] = (percent < 1 ? leftArr : rightArr)[i];\r\n                }\r\n                else {\r\n                    var leftVal = leftArr && leftArr[i] ? leftArr[i] : 0;\r\n                    var rightVal = rightArr[i];\r\n                    var value = leftArr == null\r\n                        ? targetValue[i]\r\n                        : interpolateNumber(leftVal, rightVal, percent);\r\n                    interpolated[i] = round$1(value, isAutoPrecision ? Math.max(getPrecisionSafe(leftVal), getPrecisionSafe(rightVal))\r\n                        : precision);\r\n                }\r\n            }\r\n            return interpolated;\r\n        }\r\n    }\n\n    var TYPE_DELIMITER = '.';\r\n    var IS_CONTAINER = '___EC__COMPONENT__CONTAINER___';\r\n    var IS_EXTENDED_CLASS = '___EC__EXTENDED_CLASS___';\r\n    function parseClassType(componentType) {\r\n        var ret = { main: '', sub: '' };\r\n        if (componentType) {\r\n            var typeArr = componentType.split(TYPE_DELIMITER);\r\n            ret.main = typeArr[0] || '';\r\n            ret.sub = typeArr[1] || '';\r\n        }\r\n        return ret;\r\n    }\r\n    function checkClassType(componentType) {\r\n        assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType), 'componentType \"' + componentType + '\" illegal');\r\n    }\r\n    function isExtendedClass(clz) {\r\n        return !!(clz && clz[IS_EXTENDED_CLASS]);\r\n    }\r\n    function enableClassExtend(rootClz, mandatoryMethods) {\r\n        rootClz.$constructor = rootClz;\r\n        rootClz.extend = function (proto) {\r\n            if (__DEV__) {\r\n                each(mandatoryMethods, function (method) {\r\n                    if (!proto[method]) {\r\n                        console.warn('Method `' + method + '` should be implemented'\r\n                            + (proto.type ? ' in ' + proto.type : '') + '.');\r\n                    }\r\n                });\r\n            }\r\n            var superClass = this;\r\n            function ExtendedClass() {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                if (!proto.$constructor) {\r\n                    if (!isESClass(superClass)) {\r\n                        superClass.apply(this, arguments);\r\n                    }\r\n                    else {\r\n                        var ins = createObject(ExtendedClass.prototype, new (superClass.bind.apply(superClass, __spreadArrays([void 0], args)))());\r\n                        return ins;\r\n                    }\r\n                }\r\n                else {\r\n                    proto.$constructor.apply(this, arguments);\r\n                }\r\n            }\r\n            ExtendedClass[IS_EXTENDED_CLASS] = true;\r\n            extend(ExtendedClass.prototype, proto);\r\n            ExtendedClass.extend = this.extend;\r\n            ExtendedClass.superCall = superCall;\r\n            ExtendedClass.superApply = superApply;\r\n            inherits(ExtendedClass, this);\r\n            ExtendedClass.superClass = superClass;\r\n            return ExtendedClass;\r\n        };\r\n    }\r\n    function isESClass(fn) {\r\n        return typeof fn === 'function'\r\n            && /^class\\s/.test(Function.prototype.toString.call(fn));\r\n    }\r\n    function mountExtend(SubClz, SupperClz) {\r\n        SubClz.extend = SupperClz.extend;\r\n    }\r\n    var classBase = Math.round(Math.random() * 10);\r\n    function enableClassCheck(target) {\r\n        var classAttr = ['__\\0is_clz', classBase++].join('_');\r\n        target.prototype[classAttr] = true;\r\n        if (__DEV__) {\r\n            assert(!target.isInstance, 'The method \"is\" can not be defined.');\r\n        }\r\n        target.isInstance = function (obj) {\r\n            return !!(obj && obj[classAttr]);\r\n        };\r\n    }\r\n    function superCall(context, methodName) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        return this.superClass.prototype[methodName].apply(context, args);\r\n    }\r\n    function superApply(context, methodName, args) {\r\n        return this.superClass.prototype[methodName].apply(context, args);\r\n    }\r\n    function enableClassManagement(target, options) {\r\n        options = options || {};\r\n        var storage = {};\r\n        target.registerClass = function (clz) {\r\n            var componentFullType = clz.type || clz.prototype.type;\r\n            if (componentFullType) {\r\n                checkClassType(componentFullType);\r\n                clz.prototype.type = componentFullType;\r\n                var componentTypeInfo = parseClassType(componentFullType);\r\n                if (!componentTypeInfo.sub) {\r\n                    if (__DEV__) {\r\n                        if (storage[componentTypeInfo.main]) {\r\n                            console.warn(componentTypeInfo.main + ' exists.');\r\n                        }\r\n                    }\r\n                    storage[componentTypeInfo.main] = clz;\r\n                }\r\n                else if (componentTypeInfo.sub !== IS_CONTAINER) {\r\n                    var container = makeContainer(componentTypeInfo);\r\n                    container[componentTypeInfo.sub] = clz;\r\n                }\r\n            }\r\n            return clz;\r\n        };\r\n        target.getClass = function (mainType, subType, throwWhenNotFound) {\r\n            var clz = storage[mainType];\r\n            if (clz && clz[IS_CONTAINER]) {\r\n                clz = subType ? clz[subType] : null;\r\n            }\r\n            if (throwWhenNotFound && !clz) {\r\n                throw new Error(!subType\r\n                    ? mainType + '.' + 'type should be specified.'\r\n                    : 'Component ' + mainType + '.' + (subType || '') + ' not exists. Load it first.');\r\n            }\r\n            return clz;\r\n        };\r\n        target.getClassesByMainType = function (componentType) {\r\n            var componentTypeInfo = parseClassType(componentType);\r\n            var result = [];\r\n            var obj = storage[componentTypeInfo.main];\r\n            if (obj && obj[IS_CONTAINER]) {\r\n                each(obj, function (o, type) {\r\n                    type !== IS_CONTAINER && result.push(o);\r\n                });\r\n            }\r\n            else {\r\n                result.push(obj);\r\n            }\r\n            return result;\r\n        };\r\n        target.hasClass = function (componentType) {\r\n            var componentTypeInfo = parseClassType(componentType);\r\n            return !!storage[componentTypeInfo.main];\r\n        };\r\n        target.getAllClassMainTypes = function () {\r\n            var types = [];\r\n            each(storage, function (obj, type) {\r\n                types.push(type);\r\n            });\r\n            return types;\r\n        };\r\n        target.hasSubTypes = function (componentType) {\r\n            var componentTypeInfo = parseClassType(componentType);\r\n            var obj = storage[componentTypeInfo.main];\r\n            return obj && obj[IS_CONTAINER];\r\n        };\r\n        function makeContainer(componentTypeInfo) {\r\n            var container = storage[componentTypeInfo.main];\r\n            if (!container || !container[IS_CONTAINER]) {\r\n                container = storage[componentTypeInfo.main] = {};\r\n                container[IS_CONTAINER] = true;\r\n            }\r\n            return container;\r\n        }\r\n        if (options.registerWhenExtend) {\r\n            var originalExtend_1 = target.extend;\r\n            if (originalExtend_1) {\r\n                target.extend = function (proto) {\r\n                    var ExtendedClass = originalExtend_1.call(this, proto);\r\n                    return target.registerClass(ExtendedClass);\r\n                };\r\n            }\r\n        }\r\n    }\n\n    function makeStyleMapper (properties, ignoreParent) {\r\n        for (var i = 0; i < properties.length; i++) {\r\n            if (!properties[i][1]) {\r\n                properties[i][1] = properties[i][0];\r\n            }\r\n        }\r\n        ignoreParent = ignoreParent || false;\r\n        return function (model, excludes, includes) {\r\n            var style = {};\r\n            for (var i = 0; i < properties.length; i++) {\r\n                var propName = properties[i][1];\r\n                if ((excludes && indexOf(excludes, propName) >= 0)\r\n                    || (includes && indexOf(includes, propName) < 0)) {\r\n                    continue;\r\n                }\r\n                var val = model.getShallow(propName, ignoreParent);\r\n                if (val != null) {\r\n                    style[properties[i][0]] = val;\r\n                }\r\n            }\r\n            return style;\r\n        };\r\n    }\n\n    var AREA_STYLE_KEY_MAP = [\r\n        ['fill', 'color'],\r\n        ['shadowBlur'],\r\n        ['shadowOffsetX'],\r\n        ['shadowOffsetY'],\r\n        ['opacity'],\r\n        ['shadowColor']\r\n    ];\r\n    var getAreaStyle = makeStyleMapper(AREA_STYLE_KEY_MAP);\r\n    var AreaStyleMixin = (function () {\r\n        function AreaStyleMixin() {\r\n        }\r\n        AreaStyleMixin.prototype.getAreaStyle = function (excludes, includes) {\r\n            return getAreaStyle(this, excludes, includes);\r\n        };\r\n        return AreaStyleMixin;\r\n    }());\n\n    var getECData = makeInner();\n\n    var _highlightNextDigit = 1;\r\n    var _highlightKeyMap = {};\r\n    var getSavedStates = makeInner();\r\n    var HOVER_STATE_NORMAL = 0;\r\n    var HOVER_STATE_BLUR = 1;\r\n    var HOVER_STATE_EMPHASIS = 2;\r\n    var SPECIAL_STATES = ['emphasis', 'blur', 'select'];\r\n    var DISPLAY_STATES = ['normal', 'emphasis', 'blur', 'select'];\r\n    var Z2_EMPHASIS_LIFT = 10;\r\n    var Z2_SELECT_LIFT = 9;\r\n    var HIGHLIGHT_ACTION_TYPE = 'highlight';\r\n    var DOWNPLAY_ACTION_TYPE = 'downplay';\r\n    var SELECT_ACTION_TYPE = 'select';\r\n    var UNSELECT_ACTION_TYPE = 'unselect';\r\n    var TOGGLE_SELECT_ACTION_TYPE = 'toggleSelect';\r\n    function hasFillOrStroke(fillOrStroke) {\r\n        return fillOrStroke != null && fillOrStroke !== 'none';\r\n    }\r\n    var liftedColorCache = new LRU(100);\r\n    function liftColor(color) {\r\n        if (typeof color !== 'string') {\r\n            return color;\r\n        }\r\n        var liftedColor = liftedColorCache.get(color);\r\n        if (!liftedColor) {\r\n            liftedColor = lift(color, -0.1);\r\n            liftedColorCache.put(color, liftedColor);\r\n        }\r\n        return liftedColor;\r\n    }\r\n    function doChangeHoverState(el, stateName, hoverStateEnum) {\r\n        if (el.onHoverStateChange && (el.hoverState || 0) !== hoverStateEnum) {\r\n            el.onHoverStateChange(stateName);\r\n        }\r\n        el.hoverState = hoverStateEnum;\r\n    }\r\n    function singleEnterEmphasis(el) {\r\n        doChangeHoverState(el, 'emphasis', HOVER_STATE_EMPHASIS);\r\n    }\r\n    function singleLeaveEmphasis(el) {\r\n        doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\r\n    }\r\n    function singleEnterBlur(el) {\r\n        doChangeHoverState(el, 'blur', HOVER_STATE_BLUR);\r\n    }\r\n    function singleLeaveBlur(el) {\r\n        doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\r\n    }\r\n    function singleEnterSelect(el) {\r\n        el.selected = true;\r\n    }\r\n    function singleLeaveSelect(el) {\r\n        el.selected = false;\r\n    }\r\n    function updateElementState(el, updater, commonParam) {\r\n        updater(el, commonParam);\r\n    }\r\n    function traverseUpdateState(el, updater, commonParam) {\r\n        updateElementState(el, updater, commonParam);\r\n        el.isGroup && el.traverse(function (child) {\r\n            updateElementState(child, updater, commonParam);\r\n        });\r\n    }\r\n    function setStatesFlag(el, stateName) {\r\n        switch (stateName) {\r\n            case 'emphasis':\r\n                el.hoverState = HOVER_STATE_EMPHASIS;\r\n                break;\r\n            case 'normal':\r\n                el.hoverState = HOVER_STATE_NORMAL;\r\n                break;\r\n            case 'blur':\r\n                el.hoverState = HOVER_STATE_BLUR;\r\n                break;\r\n            case 'select':\r\n                el.selected = true;\r\n        }\r\n    }\r\n    function getFromStateStyle(el, props, toStateName, defaultValue) {\r\n        var style = el.style;\r\n        var fromState = {};\r\n        for (var i = 0; i < props.length; i++) {\r\n            var propName = props[i];\r\n            var val = style[propName];\r\n            fromState[propName] = val == null ? (defaultValue && defaultValue[propName]) : val;\r\n        }\r\n        for (var i = 0; i < el.animators.length; i++) {\r\n            var animator = el.animators[i];\r\n            if (animator.__fromStateTransition\r\n                && animator.__fromStateTransition.indexOf(toStateName) < 0\r\n                && animator.targetName === 'style') {\r\n                animator.saveFinalToTarget(fromState, props);\r\n            }\r\n        }\r\n        return fromState;\r\n    }\r\n    function createEmphasisDefaultState(el, stateName, targetStates, state) {\r\n        var hasSelect = targetStates && indexOf(targetStates, 'select') >= 0;\r\n        var cloned = false;\r\n        if (el instanceof Path) {\r\n            var store = getSavedStates(el);\r\n            var fromFill = hasSelect ? (store.selectFill || store.normalFill) : store.normalFill;\r\n            var fromStroke = hasSelect ? (store.selectStroke || store.normalStroke) : store.normalStroke;\r\n            if (hasFillOrStroke(fromFill) || hasFillOrStroke(fromStroke)) {\r\n                state = state || {};\r\n                var emphasisStyle = state.style || {};\r\n                if (!hasFillOrStroke(emphasisStyle.fill) && hasFillOrStroke(fromFill)) {\r\n                    cloned = true;\r\n                    state = extend({}, state);\r\n                    emphasisStyle = extend({}, emphasisStyle);\r\n                    emphasisStyle.fill = liftColor(fromFill);\r\n                }\r\n                else if (!hasFillOrStroke(emphasisStyle.stroke) && hasFillOrStroke(fromStroke)) {\r\n                    if (!cloned) {\r\n                        state = extend({}, state);\r\n                        emphasisStyle = extend({}, emphasisStyle);\r\n                    }\r\n                    emphasisStyle.stroke = liftColor(fromStroke);\r\n                }\r\n                state.style = emphasisStyle;\r\n            }\r\n        }\r\n        if (state) {\r\n            if (state.z2 == null) {\r\n                if (!cloned) {\r\n                    state = extend({}, state);\r\n                }\r\n                var z2EmphasisLift = el.z2EmphasisLift;\r\n                state.z2 = el.z2 + (z2EmphasisLift != null ? z2EmphasisLift : Z2_EMPHASIS_LIFT);\r\n            }\r\n        }\r\n        return state;\r\n    }\r\n    function createSelectDefaultState(el, stateName, state) {\r\n        if (state) {\r\n            if (state.z2 == null) {\r\n                state = extend({}, state);\r\n                var z2SelectLift = el.z2SelectLift;\r\n                state.z2 = el.z2 + (z2SelectLift != null ? z2SelectLift : Z2_SELECT_LIFT);\r\n            }\r\n        }\r\n        return state;\r\n    }\r\n    function createBlurDefaultState(el, stateName, state) {\r\n        var hasBlur = indexOf(el.currentStates, stateName) >= 0;\r\n        var currentOpacity = el.style.opacity;\r\n        var fromState = !hasBlur\r\n            ? getFromStateStyle(el, ['opacity'], stateName, {\r\n                opacity: 1\r\n            })\r\n            : null;\r\n        state = state || {};\r\n        var blurStyle = state.style || {};\r\n        if (blurStyle.opacity == null) {\r\n            state = extend({}, state);\r\n            blurStyle = extend({\r\n                opacity: hasBlur ? currentOpacity : (fromState.opacity * 0.1)\r\n            }, blurStyle);\r\n            state.style = blurStyle;\r\n        }\r\n        return state;\r\n    }\r\n    function elementStateProxy(stateName, targetStates) {\r\n        var state = this.states[stateName];\r\n        if (this.style) {\r\n            if (stateName === 'emphasis') {\r\n                return createEmphasisDefaultState(this, stateName, targetStates, state);\r\n            }\r\n            else if (stateName === 'blur') {\r\n                return createBlurDefaultState(this, stateName, state);\r\n            }\r\n            else if (stateName === 'select') {\r\n                return createSelectDefaultState(this, stateName, state);\r\n            }\r\n        }\r\n        return state;\r\n    }\r\n    function setDefaultStateProxy(el) {\r\n        el.stateProxy = elementStateProxy;\r\n        var textContent = el.getTextContent();\r\n        var textGuide = el.getTextGuideLine();\r\n        if (textContent) {\r\n            textContent.stateProxy = elementStateProxy;\r\n        }\r\n        if (textGuide) {\r\n            textGuide.stateProxy = elementStateProxy;\r\n        }\r\n    }\r\n    function enterEmphasisWhenMouseOver(el, e) {\r\n        !shouldSilent(el, e)\r\n            && !el.__highByOuter\r\n            && traverseUpdateState(el, singleEnterEmphasis);\r\n    }\r\n    function leaveEmphasisWhenMouseOut(el, e) {\r\n        !shouldSilent(el, e)\r\n            && !el.__highByOuter\r\n            && traverseUpdateState(el, singleLeaveEmphasis);\r\n    }\r\n    function enterEmphasis(el, highlightDigit) {\r\n        el.__highByOuter |= 1 << (highlightDigit || 0);\r\n        traverseUpdateState(el, singleEnterEmphasis);\r\n    }\r\n    function leaveEmphasis(el, highlightDigit) {\r\n        !(el.__highByOuter &= ~(1 << (highlightDigit || 0)))\r\n            && traverseUpdateState(el, singleLeaveEmphasis);\r\n    }\r\n    function enterBlur(el) {\r\n        traverseUpdateState(el, singleEnterBlur);\r\n    }\r\n    function leaveBlur(el) {\r\n        traverseUpdateState(el, singleLeaveBlur);\r\n    }\r\n    function enterSelect(el) {\r\n        traverseUpdateState(el, singleEnterSelect);\r\n    }\r\n    function leaveSelect(el) {\r\n        traverseUpdateState(el, singleLeaveSelect);\r\n    }\r\n    function shouldSilent(el, e) {\r\n        return el.__highDownSilentOnTouch && e.zrByTouch;\r\n    }\r\n    function allLeaveBlur(ecIns) {\r\n        var model = ecIns.getModel();\r\n        model.eachComponent(function (componentType, componentModel) {\r\n            var view = componentType === 'series'\r\n                ? ecIns.getViewOfSeriesModel(componentModel)\r\n                : ecIns.getViewOfComponentModel(componentModel);\r\n            view.group.traverse(function (child) {\r\n                singleLeaveBlur(child);\r\n            });\r\n        });\r\n    }\r\n    function toggleSeriesBlurState(targetSeriesIndex, focus, blurScope, ecIns, isBlur) {\r\n        var ecModel = ecIns.getModel();\r\n        blurScope = blurScope || 'coordinateSystem';\r\n        function leaveBlurOfIndices(data, dataIndices) {\r\n            for (var i = 0; i < dataIndices.length; i++) {\r\n                var itemEl = data.getItemGraphicEl(dataIndices[i]);\r\n                itemEl && leaveBlur(itemEl);\r\n            }\r\n        }\r\n        if (!isBlur) {\r\n            allLeaveBlur(ecIns);\r\n            return;\r\n        }\r\n        if (targetSeriesIndex == null) {\r\n            return;\r\n        }\r\n        if (!focus || focus === 'none') {\r\n            return;\r\n        }\r\n        var targetSeriesModel = ecModel.getSeriesByIndex(targetSeriesIndex);\r\n        var targetCoordSys = targetSeriesModel.coordinateSystem;\r\n        if (targetCoordSys && targetCoordSys.master) {\r\n            targetCoordSys = targetCoordSys.master;\r\n        }\r\n        var blurredSeries = [];\r\n        ecModel.eachSeries(function (seriesModel) {\r\n            var sameSeries = targetSeriesModel === seriesModel;\r\n            var coordSys = seriesModel.coordinateSystem;\r\n            if (coordSys && coordSys.master) {\r\n                coordSys = coordSys.master;\r\n            }\r\n            var sameCoordSys = coordSys && targetCoordSys\r\n                ? coordSys === targetCoordSys\r\n                : sameSeries;\r\n            if (!(blurScope === 'series' && !sameSeries\r\n                || blurScope === 'coordinateSystem' && !sameCoordSys\r\n                || focus === 'series' && sameSeries)) {\r\n                var view = ecIns.getViewOfSeriesModel(seriesModel);\r\n                view.group.traverse(function (child) {\r\n                    singleEnterBlur(child);\r\n                });\r\n                if (isArrayLike(focus)) {\r\n                    leaveBlurOfIndices(seriesModel.getData(), focus);\r\n                }\r\n                else if (isObject(focus)) {\r\n                    var dataTypes = keys(focus);\r\n                    for (var d = 0; d < dataTypes.length; d++) {\r\n                        leaveBlurOfIndices(seriesModel.getData(dataTypes[d]), focus[dataTypes[d]]);\r\n                    }\r\n                }\r\n                blurredSeries.push(seriesModel);\r\n            }\r\n        });\r\n        ecModel.eachComponent(function (componentType, componentModel) {\r\n            if (componentType === 'series') {\r\n                return;\r\n            }\r\n            var view = ecIns.getViewOfComponentModel(componentModel);\r\n            if (view && view.blurSeries) {\r\n                view.blurSeries(blurredSeries, ecModel);\r\n            }\r\n        });\r\n    }\r\n    function toggleSeriesBlurStateFromPayload(seriesModel, payload, ecIns) {\r\n        if (!isHighDownPayload(payload)) {\r\n            return;\r\n        }\r\n        var isHighlight = payload.type === HIGHLIGHT_ACTION_TYPE;\r\n        var seriesIndex = seriesModel.seriesIndex;\r\n        var data = seriesModel.getData(payload.dataType);\r\n        var dataIndex = queryDataIndex(data, payload);\r\n        dataIndex = (isArray(dataIndex) ? dataIndex[0] : dataIndex) || 0;\r\n        var el = data.getItemGraphicEl(dataIndex);\r\n        if (!el) {\r\n            var count = data.count();\r\n            var current = 0;\r\n            while (!el && current < count) {\r\n                el = data.getItemGraphicEl(current++);\r\n            }\r\n        }\r\n        if (el) {\r\n            var ecData = getECData(el);\r\n            toggleSeriesBlurState(seriesIndex, ecData.focus, ecData.blurScope, ecIns, isHighlight);\r\n        }\r\n        else {\r\n            var focus_1 = seriesModel.get(['emphasis', 'focus']);\r\n            var blurScope = seriesModel.get(['emphasis', 'blurScope']);\r\n            if (focus_1 != null) {\r\n                toggleSeriesBlurState(seriesIndex, focus_1, blurScope, ecIns, isHighlight);\r\n            }\r\n        }\r\n    }\r\n    function toggleSelectionFromPayload(seriesModel, payload, ecIns) {\r\n        if (!(isSelectChangePayload(payload))) {\r\n            return;\r\n        }\r\n        var dataType = payload.dataType;\r\n        var data = seriesModel.getData(dataType);\r\n        var dataIndex = queryDataIndex(data, payload);\r\n        if (!isArray(dataIndex)) {\r\n            dataIndex = [dataIndex];\r\n        }\r\n        seriesModel[payload.type === TOGGLE_SELECT_ACTION_TYPE ? 'toggleSelect'\r\n            : payload.type === SELECT_ACTION_TYPE ? 'select' : 'unselect'](dataIndex, dataType);\r\n    }\r\n    function updateSeriesElementSelection(seriesModel) {\r\n        var allData = seriesModel.getAllData();\r\n        each(allData, function (_a) {\r\n            var data = _a.data, type = _a.type;\r\n            data.eachItemGraphicEl(function (el, idx) {\r\n                seriesModel.isSelected(idx, type) ? enterSelect(el) : leaveSelect(el);\r\n            });\r\n        });\r\n    }\r\n    function getAllSelectedIndices(ecModel) {\r\n        var ret = [];\r\n        ecModel.eachSeries(function (seriesModel) {\r\n            var allData = seriesModel.getAllData();\r\n            each(allData, function (_a) {\r\n                var data = _a.data, type = _a.type;\r\n                var dataIndices = seriesModel.getSelectedDataIndices();\r\n                if (dataIndices.length > 0) {\r\n                    var item = {\r\n                        dataIndex: dataIndices,\r\n                        seriesIndex: seriesModel.seriesIndex\r\n                    };\r\n                    if (type != null) {\r\n                        item.dataType = type;\r\n                    }\r\n                    ret.push(item);\r\n                }\r\n            });\r\n        });\r\n        return ret;\r\n    }\r\n    function enableHoverEmphasis(el, focus, blurScope) {\r\n        setAsHighDownDispatcher(el, true);\r\n        traverseUpdateState(el, setDefaultStateProxy);\r\n        enableHoverFocus(el, focus, blurScope);\r\n    }\r\n    function enableHoverFocus(el, focus, blurScope) {\r\n        if (focus != null) {\r\n            var ecData = getECData(el);\r\n            ecData.focus = focus;\r\n            ecData.blurScope = blurScope;\r\n        }\r\n    }\r\n    var OTHER_STATES = ['emphasis', 'blur', 'select'];\r\n    var defaultStyleGetterMap = {\r\n        itemStyle: 'getItemStyle',\r\n        lineStyle: 'getLineStyle',\r\n        areaStyle: 'getAreaStyle'\r\n    };\r\n    function setStatesStylesFromModel(el, itemModel, styleType, getter) {\r\n        styleType = styleType || 'itemStyle';\r\n        for (var i = 0; i < OTHER_STATES.length; i++) {\r\n            var stateName = OTHER_STATES[i];\r\n            var model = itemModel.getModel([stateName, styleType]);\r\n            var state = el.ensureState(stateName);\r\n            state.style = getter ? getter(model) : model[defaultStyleGetterMap[styleType]]();\r\n        }\r\n    }\r\n    function setAsHighDownDispatcher(el, asDispatcher) {\r\n        var disable = asDispatcher === false;\r\n        var extendedEl = el;\r\n        if (el.highDownSilentOnTouch) {\r\n            extendedEl.__highDownSilentOnTouch = el.highDownSilentOnTouch;\r\n        }\r\n        if (!disable || extendedEl.__highDownDispatcher) {\r\n            extendedEl.__highByOuter = extendedEl.__highByOuter || 0;\r\n            extendedEl.__highDownDispatcher = !disable;\r\n        }\r\n    }\r\n    function isHighDownDispatcher(el) {\r\n        return !!(el && el.__highDownDispatcher);\r\n    }\r\n    function getHighlightDigit(highlightKey) {\r\n        var highlightDigit = _highlightKeyMap[highlightKey];\r\n        if (highlightDigit == null && _highlightNextDigit <= 32) {\r\n            highlightDigit = _highlightKeyMap[highlightKey] = _highlightNextDigit++;\r\n        }\r\n        return highlightDigit;\r\n    }\r\n    function isSelectChangePayload(payload) {\r\n        var payloadType = payload.type;\r\n        return payloadType === SELECT_ACTION_TYPE\r\n            || payloadType === UNSELECT_ACTION_TYPE\r\n            || payloadType === TOGGLE_SELECT_ACTION_TYPE;\r\n    }\r\n    function isHighDownPayload(payload) {\r\n        var payloadType = payload.type;\r\n        return payloadType === HIGHLIGHT_ACTION_TYPE\r\n            || payloadType === DOWNPLAY_ACTION_TYPE;\r\n    }\r\n    function savePathStates(el) {\r\n        var store = getSavedStates(el);\r\n        store.normalFill = el.style.fill;\r\n        store.normalStroke = el.style.stroke;\r\n        var selectState = el.states.select || {};\r\n        store.selectFill = (selectState.style && selectState.style.fill) || null;\r\n        store.selectStroke = (selectState.style && selectState.style.stroke) || null;\r\n    }\n\n    var ECHARTS_PREFIX = '[ECharts] ';\r\n    var storedLogs = {};\r\n    var hasConsole = typeof console !== 'undefined'\r\n        && console.warn && console.log;\r\n    function warn(str) {\r\n        if (hasConsole) {\r\n            console.warn(ECHARTS_PREFIX + str);\r\n        }\r\n    }\r\n    function deprecateLog(str) {\r\n        if (__DEV__) {\r\n            if (storedLogs[str]) {\r\n                return;\r\n            }\r\n            if (hasConsole) {\r\n                storedLogs[str] = true;\r\n                console.warn(ECHARTS_PREFIX + 'DEPRECATED: ' + str);\r\n            }\r\n        }\r\n    }\r\n    function deprecateReplaceLog(oldOpt, newOpt, scope) {\r\n        if (__DEV__) {\r\n            deprecateLog((scope ? \"[\" + scope + \"]\" : '') + (oldOpt + \" is deprecated, use \" + newOpt + \" instead.\"));\r\n        }\r\n    }\r\n    function consoleLog() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (__DEV__) {\r\n            if (typeof console !== 'undefined' && console.log) {\r\n                console.log.apply(console, args);\r\n            }\r\n        }\r\n    }\r\n    function makePrintable() {\r\n        var hintInfo = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            hintInfo[_i] = arguments[_i];\r\n        }\r\n        var msg = '';\r\n        if (__DEV__) {\r\n            var makePrintableStringIfPossible_1 = function (val) {\r\n                return val === void 0 ? 'undefined'\r\n                    : val === Infinity ? 'Infinity'\r\n                        : val === -Infinity ? '-Infinity'\r\n                            : eqNaN(val) ? 'NaN'\r\n                                : val instanceof Date ? 'Date(' + val.toISOString() + ')'\r\n                                    : isFunction(val) ? 'function () { ... }'\r\n                                        : isRegExp(val) ? val + ''\r\n                                            : null;\r\n            };\r\n            msg = map(hintInfo, function (arg) {\r\n                if (isString(arg)) {\r\n                    return arg;\r\n                }\r\n                else {\r\n                    var printableStr = makePrintableStringIfPossible_1(arg);\r\n                    if (printableStr != null) {\r\n                        return printableStr;\r\n                    }\r\n                    else if (typeof JSON !== 'undefined' && JSON.stringify) {\r\n                        try {\r\n                            return JSON.stringify(arg, function (n, val) {\r\n                                var printableStr = makePrintableStringIfPossible_1(val);\r\n                                return printableStr == null ? val : printableStr;\r\n                            });\r\n                        }\r\n                        catch (err) {\r\n                            return '?';\r\n                        }\r\n                    }\r\n                    else {\r\n                        return '?';\r\n                    }\r\n                }\r\n            }).join(' ');\r\n        }\r\n        return msg;\r\n    }\r\n    function throwError(msg) {\r\n        throw new Error(msg);\r\n    }\n\n    var EMPTY_OBJ = {};\r\n    function setLabelText(label, labelTexts) {\r\n        for (var i = 0; i < SPECIAL_STATES.length; i++) {\r\n            var stateName = SPECIAL_STATES[i];\r\n            var text = labelTexts[stateName];\r\n            var state = label.ensureState(stateName);\r\n            state.style = state.style || {};\r\n            state.style.text = text;\r\n        }\r\n        var oldStates = label.currentStates.slice();\r\n        label.clearStates(true);\r\n        label.setStyle({ text: labelTexts.normal });\r\n        label.useStates(oldStates, true);\r\n    }\r\n    function getLabelText(opt, stateModels, overrideValue) {\r\n        var labelFetcher = opt.labelFetcher;\r\n        var labelDataIndex = opt.labelDataIndex;\r\n        var labelDimIndex = opt.labelDimIndex;\r\n        var normalModel = stateModels.normal;\r\n        var baseText;\r\n        if (labelFetcher) {\r\n            baseText = labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex, normalModel && normalModel.get('formatter'), overrideValue != null ? {\r\n                value: overrideValue\r\n            } : null);\r\n        }\r\n        if (baseText == null) {\r\n            baseText = isFunction(opt.defaultText) ? opt.defaultText(labelDataIndex, opt, overrideValue) : opt.defaultText;\r\n        }\r\n        var statesText = {\r\n            normal: baseText\r\n        };\r\n        for (var i = 0; i < SPECIAL_STATES.length; i++) {\r\n            var stateName = SPECIAL_STATES[i];\r\n            var stateModel = stateModels[stateName];\r\n            statesText[stateName] = retrieve2(labelFetcher\r\n                ? labelFetcher.getFormattedLabel(labelDataIndex, stateName, null, labelDimIndex, stateModel && stateModel.get('formatter'))\r\n                : null, baseText);\r\n        }\r\n        return statesText;\r\n    }\r\n    function setLabelStyle(targetEl, labelStatesModels, opt, stateSpecified) {\r\n        opt = opt || EMPTY_OBJ;\r\n        var isSetOnText = targetEl instanceof ZRText;\r\n        var needsCreateText = false;\r\n        for (var i = 0; i < DISPLAY_STATES.length; i++) {\r\n            var stateModel = labelStatesModels[DISPLAY_STATES[i]];\r\n            if (stateModel && stateModel.getShallow('show')) {\r\n                needsCreateText = true;\r\n                break;\r\n            }\r\n        }\r\n        var textContent = isSetOnText ? targetEl : targetEl.getTextContent();\r\n        if (needsCreateText) {\r\n            if (!isSetOnText) {\r\n                if (!textContent) {\r\n                    textContent = new ZRText();\r\n                    targetEl.setTextContent(textContent);\r\n                }\r\n                if (targetEl.stateProxy) {\r\n                    textContent.stateProxy = targetEl.stateProxy;\r\n                }\r\n            }\r\n            var labelStatesTexts = getLabelText(opt, labelStatesModels);\r\n            var normalModel = labelStatesModels.normal;\r\n            var showNormal = !!normalModel.getShallow('show');\r\n            var normalStyle = createTextStyle(normalModel, stateSpecified && stateSpecified.normal, opt, false, !isSetOnText);\r\n            normalStyle.text = labelStatesTexts.normal;\r\n            if (!isSetOnText) {\r\n                targetEl.setTextConfig(createTextConfig(normalModel, opt, false));\r\n            }\r\n            for (var i = 0; i < SPECIAL_STATES.length; i++) {\r\n                var stateName = SPECIAL_STATES[i];\r\n                var stateModel = labelStatesModels[stateName];\r\n                if (stateModel) {\r\n                    var stateObj = textContent.ensureState(stateName);\r\n                    var stateShow = !!retrieve2(stateModel.getShallow('show'), showNormal);\r\n                    if (stateShow !== showNormal) {\r\n                        stateObj.ignore = !stateShow;\r\n                    }\r\n                    stateObj.style = createTextStyle(stateModel, stateSpecified && stateSpecified[stateName], opt, true, !isSetOnText);\r\n                    stateObj.style.text = labelStatesTexts[stateName];\r\n                    if (!isSetOnText) {\r\n                        var targetElEmphasisState = targetEl.ensureState(stateName);\r\n                        targetElEmphasisState.textConfig = createTextConfig(stateModel, opt, true);\r\n                    }\r\n                }\r\n            }\r\n            textContent.silent = !!normalModel.getShallow('silent');\r\n            if (textContent.style.x != null) {\r\n                normalStyle.x = textContent.style.x;\r\n            }\r\n            if (textContent.style.y != null) {\r\n                normalStyle.y = textContent.style.y;\r\n            }\r\n            textContent.ignore = !showNormal;\r\n            textContent.useStyle(normalStyle);\r\n            textContent.dirty();\r\n            if (opt.enableTextSetter) {\r\n                labelInner(textContent).setLabelText = function (overrideValue) {\r\n                    var labelStatesTexts = getLabelText(opt, labelStatesModels, overrideValue);\r\n                    setLabelText(textContent, labelStatesTexts);\r\n                };\r\n            }\r\n        }\r\n        else if (textContent) {\r\n            textContent.ignore = true;\r\n        }\r\n        targetEl.dirty();\r\n    }\r\n    function getLabelStatesModels(itemModel, labelName) {\r\n        labelName = (labelName || 'label');\r\n        var statesModels = {\r\n            normal: itemModel.getModel(labelName)\r\n        };\r\n        for (var i = 0; i < SPECIAL_STATES.length; i++) {\r\n            var stateName = SPECIAL_STATES[i];\r\n            statesModels[stateName] = itemModel.getModel([stateName, labelName]);\r\n        }\r\n        return statesModels;\r\n    }\r\n    function createTextStyle(textStyleModel, specifiedTextStyle, opt, isNotNormal, isAttached) {\r\n        var textStyle = {};\r\n        setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached);\r\n        specifiedTextStyle && extend(textStyle, specifiedTextStyle);\r\n        return textStyle;\r\n    }\r\n    function createTextConfig(textStyleModel, opt, isNotNormal) {\r\n        opt = opt || {};\r\n        var textConfig = {};\r\n        var labelPosition;\r\n        var labelRotate = textStyleModel.getShallow('rotate');\r\n        var labelDistance = retrieve2(textStyleModel.getShallow('distance'), isNotNormal ? null : 5);\r\n        var labelOffset = textStyleModel.getShallow('offset');\r\n        labelPosition = textStyleModel.getShallow('position')\r\n            || (isNotNormal ? null : 'inside');\r\n        labelPosition === 'outside' && (labelPosition = opt.defaultOutsidePosition || 'top');\r\n        if (labelPosition != null) {\r\n            textConfig.position = labelPosition;\r\n        }\r\n        if (labelOffset != null) {\r\n            textConfig.offset = labelOffset;\r\n        }\r\n        if (labelRotate != null) {\r\n            labelRotate *= Math.PI / 180;\r\n            textConfig.rotation = labelRotate;\r\n        }\r\n        if (labelDistance != null) {\r\n            textConfig.distance = labelDistance;\r\n        }\r\n        textConfig.outsideFill = textStyleModel.get('color') === 'inherit'\r\n            ? (opt.inheritColor || null)\r\n            : 'auto';\r\n        return textConfig;\r\n    }\r\n    function setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached) {\r\n        opt = opt || EMPTY_OBJ;\r\n        var ecModel = textStyleModel.ecModel;\r\n        var globalTextStyle = ecModel && ecModel.option.textStyle;\r\n        var richItemNames = getRichItemNames(textStyleModel);\r\n        var richResult;\r\n        if (richItemNames) {\r\n            richResult = {};\r\n            for (var name_1 in richItemNames) {\r\n                if (richItemNames.hasOwnProperty(name_1)) {\r\n                    var richTextStyle = textStyleModel.getModel(['rich', name_1]);\r\n                    setTokenTextStyle(richResult[name_1] = {}, richTextStyle, globalTextStyle, opt, isNotNormal, isAttached);\r\n                }\r\n            }\r\n        }\r\n        if (richResult) {\r\n            textStyle.rich = richResult;\r\n        }\r\n        var overflow = textStyleModel.get('overflow');\r\n        if (overflow) {\r\n            textStyle.overflow = overflow;\r\n        }\r\n        var margin = textStyleModel.get('minMargin');\r\n        if (margin != null) {\r\n            textStyle.margin = margin;\r\n        }\r\n        setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, true);\r\n    }\r\n    function getRichItemNames(textStyleModel) {\r\n        var richItemNameMap;\r\n        while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\r\n            var rich = (textStyleModel.option || EMPTY_OBJ).rich;\r\n            if (rich) {\r\n                richItemNameMap = richItemNameMap || {};\r\n                var richKeys = keys(rich);\r\n                for (var i = 0; i < richKeys.length; i++) {\r\n                    var richKey = richKeys[i];\r\n                    richItemNameMap[richKey] = 1;\r\n                }\r\n            }\r\n            textStyleModel = textStyleModel.parentModel;\r\n        }\r\n        return richItemNameMap;\r\n    }\r\n    var TEXT_PROPS_WITH_GLOBAL = [\r\n        'fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'opacity',\r\n        'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'\r\n    ];\r\n    var TEXT_PROPS_SELF = [\r\n        'align', 'lineHeight', 'width', 'height', 'tag', 'verticalAlign'\r\n    ];\r\n    var TEXT_PROPS_BOX = [\r\n        'padding', 'borderWidth', 'borderRadius', 'borderDashOffset',\r\n        'backgroundColor', 'borderColor',\r\n        'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'\r\n    ];\r\n    function setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, isBlock) {\r\n        globalTextStyle = !isNotNormal && globalTextStyle || EMPTY_OBJ;\r\n        var inheritColor = opt && opt.inheritColor;\r\n        var fillColor = textStyleModel.getShallow('color');\r\n        var strokeColor = textStyleModel.getShallow('textBorderColor');\r\n        if (fillColor === 'inherit' || fillColor === 'auto') {\r\n            if (__DEV__) {\r\n                if (fillColor === 'auto') {\r\n                    deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\r\n                }\r\n            }\r\n            if (inheritColor) {\r\n                fillColor = inheritColor;\r\n            }\r\n            else {\r\n                fillColor = null;\r\n            }\r\n        }\r\n        if (strokeColor === 'inherit' || (strokeColor === 'auto')) {\r\n            if (__DEV__) {\r\n                if (strokeColor === 'auto') {\r\n                    deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\r\n                }\r\n            }\r\n            if (inheritColor) {\r\n                strokeColor = inheritColor;\r\n            }\r\n            else {\r\n                strokeColor = null;\r\n            }\r\n        }\r\n        if (!isAttached) {\r\n            fillColor = fillColor || globalTextStyle.color;\r\n            strokeColor = strokeColor || globalTextStyle.textBorderColor;\r\n        }\r\n        if (fillColor != null) {\r\n            textStyle.fill = fillColor;\r\n        }\r\n        if (strokeColor != null) {\r\n            textStyle.stroke = strokeColor;\r\n        }\r\n        var textBorderWidth = retrieve2(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\r\n        if (textBorderWidth != null) {\r\n            textStyle.lineWidth = textBorderWidth;\r\n        }\r\n        var textBorderType = retrieve2(textStyleModel.getShallow('textBorderType'), globalTextStyle.textBorderType);\r\n        if (textBorderType != null) {\r\n            textStyle.lineDash = textBorderType;\r\n        }\r\n        var textBorderDashOffset = retrieve2(textStyleModel.getShallow('textBorderDashOffset'), globalTextStyle.textBorderDashOffset);\r\n        if (textBorderDashOffset != null) {\r\n            textStyle.lineDashOffset = textBorderDashOffset;\r\n        }\r\n        if (!isNotNormal && !isAttached) {\r\n            if (textStyle.fill == null && opt.inheritColor) {\r\n                textStyle.fill = opt.inheritColor;\r\n            }\r\n        }\r\n        for (var i = 0; i < TEXT_PROPS_WITH_GLOBAL.length; i++) {\r\n            var key = TEXT_PROPS_WITH_GLOBAL[i];\r\n            var val = retrieve2(textStyleModel.getShallow(key), globalTextStyle[key]);\r\n            if (val != null) {\r\n                textStyle[key] = val;\r\n            }\r\n        }\r\n        for (var i = 0; i < TEXT_PROPS_SELF.length; i++) {\r\n            var key = TEXT_PROPS_SELF[i];\r\n            var val = textStyleModel.getShallow(key);\r\n            if (val != null) {\r\n                textStyle[key] = val;\r\n            }\r\n        }\r\n        if (textStyle.verticalAlign == null) {\r\n            var baseline = textStyleModel.getShallow('baseline');\r\n            if (baseline != null) {\r\n                textStyle.verticalAlign = baseline;\r\n            }\r\n        }\r\n        if (!isBlock || !opt.disableBox) {\r\n            for (var i = 0; i < TEXT_PROPS_BOX.length; i++) {\r\n                var key = TEXT_PROPS_BOX[i];\r\n                var val = textStyleModel.getShallow(key);\r\n                if (val != null) {\r\n                    textStyle[key] = val;\r\n                }\r\n            }\r\n            var borderType = textStyleModel.getShallow('borderType');\r\n            if (borderType != null) {\r\n                textStyle.borderDash = borderType;\r\n            }\r\n            if ((textStyle.backgroundColor === 'auto' || textStyle.backgroundColor === 'inherit') && inheritColor) {\r\n                if (__DEV__) {\r\n                    if (textStyle.backgroundColor === 'auto') {\r\n                        deprecateReplaceLog('backgroundColor: \\'auto\\'', 'backgroundColor: \\'inherit\\'');\r\n                    }\r\n                }\r\n                textStyle.backgroundColor = inheritColor;\r\n            }\r\n            if ((textStyle.borderColor === 'auto' || textStyle.borderColor === 'inherit') && inheritColor) {\r\n                if (__DEV__) {\r\n                    if (textStyle.borderColor === 'auto') {\r\n                        deprecateReplaceLog('borderColor: \\'auto\\'', 'borderColor: \\'inherit\\'');\r\n                    }\r\n                }\r\n                textStyle.borderColor = inheritColor;\r\n            }\r\n        }\r\n    }\r\n    function getFont(opt, ecModel) {\r\n        var gTextStyleModel = ecModel && ecModel.getModel('textStyle');\r\n        return trim([\r\n            opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '',\r\n            opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '',\r\n            (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px',\r\n            opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'\r\n        ].join(' '));\r\n    }\r\n    var labelInner = makeInner();\n\n    var PATH_COLOR = ['textStyle', 'color'];\r\n    var tmpRichText = new ZRText();\r\n    var TextStyleMixin = (function () {\r\n        function TextStyleMixin() {\r\n        }\r\n        TextStyleMixin.prototype.getTextColor = function (isEmphasis) {\r\n            var ecModel = this.ecModel;\r\n            return this.getShallow('color')\r\n                || ((!isEmphasis && ecModel) ? ecModel.get(PATH_COLOR) : null);\r\n        };\r\n        TextStyleMixin.prototype.getFont = function () {\r\n            return getFont({\r\n                fontStyle: this.getShallow('fontStyle'),\r\n                fontWeight: this.getShallow('fontWeight'),\r\n                fontSize: this.getShallow('fontSize'),\r\n                fontFamily: this.getShallow('fontFamily')\r\n            }, this.ecModel);\r\n        };\r\n        TextStyleMixin.prototype.getTextRect = function (text) {\r\n            tmpRichText.useStyle({\r\n                text: text,\r\n                fontStyle: this.getShallow('fontStyle'),\r\n                fontWeight: this.getShallow('fontWeight'),\r\n                fontSize: this.getShallow('fontSize'),\r\n                fontFamily: this.getShallow('fontFamily'),\r\n                verticalAlign: this.getShallow('verticalAlign') || this.getShallow('baseline'),\r\n                padding: this.getShallow('padding'),\r\n                lineHeight: this.getShallow('lineHeight'),\r\n                rich: this.getShallow('rich')\r\n            });\r\n            tmpRichText.update();\r\n            return tmpRichText.getBoundingRect();\r\n        };\r\n        return TextStyleMixin;\r\n    }());\n\n    var LINE_STYLE_KEY_MAP = [\r\n        ['lineWidth', 'width'],\r\n        ['stroke', 'color'],\r\n        ['opacity'],\r\n        ['shadowBlur'],\r\n        ['shadowOffsetX'],\r\n        ['shadowOffsetY'],\r\n        ['shadowColor'],\r\n        ['lineDash', 'type'],\r\n        ['lineDashOffset', 'dashOffset'],\r\n        ['lineCap', 'cap'],\r\n        ['lineJoin', 'join'],\r\n        ['miterLimit']\r\n    ];\r\n    var getLineStyle = makeStyleMapper(LINE_STYLE_KEY_MAP);\r\n    var LineStyleMixin = (function () {\r\n        function LineStyleMixin() {\r\n        }\r\n        LineStyleMixin.prototype.getLineStyle = function (excludes) {\r\n            return getLineStyle(this, excludes);\r\n        };\r\n        return LineStyleMixin;\r\n    }());\n\n    var ITEM_STYLE_KEY_MAP = [\r\n        ['fill', 'color'],\r\n        ['stroke', 'borderColor'],\r\n        ['lineWidth', 'borderWidth'],\r\n        ['opacity'],\r\n        ['shadowBlur'],\r\n        ['shadowOffsetX'],\r\n        ['shadowOffsetY'],\r\n        ['shadowColor'],\r\n        ['lineDash', 'borderType'],\r\n        ['lineDashOffset', 'borderDashOffset'],\r\n        ['lineCap', 'borderCap'],\r\n        ['lineJoin', 'borderJoin'],\r\n        ['miterLimit', 'borderMiterLimit']\r\n    ];\r\n    var getItemStyle = makeStyleMapper(ITEM_STYLE_KEY_MAP);\r\n    var ItemStyleMixin = (function () {\r\n        function ItemStyleMixin() {\r\n        }\r\n        ItemStyleMixin.prototype.getItemStyle = function (excludes, includes) {\r\n            return getItemStyle(this, excludes, includes);\r\n        };\r\n        return ItemStyleMixin;\r\n    }());\n\n    var Model = (function () {\r\n        function Model(option, parentModel, ecModel) {\r\n            this.parentModel = parentModel;\r\n            this.ecModel = ecModel;\r\n            this.option = option;\r\n        }\r\n        Model.prototype.init = function (option, parentModel, ecModel) {\r\n            var rest = [];\r\n            for (var _i = 3; _i < arguments.length; _i++) {\r\n                rest[_i - 3] = arguments[_i];\r\n            }\r\n        };\r\n        Model.prototype.mergeOption = function (option, ecModel) {\r\n            merge(this.option, option, true);\r\n        };\r\n        Model.prototype.get = function (path, ignoreParent) {\r\n            if (path == null) {\r\n                return this.option;\r\n            }\r\n            return this._doGet(this.parsePath(path), !ignoreParent && this.parentModel);\r\n        };\r\n        Model.prototype.getShallow = function (key, ignoreParent) {\r\n            var option = this.option;\r\n            var val = option == null ? option : option[key];\r\n            if (val == null && !ignoreParent) {\r\n                var parentModel = this.parentModel;\r\n                if (parentModel) {\r\n                    val = parentModel.getShallow(key);\r\n                }\r\n            }\r\n            return val;\r\n        };\r\n        Model.prototype.getModel = function (path, parentModel) {\r\n            var hasPath = path != null;\r\n            var pathFinal = hasPath ? this.parsePath(path) : null;\r\n            var obj = hasPath\r\n                ? this._doGet(pathFinal)\r\n                : this.option;\r\n            parentModel = parentModel || (this.parentModel\r\n                && this.parentModel.getModel(this.resolveParentPath(pathFinal)));\r\n            return new Model(obj, parentModel, this.ecModel);\r\n        };\r\n        Model.prototype.isEmpty = function () {\r\n            return this.option == null;\r\n        };\r\n        Model.prototype.restoreData = function () { };\r\n        Model.prototype.clone = function () {\r\n            var Ctor = this.constructor;\r\n            return new Ctor(clone(this.option));\r\n        };\r\n        Model.prototype.parsePath = function (path) {\r\n            if (typeof path === 'string') {\r\n                return path.split('.');\r\n            }\r\n            return path;\r\n        };\r\n        Model.prototype.resolveParentPath = function (path) {\r\n            return path;\r\n        };\r\n        Model.prototype.isAnimationEnabled = function () {\r\n            if (!env.node && this.option) {\r\n                if (this.option.animation != null) {\r\n                    return !!this.option.animation;\r\n                }\r\n                else if (this.parentModel) {\r\n                    return this.parentModel.isAnimationEnabled();\r\n                }\r\n            }\r\n        };\r\n        Model.prototype._doGet = function (pathArr, parentModel) {\r\n            var obj = this.option;\r\n            if (!pathArr) {\r\n                return obj;\r\n            }\r\n            for (var i = 0; i < pathArr.length; i++) {\r\n                if (!pathArr[i]) {\r\n                    continue;\r\n                }\r\n                obj = (obj && typeof obj === 'object') ? obj[pathArr[i]] : null;\r\n                if (obj == null) {\r\n                    break;\r\n                }\r\n            }\r\n            if (obj == null && parentModel) {\r\n                obj = parentModel._doGet(this.resolveParentPath(pathArr), parentModel.parentModel);\r\n            }\r\n            return obj;\r\n        };\r\n        return Model;\r\n    }());\r\n    enableClassExtend(Model);\r\n    enableClassCheck(Model);\r\n    mixin(Model, LineStyleMixin);\r\n    mixin(Model, ItemStyleMixin);\r\n    mixin(Model, AreaStyleMixin);\r\n    mixin(Model, TextStyleMixin);\n\n    var base = Math.round(Math.random() * 10);\r\n    function getUID(type) {\r\n        return [(type || ''), base++].join('_');\r\n    }\r\n    function enableSubTypeDefaulter(target) {\r\n        var subTypeDefaulters = {};\r\n        target.registerSubTypeDefaulter = function (componentType, defaulter) {\r\n            var componentTypeInfo = parseClassType(componentType);\r\n            subTypeDefaulters[componentTypeInfo.main] = defaulter;\r\n        };\r\n        target.determineSubType = function (componentType, option) {\r\n            var type = option.type;\r\n            if (!type) {\r\n                var componentTypeMain = parseClassType(componentType).main;\r\n                if (target.hasSubTypes(componentType) && subTypeDefaulters[componentTypeMain]) {\r\n                    type = subTypeDefaulters[componentTypeMain](option);\r\n                }\r\n            }\r\n            return type;\r\n        };\r\n    }\r\n    function enableTopologicalTravel(entity, dependencyGetter) {\r\n        entity.topologicalTravel = function (targetNameList, fullNameList, callback, context) {\r\n            if (!targetNameList.length) {\r\n                return;\r\n            }\r\n            var result = makeDepndencyGraph(fullNameList);\r\n            var graph = result.graph;\r\n            var stack = result.noEntryList;\r\n            var targetNameSet = {};\r\n            each(targetNameList, function (name) {\r\n                targetNameSet[name] = true;\r\n            });\r\n            while (stack.length) {\r\n                var currComponentType = stack.pop();\r\n                var currVertex = graph[currComponentType];\r\n                var isInTargetNameSet = !!targetNameSet[currComponentType];\r\n                if (isInTargetNameSet) {\r\n                    callback.call(context, currComponentType, currVertex.originalDeps.slice());\r\n                    delete targetNameSet[currComponentType];\r\n                }\r\n                each(currVertex.successor, isInTargetNameSet ? removeEdgeAndAdd : removeEdge);\r\n            }\r\n            each(targetNameSet, function () {\r\n                throw new Error('Circle dependency may exists');\r\n            });\r\n            function removeEdge(succComponentType) {\r\n                graph[succComponentType].entryCount--;\r\n                if (graph[succComponentType].entryCount === 0) {\r\n                    stack.push(succComponentType);\r\n                }\r\n            }\r\n            function removeEdgeAndAdd(succComponentType) {\r\n                targetNameSet[succComponentType] = true;\r\n                removeEdge(succComponentType);\r\n            }\r\n        };\r\n        function makeDepndencyGraph(fullNameList) {\r\n            var graph = {};\r\n            var noEntryList = [];\r\n            each(fullNameList, function (name) {\r\n                var thisItem = createDependencyGraphItem(graph, name);\r\n                var originalDeps = thisItem.originalDeps = dependencyGetter(name);\r\n                var availableDeps = getAvailableDependencies(originalDeps, fullNameList);\r\n                thisItem.entryCount = availableDeps.length;\r\n                if (thisItem.entryCount === 0) {\r\n                    noEntryList.push(name);\r\n                }\r\n                each(availableDeps, function (dependentName) {\r\n                    if (indexOf(thisItem.predecessor, dependentName) < 0) {\r\n                        thisItem.predecessor.push(dependentName);\r\n                    }\r\n                    var thatItem = createDependencyGraphItem(graph, dependentName);\r\n                    if (indexOf(thatItem.successor, dependentName) < 0) {\r\n                        thatItem.successor.push(name);\r\n                    }\r\n                });\r\n            });\r\n            return { graph: graph, noEntryList: noEntryList };\r\n        }\r\n        function createDependencyGraphItem(graph, name) {\r\n            if (!graph[name]) {\r\n                graph[name] = { predecessor: [], successor: [] };\r\n            }\r\n            return graph[name];\r\n        }\r\n        function getAvailableDependencies(originalDeps, fullNameList) {\r\n            var availableDeps = [];\r\n            each(originalDeps, function (dep) {\r\n                indexOf(fullNameList, dep) >= 0 && availableDeps.push(dep);\r\n            });\r\n            return availableDeps;\r\n        }\r\n    }\r\n    function inheritDefaultOption(superOption, subOption) {\r\n        return merge(merge({}, superOption, true), subOption, true);\r\n    }\n\n    var langEN = {\r\n        time: {\r\n            month: [\r\n                'January', 'February', 'March', 'April', 'May', 'June',\r\n                'July', 'August', 'September', 'October', 'November', 'December'\r\n            ],\r\n            monthAbbr: [\r\n                'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\r\n                'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'\r\n            ],\r\n            dayOfWeek: [\r\n                'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\r\n            ],\r\n            dayOfWeekAbbr: [\r\n                'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'\r\n            ]\r\n        },\r\n        legend: {\r\n            selector: {\r\n                all: 'All',\r\n                inverse: 'Inv'\r\n            }\r\n        },\r\n        toolbox: {\r\n            brush: {\r\n                title: {\r\n                    rect: 'Box Select',\r\n                    polygon: 'Lasso Select',\r\n                    lineX: 'Horizontally Select',\r\n                    lineY: 'Vertically Select',\r\n                    keep: 'Keep Selections',\r\n                    clear: 'Clear Selections'\r\n                }\r\n            },\r\n            dataView: {\r\n                title: 'Data View',\r\n                lang: ['Data View', 'Close', 'Refresh']\r\n            },\r\n            dataZoom: {\r\n                title: {\r\n                    zoom: 'Zoom',\r\n                    back: 'Zoom Reset'\r\n                }\r\n            },\r\n            magicType: {\r\n                title: {\r\n                    line: 'Switch to Line Chart',\r\n                    bar: 'Switch to Bar Chart',\r\n                    stack: 'Stack',\r\n                    tiled: 'Tile'\r\n                }\r\n            },\r\n            restore: {\r\n                title: 'Restore'\r\n            },\r\n            saveAsImage: {\r\n                title: 'Save as Image',\r\n                lang: ['Right Click to Save Image']\r\n            }\r\n        },\r\n        series: {\r\n            typeNames: {\r\n                pie: 'Pie chart',\r\n                bar: 'Bar chart',\r\n                line: 'Line chart',\r\n                scatter: 'Scatter plot',\r\n                effectScatter: 'Ripple scatter plot',\r\n                radar: 'Radar chart',\r\n                tree: 'Tree',\r\n                treemap: 'Treemap',\r\n                boxplot: 'Boxplot',\r\n                candlestick: 'Candlestick',\r\n                k: 'K line chart',\r\n                heatmap: 'Heat map',\r\n                map: 'Map',\r\n                parallel: 'Parallel coordinate map',\r\n                lines: 'Line graph',\r\n                graph: 'Relationship graph',\r\n                sankey: 'Sankey diagram',\r\n                funnel: 'Funnel chart',\r\n                gauge: 'Guage',\r\n                pictorialBar: 'Pictorial bar',\r\n                themeRiver: 'Theme River Map',\r\n                sunburst: 'Sunburst'\r\n            }\r\n        },\r\n        aria: {\r\n            general: {\r\n                withTitle: 'This is a chart about \"{title}\"',\r\n                withoutTitle: 'This is a chart'\r\n            },\r\n            series: {\r\n                single: {\r\n                    prefix: '',\r\n                    withName: ' with type {seriesType} named {seriesName}.',\r\n                    withoutName: ' with type {seriesType}.'\r\n                },\r\n                multiple: {\r\n                    prefix: '. It consists of {seriesCount} series count.',\r\n                    withName: ' The {seriesId} series is a {seriesType} representing {seriesName}.',\r\n                    withoutName: ' The {seriesId} series is a {seriesType}.',\r\n                    separator: {\r\n                        middle: '',\r\n                        end: ''\r\n                    }\r\n                }\r\n            },\r\n            data: {\r\n                allData: 'The data is as follows: ',\r\n                partialData: 'The first {displayCnt} items are: ',\r\n                withName: 'the data for {name} is {value}',\r\n                withoutName: '{value}',\r\n                separator: {\r\n                    middle: ', ',\r\n                    end: '. '\r\n                }\r\n            }\r\n        }\r\n    };\n\n    var langZH = {\r\n        time: {\r\n            month: [\r\n                '一月', '二月', '三月', '四月', '五月', '六月',\r\n                '七月', '八月', '九月', '十月', '十一月', '十二月'\r\n            ],\r\n            monthAbbr: [\r\n                '1月', '2月', '3月', '4月', '5月', '6月',\r\n                '7月', '8月', '9月', '10月', '11月', '12月'\r\n            ],\r\n            dayOfWeek: [\r\n                '星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'\r\n            ],\r\n            dayOfWeekAbbr: [\r\n                '日', '一', '二', '三', '四', '五', '六'\r\n            ]\r\n        },\r\n        legend: {\r\n            selector: {\r\n                all: '全选',\r\n                inverse: '反选'\r\n            }\r\n        },\r\n        toolbox: {\r\n            brush: {\r\n                title: {\r\n                    rect: '矩形选择',\r\n                    polygon: '圈选',\r\n                    lineX: '横向选择',\r\n                    lineY: '纵向选择',\r\n                    keep: '保持选择',\r\n                    clear: '清除选择'\r\n                }\r\n            },\r\n            dataView: {\r\n                title: '数据视图',\r\n                lang: ['数据视图', '关闭', '刷新']\r\n            },\r\n            dataZoom: {\r\n                title: {\r\n                    zoom: '区域缩放',\r\n                    back: '区域缩放还原'\r\n                }\r\n            },\r\n            magicType: {\r\n                title: {\r\n                    line: '切换为折线图',\r\n                    bar: '切换为柱状图',\r\n                    stack: '切换为堆叠',\r\n                    tiled: '切换为平铺'\r\n                }\r\n            },\r\n            restore: {\r\n                title: '还原'\r\n            },\r\n            saveAsImage: {\r\n                title: '保存为图片',\r\n                lang: ['右键另存为图片']\r\n            }\r\n        },\r\n        series: {\r\n            typeNames: {\r\n                pie: '饼图',\r\n                bar: '柱状图',\r\n                line: '折线图',\r\n                scatter: '散点图',\r\n                effectScatter: '涟漪散点图',\r\n                radar: '雷达图',\r\n                tree: '树图',\r\n                treemap: '矩形树图',\r\n                boxplot: '箱型图',\r\n                candlestick: 'K线图',\r\n                k: 'K线图',\r\n                heatmap: '热力图',\r\n                map: '地图',\r\n                parallel: '平行坐标图',\r\n                lines: '线图',\r\n                graph: '关系图',\r\n                sankey: '桑基图',\r\n                funnel: '漏斗图',\r\n                gauge: '仪表盘图',\r\n                pictorialBar: '象形柱图',\r\n                themeRiver: '主题河流图',\r\n                sunburst: '旭日图'\r\n            }\r\n        },\r\n        aria: {\r\n            general: {\r\n                withTitle: '这是一个关于“{title}”的图表。',\r\n                withoutTitle: '这是一个图表，'\r\n            },\r\n            series: {\r\n                single: {\r\n                    prefix: '',\r\n                    withName: '图表类型是{seriesType}，表示{seriesName}。',\r\n                    withoutName: '图表类型是{seriesType}。'\r\n                },\r\n                multiple: {\r\n                    prefix: '它由{seriesCount}个图表系列组成。',\r\n                    withName: '第{seriesId}个系列是一个表示{seriesName}的{seriesType}，',\r\n                    withoutName: '第{seriesId}个系列是一个{seriesType}，',\r\n                    separator: {\r\n                        middle: '；',\r\n                        end: '。'\r\n                    }\r\n                }\r\n            },\r\n            data: {\r\n                allData: '其数据是——',\r\n                partialData: '其中，前{displayCnt}项是——',\r\n                withName: '{name}的数据是{value}',\r\n                withoutName: '{value}',\r\n                separator: {\r\n                    middle: '，',\r\n                    end: ''\r\n                }\r\n            }\r\n        }\r\n    };\n\n    var LOCALE_ZH = 'ZH';\r\n    var LOCALE_EN = 'EN';\r\n    var DEFAULT_LOCALE = LOCALE_EN;\r\n    var localeStorage = {};\r\n    var localeModels = {};\r\n    var SYSTEM_LANG = !env.domSupported ? DEFAULT_LOCALE : (function () {\r\n        var langStr = (document.documentElement.lang || navigator.language || navigator.browserLanguage).toUpperCase();\r\n        return langStr.indexOf(LOCALE_ZH) > -1 ? LOCALE_ZH : DEFAULT_LOCALE;\r\n    })();\r\n    function registerLocale(locale, localeObj) {\r\n        locale = locale.toUpperCase();\r\n        localeModels[locale] = new Model(localeObj);\r\n        localeStorage[locale] = localeObj;\r\n    }\r\n    function createLocaleObject(locale) {\r\n        if (isString(locale)) {\r\n            var localeObj = localeStorage[locale.toUpperCase()] || {};\r\n            if (locale === LOCALE_ZH || locale === LOCALE_EN) {\r\n                return clone(localeObj);\r\n            }\r\n            else {\r\n                return merge(clone(localeObj), clone(localeStorage[DEFAULT_LOCALE]), false);\r\n            }\r\n        }\r\n        else {\r\n            return merge(clone(locale), clone(localeStorage[DEFAULT_LOCALE]), false);\r\n        }\r\n    }\r\n    function getLocaleModel(lang) {\r\n        return localeModels[lang];\r\n    }\r\n    function getDefaultLocaleModel() {\r\n        return localeModels[DEFAULT_LOCALE];\r\n    }\r\n    registerLocale(LOCALE_EN, langEN);\r\n    registerLocale(LOCALE_ZH, langZH);\n\n    var ONE_SECOND = 1000;\r\n    var ONE_MINUTE = ONE_SECOND * 60;\r\n    var ONE_HOUR = ONE_MINUTE * 60;\r\n    var ONE_DAY = ONE_HOUR * 24;\r\n    var ONE_YEAR = ONE_DAY * 365;\r\n    var defaultLeveledFormatter = {\r\n        year: '{yyyy}',\r\n        month: '{MMM}',\r\n        day: '{d}',\r\n        hour: '{HH}:{mm}',\r\n        minute: '{HH}:{mm}',\r\n        second: '{HH}:{mm}:{ss}',\r\n        millisecond: '{hh}:{mm}:{ss} {SSS}',\r\n        none: '{yyyy}-{MM}-{dd} {hh}:{mm}:{ss} {SSS}'\r\n    };\r\n    var fullDayFormatter = '{yyyy}-{MM}-{dd}';\r\n    var fullLeveledFormatter = {\r\n        year: '{yyyy}',\r\n        month: '{yyyy}:{MM}',\r\n        day: fullDayFormatter,\r\n        hour: fullDayFormatter + ' ' + defaultLeveledFormatter.hour,\r\n        minute: fullDayFormatter + ' ' + defaultLeveledFormatter.minute,\r\n        second: fullDayFormatter + ' ' + defaultLeveledFormatter.second,\r\n        millisecond: defaultLeveledFormatter.none\r\n    };\r\n    var primaryTimeUnits = [\r\n        'year', 'month', 'day', 'hour', 'minute', 'second', 'millisecond'\r\n    ];\r\n    var timeUnits = [\r\n        'year', 'half-year', 'quarter', 'month', 'week', 'half-week', 'day',\r\n        'half-day', 'quarter-day', 'hour', 'minute', 'second', 'millisecond'\r\n    ];\r\n    function pad(str, len) {\r\n        str += '';\r\n        return '0000'.substr(0, len - str.length) + str;\r\n    }\r\n    function getPrimaryTimeUnit(timeUnit) {\r\n        switch (timeUnit) {\r\n            case 'half-year':\r\n            case 'quarter':\r\n                return 'month';\r\n            case 'week':\r\n            case 'half-week':\r\n                return 'day';\r\n            case 'half-day':\r\n            case 'quarter-day':\r\n                return 'hour';\r\n            default:\r\n                return timeUnit;\r\n        }\r\n    }\r\n    function isPrimaryTimeUnit(timeUnit) {\r\n        return timeUnit === getPrimaryTimeUnit(timeUnit);\r\n    }\r\n    function getDefaultFormatPrecisionOfInterval(timeUnit) {\r\n        switch (timeUnit) {\r\n            case 'year':\r\n            case 'month':\r\n                return 'day';\r\n            case 'millisecond':\r\n                return 'millisecond';\r\n            default:\r\n                return 'second';\r\n        }\r\n    }\r\n    function format(time, template, lang, isUTC) {\r\n        var date = parseDate(time);\r\n        var y = date[fullYearGetterName(isUTC)]();\r\n        var M = date[monthGetterName(isUTC)]() + 1;\r\n        var q = Math.floor((M - 1) / 4) + 1;\r\n        var d = date[dateGetterName(isUTC)]();\r\n        var e = date['get' + (isUTC ? 'UTC' : '') + 'Day']();\r\n        var H = date[hoursGetterName(isUTC)]();\r\n        var h = (H - 1) % 12 + 1;\r\n        var m = date[minutesGetterName(isUTC)]();\r\n        var s = date[secondsGetterName(isUTC)]();\r\n        var S = date[millisecondsGetterName(isUTC)]();\r\n        var localeModel = lang instanceof Model ? lang\r\n            : getLocaleModel(lang || SYSTEM_LANG) || getDefaultLocaleModel();\r\n        var timeModel = localeModel.getModel('time');\r\n        var month = timeModel.get('month');\r\n        var monthAbbr = timeModel.get('monthAbbr');\r\n        var dayOfWeek = timeModel.get('dayOfWeek');\r\n        var dayOfWeekAbbr = timeModel.get('dayOfWeekAbbr');\r\n        return (template || '')\r\n            .replace(/{yyyy}/g, y + '')\r\n            .replace(/{yy}/g, y % 100 + '')\r\n            .replace(/{Q}/g, q + '')\r\n            .replace(/{MMMM}/g, month[M - 1])\r\n            .replace(/{MMM}/g, monthAbbr[M - 1])\r\n            .replace(/{MM}/g, pad(M, 2))\r\n            .replace(/{M}/g, M + '')\r\n            .replace(/{dd}/g, pad(d, 2))\r\n            .replace(/{d}/g, d + '')\r\n            .replace(/{eeee}/g, dayOfWeek[e])\r\n            .replace(/{ee}/g, dayOfWeekAbbr[e])\r\n            .replace(/{e}/g, e + '')\r\n            .replace(/{HH}/g, pad(H, 2))\r\n            .replace(/{H}/g, H + '')\r\n            .replace(/{hh}/g, pad(h + '', 2))\r\n            .replace(/{h}/g, h + '')\r\n            .replace(/{mm}/g, pad(m, 2))\r\n            .replace(/{m}/g, m + '')\r\n            .replace(/{ss}/g, pad(s, 2))\r\n            .replace(/{s}/g, s + '')\r\n            .replace(/{SSS}/g, pad(S, 3))\r\n            .replace(/{S}/g, S + '');\r\n    }\r\n    function leveledFormat(tick, idx, formatter, lang, isUTC) {\r\n        var template = null;\r\n        if (typeof formatter === 'string') {\r\n            template = formatter;\r\n        }\r\n        else if (typeof formatter === 'function') {\r\n            template = formatter(tick.value, idx, {\r\n                level: tick.level\r\n            });\r\n        }\r\n        else {\r\n            var defaults$1 = extend({}, defaultLeveledFormatter);\r\n            if (tick.level > 0) {\r\n                for (var i = 0; i < primaryTimeUnits.length; ++i) {\r\n                    defaults$1[primaryTimeUnits[i]] = \"{primary|\" + defaults$1[primaryTimeUnits[i]] + \"}\";\r\n                }\r\n            }\r\n            var mergedFormatter = (formatter\r\n                ? (formatter.inherit === false\r\n                    ? formatter\r\n                    : defaults(formatter, defaults$1))\r\n                : defaults$1);\r\n            var unit = getUnitFromValue(tick.value, isUTC);\r\n            if (mergedFormatter[unit]) {\r\n                template = mergedFormatter[unit];\r\n            }\r\n            else if (mergedFormatter.inherit) {\r\n                var targetId = timeUnits.indexOf(unit);\r\n                for (var i = targetId - 1; i >= 0; --i) {\r\n                    if (mergedFormatter[unit]) {\r\n                        template = mergedFormatter[unit];\r\n                        break;\r\n                    }\r\n                }\r\n                template = template || defaults$1.none;\r\n            }\r\n            if (isArray(template)) {\r\n                var levelId = tick.level == null\r\n                    ? 0\r\n                    : (tick.level >= 0 ? tick.level : template.length + tick.level);\r\n                levelId = Math.min(levelId, template.length - 1);\r\n                template = template[levelId];\r\n            }\r\n        }\r\n        return format(new Date(tick.value), template, lang, isUTC);\r\n    }\r\n    function getUnitFromValue(value, isUTC) {\r\n        var date = parseDate(value);\r\n        var M = date[monthGetterName(isUTC)]() + 1;\r\n        var d = date[dateGetterName(isUTC)]();\r\n        var h = date[hoursGetterName(isUTC)]();\r\n        var m = date[minutesGetterName(isUTC)]();\r\n        var s = date[secondsGetterName(isUTC)]();\r\n        var S = date[millisecondsGetterName(isUTC)]();\r\n        var isSecond = S === 0;\r\n        var isMinute = isSecond && s === 0;\r\n        var isHour = isMinute && m === 0;\r\n        var isDay = isHour && h === 0;\r\n        var isMonth = isDay && d === 1;\r\n        var isYear = isMonth && M === 1;\r\n        if (isYear) {\r\n            return 'year';\r\n        }\r\n        else if (isMonth) {\r\n            return 'month';\r\n        }\r\n        else if (isDay) {\r\n            return 'day';\r\n        }\r\n        else if (isHour) {\r\n            return 'hour';\r\n        }\r\n        else if (isMinute) {\r\n            return 'minute';\r\n        }\r\n        else if (isSecond) {\r\n            return 'second';\r\n        }\r\n        else {\r\n            return 'millisecond';\r\n        }\r\n    }\r\n    function getUnitValue(value, unit, isUTC) {\r\n        var date = typeof value === 'number'\r\n            ? parseDate(value)\r\n            : value;\r\n        unit = unit || getUnitFromValue(value, isUTC);\r\n        switch (unit) {\r\n            case 'year':\r\n                return date[fullYearGetterName(isUTC)]();\r\n            case 'half-year':\r\n                return date[monthGetterName(isUTC)]() >= 6 ? 1 : 0;\r\n            case 'quarter':\r\n                return Math.floor((date[monthGetterName(isUTC)]() + 1) / 4);\r\n            case 'month':\r\n                return date[monthGetterName(isUTC)]();\r\n            case 'day':\r\n                return date[dateGetterName(isUTC)]();\r\n            case 'half-day':\r\n                return date[hoursGetterName(isUTC)]() / 24;\r\n            case 'hour':\r\n                return date[hoursGetterName(isUTC)]();\r\n            case 'minute':\r\n                return date[minutesGetterName(isUTC)]();\r\n            case 'second':\r\n                return date[secondsGetterName(isUTC)]();\r\n            case 'millisecond':\r\n                return date[millisecondsGetterName(isUTC)]();\r\n        }\r\n    }\r\n    function fullYearGetterName(isUTC) {\r\n        return isUTC ? 'getUTCFullYear' : 'getFullYear';\r\n    }\r\n    function monthGetterName(isUTC) {\r\n        return isUTC ? 'getUTCMonth' : 'getMonth';\r\n    }\r\n    function dateGetterName(isUTC) {\r\n        return isUTC ? 'getUTCDate' : 'getDate';\r\n    }\r\n    function hoursGetterName(isUTC) {\r\n        return isUTC ? 'getUTCHours' : 'getHours';\r\n    }\r\n    function minutesGetterName(isUTC) {\r\n        return isUTC ? 'getUTCMinutes' : 'getMinutes';\r\n    }\r\n    function secondsGetterName(isUTC) {\r\n        return isUTC ? 'getUTCSeconds' : 'getSeconds';\r\n    }\r\n    function millisecondsGetterName(isUTC) {\r\n        return isUTC ? 'getUTCSeconds' : 'getSeconds';\r\n    }\r\n    function fullYearSetterName(isUTC) {\r\n        return isUTC ? 'setUTCFullYear' : 'setFullYear';\r\n    }\r\n    function monthSetterName(isUTC) {\r\n        return isUTC ? 'setUTCMonth' : 'setMonth';\r\n    }\r\n    function dateSetterName(isUTC) {\r\n        return isUTC ? 'setUTCDate' : 'setDate';\r\n    }\r\n    function hoursSetterName(isUTC) {\r\n        return isUTC ? 'setUTCHours' : 'setHours';\r\n    }\r\n    function minutesSetterName(isUTC) {\r\n        return isUTC ? 'setUTCMinutes' : 'setMinutes';\r\n    }\r\n    function secondsSetterName(isUTC) {\r\n        return isUTC ? 'setUTCSeconds' : 'setSeconds';\r\n    }\r\n    function millisecondsSetterName(isUTC) {\r\n        return isUTC ? 'setUTCSeconds' : 'setSeconds';\r\n    }\n\n    function makePath(pathData, opts, rect, layout) {\r\n        var path = createFromString(pathData, opts);\r\n        if (rect) {\r\n            if (layout === 'center') {\r\n                rect = centerGraphic(rect, path.getBoundingRect());\r\n            }\r\n            resizePath(path, rect);\r\n        }\r\n        return path;\r\n    }\r\n    function makeImage(imageUrl, rect, layout) {\r\n        var zrImg = new ZRImage({\r\n            style: {\r\n                image: imageUrl,\r\n                x: rect.x,\r\n                y: rect.y,\r\n                width: rect.width,\r\n                height: rect.height\r\n            },\r\n            onload: function (img) {\r\n                if (layout === 'center') {\r\n                    var boundingRect = {\r\n                        width: img.width,\r\n                        height: img.height\r\n                    };\r\n                    zrImg.setStyle(centerGraphic(rect, boundingRect));\r\n                }\r\n            }\r\n        });\r\n        return zrImg;\r\n    }\r\n    function centerGraphic(rect, boundingRect) {\r\n        var aspect = boundingRect.width / boundingRect.height;\r\n        var width = rect.height * aspect;\r\n        var height;\r\n        if (width <= rect.width) {\r\n            height = rect.height;\r\n        }\r\n        else {\r\n            width = rect.width;\r\n            height = width / aspect;\r\n        }\r\n        var cx = rect.x + rect.width / 2;\r\n        var cy = rect.y + rect.height / 2;\r\n        return {\r\n            x: cx - width / 2,\r\n            y: cy - height / 2,\r\n            width: width,\r\n            height: height\r\n        };\r\n    }\r\n    function resizePath(path, rect) {\r\n        if (!path.applyTransform) {\r\n            return;\r\n        }\r\n        var pathRect = path.getBoundingRect();\r\n        var m = pathRect.calculateTransform(rect);\r\n        path.applyTransform(m);\r\n    }\r\n    function animateOrSetProps(animationType, el, props, animatableModel, dataIndex, cb, during) {\r\n        var isFrom = false;\r\n        if (typeof dataIndex === 'function') {\r\n            during = cb;\r\n            cb = dataIndex;\r\n            dataIndex = null;\r\n        }\r\n        else if (isObject(dataIndex)) {\r\n            cb = dataIndex.cb;\r\n            during = dataIndex.during;\r\n            isFrom = dataIndex.isFrom;\r\n            dataIndex = dataIndex.dataIndex;\r\n        }\r\n        var isUpdate = animationType === 'update';\r\n        var isRemove = animationType === 'remove';\r\n        var animationPayload;\r\n        if (animatableModel && animatableModel.ecModel) {\r\n            var updatePayload = animatableModel.ecModel.getUpdatePayload();\r\n            animationPayload = (updatePayload && updatePayload.animation);\r\n        }\r\n        var animationEnabled = animatableModel && animatableModel.isAnimationEnabled();\r\n        if (animationEnabled) {\r\n            var duration = void 0;\r\n            var animationEasing = void 0;\r\n            var animationDelay = void 0;\r\n            if (animationPayload) {\r\n                duration = animationPayload.duration || 0;\r\n                animationEasing = animationPayload.easing || 'cubicOut';\r\n                animationDelay = animationPayload.delay || 0;\r\n            }\r\n            else if (isRemove) {\r\n                duration = 200;\r\n                animationEasing = 'cubicOut';\r\n                animationDelay = 0;\r\n            }\r\n            else {\r\n                duration = animatableModel.getShallow(isUpdate ? 'animationDurationUpdate' : 'animationDuration');\r\n                animationEasing = animatableModel.getShallow(isUpdate ? 'animationEasingUpdate' : 'animationEasing');\r\n                animationDelay = animatableModel.getShallow(isUpdate ? 'animationDelayUpdate' : 'animationDelay');\r\n                if (typeof animationDelay === 'function') {\r\n                    animationDelay = animationDelay(dataIndex, animatableModel.getAnimationDelayParams\r\n                        ? animatableModel.getAnimationDelayParams(el, dataIndex)\r\n                        : null);\r\n                }\r\n                if (typeof duration === 'function') {\r\n                    duration = duration(dataIndex);\r\n                }\r\n            }\r\n            if (!isRemove) {\r\n                el.stopAnimation('remove');\r\n            }\r\n            duration > 0\r\n                ? (isFrom\r\n                    ? el.animateFrom(props, {\r\n                        duration: duration,\r\n                        delay: animationDelay || 0,\r\n                        easing: animationEasing,\r\n                        done: cb,\r\n                        force: !!cb || !!during,\r\n                        scope: animationType,\r\n                        during: during\r\n                    })\r\n                    : el.animateTo(props, {\r\n                        duration: duration,\r\n                        delay: animationDelay || 0,\r\n                        easing: animationEasing,\r\n                        done: cb,\r\n                        force: !!cb || !!during,\r\n                        setToFinal: true,\r\n                        scope: animationType,\r\n                        during: during\r\n                    }))\r\n                : (el.stopAnimation(), el.attr(props), cb && cb());\r\n        }\r\n        else {\r\n            el.stopAnimation();\r\n            !isFrom && el.attr(props);\r\n            during && during(1);\r\n            cb && cb();\r\n        }\r\n    }\r\n    function updateProps(el, props, animatableModel, dataIndex, cb, during) {\r\n        animateOrSetProps('update', el, props, animatableModel, dataIndex, cb, during);\r\n    }\r\n    function initProps(el, props, animatableModel, dataIndex, cb, during) {\r\n        animateOrSetProps('init', el, props, animatableModel, dataIndex, cb, during);\r\n    }\r\n    function removeElement(el, props, animatableModel, dataIndex, cb, during) {\r\n        animateOrSetProps('remove', el, props, animatableModel, dataIndex, cb, during);\r\n    }\r\n    function fadeOutDisplayable(el, animatableModel, dataIndex, done) {\r\n        el.removeTextContent();\r\n        el.removeTextGuideLine();\r\n        removeElement(el, {\r\n            style: {\r\n                opacity: 0\r\n            }\r\n        }, animatableModel, dataIndex, done);\r\n    }\r\n    function removeElementWithFadeOut(el, animatableModel, dataIndex) {\r\n        function doRemove() {\r\n            el.parent && el.parent.remove(el);\r\n        }\r\n        if (!el.isGroup) {\r\n            fadeOutDisplayable(el, animatableModel, dataIndex, doRemove);\r\n        }\r\n        else {\r\n            el.traverse(function (disp) {\r\n                if (!disp.isGroup) {\r\n                    fadeOutDisplayable(disp, animatableModel, dataIndex, doRemove);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    function isElementRemoved(el) {\r\n        if (!el.__zr) {\r\n            return true;\r\n        }\r\n        for (var i = 0; i < el.animators.length; i++) {\r\n            var animator = el.animators[i];\r\n            if (animator.scope === 'remove') {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    function animateOrSetLabel(animationType, el, data, dataIndex, labelModel, seriesModel, animatableModel, getDefaultText) {\r\n        var valueAnimationEnabled = labelModel && labelModel.get('valueAnimation');\r\n        var label = el.getTextContent();\r\n        if (valueAnimationEnabled && label) {\r\n            var precision_1 = labelModel ? labelModel.get('precision') : null;\r\n            var host_1 = labelInner(label);\r\n            var sourceValue_1 = host_1.prevValue;\r\n            var targetValue_1 = host_1.value;\r\n            var during = function (percent) {\r\n                var text = el.getTextContent();\r\n                if (!text || !host_1) {\r\n                    return;\r\n                }\r\n                var interpolated = interpolateRawValues(data, precision_1, sourceValue_1, targetValue_1, percent);\r\n                var labelText = getLabelText({\r\n                    labelDataIndex: dataIndex,\r\n                    labelFetcher: seriesModel,\r\n                    defaultText: getDefaultText\r\n                        ? getDefaultText(interpolated)\r\n                        : interpolated + ''\r\n                }, { normal: labelModel }, interpolated);\r\n                setLabelText(text, labelText);\r\n            };\r\n            host_1.prevValue = targetValue_1;\r\n            var props = {};\r\n            animateOrSetProps(animationType, el, props, animatableModel, dataIndex, null, during);\r\n        }\r\n    }\r\n    function updateLabel(el, data, dataIndex, labelModel, seriesModel, animatableModel, defaultTextGetter) {\r\n        animateOrSetLabel('update', el, data, dataIndex, labelModel, seriesModel, animatableModel, defaultTextGetter);\r\n    }\r\n    function initLabel(el, data, dataIndex, labelModel, seriesModel, animatableModel, defaultTextGetter) {\r\n        animateOrSetLabel('init', el, data, dataIndex, labelModel, seriesModel, animatableModel, defaultTextGetter);\r\n    }\r\n    function isNotGroup(el) {\r\n        return !el.isGroup;\r\n    }\r\n    function isPath(el) {\r\n        return el.shape != null;\r\n    }\r\n    function groupTransition(g1, g2, animatableModel) {\r\n        if (!g1 || !g2) {\r\n            return;\r\n        }\r\n        function getElMap(g) {\r\n            var elMap = {};\r\n            g.traverse(function (el) {\r\n                if (isNotGroup(el) && el.anid) {\r\n                    elMap[el.anid] = el;\r\n                }\r\n            });\r\n            return elMap;\r\n        }\r\n        function getAnimatableProps(el) {\r\n            var obj = {\r\n                x: el.x,\r\n                y: el.y,\r\n                rotation: el.rotation\r\n            };\r\n            if (isPath(el)) {\r\n                obj.shape = extend({}, el.shape);\r\n            }\r\n            return obj;\r\n        }\r\n        var elMap1 = getElMap(g1);\r\n        g2.traverse(function (el) {\r\n            if (isNotGroup(el) && el.anid) {\r\n                var oldEl = elMap1[el.anid];\r\n                if (oldEl) {\r\n                    var newProp = getAnimatableProps(el);\r\n                    el.attr(getAnimatableProps(oldEl));\r\n                    updateProps(el, newProp, animatableModel, getECData(el).dataIndex);\r\n                }\r\n            }\r\n        });\r\n    }\n\n    function addCommas(x) {\r\n        if (!isNumeric(x)) {\r\n            return isString(x) ? x : '-';\r\n        }\r\n        var parts = (x + '').split('.');\r\n        return parts[0].replace(/(\\d{1,3})(?=(?:\\d{3})+(?!\\d))/g, '$1,')\r\n            + (parts.length > 1 ? ('.' + parts[1]) : '');\r\n    }\r\n    var normalizeCssArray$1 = normalizeCssArray;\r\n    var replaceReg = /([&<>\"'])/g;\r\n    var replaceMap = {\r\n        '&': '&amp;',\r\n        '<': '&lt;',\r\n        '>': '&gt;',\r\n        '\"': '&quot;',\r\n        '\\'': '&#39;'\r\n    };\r\n    function encodeHTML(source) {\r\n        return source == null\r\n            ? ''\r\n            : (source + '').replace(replaceReg, function (str, c) {\r\n                return replaceMap[c];\r\n            });\r\n    }\r\n    var TPL_VAR_ALIAS = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];\r\n    var wrapVar = function (varName, seriesIdx) {\r\n        return '{' + varName + (seriesIdx == null ? '' : seriesIdx) + '}';\r\n    };\r\n    function formatTpl(tpl, paramsList, encode) {\r\n        if (!isArray(paramsList)) {\r\n            paramsList = [paramsList];\r\n        }\r\n        var seriesLen = paramsList.length;\r\n        if (!seriesLen) {\r\n            return '';\r\n        }\r\n        var isTimeAxis = paramsList[0].axisType && paramsList[0].axisType.indexOf('time') >= 0;\r\n        if (isTimeAxis) {\r\n            var axisValue = paramsList[0].data[paramsList[0].axisIndex];\r\n            var date = parseDate(axisValue);\r\n            return format(date, tpl);\r\n        }\r\n        else {\r\n            var $vars = paramsList[0].$vars || [];\r\n            for (var i = 0; i < $vars.length; i++) {\r\n                var alias = TPL_VAR_ALIAS[i];\r\n                tpl = tpl.replace(wrapVar(alias), wrapVar(alias, 0));\r\n            }\r\n            for (var seriesIdx = 0; seriesIdx < seriesLen; seriesIdx++) {\r\n                for (var k = 0; k < $vars.length; k++) {\r\n                    var val = paramsList[seriesIdx][$vars[k]];\r\n                    tpl = tpl.replace(wrapVar(TPL_VAR_ALIAS[k], seriesIdx), encode ? encodeHTML(val) : val);\r\n                }\r\n            }\r\n        }\r\n        return tpl;\r\n    }\r\n    function convertToColorString(color, defaultColor) {\r\n        defaultColor = defaultColor || 'transparent';\r\n        return isString(color)\r\n            ? color\r\n            : isObject(color)\r\n                ? (color.colorStops\r\n                    && (color.colorStops[0] || {}).color\r\n                    || defaultColor)\r\n                : defaultColor;\r\n    }\n\n    var each$1 = each;\r\n    var LOCATION_PARAMS = [\r\n        'left', 'right', 'top', 'bottom', 'width', 'height'\r\n    ];\r\n    var HV_NAMES = [\r\n        ['width', 'left', 'right'],\r\n        ['height', 'top', 'bottom']\r\n    ];\r\n    function boxLayout(orient, group, gap, maxWidth, maxHeight) {\r\n        var x = 0;\r\n        var y = 0;\r\n        if (maxWidth == null) {\r\n            maxWidth = Infinity;\r\n        }\r\n        if (maxHeight == null) {\r\n            maxHeight = Infinity;\r\n        }\r\n        var currentLineMaxSize = 0;\r\n        group.eachChild(function (child, idx) {\r\n            var rect = child.getBoundingRect();\r\n            var nextChild = group.childAt(idx + 1);\r\n            var nextChildRect = nextChild && nextChild.getBoundingRect();\r\n            var nextX;\r\n            var nextY;\r\n            if (orient === 'horizontal') {\r\n                var moveX = rect.width + (nextChildRect ? (-nextChildRect.x + rect.x) : 0);\r\n                nextX = x + moveX;\r\n                if (nextX > maxWidth || child.newline) {\r\n                    x = 0;\r\n                    nextX = moveX;\r\n                    y += currentLineMaxSize + gap;\r\n                    currentLineMaxSize = rect.height;\r\n                }\r\n                else {\r\n                    currentLineMaxSize = Math.max(currentLineMaxSize, rect.height);\r\n                }\r\n            }\r\n            else {\r\n                var moveY = rect.height + (nextChildRect ? (-nextChildRect.y + rect.y) : 0);\r\n                nextY = y + moveY;\r\n                if (nextY > maxHeight || child.newline) {\r\n                    x += currentLineMaxSize + gap;\r\n                    y = 0;\r\n                    nextY = moveY;\r\n                    currentLineMaxSize = rect.width;\r\n                }\r\n                else {\r\n                    currentLineMaxSize = Math.max(currentLineMaxSize, rect.width);\r\n                }\r\n            }\r\n            if (child.newline) {\r\n                return;\r\n            }\r\n            child.x = x;\r\n            child.y = y;\r\n            child.markRedraw();\r\n            orient === 'horizontal'\r\n                ? (x = nextX + gap)\r\n                : (y = nextY + gap);\r\n        });\r\n    }\r\n    var vbox = curry(boxLayout, 'vertical');\r\n    var hbox = curry(boxLayout, 'horizontal');\r\n    function getLayoutRect(positionInfo, containerRect, margin) {\r\n        margin = normalizeCssArray$1(margin || 0);\r\n        var containerWidth = containerRect.width;\r\n        var containerHeight = containerRect.height;\r\n        var left = parsePercent$2(positionInfo.left, containerWidth);\r\n        var top = parsePercent$2(positionInfo.top, containerHeight);\r\n        var right = parsePercent$2(positionInfo.right, containerWidth);\r\n        var bottom = parsePercent$2(positionInfo.bottom, containerHeight);\r\n        var width = parsePercent$2(positionInfo.width, containerWidth);\r\n        var height = parsePercent$2(positionInfo.height, containerHeight);\r\n        var verticalMargin = margin[2] + margin[0];\r\n        var horizontalMargin = margin[1] + margin[3];\r\n        var aspect = positionInfo.aspect;\r\n        if (isNaN(width)) {\r\n            width = containerWidth - right - horizontalMargin - left;\r\n        }\r\n        if (isNaN(height)) {\r\n            height = containerHeight - bottom - verticalMargin - top;\r\n        }\r\n        if (aspect != null) {\r\n            if (isNaN(width) && isNaN(height)) {\r\n                if (aspect > containerWidth / containerHeight) {\r\n                    width = containerWidth * 0.8;\r\n                }\r\n                else {\r\n                    height = containerHeight * 0.8;\r\n                }\r\n            }\r\n            if (isNaN(width)) {\r\n                width = aspect * height;\r\n            }\r\n            if (isNaN(height)) {\r\n                height = width / aspect;\r\n            }\r\n        }\r\n        if (isNaN(left)) {\r\n            left = containerWidth - right - width - horizontalMargin;\r\n        }\r\n        if (isNaN(top)) {\r\n            top = containerHeight - bottom - height - verticalMargin;\r\n        }\r\n        switch (positionInfo.left || positionInfo.right) {\r\n            case 'center':\r\n                left = containerWidth / 2 - width / 2 - margin[3];\r\n                break;\r\n            case 'right':\r\n                left = containerWidth - width - horizontalMargin;\r\n                break;\r\n        }\r\n        switch (positionInfo.top || positionInfo.bottom) {\r\n            case 'middle':\r\n            case 'center':\r\n                top = containerHeight / 2 - height / 2 - margin[0];\r\n                break;\r\n            case 'bottom':\r\n                top = containerHeight - height - verticalMargin;\r\n                break;\r\n        }\r\n        left = left || 0;\r\n        top = top || 0;\r\n        if (isNaN(width)) {\r\n            width = containerWidth - horizontalMargin - left - (right || 0);\r\n        }\r\n        if (isNaN(height)) {\r\n            height = containerHeight - verticalMargin - top - (bottom || 0);\r\n        }\r\n        var rect = new BoundingRect(left + margin[3], top + margin[0], width, height);\r\n        rect.margin = margin;\r\n        return rect;\r\n    }\r\n    function fetchLayoutMode(ins) {\r\n        var layoutMode = ins.layoutMode || ins.constructor.layoutMode;\r\n        return isObject(layoutMode)\r\n            ? layoutMode\r\n            : layoutMode\r\n                ? { type: layoutMode }\r\n                : null;\r\n    }\r\n    function mergeLayoutParam(targetOption, newOption, opt) {\r\n        var ignoreSize = opt && opt.ignoreSize;\r\n        !isArray(ignoreSize) && (ignoreSize = [ignoreSize, ignoreSize]);\r\n        var hResult = merge(HV_NAMES[0], 0);\r\n        var vResult = merge(HV_NAMES[1], 1);\r\n        copy(HV_NAMES[0], targetOption, hResult);\r\n        copy(HV_NAMES[1], targetOption, vResult);\r\n        function merge(names, hvIdx) {\r\n            var newParams = {};\r\n            var newValueCount = 0;\r\n            var merged = {};\r\n            var mergedValueCount = 0;\r\n            var enoughParamNumber = 2;\r\n            each$1(names, function (name) {\r\n                merged[name] = targetOption[name];\r\n            });\r\n            each$1(names, function (name) {\r\n                hasProp(newOption, name) && (newParams[name] = merged[name] = newOption[name]);\r\n                hasValue(newParams, name) && newValueCount++;\r\n                hasValue(merged, name) && mergedValueCount++;\r\n            });\r\n            if (ignoreSize[hvIdx]) {\r\n                if (hasValue(newOption, names[1])) {\r\n                    merged[names[2]] = null;\r\n                }\r\n                else if (hasValue(newOption, names[2])) {\r\n                    merged[names[1]] = null;\r\n                }\r\n                return merged;\r\n            }\r\n            if (mergedValueCount === enoughParamNumber || !newValueCount) {\r\n                return merged;\r\n            }\r\n            else if (newValueCount >= enoughParamNumber) {\r\n                return newParams;\r\n            }\r\n            else {\r\n                for (var i = 0; i < names.length; i++) {\r\n                    var name_1 = names[i];\r\n                    if (!hasProp(newParams, name_1) && hasProp(targetOption, name_1)) {\r\n                        newParams[name_1] = targetOption[name_1];\r\n                        break;\r\n                    }\r\n                }\r\n                return newParams;\r\n            }\r\n        }\r\n        function hasProp(obj, name) {\r\n            return obj.hasOwnProperty(name);\r\n        }\r\n        function hasValue(obj, name) {\r\n            return obj[name] != null && obj[name] !== 'auto';\r\n        }\r\n        function copy(names, target, source) {\r\n            each$1(names, function (name) {\r\n                target[name] = source[name];\r\n            });\r\n        }\r\n    }\r\n    function getLayoutParams(source) {\r\n        return copyLayoutParams({}, source);\r\n    }\r\n    function copyLayoutParams(target, source) {\r\n        source && target && each$1(LOCATION_PARAMS, function (name) {\r\n            source.hasOwnProperty(name) && (target[name] = source[name]);\r\n        });\r\n        return target;\r\n    }\n\n    var inner = makeInner();\r\n    var ComponentModel = (function (_super) {\r\n        __extends(ComponentModel, _super);\r\n        function ComponentModel(option, parentModel, ecModel) {\r\n            var _this = _super.call(this, option, parentModel, ecModel) || this;\r\n            _this.uid = getUID('ec_cpt_model');\r\n            return _this;\r\n        }\r\n        ComponentModel.prototype.init = function (option, parentModel, ecModel) {\r\n            this.mergeDefaultAndTheme(option, ecModel);\r\n        };\r\n        ComponentModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\r\n            var layoutMode = fetchLayoutMode(this);\r\n            var inputPositionParams = layoutMode\r\n                ? getLayoutParams(option) : {};\r\n            var themeModel = ecModel.getTheme();\r\n            merge(option, themeModel.get(this.mainType));\r\n            merge(option, this.getDefaultOption());\r\n            if (layoutMode) {\r\n                mergeLayoutParam(option, inputPositionParams, layoutMode);\r\n            }\r\n        };\r\n        ComponentModel.prototype.mergeOption = function (option, ecModel) {\r\n            merge(this.option, option, true);\r\n            var layoutMode = fetchLayoutMode(this);\r\n            if (layoutMode) {\r\n                mergeLayoutParam(this.option, option, layoutMode);\r\n            }\r\n        };\r\n        ComponentModel.prototype.optionUpdated = function (newCptOption, isInit) { };\r\n        ComponentModel.prototype.getDefaultOption = function () {\r\n            var ctor = this.constructor;\r\n            if (!isExtendedClass(ctor)) {\r\n                return ctor.defaultOption;\r\n            }\r\n            var fields = inner(this);\r\n            if (!fields.defaultOption) {\r\n                var optList = [];\r\n                var clz = ctor;\r\n                while (clz) {\r\n                    var opt = clz.prototype.defaultOption;\r\n                    opt && optList.push(opt);\r\n                    clz = clz.superClass;\r\n                }\r\n                var defaultOption = {};\r\n                for (var i = optList.length - 1; i >= 0; i--) {\r\n                    defaultOption = merge(defaultOption, optList[i], true);\r\n                }\r\n                fields.defaultOption = defaultOption;\r\n            }\r\n            return fields.defaultOption;\r\n        };\r\n        ComponentModel.prototype.getReferringComponents = function (mainType, opt) {\r\n            var indexKey = (mainType + 'Index');\r\n            var idKey = (mainType + 'Id');\r\n            return queryReferringComponents(this.ecModel, mainType, {\r\n                index: this.get(indexKey, true),\r\n                id: this.get(idKey, true)\r\n            }, opt);\r\n        };\r\n        ComponentModel.prototype.getBoxLayoutParams = function () {\r\n            var boxLayoutModel = this;\r\n            return {\r\n                left: boxLayoutModel.get('left'),\r\n                top: boxLayoutModel.get('top'),\r\n                right: boxLayoutModel.get('right'),\r\n                bottom: boxLayoutModel.get('bottom'),\r\n                width: boxLayoutModel.get('width'),\r\n                height: boxLayoutModel.get('height')\r\n            };\r\n        };\r\n        ComponentModel.protoInitialize = (function () {\r\n            var proto = ComponentModel.prototype;\r\n            proto.type = 'component';\r\n            proto.id = '';\r\n            proto.name = '';\r\n            proto.mainType = '';\r\n            proto.subType = '';\r\n            proto.componentIndex = 0;\r\n        })();\r\n        return ComponentModel;\r\n    }(Model));\r\n    mountExtend(ComponentModel, Model);\r\n    enableClassManagement(ComponentModel, { registerWhenExtend: true });\r\n    enableSubTypeDefaulter(ComponentModel);\r\n    enableTopologicalTravel(ComponentModel, getDependencies);\r\n    function getDependencies(componentType) {\r\n        var deps = [];\r\n        each(ComponentModel.getClassesByMainType(componentType), function (clz) {\r\n            deps = deps.concat(clz.dependencies || clz.prototype.dependencies || []);\r\n        });\r\n        deps = map(deps, function (type) {\r\n            return parseClassType(type).main;\r\n        });\r\n        if (componentType !== 'dataset' && indexOf(deps, 'dataset') <= 0) {\r\n            deps.unshift('dataset');\r\n        }\r\n        return deps;\r\n    }\n\n    var platform = '';\r\n    if (typeof navigator !== 'undefined') {\r\n        platform = navigator.platform || '';\r\n    }\r\n    var globalDefault = {\r\n        darkMode: 'auto',\r\n        color: [\r\n            '#5470c6',\r\n            '#91cc75',\r\n            '#fac858',\r\n            '#ee6666',\r\n            '#73c0de',\r\n            '#3ba272',\r\n            '#fc8452',\r\n            '#9a60b4',\r\n            '#ea7ccc'\r\n        ],\r\n        gradientColor: ['#f6efa6', '#d88273', '#bf444c'],\r\n        textStyle: {\r\n            fontFamily: platform.match(/^Win/) ? 'Microsoft YaHei' : 'sans-serif',\r\n            fontSize: 12,\r\n            fontStyle: 'normal',\r\n            fontWeight: 'normal'\r\n        },\r\n        blendMode: null,\r\n        stateAnimation: {\r\n            duration: 300,\r\n            easing: 'cubicOut',\r\n            additive: true\r\n        },\r\n        animation: 'auto',\r\n        animationDuration: 1000,\r\n        animationDurationUpdate: 500,\r\n        animationEasing: 'cubicInOut',\r\n        animationEasingUpdate: 'cubicInOut',\r\n        animationThreshold: 2000,\r\n        progressiveThreshold: 3000,\r\n        progressive: 400,\r\n        hoverLayerThreshold: 3000,\r\n        useUTC: false\r\n    };\n\n    var inner$1 = makeInner();\r\n    function getNearestColorPalette(colors, requestColorNum) {\r\n        var paletteNum = colors.length;\r\n        for (var i = 0; i < paletteNum; i++) {\r\n            if (colors[i].length > requestColorNum) {\r\n                return colors[i];\r\n            }\r\n        }\r\n        return colors[paletteNum - 1];\r\n    }\r\n    var ColorPaletteMixin = (function () {\r\n        function ColorPaletteMixin() {\r\n        }\r\n        ColorPaletteMixin.prototype.clearColorPalette = function () {\r\n            inner$1(this).colorIdx = 0;\r\n            inner$1(this).colorNameMap = {};\r\n        };\r\n        ColorPaletteMixin.prototype.getColorFromPalette = function (name, scope, requestColorNum) {\r\n            scope = scope || this;\r\n            var scopeFields = inner$1(scope);\r\n            var colorIdx = scopeFields.colorIdx || 0;\r\n            var colorNameMap = scopeFields.colorNameMap = scopeFields.colorNameMap || {};\r\n            if (colorNameMap.hasOwnProperty(name)) {\r\n                return colorNameMap[name];\r\n            }\r\n            var defaultColorPalette = normalizeToArray(this.get('color', true));\r\n            var layeredColorPalette = this.get('colorLayer', true);\r\n            var colorPalette = ((requestColorNum == null || !layeredColorPalette)\r\n                ? defaultColorPalette : getNearestColorPalette(layeredColorPalette, requestColorNum));\r\n            colorPalette = colorPalette || defaultColorPalette;\r\n            if (!colorPalette || !colorPalette.length) {\r\n                return;\r\n            }\r\n            var color = colorPalette[colorIdx];\r\n            if (name) {\r\n                colorNameMap[name] = color;\r\n            }\r\n            scopeFields.colorIdx = (colorIdx + 1) % colorPalette.length;\r\n            return color;\r\n        };\r\n        return ColorPaletteMixin;\r\n    }());\n\n    var VISUAL_DIMENSIONS = createHashMap([\r\n        'tooltip', 'label', 'itemName', 'itemId', 'seriesName'\r\n    ]);\r\n    var SOURCE_FORMAT_ORIGINAL = 'original';\r\n    var SOURCE_FORMAT_ARRAY_ROWS = 'arrayRows';\r\n    var SOURCE_FORMAT_OBJECT_ROWS = 'objectRows';\r\n    var SOURCE_FORMAT_KEYED_COLUMNS = 'keyedColumns';\r\n    var SOURCE_FORMAT_TYPED_ARRAY = 'typedArray';\r\n    var SOURCE_FORMAT_UNKNOWN = 'unknown';\r\n    var SERIES_LAYOUT_BY_COLUMN = 'column';\r\n    var SERIES_LAYOUT_BY_ROW = 'row';\n\n    var BE_ORDINAL = {\r\n        Must: 1,\r\n        Might: 2,\r\n        Not: 3\r\n    };\r\n    var innerGlobalModel = makeInner();\r\n    function resetSourceDefaulter(ecModel) {\r\n        innerGlobalModel(ecModel).datasetMap = createHashMap();\r\n    }\r\n    function inheritSourceMetaRawOption(opt) {\r\n        return defaults(opt.thisNew, opt.parent);\r\n    }\r\n    function makeSeriesEncodeForAxisCoordSys(coordDimensions, seriesModel, source) {\r\n        var encode = {};\r\n        var datasetModel = querySeriesUpstreamDatasetModel(seriesModel);\r\n        if (!datasetModel || !coordDimensions) {\r\n            return encode;\r\n        }\r\n        var encodeItemName = [];\r\n        var encodeSeriesName = [];\r\n        var ecModel = seriesModel.ecModel;\r\n        var datasetMap = innerGlobalModel(ecModel).datasetMap;\r\n        var key = datasetModel.uid + '_' + source.seriesLayoutBy;\r\n        var baseCategoryDimIndex;\r\n        var categoryWayValueDimStart;\r\n        coordDimensions = coordDimensions.slice();\r\n        each(coordDimensions, function (coordDimInfoLoose, coordDimIdx) {\r\n            var coordDimInfo = isObject(coordDimInfoLoose)\r\n                ? coordDimInfoLoose\r\n                : (coordDimensions[coordDimIdx] = { name: coordDimInfoLoose });\r\n            if (coordDimInfo.type === 'ordinal' && baseCategoryDimIndex == null) {\r\n                baseCategoryDimIndex = coordDimIdx;\r\n                categoryWayValueDimStart = getDataDimCountOnCoordDim(coordDimInfo);\r\n            }\r\n            encode[coordDimInfo.name] = [];\r\n        });\r\n        var datasetRecord = datasetMap.get(key)\r\n            || datasetMap.set(key, { categoryWayDim: categoryWayValueDimStart, valueWayDim: 0 });\r\n        each(coordDimensions, function (coordDimInfo, coordDimIdx) {\r\n            var coordDimName = coordDimInfo.name;\r\n            var count = getDataDimCountOnCoordDim(coordDimInfo);\r\n            if (baseCategoryDimIndex == null) {\r\n                var start = datasetRecord.valueWayDim;\r\n                pushDim(encode[coordDimName], start, count);\r\n                pushDim(encodeSeriesName, start, count);\r\n                datasetRecord.valueWayDim += count;\r\n            }\r\n            else if (baseCategoryDimIndex === coordDimIdx) {\r\n                pushDim(encode[coordDimName], 0, count);\r\n                pushDim(encodeItemName, 0, count);\r\n            }\r\n            else {\r\n                var start = datasetRecord.categoryWayDim;\r\n                pushDim(encode[coordDimName], start, count);\r\n                pushDim(encodeSeriesName, start, count);\r\n                datasetRecord.categoryWayDim += count;\r\n            }\r\n        });\r\n        function pushDim(dimIdxArr, idxFrom, idxCount) {\r\n            for (var i = 0; i < idxCount; i++) {\r\n                dimIdxArr.push(idxFrom + i);\r\n            }\r\n        }\r\n        function getDataDimCountOnCoordDim(coordDimInfo) {\r\n            var dimsDef = coordDimInfo.dimsDef;\r\n            return dimsDef ? dimsDef.length : 1;\r\n        }\r\n        encodeItemName.length && (encode.itemName = encodeItemName);\r\n        encodeSeriesName.length && (encode.seriesName = encodeSeriesName);\r\n        return encode;\r\n    }\r\n    function makeSeriesEncodeForNameBased(seriesModel, source, dimCount) {\r\n        var encode = {};\r\n        var datasetModel = querySeriesUpstreamDatasetModel(seriesModel);\r\n        if (!datasetModel) {\r\n            return encode;\r\n        }\r\n        var sourceFormat = source.sourceFormat;\r\n        var dimensionsDefine = source.dimensionsDefine;\r\n        var potentialNameDimIndex;\r\n        if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\r\n            each(dimensionsDefine, function (dim, idx) {\r\n                if ((isObject(dim) ? dim.name : dim) === 'name') {\r\n                    potentialNameDimIndex = idx;\r\n                }\r\n            });\r\n        }\r\n        var idxResult = (function () {\r\n            var idxRes0 = {};\r\n            var idxRes1 = {};\r\n            var guessRecords = [];\r\n            for (var i = 0, len = Math.min(5, dimCount); i < len; i++) {\r\n                var guessResult = doGuessOrdinal(source.data, sourceFormat, source.seriesLayoutBy, dimensionsDefine, source.startIndex, i);\r\n                guessRecords.push(guessResult);\r\n                var isPureNumber = guessResult === BE_ORDINAL.Not;\r\n                if (isPureNumber && idxRes0.v == null && i !== potentialNameDimIndex) {\r\n                    idxRes0.v = i;\r\n                }\r\n                if (idxRes0.n == null\r\n                    || (idxRes0.n === idxRes0.v)\r\n                    || (!isPureNumber && guessRecords[idxRes0.n] === BE_ORDINAL.Not)) {\r\n                    idxRes0.n = i;\r\n                }\r\n                if (fulfilled(idxRes0) && guessRecords[idxRes0.n] !== BE_ORDINAL.Not) {\r\n                    return idxRes0;\r\n                }\r\n                if (!isPureNumber) {\r\n                    if (guessResult === BE_ORDINAL.Might && idxRes1.v == null && i !== potentialNameDimIndex) {\r\n                        idxRes1.v = i;\r\n                    }\r\n                    if (idxRes1.n == null || (idxRes1.n === idxRes1.v)) {\r\n                        idxRes1.n = i;\r\n                    }\r\n                }\r\n            }\r\n            function fulfilled(idxResult) {\r\n                return idxResult.v != null && idxResult.n != null;\r\n            }\r\n            return fulfilled(idxRes0) ? idxRes0 : fulfilled(idxRes1) ? idxRes1 : null;\r\n        })();\r\n        if (idxResult) {\r\n            encode.value = [idxResult.v];\r\n            var nameDimIndex = potentialNameDimIndex != null ? potentialNameDimIndex : idxResult.n;\r\n            encode.itemName = [nameDimIndex];\r\n            encode.seriesName = [nameDimIndex];\r\n        }\r\n        return encode;\r\n    }\r\n    function querySeriesUpstreamDatasetModel(seriesModel) {\r\n        var thisData = seriesModel.get('data', true);\r\n        if (!thisData) {\r\n            return queryReferringComponents(seriesModel.ecModel, 'dataset', {\r\n                index: seriesModel.get('datasetIndex', true),\r\n                id: seriesModel.get('datasetId', true)\r\n            }, SINGLE_REFERRING).models[0];\r\n        }\r\n    }\r\n    function queryDatasetUpstreamDatasetModels(datasetModel) {\r\n        if (!datasetModel.get('transform', true)\r\n            && !datasetModel.get('fromTransformResult', true)) {\r\n            return [];\r\n        }\r\n        return queryReferringComponents(datasetModel.ecModel, 'dataset', {\r\n            index: datasetModel.get('fromDatasetIndex', true),\r\n            id: datasetModel.get('fromDatasetId', true)\r\n        }, SINGLE_REFERRING).models;\r\n    }\r\n    function guessOrdinal(source, dimIndex) {\r\n        return doGuessOrdinal(source.data, source.sourceFormat, source.seriesLayoutBy, source.dimensionsDefine, source.startIndex, dimIndex);\r\n    }\r\n    function doGuessOrdinal(data, sourceFormat, seriesLayoutBy, dimensionsDefine, startIndex, dimIndex) {\r\n        var result;\r\n        var maxLoop = 5;\r\n        if (isTypedArray(data)) {\r\n            return BE_ORDINAL.Not;\r\n        }\r\n        var dimName;\r\n        var dimType;\r\n        if (dimensionsDefine) {\r\n            var dimDefItem = dimensionsDefine[dimIndex];\r\n            if (isObject(dimDefItem)) {\r\n                dimName = dimDefItem.name;\r\n                dimType = dimDefItem.type;\r\n            }\r\n            else if (isString(dimDefItem)) {\r\n                dimName = dimDefItem;\r\n            }\r\n        }\r\n        if (dimType != null) {\r\n            return dimType === 'ordinal' ? BE_ORDINAL.Must : BE_ORDINAL.Not;\r\n        }\r\n        if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\r\n            var dataArrayRows = data;\r\n            if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\r\n                var sample = dataArrayRows[dimIndex];\r\n                for (var i = 0; i < (sample || []).length && i < maxLoop; i++) {\r\n                    if ((result = detectValue(sample[startIndex + i])) != null) {\r\n                        return result;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                for (var i = 0; i < dataArrayRows.length && i < maxLoop; i++) {\r\n                    var row = dataArrayRows[startIndex + i];\r\n                    if (row && (result = detectValue(row[dimIndex])) != null) {\r\n                        return result;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\r\n            var dataObjectRows = data;\r\n            if (!dimName) {\r\n                return BE_ORDINAL.Not;\r\n            }\r\n            for (var i = 0; i < dataObjectRows.length && i < maxLoop; i++) {\r\n                var item = dataObjectRows[i];\r\n                if (item && (result = detectValue(item[dimName])) != null) {\r\n                    return result;\r\n                }\r\n            }\r\n        }\r\n        else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\r\n            var dataKeyedColumns = data;\r\n            if (!dimName) {\r\n                return BE_ORDINAL.Not;\r\n            }\r\n            var sample = dataKeyedColumns[dimName];\r\n            if (!sample || isTypedArray(sample)) {\r\n                return BE_ORDINAL.Not;\r\n            }\r\n            for (var i = 0; i < sample.length && i < maxLoop; i++) {\r\n                if ((result = detectValue(sample[i])) != null) {\r\n                    return result;\r\n                }\r\n            }\r\n        }\r\n        else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\r\n            var dataOriginal = data;\r\n            for (var i = 0; i < dataOriginal.length && i < maxLoop; i++) {\r\n                var item = dataOriginal[i];\r\n                var val = getDataItemValue(item);\r\n                if (!isArray(val)) {\r\n                    return BE_ORDINAL.Not;\r\n                }\r\n                if ((result = detectValue(val[dimIndex])) != null) {\r\n                    return result;\r\n                }\r\n            }\r\n        }\r\n        function detectValue(val) {\r\n            var beStr = isString(val);\r\n            if (val != null && isFinite(val) && val !== '') {\r\n                return beStr ? BE_ORDINAL.Might : BE_ORDINAL.Not;\r\n            }\r\n            else if (beStr && val !== '-') {\r\n                return BE_ORDINAL.Must;\r\n            }\r\n        }\r\n        return BE_ORDINAL.Not;\r\n    }\n\n    var internalOptionCreatorMap = createHashMap();\r\n    function concatInternalOptions(ecModel, mainType, newCmptOptionList) {\r\n        var internalOptionCreator = internalOptionCreatorMap.get(mainType);\r\n        if (!internalOptionCreator) {\r\n            return newCmptOptionList;\r\n        }\r\n        var internalOptions = internalOptionCreator(ecModel);\r\n        if (!internalOptions) {\r\n            return newCmptOptionList;\r\n        }\r\n        if (__DEV__) {\r\n            for (var i = 0; i < internalOptions.length; i++) {\r\n                assert(isComponentIdInternal(internalOptions[i]));\r\n            }\r\n        }\r\n        return newCmptOptionList.concat(internalOptions);\r\n    }\n\n    var reCreateSeriesIndices;\r\n    var assertSeriesInitialized;\r\n    var initBase;\r\n    var OPTION_INNER_KEY = '\\0_ec_inner';\r\n    var GlobalModel = (function (_super) {\r\n        __extends(GlobalModel, _super);\r\n        function GlobalModel() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        GlobalModel.prototype.init = function (option, parentModel, ecModel, theme, locale, optionManager) {\r\n            theme = theme || {};\r\n            this.option = null;\r\n            this._theme = new Model(theme);\r\n            this._locale = new Model(locale);\r\n            this._optionManager = optionManager;\r\n        };\r\n        GlobalModel.prototype.setOption = function (option, opts, optionPreprocessorFuncs) {\r\n            assert(!(OPTION_INNER_KEY in option), 'please use chart.getOption()');\r\n            var innerOpt = normalizeReplaceMergeInput(opts);\r\n            this._optionManager.setOption(option, optionPreprocessorFuncs, innerOpt);\r\n            this._resetOption(null, innerOpt);\r\n        };\r\n        GlobalModel.prototype.resetOption = function (type, opt) {\r\n            return this._resetOption(type, normalizeReplaceMergeInput(opt));\r\n        };\r\n        GlobalModel.prototype._resetOption = function (type, opt) {\r\n            var optionChanged = false;\r\n            var optionManager = this._optionManager;\r\n            if (!type || type === 'recreate') {\r\n                var baseOption = optionManager.mountOption(type === 'recreate');\r\n                if (!this.option || type === 'recreate') {\r\n                    initBase(this, baseOption);\r\n                }\r\n                else {\r\n                    this.restoreData();\r\n                    this._mergeOption(baseOption, opt);\r\n                }\r\n                optionChanged = true;\r\n            }\r\n            if (type === 'timeline' || type === 'media') {\r\n                this.restoreData();\r\n            }\r\n            if (!type || type === 'recreate' || type === 'timeline') {\r\n                var timelineOption = optionManager.getTimelineOption(this);\r\n                if (timelineOption) {\r\n                    optionChanged = true;\r\n                    this._mergeOption(timelineOption, opt);\r\n                }\r\n            }\r\n            if (!type || type === 'recreate' || type === 'media') {\r\n                var mediaOptions = optionManager.getMediaOption(this);\r\n                if (mediaOptions.length) {\r\n                    each(mediaOptions, function (mediaOption) {\r\n                        optionChanged = true;\r\n                        this._mergeOption(mediaOption, opt);\r\n                    }, this);\r\n                }\r\n            }\r\n            return optionChanged;\r\n        };\r\n        GlobalModel.prototype.mergeOption = function (option) {\r\n            this._mergeOption(option, null);\r\n        };\r\n        GlobalModel.prototype._mergeOption = function (newOption, opt) {\r\n            var option = this.option;\r\n            var componentsMap = this._componentsMap;\r\n            var componentsCount = this._componentsCount;\r\n            var newCmptTypes = [];\r\n            var newCmptTypeMap = createHashMap();\r\n            var replaceMergeMainTypeMap = opt && opt.replaceMergeMainTypeMap;\r\n            resetSourceDefaulter(this);\r\n            each(newOption, function (componentOption, mainType) {\r\n                if (componentOption == null) {\r\n                    return;\r\n                }\r\n                if (!ComponentModel.hasClass(mainType)) {\r\n                    option[mainType] = option[mainType] == null\r\n                        ? clone(componentOption)\r\n                        : merge(option[mainType], componentOption, true);\r\n                }\r\n                else if (mainType) {\r\n                    newCmptTypes.push(mainType);\r\n                    newCmptTypeMap.set(mainType, true);\r\n                }\r\n            });\r\n            if (replaceMergeMainTypeMap) {\r\n                replaceMergeMainTypeMap.each(function (val, mainTypeInReplaceMerge) {\r\n                    if (!newCmptTypeMap.get(mainTypeInReplaceMerge)) {\r\n                        newCmptTypes.push(mainTypeInReplaceMerge);\r\n                        newCmptTypeMap.set(mainTypeInReplaceMerge, true);\r\n                    }\r\n                });\r\n            }\r\n            ComponentModel.topologicalTravel(newCmptTypes, ComponentModel.getAllClassMainTypes(), visitComponent, this);\r\n            function visitComponent(mainType) {\r\n                var newCmptOptionList = concatInternalOptions(this, mainType, normalizeToArray(newOption[mainType]));\r\n                var oldCmptList = componentsMap.get(mainType);\r\n                var mergeMode = !oldCmptList ? 'replaceAll'\r\n                    : (replaceMergeMainTypeMap && replaceMergeMainTypeMap.get(mainType)) ? 'replaceMerge'\r\n                        : 'normalMerge';\r\n                var mappingResult = mappingToExists(oldCmptList, newCmptOptionList, mergeMode);\r\n                setComponentTypeToKeyInfo(mappingResult, mainType, ComponentModel);\r\n                option[mainType] = null;\r\n                componentsMap.set(mainType, null);\r\n                componentsCount.set(mainType, 0);\r\n                var optionsByMainType = [];\r\n                var cmptsByMainType = [];\r\n                var cmptsCountByMainType = 0;\r\n                each(mappingResult, function (resultItem, index) {\r\n                    var componentModel = resultItem.existing;\r\n                    var newCmptOption = resultItem.newOption;\r\n                    if (!newCmptOption) {\r\n                        if (componentModel) {\r\n                            componentModel.mergeOption({}, this);\r\n                            componentModel.optionUpdated({}, false);\r\n                        }\r\n                    }\r\n                    else {\r\n                        var ComponentModelClass = ComponentModel.getClass(mainType, resultItem.keyInfo.subType, true);\r\n                        if (componentModel && componentModel.constructor === ComponentModelClass) {\r\n                            componentModel.name = resultItem.keyInfo.name;\r\n                            componentModel.mergeOption(newCmptOption, this);\r\n                            componentModel.optionUpdated(newCmptOption, false);\r\n                        }\r\n                        else {\r\n                            var extraOpt = extend({\r\n                                componentIndex: index\r\n                            }, resultItem.keyInfo);\r\n                            componentModel = new ComponentModelClass(newCmptOption, this, this, extraOpt);\r\n                            extend(componentModel, extraOpt);\r\n                            if (resultItem.brandNew) {\r\n                                componentModel.__requireNewView = true;\r\n                            }\r\n                            componentModel.init(newCmptOption, this, this);\r\n                            componentModel.optionUpdated(null, true);\r\n                        }\r\n                    }\r\n                    if (componentModel) {\r\n                        optionsByMainType.push(componentModel.option);\r\n                        cmptsByMainType.push(componentModel);\r\n                        cmptsCountByMainType++;\r\n                    }\r\n                    else {\r\n                        optionsByMainType.push(void 0);\r\n                        cmptsByMainType.push(void 0);\r\n                    }\r\n                }, this);\r\n                option[mainType] = optionsByMainType;\r\n                componentsMap.set(mainType, cmptsByMainType);\r\n                componentsCount.set(mainType, cmptsCountByMainType);\r\n                if (mainType === 'series') {\r\n                    reCreateSeriesIndices(this);\r\n                }\r\n            }\r\n            if (!this._seriesIndices) {\r\n                reCreateSeriesIndices(this);\r\n            }\r\n        };\r\n        GlobalModel.prototype.getOption = function () {\r\n            var option = clone(this.option);\r\n            each(option, function (optInMainType, mainType) {\r\n                if (ComponentModel.hasClass(mainType)) {\r\n                    var opts = normalizeToArray(optInMainType);\r\n                    var realLen = opts.length;\r\n                    var metNonInner = false;\r\n                    for (var i = realLen - 1; i >= 0; i--) {\r\n                        if (opts[i] && !isComponentIdInternal(opts[i])) {\r\n                            metNonInner = true;\r\n                        }\r\n                        else {\r\n                            opts[i] = null;\r\n                            !metNonInner && realLen--;\r\n                        }\r\n                    }\r\n                    opts.length = realLen;\r\n                    option[mainType] = opts;\r\n                }\r\n            });\r\n            delete option[OPTION_INNER_KEY];\r\n            return option;\r\n        };\r\n        GlobalModel.prototype.getTheme = function () {\r\n            return this._theme;\r\n        };\r\n        GlobalModel.prototype.getLocaleModel = function () {\r\n            return this._locale;\r\n        };\r\n        GlobalModel.prototype.getLocale = function (localePosition) {\r\n            var locale = this.getLocaleModel();\r\n            return locale.get(localePosition);\r\n        };\r\n        GlobalModel.prototype.setUpdatePayload = function (payload) {\r\n            this._payload = payload;\r\n        };\r\n        GlobalModel.prototype.getUpdatePayload = function () {\r\n            return this._payload;\r\n        };\r\n        GlobalModel.prototype.getComponent = function (mainType, idx) {\r\n            var list = this._componentsMap.get(mainType);\r\n            if (list) {\r\n                var cmpt = list[idx || 0];\r\n                if (cmpt) {\r\n                    return cmpt;\r\n                }\r\n                else if (idx == null) {\r\n                    for (var i = 0; i < list.length; i++) {\r\n                        if (list[i]) {\r\n                            return list[i];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        GlobalModel.prototype.queryComponents = function (condition) {\r\n            var mainType = condition.mainType;\r\n            if (!mainType) {\r\n                return [];\r\n            }\r\n            var index = condition.index;\r\n            var id = condition.id;\r\n            var name = condition.name;\r\n            var cmpts = this._componentsMap.get(mainType);\r\n            if (!cmpts || !cmpts.length) {\r\n                return [];\r\n            }\r\n            var result;\r\n            if (index != null) {\r\n                result = [];\r\n                each(normalizeToArray(index), function (idx) {\r\n                    cmpts[idx] && result.push(cmpts[idx]);\r\n                });\r\n            }\r\n            else if (id != null) {\r\n                result = queryByIdOrName('id', id, cmpts);\r\n            }\r\n            else if (name != null) {\r\n                result = queryByIdOrName('name', name, cmpts);\r\n            }\r\n            else {\r\n                result = filter(cmpts, function (cmpt) { return !!cmpt; });\r\n            }\r\n            return filterBySubType(result, condition);\r\n        };\r\n        GlobalModel.prototype.findComponents = function (condition) {\r\n            var query = condition.query;\r\n            var mainType = condition.mainType;\r\n            var queryCond = getQueryCond(query);\r\n            var result = queryCond\r\n                ? this.queryComponents(queryCond)\r\n                : filter(this._componentsMap.get(mainType), function (cmpt) { return !!cmpt; });\r\n            return doFilter(filterBySubType(result, condition));\r\n            function getQueryCond(q) {\r\n                var indexAttr = mainType + 'Index';\r\n                var idAttr = mainType + 'Id';\r\n                var nameAttr = mainType + 'Name';\r\n                return q && (q[indexAttr] != null\r\n                    || q[idAttr] != null\r\n                    || q[nameAttr] != null)\r\n                    ? {\r\n                        mainType: mainType,\r\n                        index: q[indexAttr],\r\n                        id: q[idAttr],\r\n                        name: q[nameAttr]\r\n                    }\r\n                    : null;\r\n            }\r\n            function doFilter(res) {\r\n                return condition.filter\r\n                    ? filter(res, condition.filter)\r\n                    : res;\r\n            }\r\n        };\r\n        GlobalModel.prototype.eachComponent = function (mainType, cb, context) {\r\n            var componentsMap = this._componentsMap;\r\n            if (isFunction(mainType)) {\r\n                var ctxForAll_1 = cb;\r\n                var cbForAll_1 = mainType;\r\n                componentsMap.each(function (cmpts, componentType) {\r\n                    for (var i = 0; cmpts && i < cmpts.length; i++) {\r\n                        var cmpt = cmpts[i];\r\n                        cmpt && cbForAll_1.call(ctxForAll_1, componentType, cmpt, cmpt.componentIndex);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                var cmpts = isString(mainType)\r\n                    ? componentsMap.get(mainType)\r\n                    : isObject(mainType)\r\n                        ? this.findComponents(mainType)\r\n                        : null;\r\n                for (var i = 0; cmpts && i < cmpts.length; i++) {\r\n                    var cmpt = cmpts[i];\r\n                    cmpt && cb.call(context, cmpt, cmpt.componentIndex);\r\n                }\r\n            }\r\n        };\r\n        GlobalModel.prototype.getSeriesByName = function (name) {\r\n            return filter(this._componentsMap.get('series'), function (oneSeries) { return !!oneSeries && oneSeries.name === name; });\r\n        };\r\n        GlobalModel.prototype.getSeriesByIndex = function (seriesIndex) {\r\n            return this._componentsMap.get('series')[seriesIndex];\r\n        };\r\n        GlobalModel.prototype.getSeriesByType = function (subType) {\r\n            return filter(this._componentsMap.get('series'), function (oneSeries) { return !!oneSeries && oneSeries.subType === subType; });\r\n        };\r\n        GlobalModel.prototype.getSeries = function () {\r\n            return filter(this._componentsMap.get('series').slice(), function (oneSeries) { return !!oneSeries; });\r\n        };\r\n        GlobalModel.prototype.getSeriesCount = function () {\r\n            return this._componentsCount.get('series');\r\n        };\r\n        GlobalModel.prototype.eachSeries = function (cb, context) {\r\n            assertSeriesInitialized(this);\r\n            each(this._seriesIndices, function (rawSeriesIndex) {\r\n                var series = this._componentsMap.get('series')[rawSeriesIndex];\r\n                cb.call(context, series, rawSeriesIndex);\r\n            }, this);\r\n        };\r\n        GlobalModel.prototype.eachRawSeries = function (cb, context) {\r\n            each(this._componentsMap.get('series'), function (series) {\r\n                series && cb.call(context, series, series.componentIndex);\r\n            });\r\n        };\r\n        GlobalModel.prototype.eachSeriesByType = function (subType, cb, context) {\r\n            assertSeriesInitialized(this);\r\n            each(this._seriesIndices, function (rawSeriesIndex) {\r\n                var series = this._componentsMap.get('series')[rawSeriesIndex];\r\n                if (series.subType === subType) {\r\n                    cb.call(context, series, rawSeriesIndex);\r\n                }\r\n            }, this);\r\n        };\r\n        GlobalModel.prototype.eachRawSeriesByType = function (subType, cb, context) {\r\n            return each(this.getSeriesByType(subType), cb, context);\r\n        };\r\n        GlobalModel.prototype.isSeriesFiltered = function (seriesModel) {\r\n            assertSeriesInitialized(this);\r\n            return this._seriesIndicesMap.get(seriesModel.componentIndex) == null;\r\n        };\r\n        GlobalModel.prototype.getCurrentSeriesIndices = function () {\r\n            return (this._seriesIndices || []).slice();\r\n        };\r\n        GlobalModel.prototype.filterSeries = function (cb, context) {\r\n            assertSeriesInitialized(this);\r\n            var newSeriesIndices = [];\r\n            each(this._seriesIndices, function (seriesRawIdx) {\r\n                var series = this._componentsMap.get('series')[seriesRawIdx];\r\n                cb.call(context, series, seriesRawIdx) && newSeriesIndices.push(seriesRawIdx);\r\n            }, this);\r\n            this._seriesIndices = newSeriesIndices;\r\n            this._seriesIndicesMap = createHashMap(newSeriesIndices);\r\n        };\r\n        GlobalModel.prototype.restoreData = function (payload) {\r\n            reCreateSeriesIndices(this);\r\n            var componentsMap = this._componentsMap;\r\n            var componentTypes = [];\r\n            componentsMap.each(function (components, componentType) {\r\n                componentTypes.push(componentType);\r\n            });\r\n            ComponentModel.topologicalTravel(componentTypes, ComponentModel.getAllClassMainTypes(), function (componentType) {\r\n                each(componentsMap.get(componentType), function (component) {\r\n                    if (component\r\n                        && (componentType !== 'series'\r\n                            || !isNotTargetSeries(component, payload))) {\r\n                        component.restoreData();\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GlobalModel.internalField = (function () {\r\n            reCreateSeriesIndices = function (ecModel) {\r\n                var seriesIndices = ecModel._seriesIndices = [];\r\n                each(ecModel._componentsMap.get('series'), function (series) {\r\n                    series && seriesIndices.push(series.componentIndex);\r\n                });\r\n                ecModel._seriesIndicesMap = createHashMap(seriesIndices);\r\n            };\r\n            assertSeriesInitialized = function (ecModel) {\r\n                if (__DEV__) {\r\n                    if (!ecModel._seriesIndices) {\r\n                        throw new Error('Option should contains series.');\r\n                    }\r\n                }\r\n            };\r\n            initBase = function (ecModel, baseOption) {\r\n                ecModel.option = {};\r\n                ecModel.option[OPTION_INNER_KEY] = 1;\r\n                ecModel._componentsMap = createHashMap({ series: [] });\r\n                ecModel._componentsCount = createHashMap();\r\n                mergeTheme(baseOption, ecModel._theme.option);\r\n                merge(baseOption, globalDefault, false);\r\n                ecModel._mergeOption(baseOption, null);\r\n            };\r\n        })();\r\n        return GlobalModel;\r\n    }(Model));\r\n    function isNotTargetSeries(seriesModel, payload) {\r\n        if (payload) {\r\n            var index = payload.seriesIndex;\r\n            var id = payload.seriesId;\r\n            var name_1 = payload.seriesName;\r\n            return (index != null && seriesModel.componentIndex !== index)\r\n                || (id != null && seriesModel.id !== id)\r\n                || (name_1 != null && seriesModel.name !== name_1);\r\n        }\r\n    }\r\n    function mergeTheme(option, theme) {\r\n        var notMergeColorLayer = option.color && !option.colorLayer;\r\n        each(theme, function (themeItem, name) {\r\n            if (name === 'colorLayer' && notMergeColorLayer) {\r\n                return;\r\n            }\r\n            if (!ComponentModel.hasClass(name)) {\r\n                if (typeof themeItem === 'object') {\r\n                    option[name] = !option[name]\r\n                        ? clone(themeItem)\r\n                        : merge(option[name], themeItem, false);\r\n                }\r\n                else {\r\n                    if (option[name] == null) {\r\n                        option[name] = themeItem;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    function queryByIdOrName(attr, idOrName, cmpts) {\r\n        if (isArray(idOrName)) {\r\n            var keyMap_1 = createHashMap(idOrName);\r\n            each(idOrName, function (idOrNameItem) {\r\n                if (idOrNameItem != null) {\r\n                    validateIdOrName(idOrNameItem);\r\n                    keyMap_1.set(idOrNameItem, true);\r\n                }\r\n            });\r\n            return filter(cmpts, function (cmpt) { return cmpt && keyMap_1.get(cmpt[attr]); });\r\n        }\r\n        else {\r\n            validateIdOrName(idOrName);\r\n            return filter(cmpts, function (cmpt) { return cmpt && cmpt[attr] === idOrName + ''; });\r\n        }\r\n    }\r\n    function filterBySubType(components, condition) {\r\n        return condition.hasOwnProperty('subType')\r\n            ? filter(components, function (cmpt) { return cmpt && cmpt.subType === condition.subType; })\r\n            : components;\r\n    }\r\n    function normalizeReplaceMergeInput(opts) {\r\n        var replaceMergeMainTypeMap = createHashMap();\r\n        opts && each(normalizeToArray(opts.replaceMerge), function (mainType) {\r\n            if (__DEV__) {\r\n                assert(ComponentModel.hasClass(mainType), '\"' + mainType + '\" is not valid component main type in \"replaceMerge\"');\r\n            }\r\n            replaceMergeMainTypeMap.set(mainType, true);\r\n        });\r\n        return {\r\n            replaceMergeMainTypeMap: replaceMergeMainTypeMap\r\n        };\r\n    }\r\n    mixin(GlobalModel, ColorPaletteMixin);\n\n    var availableMethods = [\r\n        'getDom',\r\n        'getZr',\r\n        'getWidth',\r\n        'getHeight',\r\n        'getDevicePixelRatio',\r\n        'dispatchAction',\r\n        'isDisposed',\r\n        'on',\r\n        'off',\r\n        'getDataURL',\r\n        'getConnectedDataURL',\r\n        'getModel',\r\n        'getOption',\r\n        'getViewOfComponentModel',\r\n        'getViewOfSeriesModel',\r\n        'getId',\r\n        'updateLabelLayout'\r\n    ];\r\n    var ExtensionAPI = (function () {\r\n        function ExtensionAPI(ecInstance) {\r\n            each(availableMethods, function (methodName) {\r\n                this[methodName] = bind(ecInstance[methodName], ecInstance);\r\n            }, this);\r\n        }\r\n        return ExtensionAPI;\r\n    }());\n\n    var coordinateSystemCreators = {};\r\n    var CoordinateSystemManager = (function () {\r\n        function CoordinateSystemManager() {\r\n            this._coordinateSystems = [];\r\n        }\r\n        CoordinateSystemManager.prototype.create = function (ecModel, api) {\r\n            var coordinateSystems = [];\r\n            each(coordinateSystemCreators, function (creater, type) {\r\n                var list = creater.create(ecModel, api);\r\n                coordinateSystems = coordinateSystems.concat(list || []);\r\n            });\r\n            this._coordinateSystems = coordinateSystems;\r\n        };\r\n        CoordinateSystemManager.prototype.update = function (ecModel, api) {\r\n            each(this._coordinateSystems, function (coordSys) {\r\n                coordSys.update && coordSys.update(ecModel, api);\r\n            });\r\n        };\r\n        CoordinateSystemManager.prototype.getCoordinateSystems = function () {\r\n            return this._coordinateSystems.slice();\r\n        };\r\n        CoordinateSystemManager.register = function (type, creator) {\r\n            coordinateSystemCreators[type] = creator;\r\n        };\r\n        CoordinateSystemManager.get = function (type) {\r\n            return coordinateSystemCreators[type];\r\n        };\r\n        return CoordinateSystemManager;\r\n    }());\n\n    var QUERY_REG = /^(min|max)?(.+)$/;\r\n    var OptionManager = (function () {\r\n        function OptionManager(api) {\r\n            this._timelineOptions = [];\r\n            this._mediaList = [];\r\n            this._currentMediaIndices = [];\r\n            this._api = api;\r\n        }\r\n        OptionManager.prototype.setOption = function (rawOption, optionPreprocessorFuncs, opt) {\r\n            if (rawOption) {\r\n                each(normalizeToArray(rawOption.series), function (series) {\r\n                    series && series.data && isTypedArray(series.data) && setAsPrimitive(series.data);\r\n                });\r\n                each(normalizeToArray(rawOption.dataset), function (dataset) {\r\n                    dataset && dataset.source && isTypedArray(dataset.source) && setAsPrimitive(dataset.source);\r\n                });\r\n            }\r\n            rawOption = clone(rawOption);\r\n            var optionBackup = this._optionBackup;\r\n            var newParsedOption = parseRawOption(rawOption, optionPreprocessorFuncs, !optionBackup);\r\n            this._newBaseOption = newParsedOption.baseOption;\r\n            if (optionBackup) {\r\n                if (newParsedOption.timelineOptions.length) {\r\n                    optionBackup.timelineOptions = newParsedOption.timelineOptions;\r\n                }\r\n                if (newParsedOption.mediaList.length) {\r\n                    optionBackup.mediaList = newParsedOption.mediaList;\r\n                }\r\n                if (newParsedOption.mediaDefault) {\r\n                    optionBackup.mediaDefault = newParsedOption.mediaDefault;\r\n                }\r\n            }\r\n            else {\r\n                this._optionBackup = newParsedOption;\r\n            }\r\n        };\r\n        OptionManager.prototype.mountOption = function (isRecreate) {\r\n            var optionBackup = this._optionBackup;\r\n            this._timelineOptions = optionBackup.timelineOptions;\r\n            this._mediaList = optionBackup.mediaList;\r\n            this._mediaDefault = optionBackup.mediaDefault;\r\n            this._currentMediaIndices = [];\r\n            return clone(isRecreate\r\n                ? optionBackup.baseOption : this._newBaseOption);\r\n        };\r\n        OptionManager.prototype.getTimelineOption = function (ecModel) {\r\n            var option;\r\n            var timelineOptions = this._timelineOptions;\r\n            if (timelineOptions.length) {\r\n                var timelineModel = ecModel.getComponent('timeline');\r\n                if (timelineModel) {\r\n                    option = clone(timelineOptions[timelineModel.getCurrentIndex()]);\r\n                }\r\n            }\r\n            return option;\r\n        };\r\n        OptionManager.prototype.getMediaOption = function (ecModel) {\r\n            var ecWidth = this._api.getWidth();\r\n            var ecHeight = this._api.getHeight();\r\n            var mediaList = this._mediaList;\r\n            var mediaDefault = this._mediaDefault;\r\n            var indices = [];\r\n            var result = [];\r\n            if (!mediaList.length && !mediaDefault) {\r\n                return result;\r\n            }\r\n            for (var i = 0, len = mediaList.length; i < len; i++) {\r\n                if (applyMediaQuery(mediaList[i].query, ecWidth, ecHeight)) {\r\n                    indices.push(i);\r\n                }\r\n            }\r\n            if (!indices.length && mediaDefault) {\r\n                indices = [-1];\r\n            }\r\n            if (indices.length && !indicesEquals(indices, this._currentMediaIndices)) {\r\n                result = map(indices, function (index) {\r\n                    return clone(index === -1 ? mediaDefault.option : mediaList[index].option);\r\n                });\r\n            }\r\n            this._currentMediaIndices = indices;\r\n            return result;\r\n        };\r\n        return OptionManager;\r\n    }());\r\n    function parseRawOption(rawOption, optionPreprocessorFuncs, isNew) {\r\n        var mediaList = [];\r\n        var mediaDefault;\r\n        var baseOption;\r\n        var declaredBaseOption = rawOption.baseOption;\r\n        var timelineOnRoot = rawOption.timeline;\r\n        var timelineOptionsOnRoot = rawOption.options;\r\n        var mediaOnRoot = rawOption.media;\r\n        var hasMedia = !!rawOption.media;\r\n        var hasTimeline = !!(timelineOptionsOnRoot || timelineOnRoot || (declaredBaseOption && declaredBaseOption.timeline));\r\n        if (declaredBaseOption) {\r\n            baseOption = declaredBaseOption;\r\n            if (!baseOption.timeline) {\r\n                baseOption.timeline = timelineOnRoot;\r\n            }\r\n        }\r\n        else {\r\n            if (hasTimeline || hasMedia) {\r\n                rawOption.options = rawOption.media = null;\r\n            }\r\n            baseOption = rawOption;\r\n        }\r\n        if (hasMedia) {\r\n            each(mediaOnRoot, function (singleMedia) {\r\n                if (singleMedia && singleMedia.option) {\r\n                    if (singleMedia.query) {\r\n                        mediaList.push(singleMedia);\r\n                    }\r\n                    else if (!mediaDefault) {\r\n                        mediaDefault = singleMedia;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        doPreprocess(baseOption);\r\n        each(timelineOptionsOnRoot, function (option) { return doPreprocess(option); });\r\n        each(mediaList, function (media) { return doPreprocess(media.option); });\r\n        function doPreprocess(option) {\r\n            each(optionPreprocessorFuncs, function (preProcess) {\r\n                preProcess(option, isNew);\r\n            });\r\n        }\r\n        return {\r\n            baseOption: baseOption,\r\n            timelineOptions: timelineOptionsOnRoot || [],\r\n            mediaDefault: mediaDefault,\r\n            mediaList: mediaList\r\n        };\r\n    }\r\n    function applyMediaQuery(query, ecWidth, ecHeight) {\r\n        var realMap = {\r\n            width: ecWidth,\r\n            height: ecHeight,\r\n            aspectratio: ecWidth / ecHeight\r\n        };\r\n        var applicatable = true;\r\n        each(query, function (value, attr) {\r\n            var matched = attr.match(QUERY_REG);\r\n            if (!matched || !matched[1] || !matched[2]) {\r\n                return;\r\n            }\r\n            var operator = matched[1];\r\n            var realAttr = matched[2].toLowerCase();\r\n            if (!compare(realMap[realAttr], value, operator)) {\r\n                applicatable = false;\r\n            }\r\n        });\r\n        return applicatable;\r\n    }\r\n    function compare(real, expect, operator) {\r\n        if (operator === 'min') {\r\n            return real >= expect;\r\n        }\r\n        else if (operator === 'max') {\r\n            return real <= expect;\r\n        }\r\n        else {\r\n            return real === expect;\r\n        }\r\n    }\r\n    function indicesEquals(indices1, indices2) {\r\n        return indices1.join(',') === indices2.join(',');\r\n    }\n\n    var each$2 = each;\r\n    var isObject$1 = isObject;\r\n    var POSSIBLE_STYLES = [\r\n        'areaStyle', 'lineStyle', 'nodeStyle', 'linkStyle',\r\n        'chordStyle', 'label', 'labelLine'\r\n    ];\r\n    function compatEC2ItemStyle(opt) {\r\n        var itemStyleOpt = opt && opt.itemStyle;\r\n        if (!itemStyleOpt) {\r\n            return;\r\n        }\r\n        for (var i = 0, len = POSSIBLE_STYLES.length; i < len; i++) {\r\n            var styleName = POSSIBLE_STYLES[i];\r\n            var normalItemStyleOpt = itemStyleOpt.normal;\r\n            var emphasisItemStyleOpt = itemStyleOpt.emphasis;\r\n            if (normalItemStyleOpt && normalItemStyleOpt[styleName]) {\r\n                if (__DEV__) {\r\n                    deprecateReplaceLog(\"itemStyle.normal.\" + styleName, styleName);\r\n                }\r\n                opt[styleName] = opt[styleName] || {};\r\n                if (!opt[styleName].normal) {\r\n                    opt[styleName].normal = normalItemStyleOpt[styleName];\r\n                }\r\n                else {\r\n                    merge(opt[styleName].normal, normalItemStyleOpt[styleName]);\r\n                }\r\n                normalItemStyleOpt[styleName] = null;\r\n            }\r\n            if (emphasisItemStyleOpt && emphasisItemStyleOpt[styleName]) {\r\n                if (__DEV__) {\r\n                    deprecateReplaceLog(\"itemStyle.emphasis.\" + styleName, \"emphasis.\" + styleName);\r\n                }\r\n                opt[styleName] = opt[styleName] || {};\r\n                if (!opt[styleName].emphasis) {\r\n                    opt[styleName].emphasis = emphasisItemStyleOpt[styleName];\r\n                }\r\n                else {\r\n                    merge(opt[styleName].emphasis, emphasisItemStyleOpt[styleName]);\r\n                }\r\n                emphasisItemStyleOpt[styleName] = null;\r\n            }\r\n        }\r\n    }\r\n    function convertNormalEmphasis(opt, optType, useExtend) {\r\n        if (opt && opt[optType] && (opt[optType].normal || opt[optType].emphasis)) {\r\n            var normalOpt = opt[optType].normal;\r\n            var emphasisOpt = opt[optType].emphasis;\r\n            if (normalOpt) {\r\n                if (__DEV__) {\r\n                    deprecateLog(\"'normal' hierarchy in \" + optType + \" has been removed since 4.0. All style properties are configured in \" + optType + \" directly now.\");\r\n                }\r\n                if (useExtend) {\r\n                    opt[optType].normal = opt[optType].emphasis = null;\r\n                    defaults(opt[optType], normalOpt);\r\n                }\r\n                else {\r\n                    opt[optType] = normalOpt;\r\n                }\r\n            }\r\n            if (emphasisOpt) {\r\n                if (__DEV__) {\r\n                    deprecateLog(optType + \".emphasis has been changed to emphasis.\" + optType + \" since 4.0\");\r\n                }\r\n                opt.emphasis = opt.emphasis || {};\r\n                opt.emphasis[optType] = emphasisOpt;\r\n                if (emphasisOpt.focus) {\r\n                    opt.emphasis.focus = emphasisOpt.focus;\r\n                }\r\n                if (emphasisOpt.blurScope) {\r\n                    opt.emphasis.blurScope = emphasisOpt.blurScope;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function removeEC3NormalStatus(opt) {\r\n        convertNormalEmphasis(opt, 'itemStyle');\r\n        convertNormalEmphasis(opt, 'lineStyle');\r\n        convertNormalEmphasis(opt, 'areaStyle');\r\n        convertNormalEmphasis(opt, 'label');\r\n        convertNormalEmphasis(opt, 'labelLine');\r\n        convertNormalEmphasis(opt, 'upperLabel');\r\n        convertNormalEmphasis(opt, 'edgeLabel');\r\n    }\r\n    function compatTextStyle(opt, propName) {\r\n        var labelOptSingle = isObject$1(opt) && opt[propName];\r\n        var textStyle = isObject$1(labelOptSingle) && labelOptSingle.textStyle;\r\n        if (textStyle) {\r\n            if (__DEV__) {\r\n                deprecateLog(\"textStyle hierarchy in \" + propName + \" has been removed since 4.0. All textStyle properties are configured in \" + propName + \" directly now.\");\r\n            }\r\n            for (var i = 0, len = TEXT_STYLE_OPTIONS.length; i < len; i++) {\r\n                var textPropName = TEXT_STYLE_OPTIONS[i];\r\n                if (textStyle.hasOwnProperty(textPropName)) {\r\n                    labelOptSingle[textPropName] = textStyle[textPropName];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function compatEC3CommonStyles(opt) {\r\n        if (opt) {\r\n            removeEC3NormalStatus(opt);\r\n            compatTextStyle(opt, 'label');\r\n            opt.emphasis && compatTextStyle(opt.emphasis, 'label');\r\n        }\r\n    }\r\n    function processSeries(seriesOpt) {\r\n        if (!isObject$1(seriesOpt)) {\r\n            return;\r\n        }\r\n        compatEC2ItemStyle(seriesOpt);\r\n        removeEC3NormalStatus(seriesOpt);\r\n        compatTextStyle(seriesOpt, 'label');\r\n        compatTextStyle(seriesOpt, 'upperLabel');\r\n        compatTextStyle(seriesOpt, 'edgeLabel');\r\n        if (seriesOpt.emphasis) {\r\n            compatTextStyle(seriesOpt.emphasis, 'label');\r\n            compatTextStyle(seriesOpt.emphasis, 'upperLabel');\r\n            compatTextStyle(seriesOpt.emphasis, 'edgeLabel');\r\n        }\r\n        var markPoint = seriesOpt.markPoint;\r\n        if (markPoint) {\r\n            compatEC2ItemStyle(markPoint);\r\n            compatEC3CommonStyles(markPoint);\r\n        }\r\n        var markLine = seriesOpt.markLine;\r\n        if (markLine) {\r\n            compatEC2ItemStyle(markLine);\r\n            compatEC3CommonStyles(markLine);\r\n        }\r\n        var markArea = seriesOpt.markArea;\r\n        if (markArea) {\r\n            compatEC3CommonStyles(markArea);\r\n        }\r\n        var data = seriesOpt.data;\r\n        if (seriesOpt.type === 'graph') {\r\n            data = data || seriesOpt.nodes;\r\n            var edgeData = seriesOpt.links || seriesOpt.edges;\r\n            if (edgeData && !isTypedArray(edgeData)) {\r\n                for (var i = 0; i < edgeData.length; i++) {\r\n                    compatEC3CommonStyles(edgeData[i]);\r\n                }\r\n            }\r\n            each(seriesOpt.categories, function (opt) {\r\n                removeEC3NormalStatus(opt);\r\n            });\r\n        }\r\n        if (data && !isTypedArray(data)) {\r\n            for (var i = 0; i < data.length; i++) {\r\n                compatEC3CommonStyles(data[i]);\r\n            }\r\n        }\r\n        markPoint = seriesOpt.markPoint;\r\n        if (markPoint && markPoint.data) {\r\n            var mpData = markPoint.data;\r\n            for (var i = 0; i < mpData.length; i++) {\r\n                compatEC3CommonStyles(mpData[i]);\r\n            }\r\n        }\r\n        markLine = seriesOpt.markLine;\r\n        if (markLine && markLine.data) {\r\n            var mlData = markLine.data;\r\n            for (var i = 0; i < mlData.length; i++) {\r\n                if (isArray(mlData[i])) {\r\n                    compatEC3CommonStyles(mlData[i][0]);\r\n                    compatEC3CommonStyles(mlData[i][1]);\r\n                }\r\n                else {\r\n                    compatEC3CommonStyles(mlData[i]);\r\n                }\r\n            }\r\n        }\r\n        if (seriesOpt.type === 'gauge') {\r\n            compatTextStyle(seriesOpt, 'axisLabel');\r\n            compatTextStyle(seriesOpt, 'title');\r\n            compatTextStyle(seriesOpt, 'detail');\r\n        }\r\n        else if (seriesOpt.type === 'treemap') {\r\n            convertNormalEmphasis(seriesOpt.breadcrumb, 'itemStyle');\r\n            each(seriesOpt.levels, function (opt) {\r\n                removeEC3NormalStatus(opt);\r\n            });\r\n        }\r\n        else if (seriesOpt.type === 'tree') {\r\n            removeEC3NormalStatus(seriesOpt.leaves);\r\n        }\r\n    }\r\n    function toArr(o) {\r\n        return isArray(o) ? o : o ? [o] : [];\r\n    }\r\n    function toObj(o) {\r\n        return (isArray(o) ? o[0] : o) || {};\r\n    }\r\n    function compatStyle (option, isTheme) {\r\n        each$2(toArr(option.series), function (seriesOpt) {\r\n            isObject$1(seriesOpt) && processSeries(seriesOpt);\r\n        });\r\n        var axes = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'parallelAxis', 'radar'];\r\n        isTheme && axes.push('valueAxis', 'categoryAxis', 'logAxis', 'timeAxis');\r\n        each$2(axes, function (axisName) {\r\n            each$2(toArr(option[axisName]), function (axisOpt) {\r\n                if (axisOpt) {\r\n                    compatTextStyle(axisOpt, 'axisLabel');\r\n                    compatTextStyle(axisOpt.axisPointer, 'label');\r\n                }\r\n            });\r\n        });\r\n        each$2(toArr(option.parallel), function (parallelOpt) {\r\n            var parallelAxisDefault = parallelOpt && parallelOpt.parallelAxisDefault;\r\n            compatTextStyle(parallelAxisDefault, 'axisLabel');\r\n            compatTextStyle(parallelAxisDefault && parallelAxisDefault.axisPointer, 'label');\r\n        });\r\n        each$2(toArr(option.calendar), function (calendarOpt) {\r\n            convertNormalEmphasis(calendarOpt, 'itemStyle');\r\n            compatTextStyle(calendarOpt, 'dayLabel');\r\n            compatTextStyle(calendarOpt, 'monthLabel');\r\n            compatTextStyle(calendarOpt, 'yearLabel');\r\n        });\r\n        each$2(toArr(option.radar), function (radarOpt) {\r\n            compatTextStyle(radarOpt, 'name');\r\n            if (radarOpt.name && radarOpt.axisName == null) {\r\n                radarOpt.axisName = radarOpt.name;\r\n                delete radarOpt.name;\r\n                if (__DEV__) {\r\n                    deprecateLog('name property in radar component has been changed to axisName');\r\n                }\r\n            }\r\n            if (radarOpt.nameGap != null && radarOpt.axisNameGap == null) {\r\n                radarOpt.axisNameGap = radarOpt.nameGap;\r\n                delete radarOpt.nameGap;\r\n                if (__DEV__) {\r\n                    deprecateLog('nameGap property in radar component has been changed to axisNameGap');\r\n                }\r\n            }\r\n        });\r\n        each$2(toArr(option.geo), function (geoOpt) {\r\n            if (isObject$1(geoOpt)) {\r\n                compatEC3CommonStyles(geoOpt);\r\n                each$2(toArr(geoOpt.regions), function (regionObj) {\r\n                    compatEC3CommonStyles(regionObj);\r\n                });\r\n            }\r\n        });\r\n        each$2(toArr(option.timeline), function (timelineOpt) {\r\n            compatEC3CommonStyles(timelineOpt);\r\n            convertNormalEmphasis(timelineOpt, 'label');\r\n            convertNormalEmphasis(timelineOpt, 'itemStyle');\r\n            convertNormalEmphasis(timelineOpt, 'controlStyle', true);\r\n            var data = timelineOpt.data;\r\n            isArray(data) && each(data, function (item) {\r\n                if (isObject(item)) {\r\n                    convertNormalEmphasis(item, 'label');\r\n                    convertNormalEmphasis(item, 'itemStyle');\r\n                }\r\n            });\r\n        });\r\n        each$2(toArr(option.toolbox), function (toolboxOpt) {\r\n            convertNormalEmphasis(toolboxOpt, 'iconStyle');\r\n            each$2(toolboxOpt.feature, function (featureOpt) {\r\n                convertNormalEmphasis(featureOpt, 'iconStyle');\r\n            });\r\n        });\r\n        compatTextStyle(toObj(option.axisPointer), 'label');\r\n        compatTextStyle(toObj(option.tooltip).axisPointer, 'label');\r\n    }\n\n    function get(opt, path) {\r\n        var pathArr = path.split(',');\r\n        var obj = opt;\r\n        for (var i = 0; i < pathArr.length; i++) {\r\n            obj = obj && obj[pathArr[i]];\r\n            if (obj == null) {\r\n                break;\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n    function set(opt, path, val, overwrite) {\r\n        var pathArr = path.split(',');\r\n        var obj = opt;\r\n        var key;\r\n        var i = 0;\r\n        for (; i < pathArr.length - 1; i++) {\r\n            key = pathArr[i];\r\n            if (obj[key] == null) {\r\n                obj[key] = {};\r\n            }\r\n            obj = obj[key];\r\n        }\r\n        if (overwrite || obj[pathArr[i]] == null) {\r\n            obj[pathArr[i]] = val;\r\n        }\r\n    }\r\n    function compatLayoutProperties(option) {\r\n        option && each(LAYOUT_PROPERTIES, function (prop) {\r\n            if (prop[0] in option && !(prop[1] in option)) {\r\n                option[prop[1]] = option[prop[0]];\r\n            }\r\n        });\r\n    }\r\n    var LAYOUT_PROPERTIES = [\r\n        ['x', 'left'], ['y', 'top'], ['x2', 'right'], ['y2', 'bottom']\r\n    ];\r\n    var COMPATITABLE_COMPONENTS = [\r\n        'grid', 'geo', 'parallel', 'legend', 'toolbox', 'title', 'visualMap', 'dataZoom', 'timeline'\r\n    ];\r\n    var BAR_ITEM_STYLE_MAP = [\r\n        ['borderRadius', 'barBorderRadius'],\r\n        ['borderColor', 'barBorderColor'],\r\n        ['borderWidth', 'barBorderWidth']\r\n    ];\r\n    function compatBarItemStyle(option) {\r\n        var itemStyle = option && option.itemStyle;\r\n        if (itemStyle) {\r\n            for (var i = 0; i < BAR_ITEM_STYLE_MAP.length; i++) {\r\n                var oldName = BAR_ITEM_STYLE_MAP[i][1];\r\n                var newName = BAR_ITEM_STYLE_MAP[i][0];\r\n                if (itemStyle[oldName] != null) {\r\n                    itemStyle[newName] = itemStyle[oldName];\r\n                    if (__DEV__) {\r\n                        deprecateReplaceLog(oldName, newName);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function compatPieLabel(option) {\r\n        if (!option) {\r\n            return;\r\n        }\r\n        if (option.alignTo === 'edge' && option.margin != null && option.edgeDistance == null) {\r\n            if (__DEV__) {\r\n                deprecateReplaceLog('label.margin', 'label.edgeDistance', 'pie');\r\n            }\r\n            option.edgeDistance = option.margin;\r\n        }\r\n    }\r\n    function compatSunburstState(option) {\r\n        if (!option) {\r\n            return;\r\n        }\r\n        if (option.downplay && !option.blur) {\r\n            option.blur = option.downplay;\r\n            if (__DEV__) {\r\n                deprecateReplaceLog('downplay', 'blur', 'sunburst');\r\n            }\r\n        }\r\n    }\r\n    function compatGraphFocus(option) {\r\n        if (!option) {\r\n            return;\r\n        }\r\n        if (option.focusNodeAdjacency != null) {\r\n            option.emphasis = option.emphasis || {};\r\n            if (option.emphasis.focus == null) {\r\n                if (__DEV__) {\r\n                    deprecateReplaceLog('focusNodeAdjacency', 'emphasis: { focus: \\'adjacency\\'}', 'graph/sankey');\r\n                }\r\n                option.emphasis.focus = 'adjacency';\r\n            }\r\n        }\r\n    }\r\n    function traverseTree(data, cb) {\r\n        if (data) {\r\n            for (var i = 0; i < data.length; i++) {\r\n                cb(data[i]);\r\n                data[i] && traverseTree(data[i].children, cb);\r\n            }\r\n        }\r\n    }\r\n    function backwardCompat (option, isTheme) {\r\n        compatStyle(option, isTheme);\r\n        option.series = normalizeToArray(option.series);\r\n        each(option.series, function (seriesOpt) {\r\n            if (!isObject(seriesOpt)) {\r\n                return;\r\n            }\r\n            var seriesType = seriesOpt.type;\r\n            if (seriesType === 'line') {\r\n                if (seriesOpt.clipOverflow != null) {\r\n                    seriesOpt.clip = seriesOpt.clipOverflow;\r\n                    if (__DEV__) {\r\n                        deprecateReplaceLog('clipOverflow', 'clip', 'line');\r\n                    }\r\n                }\r\n            }\r\n            else if (seriesType === 'pie' || seriesType === 'gauge') {\r\n                if (seriesOpt.clockWise != null) {\r\n                    seriesOpt.clockwise = seriesOpt.clockWise;\r\n                    if (__DEV__) {\r\n                        deprecateReplaceLog('clockWise', 'clockwise');\r\n                    }\r\n                }\r\n                compatPieLabel(seriesOpt.label);\r\n                var data = seriesOpt.data;\r\n                if (data && !isTypedArray(data)) {\r\n                    for (var i = 0; i < data.length; i++) {\r\n                        compatPieLabel(data[i]);\r\n                    }\r\n                }\r\n                if (seriesOpt.hoverOffset != null) {\r\n                    seriesOpt.emphasis = seriesOpt.emphasis || {};\r\n                    if (seriesOpt.emphasis.scaleSize = null) {\r\n                        if (__DEV__) {\r\n                            deprecateReplaceLog('hoverOffset', 'emphasis.scaleSize');\r\n                        }\r\n                        seriesOpt.emphasis.scaleSize = seriesOpt.hoverOffset;\r\n                    }\r\n                }\r\n            }\r\n            else if (seriesType === 'gauge') {\r\n                var pointerColor = get(seriesOpt, 'pointer.color');\r\n                pointerColor != null\r\n                    && set(seriesOpt, 'itemStyle.color', pointerColor);\r\n            }\r\n            else if (seriesType === 'bar') {\r\n                compatBarItemStyle(seriesOpt);\r\n                compatBarItemStyle(seriesOpt.backgroundStyle);\r\n                compatBarItemStyle(seriesOpt.emphasis);\r\n                var data = seriesOpt.data;\r\n                if (data && !isTypedArray(data)) {\r\n                    for (var i = 0; i < data.length; i++) {\r\n                        if (typeof data[i] === 'object') {\r\n                            compatBarItemStyle(data[i]);\r\n                            compatBarItemStyle(data[i] && data[i].emphasis);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else if (seriesType === 'sunburst') {\r\n                var highlightPolicy = seriesOpt.highlightPolicy;\r\n                if (highlightPolicy) {\r\n                    seriesOpt.emphasis = seriesOpt.emphasis || {};\r\n                    if (!seriesOpt.emphasis.focus) {\r\n                        seriesOpt.emphasis.focus = highlightPolicy;\r\n                        if (__DEV__) {\r\n                            deprecateReplaceLog('highlightPolicy', 'emphasis.focus', 'sunburst');\r\n                        }\r\n                    }\r\n                }\r\n                compatSunburstState(seriesOpt);\r\n                traverseTree(seriesOpt.data, compatSunburstState);\r\n            }\r\n            else if (seriesType === 'graph' || seriesType === 'sankey') {\r\n                compatGraphFocus(seriesOpt);\r\n            }\r\n            else if (seriesType === 'map') {\r\n                if (seriesOpt.mapType && !seriesOpt.map) {\r\n                    if (__DEV__) {\r\n                        deprecateReplaceLog('mapType', 'map', 'map');\r\n                    }\r\n                    seriesOpt.map = seriesOpt.mapType;\r\n                }\r\n                if (seriesOpt.mapLocation) {\r\n                    if (__DEV__) {\r\n                        deprecateLog('`mapLocation` is not used anymore.');\r\n                    }\r\n                    defaults(seriesOpt, seriesOpt.mapLocation);\r\n                }\r\n            }\r\n            if (seriesOpt.hoverAnimation != null) {\r\n                seriesOpt.emphasis = seriesOpt.emphasis || {};\r\n                if (seriesOpt.emphasis && seriesOpt.emphasis.scale == null) {\r\n                    if (__DEV__) {\r\n                        deprecateReplaceLog('hoverAnimation', 'emphasis.scale');\r\n                    }\r\n                    seriesOpt.emphasis.scale = seriesOpt.hoverAnimation;\r\n                }\r\n            }\r\n            compatLayoutProperties(seriesOpt);\r\n        });\r\n        if (option.dataRange) {\r\n            option.visualMap = option.dataRange;\r\n        }\r\n        each(COMPATITABLE_COMPONENTS, function (componentName) {\r\n            var options = option[componentName];\r\n            if (options) {\r\n                if (!isArray(options)) {\r\n                    options = [options];\r\n                }\r\n                each(options, function (option) {\r\n                    compatLayoutProperties(option);\r\n                });\r\n            }\r\n        });\r\n    }\n\n    function dataStack (ecModel) {\r\n        var stackInfoMap = createHashMap();\r\n        ecModel.eachSeries(function (seriesModel) {\r\n            var stack = seriesModel.get('stack');\r\n            if (stack) {\r\n                var stackInfoList = stackInfoMap.get(stack) || stackInfoMap.set(stack, []);\r\n                var data = seriesModel.getData();\r\n                var stackInfo = {\r\n                    stackResultDimension: data.getCalculationInfo('stackResultDimension'),\r\n                    stackedOverDimension: data.getCalculationInfo('stackedOverDimension'),\r\n                    stackedDimension: data.getCalculationInfo('stackedDimension'),\r\n                    stackedByDimension: data.getCalculationInfo('stackedByDimension'),\r\n                    isStackedByIndex: data.getCalculationInfo('isStackedByIndex'),\r\n                    data: data,\r\n                    seriesModel: seriesModel\r\n                };\r\n                if (!stackInfo.stackedDimension\r\n                    || !(stackInfo.isStackedByIndex || stackInfo.stackedByDimension)) {\r\n                    return;\r\n                }\r\n                stackInfoList.length && data.setCalculationInfo('stackedOnSeries', stackInfoList[stackInfoList.length - 1].seriesModel);\r\n                stackInfoList.push(stackInfo);\r\n            }\r\n        });\r\n        stackInfoMap.each(calculateStack);\r\n    }\r\n    function calculateStack(stackInfoList) {\r\n        each(stackInfoList, function (targetStackInfo, idxInStack) {\r\n            var resultVal = [];\r\n            var resultNaN = [NaN, NaN];\r\n            var dims = [targetStackInfo.stackResultDimension, targetStackInfo.stackedOverDimension];\r\n            var targetData = targetStackInfo.data;\r\n            var isStackedByIndex = targetStackInfo.isStackedByIndex;\r\n            var newData = targetData.map(dims, function (v0, v1, dataIndex) {\r\n                var sum = targetData.get(targetStackInfo.stackedDimension, dataIndex);\r\n                if (isNaN(sum)) {\r\n                    return resultNaN;\r\n                }\r\n                var byValue;\r\n                var stackedDataRawIndex;\r\n                if (isStackedByIndex) {\r\n                    stackedDataRawIndex = targetData.getRawIndex(dataIndex);\r\n                }\r\n                else {\r\n                    byValue = targetData.get(targetStackInfo.stackedByDimension, dataIndex);\r\n                }\r\n                var stackedOver = NaN;\r\n                for (var j = idxInStack - 1; j >= 0; j--) {\r\n                    var stackInfo = stackInfoList[j];\r\n                    if (!isStackedByIndex) {\r\n                        stackedDataRawIndex = stackInfo.data.rawIndexOf(stackInfo.stackedByDimension, byValue);\r\n                    }\r\n                    if (stackedDataRawIndex >= 0) {\r\n                        var val = stackInfo.data.getByRawIndex(stackInfo.stackResultDimension, stackedDataRawIndex);\r\n                        if ((sum >= 0 && val > 0)\r\n                            || (sum <= 0 && val < 0)) {\r\n                            sum += val;\r\n                            stackedOver = val;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                resultVal[0] = sum;\r\n                resultVal[1] = stackedOver;\r\n                return resultVal;\r\n            });\r\n            targetData.hostModel.setData(newData);\r\n            targetStackInfo.data = newData;\r\n        });\r\n    }\n\n    var SourceImpl = (function () {\r\n        function SourceImpl(fields) {\r\n            this.data = fields.data || (fields.sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS ? {} : []);\r\n            this.sourceFormat = fields.sourceFormat || SOURCE_FORMAT_UNKNOWN;\r\n            this.seriesLayoutBy = fields.seriesLayoutBy || SERIES_LAYOUT_BY_COLUMN;\r\n            this.startIndex = fields.startIndex || 0;\r\n            this.dimensionsDefine = fields.dimensionsDefine;\r\n            this.dimensionsDetectedCount = fields.dimensionsDetectedCount;\r\n            this.encodeDefine = fields.encodeDefine;\r\n            this.metaRawOption = fields.metaRawOption;\r\n        }\r\n        return SourceImpl;\r\n    }());\r\n    function isSourceInstance(val) {\r\n        return val instanceof SourceImpl;\r\n    }\r\n    function createSource(sourceData, thisMetaRawOption, sourceFormat, encodeDefine) {\r\n        sourceFormat = sourceFormat || detectSourceFormat(sourceData);\r\n        var determined = determineSourceDimensions(sourceData, sourceFormat, thisMetaRawOption.seriesLayoutBy, thisMetaRawOption.sourceHeader, thisMetaRawOption.dimensions);\r\n        var source = new SourceImpl({\r\n            data: sourceData,\r\n            sourceFormat: sourceFormat,\r\n            seriesLayoutBy: thisMetaRawOption.seriesLayoutBy,\r\n            dimensionsDefine: determined.dimensionsDefine,\r\n            startIndex: determined.startIndex,\r\n            dimensionsDetectedCount: determined.dimensionsDetectedCount,\r\n            encodeDefine: makeEncodeDefine(encodeDefine),\r\n            metaRawOption: clone(thisMetaRawOption)\r\n        });\r\n        return source;\r\n    }\r\n    function createSourceFromSeriesDataOption(data) {\r\n        return new SourceImpl({\r\n            data: data,\r\n            sourceFormat: isTypedArray(data)\r\n                ? SOURCE_FORMAT_TYPED_ARRAY\r\n                : SOURCE_FORMAT_ORIGINAL\r\n        });\r\n    }\r\n    function cloneSourceShallow(source) {\r\n        return new SourceImpl({\r\n            data: source.data,\r\n            sourceFormat: source.sourceFormat,\r\n            seriesLayoutBy: source.seriesLayoutBy,\r\n            dimensionsDefine: clone(source.dimensionsDefine),\r\n            startIndex: source.startIndex,\r\n            dimensionsDetectedCount: source.dimensionsDetectedCount,\r\n            encodeDefine: makeEncodeDefine(source.encodeDefine)\r\n        });\r\n    }\r\n    function makeEncodeDefine(encodeDefine) {\r\n        return encodeDefine\r\n            ? createHashMap(encodeDefine)\r\n            : null;\r\n    }\r\n    function detectSourceFormat(data) {\r\n        var sourceFormat = SOURCE_FORMAT_UNKNOWN;\r\n        if (isTypedArray(data)) {\r\n            sourceFormat = SOURCE_FORMAT_TYPED_ARRAY;\r\n        }\r\n        else if (isArray(data)) {\r\n            if (data.length === 0) {\r\n                sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\r\n            }\r\n            for (var i = 0, len = data.length; i < len; i++) {\r\n                var item = data[i];\r\n                if (item == null) {\r\n                    continue;\r\n                }\r\n                else if (isArray(item)) {\r\n                    sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\r\n                    break;\r\n                }\r\n                else if (isObject(item)) {\r\n                    sourceFormat = SOURCE_FORMAT_OBJECT_ROWS;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        else if (isObject(data)) {\r\n            for (var key in data) {\r\n                if (hasOwn(data, key) && isArrayLike(data[key])) {\r\n                    sourceFormat = SOURCE_FORMAT_KEYED_COLUMNS;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        else if (data != null) {\r\n            throw new Error('Invalid data');\r\n        }\r\n        return sourceFormat;\r\n    }\r\n    function determineSourceDimensions(data, sourceFormat, seriesLayoutBy, sourceHeader, dimensionsDefine) {\r\n        var dimensionsDetectedCount;\r\n        var startIndex;\r\n        if (!data) {\r\n            return {\r\n                dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\r\n                startIndex: startIndex,\r\n                dimensionsDetectedCount: dimensionsDetectedCount\r\n            };\r\n        }\r\n        if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\r\n            var dataArrayRows = data;\r\n            if (sourceHeader === 'auto' || sourceHeader == null) {\r\n                arrayRowsTravelFirst(function (val) {\r\n                    if (val != null && val !== '-') {\r\n                        if (isString(val)) {\r\n                            startIndex == null && (startIndex = 1);\r\n                        }\r\n                        else {\r\n                            startIndex = 0;\r\n                        }\r\n                    }\r\n                }, seriesLayoutBy, dataArrayRows, 10);\r\n            }\r\n            else {\r\n                startIndex = isNumber(sourceHeader) ? sourceHeader : sourceHeader ? 1 : 0;\r\n            }\r\n            if (!dimensionsDefine && startIndex === 1) {\r\n                dimensionsDefine = [];\r\n                arrayRowsTravelFirst(function (val, index) {\r\n                    dimensionsDefine[index] = (val != null ? val + '' : '');\r\n                }, seriesLayoutBy, dataArrayRows, Infinity);\r\n            }\r\n            dimensionsDetectedCount = dimensionsDefine\r\n                ? dimensionsDefine.length\r\n                : seriesLayoutBy === SERIES_LAYOUT_BY_ROW\r\n                    ? dataArrayRows.length\r\n                    : dataArrayRows[0]\r\n                        ? dataArrayRows[0].length\r\n                        : null;\r\n        }\r\n        else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\r\n            if (!dimensionsDefine) {\r\n                dimensionsDefine = objectRowsCollectDimensions(data);\r\n            }\r\n        }\r\n        else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\r\n            if (!dimensionsDefine) {\r\n                dimensionsDefine = [];\r\n                each(data, function (colArr, key) {\r\n                    dimensionsDefine.push(key);\r\n                });\r\n            }\r\n        }\r\n        else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\r\n            var value0 = getDataItemValue(data[0]);\r\n            dimensionsDetectedCount = isArray(value0) && value0.length || 1;\r\n        }\r\n        else if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\r\n            if (__DEV__) {\r\n                assert(!!dimensionsDefine, 'dimensions must be given if data is TypedArray.');\r\n            }\r\n        }\r\n        return {\r\n            startIndex: startIndex,\r\n            dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\r\n            dimensionsDetectedCount: dimensionsDetectedCount\r\n        };\r\n    }\r\n    function objectRowsCollectDimensions(data) {\r\n        var firstIndex = 0;\r\n        var obj;\r\n        while (firstIndex < data.length && !(obj = data[firstIndex++])) { }\r\n        if (obj) {\r\n            var dimensions_1 = [];\r\n            each(obj, function (value, key) {\r\n                dimensions_1.push(key);\r\n            });\r\n            return dimensions_1;\r\n        }\r\n    }\r\n    function normalizeDimensionsOption(dimensionsDefine) {\r\n        if (!dimensionsDefine) {\r\n            return;\r\n        }\r\n        var nameMap = createHashMap();\r\n        return map(dimensionsDefine, function (item, index) {\r\n            item = extend({}, isObject(item) ? item : { name: item });\r\n            if (item.name == null) {\r\n                return item;\r\n            }\r\n            item.name += '';\r\n            if (item.displayName == null) {\r\n                item.displayName = item.name;\r\n            }\r\n            var exist = nameMap.get(item.name);\r\n            if (!exist) {\r\n                nameMap.set(item.name, { count: 1 });\r\n            }\r\n            else {\r\n                item.name += '-' + exist.count++;\r\n            }\r\n            return item;\r\n        });\r\n    }\r\n    function arrayRowsTravelFirst(cb, seriesLayoutBy, data, maxLoop) {\r\n        if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\r\n            for (var i = 0; i < data.length && i < maxLoop; i++) {\r\n                cb(data[i] ? data[i][0] : null, i);\r\n            }\r\n        }\r\n        else {\r\n            var value0 = data[0] || [];\r\n            for (var i = 0; i < value0.length && i < maxLoop; i++) {\r\n                cb(value0[i], i);\r\n            }\r\n        }\r\n    }\n\n    var _a, _b, _c;\r\n    var providerMethods;\r\n    var mountMethods;\r\n    var DefaultDataProvider = (function () {\r\n        function DefaultDataProvider(sourceParam, dimSize) {\r\n            var source = !isSourceInstance(sourceParam)\r\n                ? createSourceFromSeriesDataOption(sourceParam)\r\n                : sourceParam;\r\n            this._source = source;\r\n            var data = this._data = source.data;\r\n            if (source.sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\r\n                if (__DEV__) {\r\n                    if (dimSize == null) {\r\n                        throw new Error('Typed array data must specify dimension size');\r\n                    }\r\n                }\r\n                this._offset = 0;\r\n                this._dimSize = dimSize;\r\n                this._data = data;\r\n            }\r\n            mountMethods(this, data, source);\r\n        }\r\n        DefaultDataProvider.prototype.getSource = function () {\r\n            return this._source;\r\n        };\r\n        DefaultDataProvider.prototype.count = function () {\r\n            return 0;\r\n        };\r\n        DefaultDataProvider.prototype.getItem = function (idx, out) {\r\n            return;\r\n        };\r\n        DefaultDataProvider.prototype.appendData = function (newData) {\r\n        };\r\n        DefaultDataProvider.prototype.clean = function () {\r\n        };\r\n        DefaultDataProvider.protoInitialize = (function () {\r\n            var proto = DefaultDataProvider.prototype;\r\n            proto.pure = false;\r\n            proto.persistent = true;\r\n        })();\r\n        DefaultDataProvider.internalField = (function () {\r\n            var _a;\r\n            mountMethods = function (provider, data, source) {\r\n                var sourceFormat = source.sourceFormat;\r\n                var seriesLayoutBy = source.seriesLayoutBy;\r\n                var startIndex = source.startIndex;\r\n                var dimsDef = source.dimensionsDefine;\r\n                var methods = providerMethods[getMethodMapKey(sourceFormat, seriesLayoutBy)];\r\n                if (__DEV__) {\r\n                    assert(methods, 'Invalide sourceFormat: ' + sourceFormat);\r\n                }\r\n                extend(provider, methods);\r\n                if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\r\n                    provider.getItem = getItemForTypedArray;\r\n                    provider.count = countForTypedArray;\r\n                    provider.fillStorage = fillStorageForTypedArray;\r\n                }\r\n                else {\r\n                    var rawItemGetter = getRawSourceItemGetter(sourceFormat, seriesLayoutBy);\r\n                    provider.getItem = bind(rawItemGetter, null, data, startIndex, dimsDef);\r\n                    var rawCounter = getRawSourceDataCounter(sourceFormat, seriesLayoutBy);\r\n                    provider.count = bind(rawCounter, null, data, startIndex, dimsDef);\r\n                }\r\n            };\r\n            var getItemForTypedArray = function (idx, out) {\r\n                idx = idx - this._offset;\r\n                out = out || [];\r\n                var data = this._data;\r\n                var dimSize = this._dimSize;\r\n                var offset = dimSize * idx;\r\n                for (var i = 0; i < dimSize; i++) {\r\n                    out[i] = data[offset + i];\r\n                }\r\n                return out;\r\n            };\r\n            var fillStorageForTypedArray = function (start, end, storage, extent) {\r\n                var data = this._data;\r\n                var dimSize = this._dimSize;\r\n                for (var dim = 0; dim < dimSize; dim++) {\r\n                    var dimExtent = extent[dim];\r\n                    var min = dimExtent[0] == null ? Infinity : dimExtent[0];\r\n                    var max = dimExtent[1] == null ? -Infinity : dimExtent[1];\r\n                    var count = end - start;\r\n                    var arr = storage[dim];\r\n                    for (var i = 0; i < count; i++) {\r\n                        var val = data[(start + i) * dimSize + dim];\r\n                        arr[start + i] = val;\r\n                        val < min && (min = val);\r\n                        val > max && (max = val);\r\n                    }\r\n                    dimExtent[0] = min;\r\n                    dimExtent[1] = max;\r\n                }\r\n            };\r\n            var countForTypedArray = function () {\r\n                return this._data ? (this._data.length / this._dimSize) : 0;\r\n            };\r\n            providerMethods = (_a = {},\r\n                _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = {\r\n                    pure: true,\r\n                    appendData: appendDataSimply\r\n                },\r\n                _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = {\r\n                    pure: true,\r\n                    appendData: function () {\r\n                        throw new Error('Do not support appendData when set seriesLayoutBy: \"row\".');\r\n                    }\r\n                },\r\n                _a[SOURCE_FORMAT_OBJECT_ROWS] = {\r\n                    pure: true,\r\n                    appendData: appendDataSimply\r\n                },\r\n                _a[SOURCE_FORMAT_KEYED_COLUMNS] = {\r\n                    pure: true,\r\n                    appendData: function (newData) {\r\n                        var data = this._data;\r\n                        each(newData, function (newCol, key) {\r\n                            var oldCol = data[key] || (data[key] = []);\r\n                            for (var i = 0; i < (newCol || []).length; i++) {\r\n                                oldCol.push(newCol[i]);\r\n                            }\r\n                        });\r\n                    }\r\n                },\r\n                _a[SOURCE_FORMAT_ORIGINAL] = {\r\n                    appendData: appendDataSimply\r\n                },\r\n                _a[SOURCE_FORMAT_TYPED_ARRAY] = {\r\n                    persistent: false,\r\n                    pure: true,\r\n                    appendData: function (newData) {\r\n                        if (__DEV__) {\r\n                            assert(isTypedArray(newData), 'Added data must be TypedArray if data in initialization is TypedArray');\r\n                        }\r\n                        this._data = newData;\r\n                    },\r\n                    clean: function () {\r\n                        this._offset += this.count();\r\n                        this._data = null;\r\n                    }\r\n                },\r\n                _a);\r\n            function appendDataSimply(newData) {\r\n                for (var i = 0; i < newData.length; i++) {\r\n                    this._data.push(newData[i]);\r\n                }\r\n            }\r\n        })();\r\n        return DefaultDataProvider;\r\n    }());\r\n    var getItemSimply = function (rawData, startIndex, dimsDef, idx) {\r\n        return rawData[idx];\r\n    };\r\n    var rawSourceItemGetterMap = (_a = {},\r\n        _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef, idx) {\r\n            return rawData[idx + startIndex];\r\n        },\r\n        _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef, idx) {\r\n            idx += startIndex;\r\n            var item = [];\r\n            var data = rawData;\r\n            for (var i = 0; i < data.length; i++) {\r\n                var row = data[i];\r\n                item.push(row ? row[idx] : null);\r\n            }\r\n            return item;\r\n        },\r\n        _a[SOURCE_FORMAT_OBJECT_ROWS] = getItemSimply,\r\n        _a[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef, idx) {\r\n            var item = [];\r\n            for (var i = 0; i < dimsDef.length; i++) {\r\n                var dimName = dimsDef[i].name;\r\n                if (__DEV__) {\r\n                    if (dimName == null) {\r\n                        throw new Error();\r\n                    }\r\n                }\r\n                var col = rawData[dimName];\r\n                item.push(col ? col[idx] : null);\r\n            }\r\n            return item;\r\n        },\r\n        _a[SOURCE_FORMAT_ORIGINAL] = getItemSimply,\r\n        _a);\r\n    function getRawSourceItemGetter(sourceFormat, seriesLayoutBy) {\r\n        var method = rawSourceItemGetterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\r\n        if (__DEV__) {\r\n            assert(method, 'Do not suppport get item on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\r\n        }\r\n        return method;\r\n    }\r\n    var countSimply = function (rawData, startIndex, dimsDef) {\r\n        return rawData.length;\r\n    };\r\n    var rawSourceDataCounterMap = (_b = {},\r\n        _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef) {\r\n            return Math.max(0, rawData.length - startIndex);\r\n        },\r\n        _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef) {\r\n            var row = rawData[0];\r\n            return row ? Math.max(0, row.length - startIndex) : 0;\r\n        },\r\n        _b[SOURCE_FORMAT_OBJECT_ROWS] = countSimply,\r\n        _b[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef) {\r\n            var dimName = dimsDef[0].name;\r\n            if (__DEV__) {\r\n                if (dimName == null) {\r\n                    throw new Error();\r\n                }\r\n            }\r\n            var col = rawData[dimName];\r\n            return col ? col.length : 0;\r\n        },\r\n        _b[SOURCE_FORMAT_ORIGINAL] = countSimply,\r\n        _b);\r\n    function getRawSourceDataCounter(sourceFormat, seriesLayoutBy) {\r\n        var method = rawSourceDataCounterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\r\n        if (__DEV__) {\r\n            assert(method, 'Do not suppport count on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\r\n        }\r\n        return method;\r\n    }\r\n    var getRawValueSimply = function (dataItem, dimIndex, dimName) {\r\n        return dimIndex != null ? dataItem[dimIndex] : dataItem;\r\n    };\r\n    var rawSourceValueGetterMap = (_c = {},\r\n        _c[SOURCE_FORMAT_ARRAY_ROWS] = getRawValueSimply,\r\n        _c[SOURCE_FORMAT_OBJECT_ROWS] = function (dataItem, dimIndex, dimName) {\r\n            return dimIndex != null ? dataItem[dimName] : dataItem;\r\n        },\r\n        _c[SOURCE_FORMAT_KEYED_COLUMNS] = getRawValueSimply,\r\n        _c[SOURCE_FORMAT_ORIGINAL] = function (dataItem, dimIndex, dimName) {\r\n            var value = getDataItemValue(dataItem);\r\n            return (dimIndex == null || !(value instanceof Array))\r\n                ? value\r\n                : value[dimIndex];\r\n        },\r\n        _c[SOURCE_FORMAT_TYPED_ARRAY] = getRawValueSimply,\r\n        _c);\r\n    function getRawSourceValueGetter(sourceFormat) {\r\n        var method = rawSourceValueGetterMap[sourceFormat];\r\n        if (__DEV__) {\r\n            assert(method, 'Do not suppport get value on \"' + sourceFormat + '\".');\r\n        }\r\n        return method;\r\n    }\r\n    function getMethodMapKey(sourceFormat, seriesLayoutBy) {\r\n        return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS\r\n            ? sourceFormat + '_' + seriesLayoutBy\r\n            : sourceFormat;\r\n    }\r\n    function retrieveRawValue(data, dataIndex, dim) {\r\n        if (!data) {\r\n            return;\r\n        }\r\n        var dataItem = data.getRawDataItem(dataIndex);\r\n        if (dataItem == null) {\r\n            return;\r\n        }\r\n        var sourceFormat = data.getProvider().getSource().sourceFormat;\r\n        var dimName;\r\n        var dimIndex;\r\n        var dimInfo = data.getDimensionInfo(dim);\r\n        if (dimInfo) {\r\n            dimName = dimInfo.name;\r\n            dimIndex = dimInfo.index;\r\n        }\r\n        return getRawSourceValueGetter(sourceFormat)(dataItem, dimIndex, dimName);\r\n    }\n\n    var DIMENSION_LABEL_REG = /\\{@(.+?)\\}/g;\r\n    var DataFormatMixin = (function () {\r\n        function DataFormatMixin() {\r\n        }\r\n        DataFormatMixin.prototype.getDataParams = function (dataIndex, dataType) {\r\n            var data = this.getData(dataType);\r\n            var rawValue = this.getRawValue(dataIndex, dataType);\r\n            var rawDataIndex = data.getRawIndex(dataIndex);\r\n            var name = data.getName(dataIndex);\r\n            var itemOpt = data.getRawDataItem(dataIndex);\r\n            var style = data.getItemVisual(dataIndex, 'style');\r\n            var color = style && style[data.getItemVisual(dataIndex, 'drawType') || 'fill'];\r\n            var borderColor = style && style.stroke;\r\n            var mainType = this.mainType;\r\n            var isSeries = mainType === 'series';\r\n            var userOutput = data.userOutput;\r\n            return {\r\n                componentType: mainType,\r\n                componentSubType: this.subType,\r\n                componentIndex: this.componentIndex,\r\n                seriesType: isSeries ? this.subType : null,\r\n                seriesIndex: this.seriesIndex,\r\n                seriesId: isSeries ? this.id : null,\r\n                seriesName: isSeries ? this.name : null,\r\n                name: name,\r\n                dataIndex: rawDataIndex,\r\n                data: itemOpt,\r\n                dataType: dataType,\r\n                value: rawValue,\r\n                color: color,\r\n                borderColor: borderColor,\r\n                dimensionNames: userOutput ? userOutput.dimensionNames : null,\r\n                encode: userOutput ? userOutput.encode : null,\r\n                $vars: ['seriesName', 'name', 'value']\r\n            };\r\n        };\r\n        DataFormatMixin.prototype.getFormattedLabel = function (dataIndex, status, dataType, labelDimIndex, formatter, extendParams) {\r\n            status = status || 'normal';\r\n            var data = this.getData(dataType);\r\n            var params = this.getDataParams(dataIndex, dataType);\r\n            if (extendParams) {\r\n                extend(params, extendParams);\r\n            }\r\n            if (labelDimIndex != null && (params.value instanceof Array)) {\r\n                params.value = params.value[labelDimIndex];\r\n            }\r\n            if (!formatter) {\r\n                var itemModel = data.getItemModel(dataIndex);\r\n                formatter = itemModel.get(status === 'normal'\r\n                    ? ['label', 'formatter']\r\n                    : [status, 'label', 'formatter']);\r\n            }\r\n            if (typeof formatter === 'function') {\r\n                params.status = status;\r\n                params.dimensionIndex = labelDimIndex;\r\n                return formatter(params);\r\n            }\r\n            else if (typeof formatter === 'string') {\r\n                var str = formatTpl(formatter, params);\r\n                return str.replace(DIMENSION_LABEL_REG, function (origin, dim) {\r\n                    var len = dim.length;\r\n                    if (dim.charAt(0) === '[' && dim.charAt(len - 1) === ']') {\r\n                        dim = +dim.slice(1, len - 1);\r\n                    }\r\n                    return retrieveRawValue(data, dataIndex, dim);\r\n                });\r\n            }\r\n        };\r\n        DataFormatMixin.prototype.getRawValue = function (idx, dataType) {\r\n            return retrieveRawValue(this.getData(dataType), idx);\r\n        };\r\n        DataFormatMixin.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\r\n            return;\r\n        };\r\n        return DataFormatMixin;\r\n    }());\n\n    function createTask(define) {\r\n        return new Task(define);\r\n    }\r\n    var Task = (function () {\r\n        function Task(define) {\r\n            define = define || {};\r\n            this._reset = define.reset;\r\n            this._plan = define.plan;\r\n            this._count = define.count;\r\n            this._onDirty = define.onDirty;\r\n            this._dirty = true;\r\n        }\r\n        Task.prototype.perform = function (performArgs) {\r\n            var upTask = this._upstream;\r\n            var skip = performArgs && performArgs.skip;\r\n            if (this._dirty && upTask) {\r\n                var context = this.context;\r\n                context.data = context.outputData = upTask.context.outputData;\r\n            }\r\n            if (this.__pipeline) {\r\n                this.__pipeline.currentTask = this;\r\n            }\r\n            var planResult;\r\n            if (this._plan && !skip) {\r\n                planResult = this._plan(this.context);\r\n            }\r\n            var lastModBy = normalizeModBy(this._modBy);\r\n            var lastModDataCount = this._modDataCount || 0;\r\n            var modBy = normalizeModBy(performArgs && performArgs.modBy);\r\n            var modDataCount = performArgs && performArgs.modDataCount || 0;\r\n            if (lastModBy !== modBy || lastModDataCount !== modDataCount) {\r\n                planResult = 'reset';\r\n            }\r\n            function normalizeModBy(val) {\r\n                !(val >= 1) && (val = 1);\r\n                return val;\r\n            }\r\n            var forceFirstProgress;\r\n            if (this._dirty || planResult === 'reset') {\r\n                this._dirty = false;\r\n                forceFirstProgress = this._doReset(skip);\r\n            }\r\n            this._modBy = modBy;\r\n            this._modDataCount = modDataCount;\r\n            var step = performArgs && performArgs.step;\r\n            if (upTask) {\r\n                if (__DEV__) {\r\n                    assert(upTask._outputDueEnd != null);\r\n                }\r\n                this._dueEnd = upTask._outputDueEnd;\r\n            }\r\n            else {\r\n                if (__DEV__) {\r\n                    assert(!this._progress || this._count);\r\n                }\r\n                this._dueEnd = this._count ? this._count(this.context) : Infinity;\r\n            }\r\n            if (this._progress) {\r\n                var start = this._dueIndex;\r\n                var end = Math.min(step != null ? this._dueIndex + step : Infinity, this._dueEnd);\r\n                if (!skip && (forceFirstProgress || start < end)) {\r\n                    var progress = this._progress;\r\n                    if (isArray(progress)) {\r\n                        for (var i = 0; i < progress.length; i++) {\r\n                            this._doProgress(progress[i], start, end, modBy, modDataCount);\r\n                        }\r\n                    }\r\n                    else {\r\n                        this._doProgress(progress, start, end, modBy, modDataCount);\r\n                    }\r\n                }\r\n                this._dueIndex = end;\r\n                var outputDueEnd = this._settedOutputEnd != null\r\n                    ? this._settedOutputEnd : end;\r\n                if (__DEV__) {\r\n                    assert(outputDueEnd >= this._outputDueEnd);\r\n                }\r\n                this._outputDueEnd = outputDueEnd;\r\n            }\r\n            else {\r\n                this._dueIndex = this._outputDueEnd = this._settedOutputEnd != null\r\n                    ? this._settedOutputEnd : this._dueEnd;\r\n            }\r\n            return this.unfinished();\r\n        };\r\n        Task.prototype.dirty = function () {\r\n            this._dirty = true;\r\n            this._onDirty && this._onDirty(this.context);\r\n        };\r\n        Task.prototype._doProgress = function (progress, start, end, modBy, modDataCount) {\r\n            iterator.reset(start, end, modBy, modDataCount);\r\n            this._callingProgress = progress;\r\n            this._callingProgress({\r\n                start: start, end: end, count: end - start, next: iterator.next\r\n            }, this.context);\r\n        };\r\n        Task.prototype._doReset = function (skip) {\r\n            this._dueIndex = this._outputDueEnd = this._dueEnd = 0;\r\n            this._settedOutputEnd = null;\r\n            var progress;\r\n            var forceFirstProgress;\r\n            if (!skip && this._reset) {\r\n                progress = this._reset(this.context);\r\n                if (progress && progress.progress) {\r\n                    forceFirstProgress = progress.forceFirstProgress;\r\n                    progress = progress.progress;\r\n                }\r\n                if (isArray(progress) && !progress.length) {\r\n                    progress = null;\r\n                }\r\n            }\r\n            this._progress = progress;\r\n            this._modBy = this._modDataCount = null;\r\n            var downstream = this._downstream;\r\n            downstream && downstream.dirty();\r\n            return forceFirstProgress;\r\n        };\r\n        Task.prototype.unfinished = function () {\r\n            return this._progress && this._dueIndex < this._dueEnd;\r\n        };\r\n        Task.prototype.pipe = function (downTask) {\r\n            if (__DEV__) {\r\n                assert(downTask && !downTask._disposed && downTask !== this);\r\n            }\r\n            if (this._downstream !== downTask || this._dirty) {\r\n                this._downstream = downTask;\r\n                downTask._upstream = this;\r\n                downTask.dirty();\r\n            }\r\n        };\r\n        Task.prototype.dispose = function () {\r\n            if (this._disposed) {\r\n                return;\r\n            }\r\n            this._upstream && (this._upstream._downstream = null);\r\n            this._downstream && (this._downstream._upstream = null);\r\n            this._dirty = false;\r\n            this._disposed = true;\r\n        };\r\n        Task.prototype.getUpstream = function () {\r\n            return this._upstream;\r\n        };\r\n        Task.prototype.getDownstream = function () {\r\n            return this._downstream;\r\n        };\r\n        Task.prototype.setOutputEnd = function (end) {\r\n            this._outputDueEnd = this._settedOutputEnd = end;\r\n        };\r\n        return Task;\r\n    }());\r\n    var iterator = (function () {\r\n        var end;\r\n        var current;\r\n        var modBy;\r\n        var modDataCount;\r\n        var winCount;\r\n        var it = {\r\n            reset: function (s, e, sStep, sCount) {\r\n                current = s;\r\n                end = e;\r\n                modBy = sStep;\r\n                modDataCount = sCount;\r\n                winCount = Math.ceil(modDataCount / modBy);\r\n                it.next = (modBy > 1 && modDataCount > 0) ? modNext : sequentialNext;\r\n            }\r\n        };\r\n        return it;\r\n        function sequentialNext() {\r\n            return current < end ? current++ : null;\r\n        }\r\n        function modNext() {\r\n            var dataIndex = (current % winCount) * modBy + Math.ceil(current / winCount);\r\n            var result = current >= end\r\n                ? null\r\n                : dataIndex < modDataCount\r\n                    ? dataIndex\r\n                    : current;\r\n            current++;\r\n            return result;\r\n        }\r\n    })();\n\n    function parseDataValue(value, opt) {\r\n        var dimType = opt && opt.type;\r\n        if (dimType === 'ordinal') {\r\n            var ordinalMeta = opt && opt.ordinalMeta;\r\n            return ordinalMeta\r\n                ? ordinalMeta.parseAndCollect(value)\r\n                : value;\r\n        }\r\n        if (dimType === 'time'\r\n            && typeof value !== 'number'\r\n            && value != null\r\n            && value !== '-') {\r\n            value = +parseDate(value);\r\n        }\r\n        return (value == null || value === '')\r\n            ? NaN\r\n            : +value;\r\n    }\r\n    var valueParserMap = createHashMap({\r\n        'number': function (val) {\r\n            return parseFloat(val);\r\n        },\r\n        'time': function (val) {\r\n            return +parseDate(val);\r\n        },\r\n        'trim': function (val) {\r\n            return typeof val === 'string' ? trim(val) : val;\r\n        }\r\n    });\n\n    var ExternalSource = (function () {\r\n        function ExternalSource() {\r\n        }\r\n        ExternalSource.prototype.getDimensionInfo = function (dim) {\r\n            return;\r\n        };\r\n        ExternalSource.prototype.getDimensionInfoAll = function () {\r\n            return;\r\n        };\r\n        ExternalSource.prototype.getRawDataItem = function (dataIndex) {\r\n            return;\r\n        };\r\n        ExternalSource.prototype.getRawHeaderItem = function (dataIndex) {\r\n            return;\r\n        };\r\n        ExternalSource.prototype.count = function () {\r\n            return;\r\n        };\r\n        ExternalSource.prototype.retrieveItemValue = function (rawItem, dimIndex) {\r\n            return;\r\n        };\r\n        ExternalSource.prototype.convertDataValue = function (rawVal, dimInfo) {\r\n            return parseDataValue(rawVal, dimInfo);\r\n        };\r\n        return ExternalSource;\r\n    }());\r\n    function createExternalSource(internalSource) {\r\n        var extSource = new ExternalSource();\r\n        var data = extSource.data = internalSource.data;\r\n        var sourceFormat = extSource.sourceFormat = internalSource.sourceFormat;\r\n        var sourceHeaderCount = extSource.sourceHeaderCount = internalSource.startIndex;\r\n        var dimensions = [];\r\n        var dimsByName = {};\r\n        var dimsDef = internalSource.dimensionsDefine;\r\n        if (dimsDef) {\r\n            each(dimsDef, function (dimDef, idx) {\r\n                var name = dimDef.name;\r\n                var dimDefExt = {\r\n                    index: idx,\r\n                    name: name,\r\n                    displayName: dimDef.displayName\r\n                };\r\n                dimensions.push(dimDefExt);\r\n                if (name != null) {\r\n                    var errMsg = '';\r\n                    if (hasOwn(dimsByName, name)) {\r\n                        if (__DEV__) {\r\n                            errMsg = 'dimension name \"' + name + '\" duplicated.';\r\n                        }\r\n                        throwError(errMsg);\r\n                    }\r\n                    dimsByName[name] = dimDefExt;\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            for (var i = 0; i < internalSource.dimensionsDetectedCount || 0; i++) {\r\n                dimensions.push({ index: i });\r\n            }\r\n        }\r\n        var rawItemGetter = getRawSourceItemGetter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\r\n        extSource.getRawDataItem = bind(rawItemGetter, null, data, sourceHeaderCount, dimensions);\r\n        extSource.getRawHeaderItem = function (dataIndex) {\r\n            if (dataIndex < sourceHeaderCount) {\r\n                return rawItemGetter(data, 0, dimensions, dataIndex);\r\n            }\r\n        };\r\n        var rawCounter = getRawSourceDataCounter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\r\n        extSource.count = bind(rawCounter, null, data, sourceHeaderCount, dimensions);\r\n        var rawValueGetter = getRawSourceValueGetter(sourceFormat);\r\n        extSource.retrieveItemValue = function (rawItem, dimIndex) {\r\n            if (rawItem == null) {\r\n                return;\r\n            }\r\n            var dimDef = dimensions[dimIndex];\r\n            if (dimDef) {\r\n                return rawValueGetter(rawItem, dimIndex, dimDef.name);\r\n            }\r\n        };\r\n        extSource.getDimensionInfo = bind(getDimensionInfo, null, dimensions, dimsByName);\r\n        extSource.getDimensionInfoAll = bind(getDimensionInfoAll, null, dimensions);\r\n        return extSource;\r\n    }\r\n    function getDimensionInfo(dimensions, dimsByName, dim) {\r\n        if (dim == null) {\r\n            return;\r\n        }\r\n        if (typeof dim === 'number'\r\n            || (!isNaN(dim) && !hasOwn(dimsByName, dim))) {\r\n            return dimensions[dim];\r\n        }\r\n        else if (hasOwn(dimsByName, dim)) {\r\n            return dimsByName[dim];\r\n        }\r\n    }\r\n    function getDimensionInfoAll(dimensions) {\r\n        return dimensions;\r\n    }\r\n    var externalTransformMap = createHashMap();\r\n    function registerExternalTransform(externalTransform) {\r\n        externalTransform = clone(externalTransform);\r\n        var type = externalTransform.type;\r\n        var errMsg = '';\r\n        if (!type) {\r\n            if (__DEV__) {\r\n                errMsg = 'Must have a `type` when `registerTransform`.';\r\n            }\r\n            throwError(errMsg);\r\n        }\r\n        var typeParsed = type.split(':');\r\n        if (typeParsed.length !== 2) {\r\n            if (__DEV__) {\r\n                errMsg = 'Name must include namespace like \"ns:regression\".';\r\n            }\r\n            throwError(errMsg);\r\n        }\r\n        if (typeParsed[0] === 'echarts') {\r\n            type = typeParsed[1];\r\n        }\r\n        externalTransformMap.set(type, externalTransform);\r\n    }\r\n    function applyDataTransform(rawTransOption, sourceList, infoForPrint) {\r\n        var pipedTransOption = normalizeToArray(rawTransOption);\r\n        var pipeLen = pipedTransOption.length;\r\n        var errMsg = '';\r\n        if (!pipeLen) {\r\n            if (__DEV__) {\r\n                errMsg = 'If `transform` declared, it should at least contain one transform.';\r\n            }\r\n            throwError(errMsg);\r\n        }\r\n        for (var i = 0, len = pipeLen; i < len; i++) {\r\n            var transOption = pipedTransOption[i];\r\n            sourceList = applySingleDataTransform(transOption, sourceList, infoForPrint, pipeLen === 1 ? null : i);\r\n            if (i !== len - 1) {\r\n                sourceList.length = Math.max(sourceList.length, 1);\r\n            }\r\n        }\r\n        return sourceList;\r\n    }\r\n    function applySingleDataTransform(transOption, upSourceList, infoForPrint, pipeIndex) {\r\n        var errMsg = '';\r\n        if (!upSourceList.length) {\r\n            if (__DEV__) {\r\n                errMsg = 'Must have at least one upstream dataset.';\r\n            }\r\n            throwError(errMsg);\r\n        }\r\n        if (!isObject(transOption)) {\r\n            if (__DEV__) {\r\n                errMsg = 'transform declaration must be an object rather than ' + typeof transOption + '.';\r\n            }\r\n            throwError(errMsg);\r\n        }\r\n        var transType = transOption.type;\r\n        var externalTransform = externalTransformMap.get(transType);\r\n        if (!externalTransform) {\r\n            if (__DEV__) {\r\n                errMsg = 'Can not find transform on type \"' + transType + '\".';\r\n            }\r\n            throwError(errMsg);\r\n        }\r\n        var sourceList = map(upSourceList, createExternalSource);\r\n        var resultList = normalizeToArray(externalTransform.transform({\r\n            source: sourceList[0],\r\n            sourceList: sourceList,\r\n            config: clone(transOption.config)\r\n        }));\r\n        if (__DEV__) {\r\n            if (transOption.print) {\r\n                var printStrArr = map(resultList, function (extSource) {\r\n                    var pipeIndexStr = pipeIndex != null ? ' === pipe index: ' + pipeIndex : '';\r\n                    return [\r\n                        '=== dataset index: ' + infoForPrint.datasetIndex + pipeIndexStr + ' ===',\r\n                        '- transform result data:',\r\n                        makePrintable(extSource.data),\r\n                        '- transform result dimensions:',\r\n                        makePrintable(extSource.dimensions),\r\n                        '- transform result sourceHeader: ',\r\n                        makePrintable(extSource.sourceHeader)\r\n                    ].join('\\n');\r\n                }).join('\\n');\r\n                consoleLog(printStrArr);\r\n            }\r\n        }\r\n        return map(resultList, function (result) {\r\n            var errMsg = '';\r\n            if (!isObject(result)) {\r\n                if (__DEV__) {\r\n                    errMsg = 'A transform should not return some empty results.';\r\n                }\r\n                throwError(errMsg);\r\n            }\r\n            if (!isObject(result.data) && !isArrayLike(result.data)) {\r\n                if (__DEV__) {\r\n                    errMsg = 'Result data should be object or array in data transform.';\r\n                }\r\n                throwError(errMsg);\r\n            }\r\n            var resultMetaRawOption = inheritSourceMetaRawOption({\r\n                parent: upSourceList[0].metaRawOption,\r\n                thisNew: {\r\n                    seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\r\n                    sourceHeader: result.sourceHeader,\r\n                    dimensions: result.dimensions\r\n                }\r\n            });\r\n            return createSource(result.data, resultMetaRawOption, null, null);\r\n        });\r\n    }\n\n    var SourceManager = (function () {\r\n        function SourceManager(sourceHost) {\r\n            this._sourceList = [];\r\n            this._upstreamSignList = [];\r\n            this._versionSignBase = 0;\r\n            this._sourceHost = sourceHost;\r\n        }\r\n        SourceManager.prototype.dirty = function () {\r\n            this._setLocalSource([], []);\r\n        };\r\n        SourceManager.prototype._setLocalSource = function (sourceList, upstreamSignList) {\r\n            this._sourceList = sourceList;\r\n            this._upstreamSignList = upstreamSignList;\r\n            this._versionSignBase++;\r\n            if (this._versionSignBase > 9e10) {\r\n                this._versionSignBase = 0;\r\n            }\r\n        };\r\n        SourceManager.prototype._getVersionSign = function () {\r\n            return this._sourceHost.uid + '_' + this._versionSignBase;\r\n        };\r\n        SourceManager.prototype.prepareSource = function () {\r\n            if (this._isDirty()) {\r\n                this._createSource();\r\n            }\r\n        };\r\n        SourceManager.prototype._createSource = function () {\r\n            this._setLocalSource([], []);\r\n            var sourceHost = this._sourceHost;\r\n            var upSourceMgrList = this._getUpstreamSourceManagers();\r\n            var hasUpstream = !!upSourceMgrList.length;\r\n            var resultSourceList;\r\n            var upstreamSignList;\r\n            if (isSeries(sourceHost)) {\r\n                var seriesModel = sourceHost;\r\n                var data = void 0;\r\n                var sourceFormat = void 0;\r\n                var upSource = void 0;\r\n                if (hasUpstream) {\r\n                    var upSourceMgr = upSourceMgrList[0];\r\n                    upSourceMgr.prepareSource();\r\n                    upSource = upSourceMgr.getSource();\r\n                    data = upSource.data;\r\n                    sourceFormat = upSource.sourceFormat;\r\n                    upstreamSignList = [upSourceMgr._getVersionSign()];\r\n                }\r\n                else {\r\n                    data = seriesModel.get('data', true);\r\n                    sourceFormat = isTypedArray(data)\r\n                        ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL;\r\n                    upstreamSignList = [];\r\n                }\r\n                var thisMetaRawOption = inheritSourceMetaRawOption({\r\n                    parent: upSource ? upSource.metaRawOption : null,\r\n                    thisNew: this._createSourceMetaRawOption()\r\n                });\r\n                resultSourceList = [createSource(data, thisMetaRawOption, sourceFormat, seriesModel.get('encode', true))];\r\n            }\r\n            else {\r\n                var datasetModel = sourceHost;\r\n                if (hasUpstream) {\r\n                    var result = this._applyTransform(upSourceMgrList);\r\n                    resultSourceList = result.sourceList;\r\n                    upstreamSignList = result.upstreamSignList;\r\n                }\r\n                else {\r\n                    var sourceData = datasetModel.get('source', true);\r\n                    resultSourceList = [createSource(sourceData, this._createSourceMetaRawOption(), null, null)];\r\n                    upstreamSignList = [];\r\n                }\r\n            }\r\n            if (__DEV__) {\r\n                assert(resultSourceList && upstreamSignList);\r\n            }\r\n            this._setLocalSource(resultSourceList, upstreamSignList);\r\n        };\r\n        SourceManager.prototype._applyTransform = function (upMgrList) {\r\n            var datasetModel = this._sourceHost;\r\n            var transformOption = datasetModel.get('transform', true);\r\n            var fromTransformResult = datasetModel.get('fromTransformResult', true);\r\n            if (__DEV__) {\r\n                assert(fromTransformResult != null || transformOption != null);\r\n            }\r\n            if (fromTransformResult != null) {\r\n                var errMsg = '';\r\n                if (upMgrList.length !== 1) {\r\n                    if (__DEV__) {\r\n                        errMsg = 'When using `fromTransformResult`, there should be only one upstream dataset';\r\n                    }\r\n                    doThrow(errMsg);\r\n                }\r\n            }\r\n            var sourceList;\r\n            var upSourceList = [];\r\n            var upstreamSignList = [];\r\n            each(upMgrList, function (upMgr) {\r\n                upMgr.prepareSource();\r\n                var upSource = upMgr.getSource(fromTransformResult || 0);\r\n                var errMsg = '';\r\n                if (fromTransformResult != null && !upSource) {\r\n                    if (__DEV__) {\r\n                        errMsg = 'Can not retrieve result by `fromTransformResult`: ' + fromTransformResult;\r\n                    }\r\n                    doThrow(errMsg);\r\n                }\r\n                upSourceList.push(upSource);\r\n                upstreamSignList.push(upMgr._getVersionSign());\r\n            });\r\n            if (transformOption) {\r\n                sourceList = applyDataTransform(transformOption, upSourceList, { datasetIndex: datasetModel.componentIndex });\r\n            }\r\n            else if (fromTransformResult != null) {\r\n                sourceList = [cloneSourceShallow(upSourceList[0])];\r\n            }\r\n            return { sourceList: sourceList, upstreamSignList: upstreamSignList };\r\n        };\r\n        SourceManager.prototype._isDirty = function () {\r\n            var sourceList = this._sourceList;\r\n            if (!sourceList.length) {\r\n                return true;\r\n            }\r\n            var upSourceMgrList = this._getUpstreamSourceManagers();\r\n            for (var i = 0; i < upSourceMgrList.length; i++) {\r\n                var upSrcMgr = upSourceMgrList[i];\r\n                if (upSrcMgr._isDirty()\r\n                    || this._upstreamSignList[i] !== upSrcMgr._getVersionSign()) {\r\n                    return true;\r\n                }\r\n            }\r\n        };\r\n        SourceManager.prototype.getSource = function (sourceIndex) {\r\n            return this._sourceList[sourceIndex || 0];\r\n        };\r\n        SourceManager.prototype._getUpstreamSourceManagers = function () {\r\n            var sourceHost = this._sourceHost;\r\n            if (isSeries(sourceHost)) {\r\n                var datasetModel = querySeriesUpstreamDatasetModel(sourceHost);\r\n                return !datasetModel ? [] : [datasetModel.getSourceManager()];\r\n            }\r\n            else {\r\n                return map(queryDatasetUpstreamDatasetModels(sourceHost), function (datasetModel) { return datasetModel.getSourceManager(); });\r\n            }\r\n        };\r\n        SourceManager.prototype._createSourceMetaRawOption = function () {\r\n            var sourceHost = this._sourceHost;\r\n            var seriesLayoutBy;\r\n            var sourceHeader;\r\n            var dimensions;\r\n            if (isSeries(sourceHost)) {\r\n                seriesLayoutBy = sourceHost.get('seriesLayoutBy', true);\r\n                sourceHeader = sourceHost.get('sourceHeader', true);\r\n                dimensions = sourceHost.get('dimensions', true);\r\n            }\r\n            else if (!this._getUpstreamSourceManagers().length) {\r\n                var model = sourceHost;\r\n                seriesLayoutBy = model.get('seriesLayoutBy', true);\r\n                sourceHeader = model.get('sourceHeader', true);\r\n                dimensions = model.get('dimensions', true);\r\n            }\r\n            return { seriesLayoutBy: seriesLayoutBy, sourceHeader: sourceHeader, dimensions: dimensions };\r\n        };\r\n        return SourceManager;\r\n    }());\r\n    function disableTransformOptionMerge(datasetModel) {\r\n        var transformOption = datasetModel.option.transform;\r\n        transformOption && setAsPrimitive(datasetModel.option.transform);\r\n    }\r\n    function isSeries(sourceHost) {\r\n        return sourceHost.mainType === 'series';\r\n    }\r\n    function doThrow(errMsg) {\r\n        throw new Error(errMsg);\r\n    }\n\n    function createTooltipMarkup(type, option) {\r\n        option.type = type;\r\n        return option;\r\n    }\r\n    function retrieveVisualColorForTooltipMarker(series, dataIndex) {\r\n        var style = series.getData().getItemVisual(dataIndex, 'style');\r\n        var color = style[series.visualDrawType];\r\n        return convertToColorString(color);\r\n    }\n\n    function defaultSeriesFormatTooltip(opt) {\r\n        var series = opt.series;\r\n        var dataIndex = opt.dataIndex;\r\n        var multipleSeries = opt.multipleSeries;\r\n        var data = series.getData();\r\n        var tooltipDims = data.mapDimensionsAll('defaultedTooltip');\r\n        var tooltipDimLen = tooltipDims.length;\r\n        var value = series.getRawValue(dataIndex);\r\n        var isValueArr = isArray(value);\r\n        var markerColor = retrieveVisualColorForTooltipMarker(series, dataIndex);\r\n        var inlineValue;\r\n        var inlineValueType;\r\n        var subBlocks;\r\n        var sortParam;\r\n        if (tooltipDimLen > 1 || (isValueArr && !tooltipDimLen)) {\r\n            var formatArrResult = formatTooltipArrayValue(value, series, dataIndex, tooltipDims, markerColor);\r\n            inlineValue = formatArrResult.inlineValues;\r\n            inlineValueType = formatArrResult.inlineValueTypes;\r\n            subBlocks = formatArrResult.blocks;\r\n            sortParam = formatArrResult.inlineValues[0];\r\n        }\r\n        else if (tooltipDimLen) {\r\n            var dimInfo = data.getDimensionInfo(tooltipDims[0]);\r\n            sortParam = inlineValue = retrieveRawValue(data, dataIndex, tooltipDims[0]);\r\n            inlineValueType = dimInfo.type;\r\n        }\r\n        else {\r\n            sortParam = inlineValue = isValueArr ? value[0] : value;\r\n        }\r\n        var seriesNameSpecified = isNameSpecified(series);\r\n        var seriesName = seriesNameSpecified && series.name || '';\r\n        var itemName = data.getName(dataIndex);\r\n        var inlineName = multipleSeries ? seriesName : itemName;\r\n        return createTooltipMarkup('section', {\r\n            header: seriesName,\r\n            noHeader: multipleSeries || !seriesNameSpecified,\r\n            sortParam: sortParam,\r\n            blocks: [\r\n                createTooltipMarkup('nameValue', {\r\n                    markerType: 'item',\r\n                    markerColor: markerColor,\r\n                    name: inlineName,\r\n                    noName: !trim(inlineName),\r\n                    value: inlineValue,\r\n                    valueType: inlineValueType\r\n                })\r\n            ].concat(subBlocks || [])\r\n        });\r\n    }\r\n    function formatTooltipArrayValue(value, series, dataIndex, tooltipDims, colorStr) {\r\n        var data = series.getData();\r\n        var isValueMultipleLine = reduce(value, function (isValueMultipleLine, val, idx) {\r\n            var dimItem = data.getDimensionInfo(idx);\r\n            return isValueMultipleLine = isValueMultipleLine\r\n                || (dimItem && dimItem.tooltip !== false && dimItem.displayName != null);\r\n        }, false);\r\n        var inlineValues = [];\r\n        var inlineValueTypes = [];\r\n        var blocks = [];\r\n        tooltipDims.length\r\n            ? each(tooltipDims, function (dim) {\r\n                setEachItem(retrieveRawValue(data, dataIndex, dim), dim);\r\n            })\r\n            : each(value, setEachItem);\r\n        function setEachItem(val, dim) {\r\n            var dimInfo = data.getDimensionInfo(dim);\r\n            if (!dimInfo || dimInfo.otherDims.tooltip === false) {\r\n                return;\r\n            }\r\n            if (isValueMultipleLine) {\r\n                blocks.push(createTooltipMarkup('nameValue', {\r\n                    markerType: 'subItem',\r\n                    markerColor: colorStr,\r\n                    name: dimInfo.displayName,\r\n                    value: val,\r\n                    valueType: dimInfo.type\r\n                }));\r\n            }\r\n            else {\r\n                inlineValues.push(val);\r\n                inlineValueTypes.push(dimInfo.type);\r\n            }\r\n        }\r\n        return { inlineValues: inlineValues, inlineValueTypes: inlineValueTypes, blocks: blocks };\r\n    }\n\n    var inner$2 = makeInner();\r\n    function getSelectionKey(data, dataIndex) {\r\n        return data.getName(dataIndex) || data.getId(dataIndex);\r\n    }\r\n    var SeriesModel = (function (_super) {\r\n        __extends(SeriesModel, _super);\r\n        function SeriesModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this._selectedDataIndicesMap = {};\r\n            return _this;\r\n        }\r\n        SeriesModel.prototype.init = function (option, parentModel, ecModel) {\r\n            this.seriesIndex = this.componentIndex;\r\n            this.dataTask = createTask({\r\n                count: dataTaskCount,\r\n                reset: dataTaskReset\r\n            });\r\n            this.dataTask.context = { model: this };\r\n            this.mergeDefaultAndTheme(option, ecModel);\r\n            var sourceManager = inner$2(this).sourceManager = new SourceManager(this);\r\n            sourceManager.prepareSource();\r\n            var data = this.getInitialData(option, ecModel);\r\n            wrapData(data, this);\r\n            this.dataTask.context.data = data;\r\n            if (__DEV__) {\r\n                assert(data, 'getInitialData returned invalid data.');\r\n            }\r\n            inner$2(this).dataBeforeProcessed = data;\r\n            autoSeriesName(this);\r\n            this._initSelectedMapFromData(data);\r\n        };\r\n        SeriesModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\r\n            var layoutMode = fetchLayoutMode(this);\r\n            var inputPositionParams = layoutMode\r\n                ? getLayoutParams(option) : {};\r\n            var themeSubType = this.subType;\r\n            if (ComponentModel.hasClass(themeSubType)) {\r\n                themeSubType += 'Series';\r\n            }\r\n            merge(option, ecModel.getTheme().get(this.subType));\r\n            merge(option, this.getDefaultOption());\r\n            defaultEmphasis(option, 'label', ['show']);\r\n            this.fillDataTextStyle(option.data);\r\n            if (layoutMode) {\r\n                mergeLayoutParam(option, inputPositionParams, layoutMode);\r\n            }\r\n        };\r\n        SeriesModel.prototype.mergeOption = function (newSeriesOption, ecModel) {\r\n            newSeriesOption = merge(this.option, newSeriesOption, true);\r\n            this.fillDataTextStyle(newSeriesOption.data);\r\n            var layoutMode = fetchLayoutMode(this);\r\n            if (layoutMode) {\r\n                mergeLayoutParam(this.option, newSeriesOption, layoutMode);\r\n            }\r\n            var sourceManager = inner$2(this).sourceManager;\r\n            sourceManager.dirty();\r\n            sourceManager.prepareSource();\r\n            var data = this.getInitialData(newSeriesOption, ecModel);\r\n            wrapData(data, this);\r\n            this.dataTask.dirty();\r\n            this.dataTask.context.data = data;\r\n            inner$2(this).dataBeforeProcessed = data;\r\n            autoSeriesName(this);\r\n            this._initSelectedMapFromData(data);\r\n        };\r\n        SeriesModel.prototype.fillDataTextStyle = function (data) {\r\n            if (data && !isTypedArray(data)) {\r\n                var props = ['show'];\r\n                for (var i = 0; i < data.length; i++) {\r\n                    if (data[i] && data[i].label) {\r\n                        defaultEmphasis(data[i], 'label', props);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        SeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n            return;\r\n        };\r\n        SeriesModel.prototype.appendData = function (params) {\r\n            var data = this.getRawData();\r\n            data.appendData(params.data);\r\n        };\r\n        SeriesModel.prototype.getData = function (dataType) {\r\n            var task = getCurrentTask(this);\r\n            if (task) {\r\n                var data = task.context.data;\r\n                return (dataType == null ? data : data.getLinkedData(dataType));\r\n            }\r\n            else {\r\n                return inner$2(this).data;\r\n            }\r\n        };\r\n        SeriesModel.prototype.getAllData = function () {\r\n            var mainData = this.getData();\r\n            return (mainData && mainData.getLinkedDataAll)\r\n                ? mainData.getLinkedDataAll()\r\n                : [{ data: mainData }];\r\n        };\r\n        SeriesModel.prototype.setData = function (data) {\r\n            var task = getCurrentTask(this);\r\n            if (task) {\r\n                var context = task.context;\r\n                context.outputData = data;\r\n                if (task !== this.dataTask) {\r\n                    context.data = data;\r\n                }\r\n            }\r\n            inner$2(this).data = data;\r\n        };\r\n        SeriesModel.prototype.getSource = function () {\r\n            return inner$2(this).sourceManager.getSource();\r\n        };\r\n        SeriesModel.prototype.getRawData = function () {\r\n            return inner$2(this).dataBeforeProcessed;\r\n        };\r\n        SeriesModel.prototype.getBaseAxis = function () {\r\n            var coordSys = this.coordinateSystem;\r\n            return coordSys && coordSys.getBaseAxis && coordSys.getBaseAxis();\r\n        };\r\n        SeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\r\n            return defaultSeriesFormatTooltip({\r\n                series: this,\r\n                dataIndex: dataIndex,\r\n                multipleSeries: multipleSeries\r\n            });\r\n        };\r\n        SeriesModel.prototype.isAnimationEnabled = function () {\r\n            if (env.node) {\r\n                return false;\r\n            }\r\n            var animationEnabled = this.getShallow('animation');\r\n            if (animationEnabled) {\r\n                if (this.getData().count() > this.getShallow('animationThreshold')) {\r\n                    animationEnabled = false;\r\n                }\r\n            }\r\n            return !!animationEnabled;\r\n        };\r\n        SeriesModel.prototype.restoreData = function () {\r\n            this.dataTask.dirty();\r\n        };\r\n        SeriesModel.prototype.getColorFromPalette = function (name, scope, requestColorNum) {\r\n            var ecModel = this.ecModel;\r\n            var color = ColorPaletteMixin.prototype.getColorFromPalette.call(this, name, scope, requestColorNum);\r\n            if (!color) {\r\n                color = ecModel.getColorFromPalette(name, scope, requestColorNum);\r\n            }\r\n            return color;\r\n        };\r\n        SeriesModel.prototype.coordDimToDataDim = function (coordDim) {\r\n            return this.getRawData().mapDimensionsAll(coordDim);\r\n        };\r\n        SeriesModel.prototype.getProgressive = function () {\r\n            return this.get('progressive');\r\n        };\r\n        SeriesModel.prototype.getProgressiveThreshold = function () {\r\n            return this.get('progressiveThreshold');\r\n        };\r\n        SeriesModel.prototype.select = function (innerDataIndices, dataType) {\r\n            this._innerSelect(this.getData(dataType), innerDataIndices);\r\n        };\r\n        SeriesModel.prototype.unselect = function (innerDataIndices, dataType) {\r\n            var selectedMap = this.option.selectedMap;\r\n            if (!selectedMap) {\r\n                return;\r\n            }\r\n            var data = this.getData(dataType);\r\n            for (var i = 0; i < innerDataIndices.length; i++) {\r\n                var dataIndex = innerDataIndices[i];\r\n                var nameOrId = getSelectionKey(data, dataIndex);\r\n                selectedMap[nameOrId] = false;\r\n                this._selectedDataIndicesMap[nameOrId] = -1;\r\n            }\r\n        };\r\n        SeriesModel.prototype.toggleSelect = function (innerDataIndices, dataType) {\r\n            var tmpArr = [];\r\n            for (var i = 0; i < innerDataIndices.length; i++) {\r\n                tmpArr[0] = innerDataIndices[i];\r\n                this.isSelected(innerDataIndices[i], dataType)\r\n                    ? this.unselect(tmpArr, dataType)\r\n                    : this.select(tmpArr, dataType);\r\n            }\r\n        };\r\n        SeriesModel.prototype.getSelectedDataIndices = function () {\r\n            var selectedDataIndicesMap = this._selectedDataIndicesMap;\r\n            var nameOrIds = keys(selectedDataIndicesMap);\r\n            var dataIndices = [];\r\n            for (var i = 0; i < nameOrIds.length; i++) {\r\n                var dataIndex = selectedDataIndicesMap[nameOrIds[i]];\r\n                if (dataIndex >= 0) {\r\n                    dataIndices.push(dataIndex);\r\n                }\r\n            }\r\n            return dataIndices;\r\n        };\r\n        SeriesModel.prototype.isSelected = function (dataIndex, dataType) {\r\n            var selectedMap = this.option.selectedMap;\r\n            if (!selectedMap) {\r\n                return false;\r\n            }\r\n            var data = this.getData(dataType);\r\n            var nameOrId = getSelectionKey(data, dataIndex);\r\n            return selectedMap[nameOrId] || false;\r\n        };\r\n        SeriesModel.prototype._innerSelect = function (data, innerDataIndices) {\r\n            var _a, _b;\r\n            var selectedMode = this.option.selectedMode;\r\n            var len = innerDataIndices.length;\r\n            if (!selectedMode || !len) {\r\n                return;\r\n            }\r\n            if (selectedMode === 'multiple') {\r\n                var selectedMap = this.option.selectedMap || (this.option.selectedMap = {});\r\n                for (var i = 0; i < len; i++) {\r\n                    var dataIndex = innerDataIndices[i];\r\n                    var nameOrId = getSelectionKey(data, dataIndex);\r\n                    selectedMap[nameOrId] = true;\r\n                    this._selectedDataIndicesMap[nameOrId] = data.getRawIndex(dataIndex);\r\n                }\r\n            }\r\n            else if (selectedMode === 'single' || selectedMode === true) {\r\n                var lastDataIndex = innerDataIndices[len - 1];\r\n                var nameOrId = getSelectionKey(data, lastDataIndex);\r\n                this.option.selectedMap = (_a = {},\r\n                    _a[nameOrId] = true,\r\n                    _a);\r\n                this._selectedDataIndicesMap = (_b = {},\r\n                    _b[nameOrId] = data.getRawIndex(lastDataIndex),\r\n                    _b);\r\n            }\r\n        };\r\n        SeriesModel.prototype._initSelectedMapFromData = function (data) {\r\n            if (this.option.selectedMap) {\r\n                return;\r\n            }\r\n            var dataIndices = [];\r\n            if (data.hasItemOption) {\r\n                data.each(function (idx) {\r\n                    var rawItem = data.getRawDataItem(idx);\r\n                    if (typeof rawItem === 'object'\r\n                        && rawItem.selected) {\r\n                        dataIndices.push(idx);\r\n                    }\r\n                });\r\n            }\r\n            if (dataIndices.length > 0) {\r\n                this._innerSelect(data, dataIndices);\r\n            }\r\n        };\r\n        SeriesModel.registerClass = function (clz) {\r\n            return ComponentModel.registerClass(clz);\r\n        };\r\n        SeriesModel.protoInitialize = (function () {\r\n            var proto = SeriesModel.prototype;\r\n            proto.type = 'series.__base__';\r\n            proto.seriesIndex = 0;\r\n            proto.useColorPaletteOnData = false;\r\n            proto.ignoreStyleOnData = false;\r\n            proto.hasSymbolVisual = false;\r\n            proto.defaultSymbol = 'circle';\r\n            proto.visualStyleAccessPath = 'itemStyle';\r\n            proto.visualDrawType = 'fill';\r\n        })();\r\n        return SeriesModel;\r\n    }(ComponentModel));\r\n    mixin(SeriesModel, DataFormatMixin);\r\n    mixin(SeriesModel, ColorPaletteMixin);\r\n    mountExtend(SeriesModel, ComponentModel);\r\n    function autoSeriesName(seriesModel) {\r\n        var name = seriesModel.name;\r\n        if (!isNameSpecified(seriesModel)) {\r\n            seriesModel.name = getSeriesAutoName(seriesModel) || name;\r\n        }\r\n    }\r\n    function getSeriesAutoName(seriesModel) {\r\n        var data = seriesModel.getRawData();\r\n        var dataDims = data.mapDimensionsAll('seriesName');\r\n        var nameArr = [];\r\n        each(dataDims, function (dataDim) {\r\n            var dimInfo = data.getDimensionInfo(dataDim);\r\n            dimInfo.displayName && nameArr.push(dimInfo.displayName);\r\n        });\r\n        return nameArr.join(' ');\r\n    }\r\n    function dataTaskCount(context) {\r\n        return context.model.getRawData().count();\r\n    }\r\n    function dataTaskReset(context) {\r\n        var seriesModel = context.model;\r\n        seriesModel.setData(seriesModel.getRawData().cloneShallow());\r\n        return dataTaskProgress;\r\n    }\r\n    function dataTaskProgress(param, context) {\r\n        if (context.outputData && param.end > context.outputData.count()) {\r\n            context.model.getRawData().cloneShallow(context.outputData);\r\n        }\r\n    }\r\n    function wrapData(data, seriesModel) {\r\n        each(__spreadArrays(data.CHANGABLE_METHODS, data.DOWNSAMPLE_METHODS), function (methodName) {\r\n            data.wrapMethod(methodName, curry(onDataChange, seriesModel));\r\n        });\r\n    }\r\n    function onDataChange(seriesModel, newList) {\r\n        var task = getCurrentTask(seriesModel);\r\n        if (task) {\r\n            task.setOutputEnd((newList || this).count());\r\n        }\r\n        return newList;\r\n    }\r\n    function getCurrentTask(seriesModel) {\r\n        var scheduler = (seriesModel.ecModel || {}).scheduler;\r\n        var pipeline = scheduler && scheduler.getPipeline(seriesModel.uid);\r\n        if (pipeline) {\r\n            var task = pipeline.currentTask;\r\n            if (task) {\r\n                var agentStubMap = task.agentStubMap;\r\n                if (agentStubMap) {\r\n                    task = agentStubMap.get(seriesModel.uid);\r\n                }\r\n            }\r\n            return task;\r\n        }\r\n    }\n\n    var ComponentView = (function () {\r\n        function ComponentView() {\r\n            this.group = new Group();\r\n            this.uid = getUID('viewComponent');\r\n        }\r\n        ComponentView.prototype.init = function (ecModel, api) { };\r\n        ComponentView.prototype.render = function (model, ecModel, api, payload) { };\r\n        ComponentView.prototype.dispose = function (ecModel, api) { };\r\n        ComponentView.prototype.updateView = function (model, ecModel, api, payload) {\r\n        };\r\n        ComponentView.prototype.updateLayout = function (model, ecModel, api, payload) {\r\n        };\r\n        ComponentView.prototype.updateVisual = function (model, ecModel, api, payload) {\r\n        };\r\n        ComponentView.prototype.blurSeries = function (seriesModels, ecModel) {\r\n        };\r\n        return ComponentView;\r\n    }());\r\n    enableClassExtend(ComponentView);\r\n    enableClassManagement(ComponentView, { registerWhenExtend: true });\n\n    function createRenderPlanner () {\r\n        var inner = makeInner();\r\n        return function (seriesModel) {\r\n            var fields = inner(seriesModel);\r\n            var pipelineContext = seriesModel.pipelineContext;\r\n            var originalLarge = !!fields.large;\r\n            var originalProgressive = !!fields.progressiveRender;\r\n            var large = fields.large = !!(pipelineContext && pipelineContext.large);\r\n            var progressive = fields.progressiveRender = !!(pipelineContext && pipelineContext.progressiveRender);\r\n            return (!!((originalLarge !== large) || (originalProgressive !== progressive)) && 'reset');\r\n        };\r\n    }\n\n    var inner$3 = makeInner();\r\n    var renderPlanner = createRenderPlanner();\r\n    var ChartView = (function () {\r\n        function ChartView() {\r\n            this.group = new Group();\r\n            this.uid = getUID('viewChart');\r\n            this.renderTask = createTask({\r\n                plan: renderTaskPlan,\r\n                reset: renderTaskReset\r\n            });\r\n            this.renderTask.context = { view: this };\r\n        }\r\n        ChartView.prototype.init = function (ecModel, api) { };\r\n        ChartView.prototype.render = function (seriesModel, ecModel, api, payload) { };\r\n        ChartView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\r\n            toggleHighlight(seriesModel.getData(), payload, 'emphasis');\r\n        };\r\n        ChartView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\r\n            toggleHighlight(seriesModel.getData(), payload, 'normal');\r\n        };\r\n        ChartView.prototype.remove = function (ecModel, api) {\r\n            this.group.removeAll();\r\n        };\r\n        ChartView.prototype.dispose = function (ecModel, api) { };\r\n        ChartView.prototype.updateView = function (seriesModel, ecModel, api, payload) {\r\n            this.render(seriesModel, ecModel, api, payload);\r\n        };\r\n        ChartView.prototype.updateLayout = function (seriesModel, ecModel, api, payload) {\r\n            this.render(seriesModel, ecModel, api, payload);\r\n        };\r\n        ChartView.prototype.updateVisual = function (seriesModel, ecModel, api, payload) {\r\n            this.render(seriesModel, ecModel, api, payload);\r\n        };\r\n        ChartView.markUpdateMethod = function (payload, methodName) {\r\n            inner$3(payload).updateMethod = methodName;\r\n        };\r\n        ChartView.protoInitialize = (function () {\r\n            var proto = ChartView.prototype;\r\n            proto.type = 'chart';\r\n        })();\r\n        return ChartView;\r\n    }());\r\n    function elSetState(el, state, highlightDigit) {\r\n        if (el) {\r\n            (state === 'emphasis' ? enterEmphasis : leaveEmphasis)(el, highlightDigit);\r\n        }\r\n    }\r\n    function toggleHighlight(data, payload, state) {\r\n        var dataIndex = queryDataIndex(data, payload);\r\n        var highlightDigit = (payload && payload.highlightKey != null)\r\n            ? getHighlightDigit(payload.highlightKey)\r\n            : null;\r\n        if (dataIndex != null) {\r\n            each(normalizeToArray(dataIndex), function (dataIdx) {\r\n                elSetState(data.getItemGraphicEl(dataIdx), state, highlightDigit);\r\n            });\r\n        }\r\n        else {\r\n            data.eachItemGraphicEl(function (el) {\r\n                elSetState(el, state, highlightDigit);\r\n            });\r\n        }\r\n    }\r\n    enableClassExtend(ChartView, ['dispose']);\r\n    enableClassManagement(ChartView, { registerWhenExtend: true });\r\n    function renderTaskPlan(context) {\r\n        return renderPlanner(context.model);\r\n    }\r\n    function renderTaskReset(context) {\r\n        var seriesModel = context.model;\r\n        var ecModel = context.ecModel;\r\n        var api = context.api;\r\n        var payload = context.payload;\r\n        var progressiveRender = seriesModel.pipelineContext.progressiveRender;\r\n        var view = context.view;\r\n        var updateMethod = payload && inner$3(payload).updateMethod;\r\n        var methodName = progressiveRender\r\n            ? 'incrementalPrepareRender'\r\n            : (updateMethod && view[updateMethod])\r\n                ? updateMethod\r\n                : 'render';\r\n        if (methodName !== 'render') {\r\n            view[methodName](seriesModel, ecModel, api, payload);\r\n        }\r\n        return progressMethodMap[methodName];\r\n    }\r\n    var progressMethodMap = {\r\n        incrementalPrepareRender: {\r\n            progress: function (params, context) {\r\n                context.view.incrementalRender(params, context.model, context.ecModel, context.api, context.payload);\r\n            }\r\n        },\r\n        render: {\r\n            forceFirstProgress: true,\r\n            progress: function (params, context) {\r\n                context.view.render(context.model, context.ecModel, context.api, context.payload);\r\n            }\r\n        }\r\n    };\n\n    function throttle(fn, delay, debounce) {\r\n        var currCall;\r\n        var lastCall = 0;\r\n        var lastExec = 0;\r\n        var timer = null;\r\n        var diff;\r\n        var scope;\r\n        var args;\r\n        var debounceNextCall;\r\n        delay = delay || 0;\r\n        function exec() {\r\n            lastExec = (new Date()).getTime();\r\n            timer = null;\r\n            fn.apply(scope, args || []);\r\n        }\r\n        var cb = function () {\r\n            var cbArgs = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                cbArgs[_i] = arguments[_i];\r\n            }\r\n            currCall = (new Date()).getTime();\r\n            scope = this;\r\n            args = cbArgs;\r\n            var thisDelay = debounceNextCall || delay;\r\n            var thisDebounce = debounceNextCall || debounce;\r\n            debounceNextCall = null;\r\n            diff = currCall - (thisDebounce ? lastCall : lastExec) - thisDelay;\r\n            clearTimeout(timer);\r\n            if (thisDebounce) {\r\n                timer = setTimeout(exec, thisDelay);\r\n            }\r\n            else {\r\n                if (diff >= 0) {\r\n                    exec();\r\n                }\r\n                else {\r\n                    timer = setTimeout(exec, -diff);\r\n                }\r\n            }\r\n            lastCall = currCall;\r\n        };\r\n        cb.clear = function () {\r\n            if (timer) {\r\n                clearTimeout(timer);\r\n                timer = null;\r\n            }\r\n        };\r\n        cb.debounceNextCall = function (debounceDelay) {\r\n            debounceNextCall = debounceDelay;\r\n        };\r\n        return cb;\r\n    }\n\n    var inner$4 = makeInner();\r\n    var defaultStyleMappers = {\r\n        itemStyle: makeStyleMapper(ITEM_STYLE_KEY_MAP, true),\r\n        lineStyle: makeStyleMapper(LINE_STYLE_KEY_MAP, true)\r\n    };\r\n    var defaultColorKey = {\r\n        lineStyle: 'stroke',\r\n        itemStyle: 'fill'\r\n    };\r\n    function getStyleMapper(seriesModel, stylePath) {\r\n        var styleMapper = seriesModel.visualStyleMapper\r\n            || defaultStyleMappers[stylePath];\r\n        if (!styleMapper) {\r\n            console.warn(\"Unkown style type '\" + stylePath + \"'.\");\r\n            return defaultStyleMappers.itemStyle;\r\n        }\r\n        return styleMapper;\r\n    }\r\n    function getDefaultColorKey(seriesModel, stylePath) {\r\n        var colorKey = seriesModel.visualDrawType\r\n            || defaultColorKey[stylePath];\r\n        if (!colorKey) {\r\n            console.warn(\"Unkown style type '\" + stylePath + \"'.\");\r\n            return 'fill';\r\n        }\r\n        return colorKey;\r\n    }\r\n    var seriesStyleTask = {\r\n        createOnAllSeries: true,\r\n        performRawSeries: true,\r\n        reset: function (seriesModel, ecModel) {\r\n            var data = seriesModel.getData();\r\n            var stylePath = seriesModel.visualStyleAccessPath\r\n                || 'itemStyle';\r\n            var styleModel = seriesModel.getModel(stylePath);\r\n            var getStyle = getStyleMapper(seriesModel, stylePath);\r\n            var globalStyle = getStyle(styleModel);\r\n            var colorKey = getDefaultColorKey(seriesModel, stylePath);\r\n            var color = globalStyle[colorKey];\r\n            var colorCallback = isFunction(color) ? color : null;\r\n            if (!globalStyle[colorKey] || colorCallback) {\r\n                globalStyle[colorKey] = seriesModel.getColorFromPalette(seriesModel.name, null, ecModel.getSeriesCount());\r\n                data.setVisual('colorFromPalette', true);\r\n            }\r\n            data.setVisual('style', globalStyle);\r\n            data.setVisual('drawType', colorKey);\r\n            if (!ecModel.isSeriesFiltered(seriesModel) && colorCallback) {\r\n                data.setVisual('colorFromPalette', false);\r\n                return {\r\n                    dataEach: function (data, idx) {\r\n                        var dataParams = seriesModel.getDataParams(idx);\r\n                        var itemStyle = extend({}, globalStyle);\r\n                        itemStyle[colorKey] = colorCallback(dataParams);\r\n                        data.setItemVisual(idx, 'style', itemStyle);\r\n                    }\r\n                };\r\n            }\r\n        }\r\n    };\r\n    var sharedModel = new Model();\r\n    var dataStyleTask = {\r\n        createOnAllSeries: true,\r\n        performRawSeries: true,\r\n        reset: function (seriesModel, ecModel) {\r\n            if (seriesModel.ignoreStyleOnData || ecModel.isSeriesFiltered(seriesModel)) {\r\n                return;\r\n            }\r\n            var data = seriesModel.getData();\r\n            var stylePath = seriesModel.visualStyleAccessPath\r\n                || 'itemStyle';\r\n            var getStyle = getStyleMapper(seriesModel, stylePath);\r\n            var colorKey = data.getVisual('drawType');\r\n            return {\r\n                dataEach: data.hasItemOption ? function (data, idx) {\r\n                    var rawItem = data.getRawDataItem(idx);\r\n                    if (rawItem && rawItem[stylePath]) {\r\n                        sharedModel.option = rawItem[stylePath];\r\n                        var style = getStyle(sharedModel);\r\n                        var existsStyle = data.ensureUniqueItemVisual(idx, 'style');\r\n                        extend(existsStyle, style);\r\n                        if (colorKey in style) {\r\n                            data.setItemVisual(idx, 'colorFromPalette', false);\r\n                        }\r\n                    }\r\n                } : null\r\n            };\r\n        }\r\n    };\r\n    var dataColorPaletteTask = {\r\n        createOnAllSeries: true,\r\n        performRawSeries: true,\r\n        overallReset: function (ecModel) {\r\n            var paletteScopeGroupByType = createHashMap();\r\n            ecModel.eachSeries(function (seriesModel) {\r\n                if (!seriesModel.useColorPaletteOnData) {\r\n                    return;\r\n                }\r\n                var colorScope = paletteScopeGroupByType.get(seriesModel.type);\r\n                if (!colorScope) {\r\n                    colorScope = {};\r\n                    paletteScopeGroupByType.set(seriesModel.type, colorScope);\r\n                }\r\n                inner$4(seriesModel).scope = colorScope;\r\n            });\r\n            ecModel.eachSeries(function (seriesModel) {\r\n                if (!seriesModel.useColorPaletteOnData || ecModel.isSeriesFiltered(seriesModel)) {\r\n                    return;\r\n                }\r\n                var dataAll = seriesModel.getRawData();\r\n                var idxMap = {};\r\n                var data = seriesModel.getData();\r\n                var colorScope = inner$4(seriesModel).scope;\r\n                var stylePath = seriesModel.visualStyleAccessPath\r\n                    || 'itemStyle';\r\n                var colorKey = getDefaultColorKey(seriesModel, stylePath);\r\n                data.each(function (idx) {\r\n                    var rawIdx = data.getRawIndex(idx);\r\n                    idxMap[rawIdx] = idx;\r\n                });\r\n                dataAll.each(function (rawIdx) {\r\n                    var idx = idxMap[rawIdx];\r\n                    var fromPalette = data.getItemVisual(idx, 'colorFromPalette');\r\n                    if (fromPalette) {\r\n                        var itemStyle = data.ensureUniqueItemVisual(idx, 'style');\r\n                        itemStyle[colorKey] = seriesModel.getColorFromPalette(dataAll.getName(rawIdx) || (rawIdx + ''), colorScope, dataAll.count());\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    };\n\n    function aria (dom, ecModel) {\r\n        var ariaModel = ecModel.getModel('aria');\r\n        if (!ariaModel.get('show')) {\r\n            return;\r\n        }\r\n        else if (ariaModel.get('description')) {\r\n            dom.setAttribute('aria-label', ariaModel.get('description'));\r\n            return;\r\n        }\r\n        var seriesCnt = 0;\r\n        ecModel.eachSeries(function (seriesModel, idx) {\r\n            ++seriesCnt;\r\n        }, this);\r\n        var maxDataCnt = ariaModel.get('data.maxCount') || 10;\r\n        var maxSeriesCnt = ariaModel.get('series.maxCount') || 10;\r\n        var displaySeriesCnt = Math.min(seriesCnt, maxSeriesCnt);\r\n        var ariaLabel;\r\n        if (seriesCnt < 1) {\r\n            return;\r\n        }\r\n        else {\r\n            var title = getTitle();\r\n            if (title) {\r\n                ariaLabel = replace(getConfig('general.withTitle'), {\r\n                    title: title\r\n                });\r\n            }\r\n            else {\r\n                ariaLabel = getConfig('general.withoutTitle');\r\n            }\r\n            var seriesLabels_1 = [];\r\n            var prefix = seriesCnt > 1\r\n                ? 'series.multiple.prefix'\r\n                : 'series.single.prefix';\r\n            ariaLabel += replace(getConfig(prefix), { seriesCount: seriesCnt });\r\n            ecModel.eachSeries(function (seriesModel, idx) {\r\n                if (idx < displaySeriesCnt) {\r\n                    var seriesLabel = void 0;\r\n                    var seriesName = seriesModel.get('name');\r\n                    var seriesTpl = 'series.'\r\n                        + (seriesCnt > 1 ? 'multiple' : 'single') + '.';\r\n                    seriesLabel = getConfig(seriesName\r\n                        ? seriesTpl + 'withName'\r\n                        : seriesTpl + 'withoutName');\r\n                    seriesLabel = replace(seriesLabel, {\r\n                        seriesId: seriesModel.seriesIndex,\r\n                        seriesName: seriesModel.get('name'),\r\n                        seriesType: getSeriesTypeName(seriesModel.subType)\r\n                    });\r\n                    var data = seriesModel.getData();\r\n                    window.data = data;\r\n                    if (data.count() > maxDataCnt) {\r\n                        seriesLabel += replace(getConfig('data.partialData'), {\r\n                            displayCnt: maxDataCnt\r\n                        });\r\n                    }\r\n                    else {\r\n                        seriesLabel += getConfig('data.allData');\r\n                    }\r\n                    var dataLabels = [];\r\n                    for (var i = 0; i < data.count(); i++) {\r\n                        if (i < maxDataCnt) {\r\n                            var name_1 = data.getName(i);\r\n                            var value = retrieveRawValue(data, i);\r\n                            dataLabels.push(replace(name_1\r\n                                ? getConfig('data.withName')\r\n                                : getConfig('data.withoutName'), {\r\n                                name: name_1,\r\n                                value: value\r\n                            }));\r\n                        }\r\n                    }\r\n                    seriesLabel += dataLabels\r\n                        .join(getConfig('data.separator.middle'))\r\n                        + getConfig('data.separator.end');\r\n                    seriesLabels_1.push(seriesLabel);\r\n                }\r\n            });\r\n            ariaLabel += seriesLabels_1\r\n                .join(getConfig('series.multiple.separator.middle'))\r\n                + getConfig('series.multiple.separator.end');\r\n            dom.setAttribute('aria-label', ariaLabel);\r\n        }\r\n        function replace(str, keyValues) {\r\n            if (typeof str !== 'string') {\r\n                return str;\r\n            }\r\n            var result = str;\r\n            each(keyValues, function (value, key) {\r\n                result = result.replace(new RegExp('\\\\{\\\\s*' + key + '\\\\s*\\\\}', 'g'), value);\r\n            });\r\n            return result;\r\n        }\r\n        function getConfig(path) {\r\n            var userConfig = ariaModel.get(path);\r\n            if (userConfig == null) {\r\n                var pathArr = path.split('.');\r\n                var result = ecModel.getLocale('aria');\r\n                for (var i = 0; i < pathArr.length; ++i) {\r\n                    result = result[pathArr[i]];\r\n                }\r\n                return result;\r\n            }\r\n            else {\r\n                return userConfig;\r\n            }\r\n        }\r\n        function getTitle() {\r\n            var title = ecModel.getModel('title').option;\r\n            if (title && title.length) {\r\n                title = title[0];\r\n            }\r\n            return title && title.text;\r\n        }\r\n        function getSeriesTypeName(type) {\r\n            return ecModel.getLocale(['series', 'typeNames'])[type] || '自定义图';\r\n        }\r\n    }\n\n    var PI$5 = Math.PI;\r\n    function loadingDefault (api, opts) {\r\n        opts = opts || {};\r\n        defaults(opts, {\r\n            text: 'loading',\r\n            textColor: '#000',\r\n            fontSize: '12px',\r\n            maskColor: 'rgba(255, 255, 255, 0.8)',\r\n            showSpinner: true,\r\n            color: '#5470c6',\r\n            spinnerRadius: 10,\r\n            lineWidth: 5,\r\n            zlevel: 0\r\n        });\r\n        var group = new Group();\r\n        var mask = new Rect({\r\n            style: {\r\n                fill: opts.maskColor\r\n            },\r\n            zlevel: opts.zlevel,\r\n            z: 10000\r\n        });\r\n        group.add(mask);\r\n        var font = opts.fontSize + ' sans-serif';\r\n        var labelRect = new Rect({\r\n            style: {\r\n                fill: 'none'\r\n            },\r\n            textContent: new ZRText({\r\n                style: {\r\n                    text: opts.text,\r\n                    fill: opts.textColor,\r\n                    font: font\r\n                }\r\n            }),\r\n            textConfig: {\r\n                position: 'right',\r\n                distance: 10\r\n            },\r\n            zlevel: opts.zlevel,\r\n            z: 10001\r\n        });\r\n        group.add(labelRect);\r\n        var arc;\r\n        if (opts.showSpinner) {\r\n            arc = new Arc({\r\n                shape: {\r\n                    startAngle: -PI$5 / 2,\r\n                    endAngle: -PI$5 / 2 + 0.1,\r\n                    r: opts.spinnerRadius\r\n                },\r\n                style: {\r\n                    stroke: opts.color,\r\n                    lineCap: 'round',\r\n                    lineWidth: opts.lineWidth\r\n                },\r\n                zlevel: opts.zlevel,\r\n                z: 10001\r\n            });\r\n            arc.animateShape(true)\r\n                .when(1000, {\r\n                endAngle: PI$5 * 3 / 2\r\n            })\r\n                .start('circularInOut');\r\n            arc.animateShape(true)\r\n                .when(1000, {\r\n                startAngle: PI$5 * 3 / 2\r\n            })\r\n                .delay(300)\r\n                .start('circularInOut');\r\n            group.add(arc);\r\n        }\r\n        group.resize = function () {\r\n            var textWidth = getWidth(opts.text, font);\r\n            var r = opts.showSpinner ? opts.spinnerRadius : 0;\r\n            var cx = (api.getWidth() - r * 2 - (opts.showSpinner && textWidth ? 10 : 0) - textWidth) / 2\r\n                - (opts.showSpinner ? 0 : textWidth / 2);\r\n            var cy = api.getHeight() / 2;\r\n            opts.showSpinner && arc.setShape({\r\n                cx: cx,\r\n                cy: cy\r\n            });\r\n            labelRect.setShape({\r\n                x: cx - r,\r\n                y: cy - r,\r\n                width: r * 2,\r\n                height: r * 2\r\n            });\r\n            mask.setShape({\r\n                x: 0,\r\n                y: 0,\r\n                width: api.getWidth(),\r\n                height: api.getHeight()\r\n            });\r\n        };\r\n        group.resize();\r\n        return group;\r\n    }\n\n    var Scheduler = (function () {\r\n        function Scheduler(ecInstance, api, dataProcessorHandlers, visualHandlers) {\r\n            this._stageTaskMap = createHashMap();\r\n            this.ecInstance = ecInstance;\r\n            this.api = api;\r\n            dataProcessorHandlers = this._dataProcessorHandlers = dataProcessorHandlers.slice();\r\n            visualHandlers = this._visualHandlers = visualHandlers.slice();\r\n            this._allHandlers = dataProcessorHandlers.concat(visualHandlers);\r\n        }\r\n        Scheduler.prototype.restoreData = function (ecModel, payload) {\r\n            ecModel.restoreData(payload);\r\n            this._stageTaskMap.each(function (taskRecord) {\r\n                var overallTask = taskRecord.overallTask;\r\n                overallTask && overallTask.dirty();\r\n            });\r\n        };\r\n        Scheduler.prototype.getPerformArgs = function (task, isBlock) {\r\n            if (!task.__pipeline) {\r\n                return;\r\n            }\r\n            var pipeline = this._pipelineMap.get(task.__pipeline.id);\r\n            var pCtx = pipeline.context;\r\n            var incremental = !isBlock\r\n                && pipeline.progressiveEnabled\r\n                && (!pCtx || pCtx.progressiveRender)\r\n                && task.__idxInPipeline > pipeline.blockIndex;\r\n            var step = incremental ? pipeline.step : null;\r\n            var modDataCount = pCtx && pCtx.modDataCount;\r\n            var modBy = modDataCount != null ? Math.ceil(modDataCount / step) : null;\r\n            return { step: step, modBy: modBy, modDataCount: modDataCount };\r\n        };\r\n        Scheduler.prototype.getPipeline = function (pipelineId) {\r\n            return this._pipelineMap.get(pipelineId);\r\n        };\r\n        Scheduler.prototype.updateStreamModes = function (seriesModel, view) {\r\n            var pipeline = this._pipelineMap.get(seriesModel.uid);\r\n            var data = seriesModel.getData();\r\n            var dataLen = data.count();\r\n            var progressiveRender = pipeline.progressiveEnabled\r\n                && view.incrementalPrepareRender\r\n                && dataLen >= pipeline.threshold;\r\n            var large = seriesModel.get('large') && dataLen >= seriesModel.get('largeThreshold');\r\n            var modDataCount = seriesModel.get('progressiveChunkMode') === 'mod' ? dataLen : null;\r\n            seriesModel.pipelineContext = pipeline.context = {\r\n                progressiveRender: progressiveRender,\r\n                modDataCount: modDataCount,\r\n                large: large\r\n            };\r\n        };\r\n        Scheduler.prototype.restorePipelines = function (ecModel) {\r\n            var scheduler = this;\r\n            var pipelineMap = scheduler._pipelineMap = createHashMap();\r\n            ecModel.eachSeries(function (seriesModel) {\r\n                var progressive = seriesModel.getProgressive();\r\n                var pipelineId = seriesModel.uid;\r\n                pipelineMap.set(pipelineId, {\r\n                    id: pipelineId,\r\n                    head: null,\r\n                    tail: null,\r\n                    threshold: seriesModel.getProgressiveThreshold(),\r\n                    progressiveEnabled: progressive\r\n                        && !(seriesModel.preventIncremental && seriesModel.preventIncremental()),\r\n                    blockIndex: -1,\r\n                    step: Math.round(progressive || 700),\r\n                    count: 0\r\n                });\r\n                scheduler._pipe(seriesModel, seriesModel.dataTask);\r\n            });\r\n        };\r\n        Scheduler.prototype.prepareStageTasks = function () {\r\n            var stageTaskMap = this._stageTaskMap;\r\n            var ecModel = this.ecInstance.getModel();\r\n            var api = this.api;\r\n            each(this._allHandlers, function (handler) {\r\n                var record = stageTaskMap.get(handler.uid) || stageTaskMap.set(handler.uid, {});\r\n                handler.reset && this._createSeriesStageTask(handler, record, ecModel, api);\r\n                handler.overallReset && this._createOverallStageTask(handler, record, ecModel, api);\r\n            }, this);\r\n        };\r\n        Scheduler.prototype.prepareView = function (view, model, ecModel, api) {\r\n            var renderTask = view.renderTask;\r\n            var context = renderTask.context;\r\n            context.model = model;\r\n            context.ecModel = ecModel;\r\n            context.api = api;\r\n            renderTask.__block = !view.incrementalPrepareRender;\r\n            this._pipe(model, renderTask);\r\n        };\r\n        Scheduler.prototype.performDataProcessorTasks = function (ecModel, payload) {\r\n            this._performStageTasks(this._dataProcessorHandlers, ecModel, payload, { block: true });\r\n        };\r\n        Scheduler.prototype.performVisualTasks = function (ecModel, payload, opt) {\r\n            this._performStageTasks(this._visualHandlers, ecModel, payload, opt);\r\n        };\r\n        Scheduler.prototype._performStageTasks = function (stageHandlers, ecModel, payload, opt) {\r\n            opt = opt || {};\r\n            var unfinished = false;\r\n            var scheduler = this;\r\n            each(stageHandlers, function (stageHandler, idx) {\r\n                if (opt.visualType && opt.visualType !== stageHandler.visualType) {\r\n                    return;\r\n                }\r\n                var stageHandlerRecord = scheduler._stageTaskMap.get(stageHandler.uid);\r\n                var seriesTaskMap = stageHandlerRecord.seriesTaskMap;\r\n                var overallTask = stageHandlerRecord.overallTask;\r\n                if (overallTask) {\r\n                    var overallNeedDirty_1;\r\n                    var agentStubMap = overallTask.agentStubMap;\r\n                    agentStubMap.each(function (stub) {\r\n                        if (needSetDirty(opt, stub)) {\r\n                            stub.dirty();\r\n                            overallNeedDirty_1 = true;\r\n                        }\r\n                    });\r\n                    overallNeedDirty_1 && overallTask.dirty();\r\n                    scheduler.updatePayload(overallTask, payload);\r\n                    var performArgs_1 = scheduler.getPerformArgs(overallTask, opt.block);\r\n                    agentStubMap.each(function (stub) {\r\n                        stub.perform(performArgs_1);\r\n                    });\r\n                    if (overallTask.perform(performArgs_1)) {\r\n                        unfinished = true;\r\n                    }\r\n                }\r\n                else if (seriesTaskMap) {\r\n                    seriesTaskMap.each(function (task, pipelineId) {\r\n                        if (needSetDirty(opt, task)) {\r\n                            task.dirty();\r\n                        }\r\n                        var performArgs = scheduler.getPerformArgs(task, opt.block);\r\n                        performArgs.skip = !stageHandler.performRawSeries\r\n                            && ecModel.isSeriesFiltered(task.context.model);\r\n                        scheduler.updatePayload(task, payload);\r\n                        if (task.perform(performArgs)) {\r\n                            unfinished = true;\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            function needSetDirty(opt, task) {\r\n                return opt.setDirty && (!opt.dirtyMap || opt.dirtyMap.get(task.__pipeline.id));\r\n            }\r\n            this.unfinished = unfinished || this.unfinished;\r\n        };\r\n        Scheduler.prototype.performSeriesTasks = function (ecModel) {\r\n            var unfinished;\r\n            ecModel.eachSeries(function (seriesModel) {\r\n                unfinished = seriesModel.dataTask.perform() || unfinished;\r\n            });\r\n            this.unfinished = unfinished || this.unfinished;\r\n        };\r\n        Scheduler.prototype.plan = function () {\r\n            this._pipelineMap.each(function (pipeline) {\r\n                var task = pipeline.tail;\r\n                do {\r\n                    if (task.__block) {\r\n                        pipeline.blockIndex = task.__idxInPipeline;\r\n                        break;\r\n                    }\r\n                    task = task.getUpstream();\r\n                } while (task);\r\n            });\r\n        };\r\n        Scheduler.prototype.updatePayload = function (task, payload) {\r\n            payload !== 'remain' && (task.context.payload = payload);\r\n        };\r\n        Scheduler.prototype._createSeriesStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\r\n            var scheduler = this;\r\n            var seriesTaskMap = stageHandlerRecord.seriesTaskMap\r\n                || (stageHandlerRecord.seriesTaskMap = createHashMap());\r\n            var seriesType = stageHandler.seriesType;\r\n            var getTargetSeries = stageHandler.getTargetSeries;\r\n            if (stageHandler.createOnAllSeries) {\r\n                ecModel.eachRawSeries(create);\r\n            }\r\n            else if (seriesType) {\r\n                ecModel.eachRawSeriesByType(seriesType, create);\r\n            }\r\n            else if (getTargetSeries) {\r\n                getTargetSeries(ecModel, api).each(create);\r\n            }\r\n            function create(seriesModel) {\r\n                var pipelineId = seriesModel.uid;\r\n                var task = seriesTaskMap.get(pipelineId)\r\n                    || seriesTaskMap.set(pipelineId, createTask({\r\n                        plan: seriesTaskPlan,\r\n                        reset: seriesTaskReset,\r\n                        count: seriesTaskCount\r\n                    }));\r\n                task.context = {\r\n                    model: seriesModel,\r\n                    ecModel: ecModel,\r\n                    api: api,\r\n                    useClearVisual: stageHandler.isVisual && !stageHandler.isLayout,\r\n                    plan: stageHandler.plan,\r\n                    reset: stageHandler.reset,\r\n                    scheduler: scheduler\r\n                };\r\n                scheduler._pipe(seriesModel, task);\r\n            }\r\n            var pipelineMap = scheduler._pipelineMap;\r\n            seriesTaskMap.each(function (task, pipelineId) {\r\n                if (!pipelineMap.get(pipelineId)) {\r\n                    task.dispose();\r\n                    seriesTaskMap.removeKey(pipelineId);\r\n                }\r\n            });\r\n        };\r\n        Scheduler.prototype._createOverallStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\r\n            var scheduler = this;\r\n            var overallTask = stageHandlerRecord.overallTask = stageHandlerRecord.overallTask\r\n                || createTask({ reset: overallTaskReset });\r\n            overallTask.context = {\r\n                ecModel: ecModel,\r\n                api: api,\r\n                overallReset: stageHandler.overallReset,\r\n                scheduler: scheduler\r\n            };\r\n            var agentStubMap = overallTask.agentStubMap = overallTask.agentStubMap\r\n                || createHashMap();\r\n            var seriesType = stageHandler.seriesType;\r\n            var getTargetSeries = stageHandler.getTargetSeries;\r\n            var overallProgress = true;\r\n            if (seriesType) {\r\n                ecModel.eachRawSeriesByType(seriesType, createStub);\r\n            }\r\n            else if (getTargetSeries) {\r\n                getTargetSeries(ecModel, api).each(createStub);\r\n            }\r\n            else {\r\n                overallProgress = false;\r\n                each(ecModel.getSeries(), createStub);\r\n            }\r\n            function createStub(seriesModel) {\r\n                var pipelineId = seriesModel.uid;\r\n                var stub = agentStubMap.get(pipelineId);\r\n                if (!stub) {\r\n                    stub = agentStubMap.set(pipelineId, createTask({ reset: stubReset, onDirty: stubOnDirty }));\r\n                    overallTask.dirty();\r\n                }\r\n                stub.context = {\r\n                    model: seriesModel,\r\n                    overallProgress: overallProgress\r\n                };\r\n                stub.agent = overallTask;\r\n                stub.__block = overallProgress;\r\n                scheduler._pipe(seriesModel, stub);\r\n            }\r\n            var pipelineMap = scheduler._pipelineMap;\r\n            agentStubMap.each(function (stub, pipelineId) {\r\n                if (!pipelineMap.get(pipelineId)) {\r\n                    stub.dispose();\r\n                    overallTask.dirty();\r\n                    agentStubMap.removeKey(pipelineId);\r\n                }\r\n            });\r\n        };\r\n        Scheduler.prototype._pipe = function (seriesModel, task) {\r\n            var pipelineId = seriesModel.uid;\r\n            var pipeline = this._pipelineMap.get(pipelineId);\r\n            !pipeline.head && (pipeline.head = task);\r\n            pipeline.tail && pipeline.tail.pipe(task);\r\n            pipeline.tail = task;\r\n            task.__idxInPipeline = pipeline.count++;\r\n            task.__pipeline = pipeline;\r\n        };\r\n        Scheduler.wrapStageHandler = function (stageHandler, visualType) {\r\n            if (isFunction(stageHandler)) {\r\n                stageHandler = {\r\n                    overallReset: stageHandler,\r\n                    seriesType: detectSeriseType(stageHandler)\r\n                };\r\n            }\r\n            stageHandler.uid = getUID('stageHandler');\r\n            visualType && (stageHandler.visualType = visualType);\r\n            return stageHandler;\r\n        };\r\n        return Scheduler;\r\n    }());\r\n    function overallTaskReset(context) {\r\n        context.overallReset(context.ecModel, context.api, context.payload);\r\n    }\r\n    function stubReset(context) {\r\n        return context.overallProgress && stubProgress;\r\n    }\r\n    function stubProgress() {\r\n        this.agent.dirty();\r\n        this.getDownstream().dirty();\r\n    }\r\n    function stubOnDirty() {\r\n        this.agent && this.agent.dirty();\r\n    }\r\n    function seriesTaskPlan(context) {\r\n        return context.plan ? context.plan(context.model, context.ecModel, context.api, context.payload) : null;\r\n    }\r\n    function seriesTaskReset(context) {\r\n        if (context.useClearVisual) {\r\n            context.data.clearAllVisual();\r\n        }\r\n        var resetDefines = context.resetDefines = normalizeToArray(context.reset(context.model, context.ecModel, context.api, context.payload));\r\n        return resetDefines.length > 1\r\n            ? map(resetDefines, function (v, idx) {\r\n                return makeSeriesTaskProgress(idx);\r\n            })\r\n            : singleSeriesTaskProgress;\r\n    }\r\n    var singleSeriesTaskProgress = makeSeriesTaskProgress(0);\r\n    function makeSeriesTaskProgress(resetDefineIdx) {\r\n        return function (params, context) {\r\n            var data = context.data;\r\n            var resetDefine = context.resetDefines[resetDefineIdx];\r\n            if (resetDefine && resetDefine.dataEach) {\r\n                for (var i = params.start; i < params.end; i++) {\r\n                    resetDefine.dataEach(data, i);\r\n                }\r\n            }\r\n            else if (resetDefine && resetDefine.progress) {\r\n                resetDefine.progress(params, data);\r\n            }\r\n        };\r\n    }\r\n    function seriesTaskCount(context) {\r\n        return context.data.count();\r\n    }\r\n    function detectSeriseType(legacyFunc) {\r\n        seriesType = null;\r\n        try {\r\n            legacyFunc(ecModelMock, apiMock);\r\n        }\r\n        catch (e) {\r\n        }\r\n        return seriesType;\r\n    }\r\n    var ecModelMock = {};\r\n    var apiMock = {};\r\n    var seriesType;\r\n    mockMethods(ecModelMock, GlobalModel);\r\n    mockMethods(apiMock, ExtensionAPI);\r\n    ecModelMock.eachSeriesByType = ecModelMock.eachRawSeriesByType = function (type) {\r\n        seriesType = type;\r\n    };\r\n    ecModelMock.eachComponent = function (cond) {\r\n        if (cond.mainType === 'series' && cond.subType) {\r\n            seriesType = cond.subType;\r\n        }\r\n    };\r\n    function mockMethods(target, Clz) {\r\n        for (var name_1 in Clz.prototype) {\r\n            target[name_1] = noop;\r\n        }\r\n    }\n\n    var colorAll = [\r\n        '#37A2DA', '#32C5E9', '#67E0E3', '#9FE6B8', '#FFDB5C', '#ff9f7f',\r\n        '#fb7293', '#E062AE', '#E690D1', '#e7bcf3', '#9d96f5', '#8378EA', '#96BFFF'\r\n    ];\r\n    var lightTheme = {\r\n        color: colorAll,\r\n        colorLayer: [\r\n            ['#37A2DA', '#ffd85c', '#fd7b5f'],\r\n            ['#37A2DA', '#67E0E3', '#FFDB5C', '#ff9f7f', '#E062AE', '#9d96f5'],\r\n            ['#37A2DA', '#32C5E9', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#e7bcf3', '#8378EA', '#96BFFF'],\r\n            colorAll\r\n        ]\r\n    };\n\n    var contrastColor = '#B9B8CE';\r\n    var backgroundColor = '#100C2A';\r\n    var axisCommon = function () {\r\n        return {\r\n            axisLine: {\r\n                lineStyle: {\r\n                    color: contrastColor\r\n                }\r\n            },\r\n            splitLine: {\r\n                lineStyle: {\r\n                    color: '#484753'\r\n                }\r\n            },\r\n            splitArea: {\r\n                areaStyle: {\r\n                    color: ['rgba(255,255,255,0.02)', 'rgba(255,255,255,0.05)']\r\n                }\r\n            },\r\n            minorSplitLine: {\r\n                lineStyle: {\r\n                    color: '#20203B'\r\n                }\r\n            }\r\n        };\r\n    };\r\n    var colorPalette = [\r\n        '#4992ff',\r\n        '#7cffb2',\r\n        '#fddd60',\r\n        '#ff6e76',\r\n        '#58d9f9',\r\n        '#05c091',\r\n        '#ff8a45',\r\n        '#8d48e3',\r\n        '#dd79ff'\r\n    ];\r\n    var theme = {\r\n        darkMode: true,\r\n        color: colorPalette,\r\n        backgroundColor: backgroundColor,\r\n        axisPointer: {\r\n            lineStyle: {\r\n                color: '#817f91'\r\n            },\r\n            crossStyle: {\r\n                color: '#817f91'\r\n            },\r\n            label: {\r\n                color: '#fff'\r\n            }\r\n        },\r\n        legend: {\r\n            textStyle: {\r\n                color: contrastColor\r\n            }\r\n        },\r\n        textStyle: {\r\n            color: contrastColor\r\n        },\r\n        title: {\r\n            textStyle: {\r\n                color: '#EEF1FA'\r\n            },\r\n            subtextStyle: {\r\n                color: '#B9B8CE'\r\n            }\r\n        },\r\n        toolbox: {\r\n            iconStyle: {\r\n                borderColor: contrastColor\r\n            }\r\n        },\r\n        dataZoom: {\r\n            borderColor: '#71708A',\r\n            textStyle: {\r\n                color: contrastColor\r\n            },\r\n            brushStyle: {\r\n                color: 'rgba(135,163,206,0.3)'\r\n            },\r\n            handleStyle: {\r\n                color: '#353450',\r\n                borderColor: '#C5CBE3'\r\n            },\r\n            moveHandleStyle: {\r\n                color: '#B0B6C3',\r\n                opacity: 0.3\r\n            },\r\n            fillerColor: 'rgba(135,163,206,0.2)',\r\n            emphasis: {\r\n                handleStyle: {\r\n                    borderColor: '#91B7F2',\r\n                    color: '#4D587D'\r\n                },\r\n                moveHandleStyle: {\r\n                    color: '#636D9A',\r\n                    opacity: 0.7\r\n                }\r\n            },\r\n            dataBackground: {\r\n                lineStyle: {\r\n                    color: '#71708A',\r\n                    width: 1\r\n                },\r\n                areaStyle: {\r\n                    color: '#71708A'\r\n                }\r\n            },\r\n            selectedDataBackground: {\r\n                lineStyle: {\r\n                    color: '#87A3CE'\r\n                },\r\n                areaStyle: {\r\n                    color: '#87A3CE'\r\n                }\r\n            }\r\n        },\r\n        visualMap: {\r\n            textStyle: {\r\n                color: contrastColor\r\n            }\r\n        },\r\n        timeline: {\r\n            lineStyle: {\r\n                color: contrastColor\r\n            },\r\n            label: {\r\n                textStyle: {\r\n                    color: contrastColor\r\n                }\r\n            },\r\n            controlStyle: {\r\n                color: contrastColor,\r\n                borderColor: contrastColor\r\n            }\r\n        },\r\n        calendar: {\r\n            itemStyle: {\r\n                color: backgroundColor\r\n            },\r\n            dayLabel: {\r\n                color: contrastColor\r\n            },\r\n            monthLabel: {\r\n                color: contrastColor\r\n            },\r\n            yearLabel: {\r\n                color: contrastColor\r\n            }\r\n        },\r\n        timeAxis: axisCommon(),\r\n        logAxis: axisCommon(),\r\n        valueAxis: axisCommon(),\r\n        categoryAxis: axisCommon(),\r\n        line: {\r\n            symbol: 'circle'\r\n        },\r\n        graph: {\r\n            color: colorPalette\r\n        },\r\n        gauge: {\r\n            title: {\r\n                textStyle: {\r\n                    color: contrastColor\r\n                }\r\n            }\r\n        },\r\n        candlestick: {\r\n            itemStyle: {\r\n                color: '#FD1050',\r\n                color0: '#0CF49B',\r\n                borderColor: '#FD1050',\r\n                borderColor0: '#0CF49B'\r\n            }\r\n        }\r\n    };\r\n    theme.categoryAxis.splitLine.show = false;\n\n    var DatasetModel = (function (_super) {\r\n        __extends(DatasetModel, _super);\r\n        function DatasetModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = 'dataset';\r\n            return _this;\r\n        }\r\n        DatasetModel.prototype.init = function (option, parentModel, ecModel) {\r\n            _super.prototype.init.call(this, option, parentModel, ecModel);\r\n            this._sourceManager = new SourceManager(this);\r\n            disableTransformOptionMerge(this);\r\n        };\r\n        DatasetModel.prototype.mergeOption = function (newOption, ecModel) {\r\n            _super.prototype.mergeOption.call(this, newOption, ecModel);\r\n            disableTransformOptionMerge(this);\r\n        };\r\n        DatasetModel.prototype.optionUpdated = function () {\r\n            this._sourceManager.dirty();\r\n        };\r\n        DatasetModel.prototype.getSourceManager = function () {\r\n            return this._sourceManager;\r\n        };\r\n        DatasetModel.type = 'dataset';\r\n        DatasetModel.defaultOption = {\r\n            seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN\r\n        };\r\n        return DatasetModel;\r\n    }(ComponentModel));\r\n    ComponentModel.registerClass(DatasetModel);\r\n    var DatasetView = (function (_super) {\r\n        __extends(DatasetView, _super);\r\n        function DatasetView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = 'dataset';\r\n            return _this;\r\n        }\r\n        DatasetView.type = 'dataset';\r\n        return DatasetView;\r\n    }(ComponentView));\r\n    ComponentView.registerClass(DatasetView);\n\n    var storage = createHashMap();\r\n    var mapDataStorage = {\r\n        registerMap: function (mapName, rawDef, rawSpecialAreas) {\r\n            var records;\r\n            if (isArray(rawDef)) {\r\n                records = rawDef;\r\n            }\r\n            else if (rawDef.svg) {\r\n                records = [{\r\n                        type: 'svg',\r\n                        source: rawDef.svg,\r\n                        specialAreas: rawDef.specialAreas\r\n                    }];\r\n            }\r\n            else {\r\n                var geoSource = rawDef.geoJson\r\n                    || rawDef.geoJSON;\r\n                if (geoSource && !rawDef.features) {\r\n                    rawSpecialAreas = rawDef.specialAreas;\r\n                    rawDef = geoSource;\r\n                }\r\n                records = [{\r\n                        type: 'geoJSON',\r\n                        source: rawDef,\r\n                        specialAreas: rawSpecialAreas\r\n                    }];\r\n            }\r\n            each(records, function (record) {\r\n                var type = record.type;\r\n                type === 'geoJson' && (type = record.type = 'geoJSON');\r\n                var parse = parsers[type];\r\n                if (__DEV__) {\r\n                    assert(parse, 'Illegal map type: ' + type);\r\n                }\r\n                parse(record);\r\n            });\r\n            return storage.set(mapName, records);\r\n        },\r\n        retrieveMap: function (mapName) {\r\n            return storage.get(mapName);\r\n        }\r\n    };\r\n    var parsers = {\r\n        geoJSON: function (record) {\r\n            var source = record.source;\r\n            record.geoJSON = !isString(source)\r\n                ? source\r\n                : (typeof JSON !== 'undefined' && JSON.parse)\r\n                    ? JSON.parse(source)\r\n                    : (new Function('return (' + source + ');'))();\r\n        },\r\n        svg: function (record) {\r\n            record.svgXML = parseXML(record.source);\r\n        }\r\n    };\n\n    var ECEventProcessor = (function () {\r\n        function ECEventProcessor() {\r\n        }\r\n        ECEventProcessor.prototype.normalizeQuery = function (query) {\r\n            var cptQuery = {};\r\n            var dataQuery = {};\r\n            var otherQuery = {};\r\n            if (isString(query)) {\r\n                var condCptType = parseClassType(query);\r\n                cptQuery.mainType = condCptType.main || null;\r\n                cptQuery.subType = condCptType.sub || null;\r\n            }\r\n            else {\r\n                var suffixes_1 = ['Index', 'Name', 'Id'];\r\n                var dataKeys_1 = { name: 1, dataIndex: 1, dataType: 1 };\r\n                each(query, function (val, key) {\r\n                    var reserved = false;\r\n                    for (var i = 0; i < suffixes_1.length; i++) {\r\n                        var propSuffix = suffixes_1[i];\r\n                        var suffixPos = key.lastIndexOf(propSuffix);\r\n                        if (suffixPos > 0 && suffixPos === key.length - propSuffix.length) {\r\n                            var mainType = key.slice(0, suffixPos);\r\n                            if (mainType !== 'data') {\r\n                                cptQuery.mainType = mainType;\r\n                                cptQuery[propSuffix.toLowerCase()] = val;\r\n                                reserved = true;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (dataKeys_1.hasOwnProperty(key)) {\r\n                        dataQuery[key] = val;\r\n                        reserved = true;\r\n                    }\r\n                    if (!reserved) {\r\n                        otherQuery[key] = val;\r\n                    }\r\n                });\r\n            }\r\n            return {\r\n                cptQuery: cptQuery,\r\n                dataQuery: dataQuery,\r\n                otherQuery: otherQuery\r\n            };\r\n        };\r\n        ECEventProcessor.prototype.filter = function (eventType, query) {\r\n            var eventInfo = this.eventInfo;\r\n            if (!eventInfo) {\r\n                return true;\r\n            }\r\n            var targetEl = eventInfo.targetEl;\r\n            var packedEvent = eventInfo.packedEvent;\r\n            var model = eventInfo.model;\r\n            var view = eventInfo.view;\r\n            if (!model || !view) {\r\n                return true;\r\n            }\r\n            var cptQuery = query.cptQuery;\r\n            var dataQuery = query.dataQuery;\r\n            return check(cptQuery, model, 'mainType')\r\n                && check(cptQuery, model, 'subType')\r\n                && check(cptQuery, model, 'index', 'componentIndex')\r\n                && check(cptQuery, model, 'name')\r\n                && check(cptQuery, model, 'id')\r\n                && check(dataQuery, packedEvent, 'name')\r\n                && check(dataQuery, packedEvent, 'dataIndex')\r\n                && check(dataQuery, packedEvent, 'dataType')\r\n                && (!view.filterForExposedEvent || view.filterForExposedEvent(eventType, query.otherQuery, targetEl, packedEvent));\r\n            function check(query, host, prop, propOnHost) {\r\n                return query[prop] == null || host[propOnHost || prop] === query[prop];\r\n            }\r\n        };\r\n        ECEventProcessor.prototype.afterTrigger = function () {\r\n            this.eventInfo = null;\r\n        };\r\n        return ECEventProcessor;\r\n    }());\n\n    var seriesSymbolTask = {\r\n        createOnAllSeries: true,\r\n        performRawSeries: true,\r\n        reset: function (seriesModel, ecModel) {\r\n            var data = seriesModel.getData();\r\n            if (seriesModel.legendSymbol) {\r\n                data.setVisual('legendSymbol', seriesModel.legendSymbol);\r\n            }\r\n            if (!seriesModel.hasSymbolVisual) {\r\n                return;\r\n            }\r\n            var symbolType = seriesModel.get('symbol');\r\n            var symbolSize = seriesModel.get('symbolSize');\r\n            var keepAspect = seriesModel.get('symbolKeepAspect');\r\n            var symbolRotate = seriesModel.get('symbolRotate');\r\n            var hasSymbolTypeCallback = isFunction(symbolType);\r\n            var hasSymbolSizeCallback = isFunction(symbolSize);\r\n            var hasSymbolRotateCallback = isFunction(symbolRotate);\r\n            var hasCallback = hasSymbolTypeCallback || hasSymbolSizeCallback || hasSymbolRotateCallback;\r\n            var seriesSymbol = (!hasSymbolTypeCallback && symbolType) ? symbolType : seriesModel.defaultSymbol;\r\n            var seriesSymbolSize = !hasSymbolSizeCallback ? symbolSize : null;\r\n            var seriesSymbolRotate = !hasSymbolRotateCallback ? symbolRotate : null;\r\n            data.setVisual({\r\n                legendSymbol: seriesModel.legendSymbol || seriesSymbol,\r\n                symbol: seriesSymbol,\r\n                symbolSize: seriesSymbolSize,\r\n                symbolKeepAspect: keepAspect,\r\n                symbolRotate: seriesSymbolRotate\r\n            });\r\n            if (ecModel.isSeriesFiltered(seriesModel)) {\r\n                return;\r\n            }\r\n            function dataEach(data, idx) {\r\n                var rawValue = seriesModel.getRawValue(idx);\r\n                var params = seriesModel.getDataParams(idx);\r\n                hasSymbolTypeCallback && data.setItemVisual(idx, 'symbol', symbolType(rawValue, params));\r\n                hasSymbolSizeCallback && data.setItemVisual(idx, 'symbolSize', symbolSize(rawValue, params));\r\n                hasSymbolRotateCallback && data.setItemVisual(idx, 'symbolRotate', symbolRotate(rawValue, params));\r\n            }\r\n            return { dataEach: hasCallback ? dataEach : null };\r\n        }\r\n    };\r\n    var dataSymbolTask = {\r\n        createOnAllSeries: true,\r\n        performRawSeries: true,\r\n        reset: function (seriesModel, ecModel) {\r\n            if (!seriesModel.hasSymbolVisual) {\r\n                return;\r\n            }\r\n            if (ecModel.isSeriesFiltered(seriesModel)) {\r\n                return;\r\n            }\r\n            var data = seriesModel.getData();\r\n            function dataEach(data, idx) {\r\n                var itemModel = data.getItemModel(idx);\r\n                var itemSymbolType = itemModel.getShallow('symbol', true);\r\n                var itemSymbolSize = itemModel.getShallow('symbolSize', true);\r\n                var itemSymbolRotate = itemModel.getShallow('symbolRotate', true);\r\n                var itemSymbolKeepAspect = itemModel.getShallow('symbolKeepAspect', true);\r\n                if (itemSymbolType != null) {\r\n                    data.setItemVisual(idx, 'symbol', itemSymbolType);\r\n                }\r\n                if (itemSymbolSize != null) {\r\n                    data.setItemVisual(idx, 'symbolSize', itemSymbolSize);\r\n                }\r\n                if (itemSymbolRotate != null) {\r\n                    data.setItemVisual(idx, 'symbolRotate', itemSymbolRotate);\r\n                }\r\n                if (itemSymbolKeepAspect != null) {\r\n                    data.setItemVisual(idx, 'symbolKeepAspect', itemSymbolKeepAspect);\r\n                }\r\n            }\r\n            return { dataEach: data.hasItemOption ? dataEach : null };\r\n        }\r\n    };\n\n    function getItemVisualFromData(data, dataIndex, key) {\r\n        switch (key) {\r\n            case 'color':\r\n                var style = data.getItemVisual(dataIndex, 'style');\r\n                return style[data.getVisual('drawType')];\r\n            case 'opacity':\r\n                return data.getItemVisual(dataIndex, 'style').opacity;\r\n            case 'symbol':\r\n            case 'symbolSize':\r\n            case 'liftZ':\r\n                return data.getItemVisual(dataIndex, key);\r\n            default:\r\n                if (__DEV__) {\r\n                    console.warn(\"Unknown visual type \" + key);\r\n                }\r\n        }\r\n    }\r\n    function getVisualFromData(data, key) {\r\n        switch (key) {\r\n            case 'color':\r\n                var style = data.getVisual('style');\r\n                return style[data.getVisual('drawType')];\r\n            case 'opacity':\r\n                return data.getVisual('style').opacity;\r\n            case 'symbol':\r\n            case 'symbolSize':\r\n            case 'liftZ':\r\n                return data.getVisual(key);\r\n            default:\r\n                if (__DEV__) {\r\n                    console.warn(\"Unknown visual type \" + key);\r\n                }\r\n        }\r\n    }\n\n    var PI2$6 = Math.PI * 2;\r\n    var CMD$3 = PathProxy.CMD;\r\n    var DEFAULT_SEARCH_SPACE = ['top', 'right', 'bottom', 'left'];\r\n    function getCandidateAnchor(pos, distance, rect, outPt, outDir) {\r\n        var width = rect.width;\r\n        var height = rect.height;\r\n        switch (pos) {\r\n            case 'top':\r\n                outPt.set(rect.x + width / 2, rect.y - distance);\r\n                outDir.set(0, -1);\r\n                break;\r\n            case 'bottom':\r\n                outPt.set(rect.x + width / 2, rect.y + height + distance);\r\n                outDir.set(0, 1);\r\n                break;\r\n            case 'left':\r\n                outPt.set(rect.x - distance, rect.y + height / 2);\r\n                outDir.set(-1, 0);\r\n                break;\r\n            case 'right':\r\n                outPt.set(rect.x + width + distance, rect.y + height / 2);\r\n                outDir.set(1, 0);\r\n                break;\r\n        }\r\n    }\r\n    function projectPointToArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y, out) {\r\n        x -= cx;\r\n        y -= cy;\r\n        var d = Math.sqrt(x * x + y * y);\r\n        x /= d;\r\n        y /= d;\r\n        var ox = x * r + cx;\r\n        var oy = y * r + cy;\r\n        if (Math.abs(startAngle - endAngle) % PI2$6 < 1e-4) {\r\n            out[0] = ox;\r\n            out[1] = oy;\r\n            return d - r;\r\n        }\r\n        if (anticlockwise) {\r\n            var tmp = startAngle;\r\n            startAngle = normalizeRadian(endAngle);\r\n            endAngle = normalizeRadian(tmp);\r\n        }\r\n        else {\r\n            startAngle = normalizeRadian(startAngle);\r\n            endAngle = normalizeRadian(endAngle);\r\n        }\r\n        if (startAngle > endAngle) {\r\n            endAngle += PI2$6;\r\n        }\r\n        var angle = Math.atan2(y, x);\r\n        if (angle < 0) {\r\n            angle += PI2$6;\r\n        }\r\n        if ((angle >= startAngle && angle <= endAngle)\r\n            || (angle + PI2$6 >= startAngle && angle + PI2$6 <= endAngle)) {\r\n            out[0] = ox;\r\n            out[1] = oy;\r\n            return d - r;\r\n        }\r\n        var x1 = r * Math.cos(startAngle) + cx;\r\n        var y1 = r * Math.sin(startAngle) + cy;\r\n        var x2 = r * Math.cos(endAngle) + cx;\r\n        var y2 = r * Math.sin(endAngle) + cy;\r\n        var d1 = (x1 - x) * (x1 - x) + (y1 - y) * (y1 - y);\r\n        var d2 = (x2 - x) * (x2 - x) + (y2 - y) * (y2 - y);\r\n        if (d1 < d2) {\r\n            out[0] = x1;\r\n            out[1] = y1;\r\n            return Math.sqrt(d1);\r\n        }\r\n        else {\r\n            out[0] = x2;\r\n            out[1] = y2;\r\n            return Math.sqrt(d2);\r\n        }\r\n    }\r\n    function projectPointToLine(x1, y1, x2, y2, x, y, out, limitToEnds) {\r\n        var dx = x - x1;\r\n        var dy = y - y1;\r\n        var dx1 = x2 - x1;\r\n        var dy1 = y2 - y1;\r\n        var lineLen = Math.sqrt(dx1 * dx1 + dy1 * dy1);\r\n        dx1 /= lineLen;\r\n        dy1 /= lineLen;\r\n        var projectedLen = dx * dx1 + dy * dy1;\r\n        var t = projectedLen / lineLen;\r\n        if (limitToEnds) {\r\n            t = Math.min(Math.max(t, 0), 1);\r\n        }\r\n        t *= lineLen;\r\n        var ox = out[0] = x1 + t * dx1;\r\n        var oy = out[1] = y1 + t * dy1;\r\n        return Math.sqrt((ox - x) * (ox - x) + (oy - y) * (oy - y));\r\n    }\r\n    function projectPointToRect(x1, y1, width, height, x, y, out) {\r\n        if (width < 0) {\r\n            x1 = x1 + width;\r\n            width = -width;\r\n        }\r\n        if (height < 0) {\r\n            y1 = y1 + height;\r\n            height = -height;\r\n        }\r\n        var x2 = x1 + width;\r\n        var y2 = y1 + height;\r\n        var ox = out[0] = Math.min(Math.max(x, x1), x2);\r\n        var oy = out[1] = Math.min(Math.max(y, y1), y2);\r\n        return Math.sqrt((ox - x) * (ox - x) + (oy - y) * (oy - y));\r\n    }\r\n    var tmpPt = [];\r\n    function nearestPointOnRect(pt, rect, out) {\r\n        var dist = projectPointToRect(rect.x, rect.y, rect.width, rect.height, pt.x, pt.y, tmpPt);\r\n        out.set(tmpPt[0], tmpPt[1]);\r\n        return dist;\r\n    }\r\n    function nearestPointOnPath(pt, path, out) {\r\n        var xi = 0;\r\n        var yi = 0;\r\n        var x0 = 0;\r\n        var y0 = 0;\r\n        var x1;\r\n        var y1;\r\n        var minDist = Infinity;\r\n        var data = path.data;\r\n        var x = pt.x;\r\n        var y = pt.y;\r\n        for (var i = 0; i < data.length;) {\r\n            var cmd = data[i++];\r\n            if (i === 1) {\r\n                xi = data[i];\r\n                yi = data[i + 1];\r\n                x0 = xi;\r\n                y0 = yi;\r\n            }\r\n            var d = minDist;\r\n            switch (cmd) {\r\n                case CMD$3.M:\r\n                    x0 = data[i++];\r\n                    y0 = data[i++];\r\n                    xi = x0;\r\n                    yi = y0;\r\n                    break;\r\n                case CMD$3.L:\r\n                    d = projectPointToLine(xi, yi, data[i], data[i + 1], x, y, tmpPt, true);\r\n                    xi = data[i++];\r\n                    yi = data[i++];\r\n                    break;\r\n                case CMD$3.C:\r\n                    d = cubicProjectPoint(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y, tmpPt);\r\n                    xi = data[i++];\r\n                    yi = data[i++];\r\n                    break;\r\n                case CMD$3.Q:\r\n                    d = quadraticProjectPoint(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y, tmpPt);\r\n                    xi = data[i++];\r\n                    yi = data[i++];\r\n                    break;\r\n                case CMD$3.A:\r\n                    var cx = data[i++];\r\n                    var cy = data[i++];\r\n                    var rx = data[i++];\r\n                    var ry = data[i++];\r\n                    var theta = data[i++];\r\n                    var dTheta = data[i++];\r\n                    i += 1;\r\n                    var anticlockwise = !!(1 - data[i++]);\r\n                    x1 = Math.cos(theta) * rx + cx;\r\n                    y1 = Math.sin(theta) * ry + cy;\r\n                    if (i <= 1) {\r\n                        x0 = x1;\r\n                        y0 = y1;\r\n                    }\r\n                    var _x = (x - cx) * ry / rx + cx;\r\n                    d = projectPointToArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y, tmpPt);\r\n                    xi = Math.cos(theta + dTheta) * rx + cx;\r\n                    yi = Math.sin(theta + dTheta) * ry + cy;\r\n                    break;\r\n                case CMD$3.R:\r\n                    x0 = xi = data[i++];\r\n                    y0 = yi = data[i++];\r\n                    var width = data[i++];\r\n                    var height = data[i++];\r\n                    d = projectPointToRect(x0, y0, width, height, x, y, tmpPt);\r\n                    break;\r\n                case CMD$3.Z:\r\n                    d = projectPointToLine(xi, yi, x0, y0, x, y, tmpPt, true);\r\n                    xi = x0;\r\n                    yi = y0;\r\n                    break;\r\n            }\r\n            if (d < minDist) {\r\n                minDist = d;\r\n                out.set(tmpPt[0], tmpPt[1]);\r\n            }\r\n        }\r\n        return minDist;\r\n    }\r\n    var pt0 = new Point();\r\n    var pt1 = new Point();\r\n    var pt2 = new Point();\r\n    var dir = new Point();\r\n    var dir2 = new Point();\r\n    function updateLabelLinePoints(target, labelLineModel) {\r\n        if (!target) {\r\n            return;\r\n        }\r\n        var labelLine = target.getTextGuideLine();\r\n        var label = target.getTextContent();\r\n        if (!(label && labelLine)) {\r\n            return;\r\n        }\r\n        var labelGuideConfig = target.textGuideLineConfig || {};\r\n        var points = [[0, 0], [0, 0], [0, 0]];\r\n        var searchSpace = labelGuideConfig.candidates || DEFAULT_SEARCH_SPACE;\r\n        var labelRect = label.getBoundingRect().clone();\r\n        labelRect.applyTransform(label.getComputedTransform());\r\n        var minDist = Infinity;\r\n        var anchorPoint = labelGuideConfig.anchor;\r\n        var targetTransform = target.getComputedTransform();\r\n        var targetInversedTransform = targetTransform && invert([], targetTransform);\r\n        var len = labelLineModel.get('length2') || 0;\r\n        if (anchorPoint) {\r\n            pt2.copy(anchorPoint);\r\n        }\r\n        for (var i = 0; i < searchSpace.length; i++) {\r\n            var candidate = searchSpace[i];\r\n            getCandidateAnchor(candidate, 0, labelRect, pt0, dir);\r\n            Point.scaleAndAdd(pt1, pt0, dir, len);\r\n            pt1.transform(targetInversedTransform);\r\n            var boundingRect = target.getBoundingRect();\r\n            var dist = anchorPoint ? anchorPoint.distance(pt1)\r\n                : (target instanceof Path\r\n                    ? nearestPointOnPath(pt1, target.path, pt2)\r\n                    : nearestPointOnRect(pt1, boundingRect, pt2));\r\n            if (dist < minDist) {\r\n                minDist = dist;\r\n                pt1.transform(targetTransform);\r\n                pt2.transform(targetTransform);\r\n                pt2.toArray(points[0]);\r\n                pt1.toArray(points[1]);\r\n                pt0.toArray(points[2]);\r\n            }\r\n        }\r\n        limitTurnAngle(points, labelLineModel.get('minTurnAngle'));\r\n        labelLine.setShape({ points: points });\r\n    }\r\n    var tmpArr = [];\r\n    var tmpProjPoint = new Point();\r\n    function limitTurnAngle(linePoints, minTurnAngle) {\r\n        if (!(minTurnAngle <= 180 && minTurnAngle > 0)) {\r\n            return;\r\n        }\r\n        minTurnAngle = minTurnAngle / 180 * Math.PI;\r\n        pt0.fromArray(linePoints[0]);\r\n        pt1.fromArray(linePoints[1]);\r\n        pt2.fromArray(linePoints[2]);\r\n        Point.sub(dir, pt0, pt1);\r\n        Point.sub(dir2, pt2, pt1);\r\n        var len1 = dir.len();\r\n        var len2 = dir2.len();\r\n        if (len1 < 1e-3 || len2 < 1e-3) {\r\n            return;\r\n        }\r\n        dir.scale(1 / len1);\r\n        dir2.scale(1 / len2);\r\n        var angleCos = dir.dot(dir2);\r\n        var minTurnAngleCos = Math.cos(minTurnAngle);\r\n        if (minTurnAngleCos < angleCos) {\r\n            var d = projectPointToLine(pt1.x, pt1.y, pt2.x, pt2.y, pt0.x, pt0.y, tmpArr, false);\r\n            tmpProjPoint.fromArray(tmpArr);\r\n            tmpProjPoint.scaleAndAdd(dir2, d / Math.tan(Math.PI - minTurnAngle));\r\n            var t = pt2.x !== pt1.x\r\n                ? (tmpProjPoint.x - pt1.x) / (pt2.x - pt1.x)\r\n                : (tmpProjPoint.y - pt1.y) / (pt2.y - pt1.y);\r\n            if (isNaN(t)) {\r\n                return;\r\n            }\r\n            if (t < 0) {\r\n                Point.copy(tmpProjPoint, pt1);\r\n            }\r\n            else if (t > 1) {\r\n                Point.copy(tmpProjPoint, pt2);\r\n            }\r\n            tmpProjPoint.toArray(linePoints[1]);\r\n        }\r\n    }\r\n    function limitSurfaceAngle(linePoints, surfaceNormal, maxSurfaceAngle) {\r\n        if (!(maxSurfaceAngle <= 180 && maxSurfaceAngle > 0)) {\r\n            return;\r\n        }\r\n        maxSurfaceAngle = maxSurfaceAngle / 180 * Math.PI;\r\n        pt0.fromArray(linePoints[0]);\r\n        pt1.fromArray(linePoints[1]);\r\n        pt2.fromArray(linePoints[2]);\r\n        Point.sub(dir, pt1, pt0);\r\n        Point.sub(dir2, pt2, pt1);\r\n        var len1 = dir.len();\r\n        var len2 = dir2.len();\r\n        if (len1 < 1e-3 || len2 < 1e-3) {\r\n            return;\r\n        }\r\n        dir.scale(1 / len1);\r\n        dir2.scale(1 / len2);\r\n        var angleCos = dir.dot(surfaceNormal);\r\n        var maxSurfaceAngleCos = Math.cos(maxSurfaceAngle);\r\n        if (angleCos < maxSurfaceAngleCos) {\r\n            var d = projectPointToLine(pt1.x, pt1.y, pt2.x, pt2.y, pt0.x, pt0.y, tmpArr, false);\r\n            tmpProjPoint.fromArray(tmpArr);\r\n            var HALF_PI = Math.PI / 2;\r\n            var angle2 = Math.acos(dir2.dot(surfaceNormal));\r\n            var newAngle = HALF_PI + angle2 - maxSurfaceAngle;\r\n            if (newAngle >= HALF_PI) {\r\n                Point.copy(tmpProjPoint, pt2);\r\n            }\r\n            else {\r\n                tmpProjPoint.scaleAndAdd(dir2, d / Math.tan(Math.PI / 2 - newAngle));\r\n                var t = pt2.x !== pt1.x\r\n                    ? (tmpProjPoint.x - pt1.x) / (pt2.x - pt1.x)\r\n                    : (tmpProjPoint.y - pt1.y) / (pt2.y - pt1.y);\r\n                if (isNaN(t)) {\r\n                    return;\r\n                }\r\n                if (t < 0) {\r\n                    Point.copy(tmpProjPoint, pt1);\r\n                }\r\n                else if (t > 1) {\r\n                    Point.copy(tmpProjPoint, pt2);\r\n                }\r\n            }\r\n            tmpProjPoint.toArray(linePoints[1]);\r\n        }\r\n    }\r\n    function setLabelLineState(labelLine, ignore, stateName, stateModel) {\r\n        var isNormal = stateName === 'normal';\r\n        var stateObj = isNormal ? labelLine : labelLine.ensureState(stateName);\r\n        stateObj.ignore = ignore;\r\n        var smooth = stateModel.get('smooth');\r\n        if (smooth && smooth === true) {\r\n            smooth = 0.3;\r\n        }\r\n        stateObj.shape = stateObj.shape || {};\r\n        if (smooth > 0) {\r\n            stateObj.shape.smooth = smooth;\r\n        }\r\n        var styleObj = stateModel.getModel('lineStyle').getLineStyle();\r\n        isNormal ? labelLine.useStyle(styleObj) : stateObj.style = styleObj;\r\n    }\r\n    function buildLabelLinePath(path, shape) {\r\n        var smooth = shape.smooth;\r\n        var points = shape.points;\r\n        if (!points) {\r\n            return;\r\n        }\r\n        path.moveTo(points[0][0], points[0][1]);\r\n        if (smooth > 0 && points.length >= 3) {\r\n            var len1 = dist(points[0], points[1]);\r\n            var len2 = dist(points[1], points[2]);\r\n            if (!len1 || !len2) {\r\n                path.lineTo(points[1][0], points[1][1]);\r\n                path.lineTo(points[2][0], points[2][1]);\r\n                return;\r\n            }\r\n            var moveLen = Math.min(len1, len2) * smooth;\r\n            var midPoint0 = lerp([], points[1], points[0], moveLen / len1);\r\n            var midPoint2 = lerp([], points[1], points[2], moveLen / len2);\r\n            var midPoint1 = lerp([], midPoint0, midPoint2, 0.5);\r\n            path.bezierCurveTo(midPoint0[0], midPoint0[1], midPoint0[0], midPoint0[1], midPoint1[0], midPoint1[1]);\r\n            path.bezierCurveTo(midPoint2[0], midPoint2[1], midPoint2[0], midPoint2[1], points[2][0], points[2][1]);\r\n        }\r\n        else {\r\n            for (var i = 1; i < points.length; i++) {\r\n                path.lineTo(points[i][0], points[i][1]);\r\n            }\r\n        }\r\n    }\r\n    function setLabelLineStyle(targetEl, statesModels, defaultStyle) {\r\n        var labelLine = targetEl.getTextGuideLine();\r\n        var label = targetEl.getTextContent();\r\n        if (!label) {\r\n            if (labelLine) {\r\n                targetEl.removeTextGuideLine();\r\n            }\r\n            return;\r\n        }\r\n        var normalModel = statesModels.normal;\r\n        var showNormal = normalModel.get('show');\r\n        var labelIgnoreNormal = label.ignore;\r\n        for (var i = 0; i < DISPLAY_STATES.length; i++) {\r\n            var stateName = DISPLAY_STATES[i];\r\n            var stateModel = statesModels[stateName];\r\n            var isNormal = stateName === 'normal';\r\n            if (stateModel) {\r\n                var stateShow = stateModel.get('show');\r\n                var isLabelIgnored = isNormal\r\n                    ? labelIgnoreNormal\r\n                    : retrieve2(label.states[stateName] && label.states[stateName].ignore, labelIgnoreNormal);\r\n                if (isLabelIgnored\r\n                    || !retrieve2(stateShow, showNormal)) {\r\n                    var stateObj = isNormal ? labelLine : (labelLine && labelLine.states.normal);\r\n                    if (stateObj) {\r\n                        stateObj.ignore = true;\r\n                    }\r\n                    continue;\r\n                }\r\n                if (!labelLine) {\r\n                    labelLine = new Polyline();\r\n                    targetEl.setTextGuideLine(labelLine);\r\n                    if (!isNormal && (labelIgnoreNormal || !showNormal)) {\r\n                        setLabelLineState(labelLine, true, 'normal', statesModels.normal);\r\n                    }\r\n                    if (targetEl.stateProxy) {\r\n                        labelLine.stateProxy = targetEl.stateProxy;\r\n                    }\r\n                }\r\n                setLabelLineState(labelLine, false, stateName, stateModel);\r\n            }\r\n        }\r\n        if (labelLine) {\r\n            defaults(labelLine.style, defaultStyle);\r\n            labelLine.style.fill = null;\r\n            var showAbove = normalModel.get('showAbove');\r\n            var labelLineConfig = (targetEl.textGuideLineConfig = targetEl.textGuideLineConfig || {});\r\n            labelLineConfig.showAbove = showAbove || false;\r\n            labelLine.buildPath = buildLabelLinePath;\r\n        }\r\n    }\r\n    function getLabelLineStatesModels(itemModel, labelLineName) {\r\n        labelLineName = (labelLineName || 'labelLine');\r\n        var statesModels = {\r\n            normal: itemModel.getModel(labelLineName)\r\n        };\r\n        for (var i = 0; i < SPECIAL_STATES.length; i++) {\r\n            var stateName = SPECIAL_STATES[i];\r\n            statesModels[stateName] = itemModel.getModel([stateName, labelLineName]);\r\n        }\r\n        return statesModels;\r\n    }\n\n    function prepareLayoutList(input) {\r\n        var list = [];\r\n        for (var i = 0; i < input.length; i++) {\r\n            var rawItem = input[i];\r\n            if (rawItem.defaultAttr.ignore) {\r\n                continue;\r\n            }\r\n            var label = rawItem.label;\r\n            var transform = label.getComputedTransform();\r\n            var localRect = label.getBoundingRect();\r\n            var isAxisAligned = !transform || (transform[1] < 1e-5 && transform[2] < 1e-5);\r\n            var minMargin = label.style.margin || 0;\r\n            var globalRect = localRect.clone();\r\n            globalRect.applyTransform(transform);\r\n            globalRect.x -= minMargin / 2;\r\n            globalRect.y -= minMargin / 2;\r\n            globalRect.width += minMargin;\r\n            globalRect.height += minMargin;\r\n            var obb = isAxisAligned ? new OrientedBoundingRect(localRect, transform) : null;\r\n            list.push({\r\n                label: label,\r\n                labelLine: rawItem.labelLine,\r\n                rect: globalRect,\r\n                localRect: localRect,\r\n                obb: obb,\r\n                priority: rawItem.priority,\r\n                defaultAttr: rawItem.defaultAttr,\r\n                layoutOption: rawItem.computedLayoutOption,\r\n                axisAligned: isAxisAligned,\r\n                transform: transform\r\n            });\r\n        }\r\n        return list;\r\n    }\r\n    function shiftLayout(list, xyDim, sizeDim, minBound, maxBound, balanceShift) {\r\n        var len = list.length;\r\n        if (len < 2) {\r\n            return;\r\n        }\r\n        list.sort(function (a, b) {\r\n            return a.rect[xyDim] - b.rect[xyDim];\r\n        });\r\n        var lastPos = 0;\r\n        var delta;\r\n        var adjusted = false;\r\n        var totalShifts = 0;\r\n        for (var i = 0; i < len; i++) {\r\n            var item = list[i];\r\n            var rect = item.rect;\r\n            delta = rect[xyDim] - lastPos;\r\n            if (delta < 0) {\r\n                rect[xyDim] -= delta;\r\n                item.label[xyDim] -= delta;\r\n                adjusted = true;\r\n            }\r\n            var shift = Math.max(-delta, 0);\r\n            totalShifts += shift;\r\n            lastPos = rect[xyDim] + rect[sizeDim];\r\n        }\r\n        if (totalShifts > 0 && balanceShift) {\r\n            shiftList(-totalShifts / len, 0, len);\r\n        }\r\n        var first = list[0];\r\n        var last = list[len - 1];\r\n        var minGap;\r\n        var maxGap;\r\n        updateMinMaxGap();\r\n        minGap < 0 && squeezeGaps(-minGap, 0.8);\r\n        maxGap < 0 && squeezeGaps(maxGap, 0.8);\r\n        updateMinMaxGap();\r\n        takeBoundsGap(minGap, maxGap, 1);\r\n        takeBoundsGap(maxGap, minGap, -1);\r\n        updateMinMaxGap();\r\n        if (minGap < 0) {\r\n            squeezeWhenBailout(-minGap);\r\n        }\r\n        if (maxGap < 0) {\r\n            squeezeWhenBailout(maxGap);\r\n        }\r\n        function updateMinMaxGap() {\r\n            minGap = first.rect[xyDim] - minBound;\r\n            maxGap = maxBound - last.rect[xyDim] - last.rect[sizeDim];\r\n        }\r\n        function takeBoundsGap(gapThisBound, gapOtherBound, moveDir) {\r\n            if (gapThisBound < 0) {\r\n                var moveFromMaxGap = Math.min(gapOtherBound, -gapThisBound);\r\n                if (moveFromMaxGap > 0) {\r\n                    shiftList(moveFromMaxGap * moveDir, 0, len);\r\n                    var remained = moveFromMaxGap + gapThisBound;\r\n                    if (remained < 0) {\r\n                        squeezeGaps(-remained * moveDir, 1);\r\n                    }\r\n                }\r\n                else {\r\n                    squeezeGaps(-gapThisBound * moveDir, 1);\r\n                }\r\n            }\r\n        }\r\n        function shiftList(delta, start, end) {\r\n            if (delta !== 0) {\r\n                adjusted = true;\r\n            }\r\n            for (var i = start; i < end; i++) {\r\n                var item = list[i];\r\n                var rect = item.rect;\r\n                rect[xyDim] += delta;\r\n                item.label[xyDim] += delta;\r\n            }\r\n        }\r\n        function squeezeGaps(delta, maxSqeezePercent) {\r\n            var gaps = [];\r\n            var totalGaps = 0;\r\n            for (var i = 1; i < len; i++) {\r\n                var prevItemRect = list[i - 1].rect;\r\n                var gap = Math.max(list[i].rect[xyDim] - prevItemRect[xyDim] - prevItemRect[sizeDim], 0);\r\n                gaps.push(gap);\r\n                totalGaps += gap;\r\n            }\r\n            if (!totalGaps) {\r\n                return;\r\n            }\r\n            var squeezePercent = Math.min(Math.abs(delta) / totalGaps, maxSqeezePercent);\r\n            if (delta > 0) {\r\n                for (var i = 0; i < len - 1; i++) {\r\n                    var movement = gaps[i] * squeezePercent;\r\n                    shiftList(movement, 0, i + 1);\r\n                }\r\n            }\r\n            else {\r\n                for (var i = len - 1; i > 0; i--) {\r\n                    var movement = gaps[i - 1] * squeezePercent;\r\n                    shiftList(-movement, i, len);\r\n                }\r\n            }\r\n        }\r\n        function squeezeWhenBailout(delta) {\r\n            var dir = delta < 0 ? -1 : 1;\r\n            delta = Math.abs(delta);\r\n            var moveForEachLabel = Math.ceil(delta / (len - 1));\r\n            for (var i = 0; i < len - 1; i++) {\r\n                if (dir > 0) {\r\n                    shiftList(moveForEachLabel, 0, i + 1);\r\n                }\r\n                else {\r\n                    shiftList(-moveForEachLabel, len - i - 1, len);\r\n                }\r\n                delta -= moveForEachLabel;\r\n                if (delta <= 0) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        return adjusted;\r\n    }\r\n    function shiftLayoutOnX(list, leftBound, rightBound, balanceShift) {\r\n        return shiftLayout(list, 'x', 'width', leftBound, rightBound, balanceShift);\r\n    }\r\n    function shiftLayoutOnY(list, topBound, bottomBound, balanceShift) {\r\n        return shiftLayout(list, 'y', 'height', topBound, bottomBound, balanceShift);\r\n    }\r\n    function hideOverlap(labelList) {\r\n        var displayedLabels = [];\r\n        labelList.sort(function (a, b) {\r\n            return b.priority - a.priority;\r\n        });\r\n        var globalRect = new BoundingRect(0, 0, 0, 0);\r\n        function hideEl(el) {\r\n            if (!el.ignore) {\r\n                var emphasisState = el.ensureState('emphasis');\r\n                if (emphasisState.ignore == null) {\r\n                    emphasisState.ignore = false;\r\n                }\r\n            }\r\n            el.ignore = true;\r\n        }\r\n        for (var i = 0; i < labelList.length; i++) {\r\n            var labelItem = labelList[i];\r\n            var isAxisAligned = labelItem.axisAligned;\r\n            var localRect = labelItem.localRect;\r\n            var transform = labelItem.transform;\r\n            var label = labelItem.label;\r\n            var labelLine = labelItem.labelLine;\r\n            globalRect.copy(labelItem.rect);\r\n            globalRect.width -= 0.1;\r\n            globalRect.height -= 0.1;\r\n            globalRect.x += 0.05;\r\n            globalRect.y += 0.05;\r\n            var obb = labelItem.obb;\r\n            var overlapped = false;\r\n            for (var j = 0; j < displayedLabels.length; j++) {\r\n                var existsTextCfg = displayedLabels[j];\r\n                if (!globalRect.intersect(existsTextCfg.rect)) {\r\n                    continue;\r\n                }\r\n                if (isAxisAligned && existsTextCfg.axisAligned) {\r\n                    overlapped = true;\r\n                    break;\r\n                }\r\n                if (!existsTextCfg.obb) {\r\n                    existsTextCfg.obb = new OrientedBoundingRect(existsTextCfg.localRect, existsTextCfg.transform);\r\n                }\r\n                if (!obb) {\r\n                    obb = new OrientedBoundingRect(localRect, transform);\r\n                }\r\n                if (obb.intersect(existsTextCfg.obb)) {\r\n                    overlapped = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (overlapped) {\r\n                hideEl(label);\r\n                labelLine && hideEl(labelLine);\r\n            }\r\n            else {\r\n                label.attr('ignore', labelItem.defaultAttr.ignore);\r\n                labelLine && labelLine.attr('ignore', labelItem.defaultAttr.labelGuideIgnore);\r\n                displayedLabels.push(labelItem);\r\n            }\r\n        }\r\n    }\n\n    function cloneArr(points) {\r\n        if (points) {\r\n            var newPoints = [];\r\n            for (var i = 0; i < points.length; i++) {\r\n                newPoints.push(points[i].slice());\r\n            }\r\n            return newPoints;\r\n        }\r\n    }\r\n    function prepareLayoutCallbackParams(labelItem, hostEl) {\r\n        var label = labelItem.label;\r\n        var labelLine = hostEl && hostEl.getTextGuideLine();\r\n        return {\r\n            dataIndex: labelItem.dataIndex,\r\n            dataType: labelItem.dataType,\r\n            seriesIndex: labelItem.seriesModel.seriesIndex,\r\n            text: labelItem.label.style.text,\r\n            rect: labelItem.hostRect,\r\n            labelRect: labelItem.rect,\r\n            align: label.style.align,\r\n            verticalAlign: label.style.verticalAlign,\r\n            labelLinePoints: cloneArr(labelLine && labelLine.shape.points)\r\n        };\r\n    }\r\n    var LABEL_OPTION_TO_STYLE_KEYS = ['align', 'verticalAlign', 'width', 'height', 'fontSize'];\r\n    var dummyTransformable = new Transformable();\r\n    var labelLayoutInnerStore = makeInner();\r\n    var labelLineAnimationStore = makeInner();\r\n    function extendWithKeys(target, source, keys) {\r\n        for (var i = 0; i < keys.length; i++) {\r\n            var key = keys[i];\r\n            if (source[key] != null) {\r\n                target[key] = source[key];\r\n            }\r\n        }\r\n    }\r\n    var LABEL_LAYOUT_PROPS = ['x', 'y', 'rotation'];\r\n    var LabelManager = (function () {\r\n        function LabelManager() {\r\n            this._labelList = [];\r\n            this._chartViewList = [];\r\n        }\r\n        LabelManager.prototype.clearLabels = function () {\r\n            this._labelList = [];\r\n            this._chartViewList = [];\r\n        };\r\n        LabelManager.prototype._addLabel = function (dataIndex, dataType, seriesModel, label, layoutOption) {\r\n            var labelStyle = label.style;\r\n            var hostEl = label.__hostTarget;\r\n            var textConfig = hostEl.textConfig || {};\r\n            var labelTransform = label.getComputedTransform();\r\n            var labelRect = label.getBoundingRect().plain();\r\n            BoundingRect.applyTransform(labelRect, labelRect, labelTransform);\r\n            if (labelTransform) {\r\n                dummyTransformable.setLocalTransform(labelTransform);\r\n            }\r\n            else {\r\n                dummyTransformable.x = dummyTransformable.y = dummyTransformable.rotation =\r\n                    dummyTransformable.originX = dummyTransformable.originY = 0;\r\n                dummyTransformable.scaleX = dummyTransformable.scaleY = 1;\r\n            }\r\n            var host = label.__hostTarget;\r\n            var hostRect;\r\n            if (host) {\r\n                hostRect = host.getBoundingRect().plain();\r\n                var transform = host.getComputedTransform();\r\n                BoundingRect.applyTransform(hostRect, hostRect, transform);\r\n            }\r\n            var labelGuide = hostRect && host.getTextGuideLine();\r\n            this._labelList.push({\r\n                label: label,\r\n                labelLine: labelGuide,\r\n                seriesModel: seriesModel,\r\n                dataIndex: dataIndex,\r\n                dataType: dataType,\r\n                layoutOption: layoutOption,\r\n                computedLayoutOption: null,\r\n                rect: labelRect,\r\n                hostRect: hostRect,\r\n                priority: hostRect ? hostRect.width * hostRect.height : 0,\r\n                defaultAttr: {\r\n                    ignore: label.ignore,\r\n                    labelGuideIgnore: labelGuide && labelGuide.ignore,\r\n                    x: dummyTransformable.x,\r\n                    y: dummyTransformable.y,\r\n                    rotation: dummyTransformable.rotation,\r\n                    style: {\r\n                        x: labelStyle.x,\r\n                        y: labelStyle.y,\r\n                        align: labelStyle.align,\r\n                        verticalAlign: labelStyle.verticalAlign,\r\n                        width: labelStyle.width,\r\n                        height: labelStyle.height,\r\n                        fontSize: labelStyle.fontSize\r\n                    },\r\n                    cursor: label.cursor,\r\n                    attachedPos: textConfig.position,\r\n                    attachedRot: textConfig.rotation\r\n                }\r\n            });\r\n        };\r\n        LabelManager.prototype.addLabelsOfSeries = function (chartView) {\r\n            var _this = this;\r\n            this._chartViewList.push(chartView);\r\n            var seriesModel = chartView.__model;\r\n            var layoutOption = seriesModel.get('labelLayout');\r\n            if (!(isFunction(layoutOption) || keys(layoutOption).length)) {\r\n                return;\r\n            }\r\n            chartView.group.traverse(function (child) {\r\n                if (child.ignore) {\r\n                    return true;\r\n                }\r\n                var textEl = child.getTextContent();\r\n                var ecData = getECData(child);\r\n                if (textEl && !textEl.disableLabelLayout) {\r\n                    _this._addLabel(ecData.dataIndex, ecData.dataType, seriesModel, textEl, layoutOption);\r\n                }\r\n            });\r\n        };\r\n        LabelManager.prototype.updateLayoutConfig = function (api) {\r\n            var width = api.getWidth();\r\n            var height = api.getHeight();\r\n            function createDragHandler(el, labelLineModel) {\r\n                return function () {\r\n                    updateLabelLinePoints(el, labelLineModel);\r\n                };\r\n            }\r\n            for (var i = 0; i < this._labelList.length; i++) {\r\n                var labelItem = this._labelList[i];\r\n                var label = labelItem.label;\r\n                var hostEl = label.__hostTarget;\r\n                var defaultLabelAttr = labelItem.defaultAttr;\r\n                var layoutOption = void 0;\r\n                if (typeof labelItem.layoutOption === 'function') {\r\n                    layoutOption = labelItem.layoutOption(prepareLayoutCallbackParams(labelItem, hostEl));\r\n                }\r\n                else {\r\n                    layoutOption = labelItem.layoutOption;\r\n                }\r\n                layoutOption = layoutOption || {};\r\n                labelItem.computedLayoutOption = layoutOption;\r\n                var degreeToRadian = Math.PI / 180;\r\n                if (hostEl) {\r\n                    hostEl.setTextConfig({\r\n                        local: false,\r\n                        position: (layoutOption.x != null || layoutOption.y != null)\r\n                            ? null : defaultLabelAttr.attachedPos,\r\n                        rotation: layoutOption.rotate != null\r\n                            ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.attachedRot,\r\n                        offset: [layoutOption.dx || 0, layoutOption.dy || 0]\r\n                    });\r\n                }\r\n                var needsUpdateLabelLine = false;\r\n                if (layoutOption.x != null) {\r\n                    label.x = parsePercent$2(layoutOption.x, width);\r\n                    label.setStyle('x', 0);\r\n                    needsUpdateLabelLine = true;\r\n                }\r\n                else {\r\n                    label.x = defaultLabelAttr.x;\r\n                    label.setStyle('x', defaultLabelAttr.style.x);\r\n                }\r\n                if (layoutOption.y != null) {\r\n                    label.y = parsePercent$2(layoutOption.y, height);\r\n                    label.setStyle('y', 0);\r\n                    needsUpdateLabelLine = true;\r\n                }\r\n                else {\r\n                    label.y = defaultLabelAttr.y;\r\n                    label.setStyle('y', defaultLabelAttr.style.y);\r\n                }\r\n                if (layoutOption.labelLinePoints) {\r\n                    var guideLine = hostEl.getTextGuideLine();\r\n                    if (guideLine) {\r\n                        guideLine.setShape({ points: layoutOption.labelLinePoints });\r\n                        needsUpdateLabelLine = false;\r\n                    }\r\n                }\r\n                var labelLayoutStore = labelLayoutInnerStore(label);\r\n                labelLayoutStore.needsUpdateLabelLine = needsUpdateLabelLine;\r\n                label.rotation = layoutOption.rotate != null\r\n                    ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.rotation;\r\n                for (var k = 0; k < LABEL_OPTION_TO_STYLE_KEYS.length; k++) {\r\n                    var key = LABEL_OPTION_TO_STYLE_KEYS[k];\r\n                    label.setStyle(key, layoutOption[key] != null ? layoutOption[key] : defaultLabelAttr.style[key]);\r\n                }\r\n                if (layoutOption.draggable) {\r\n                    label.draggable = true;\r\n                    label.cursor = 'move';\r\n                    if (hostEl) {\r\n                        var hostModel = labelItem.seriesModel;\r\n                        if (labelItem.dataIndex != null) {\r\n                            var data = labelItem.seriesModel.getData(labelItem.dataType);\r\n                            hostModel = data.getItemModel(labelItem.dataIndex);\r\n                        }\r\n                        label.on('drag', createDragHandler(hostEl, hostModel.getModel('labelLine')));\r\n                    }\r\n                }\r\n                else {\r\n                    label.off('drag');\r\n                    label.cursor = defaultLabelAttr.cursor;\r\n                }\r\n            }\r\n        };\r\n        LabelManager.prototype.layout = function (api) {\r\n            var width = api.getWidth();\r\n            var height = api.getHeight();\r\n            var labelList = prepareLayoutList(this._labelList);\r\n            var labelsNeedsAdjustOnX = filter(labelList, function (item) {\r\n                return item.layoutOption.moveOverlap === 'shiftX';\r\n            });\r\n            var labelsNeedsAdjustOnY = filter(labelList, function (item) {\r\n                return item.layoutOption.moveOverlap === 'shiftY';\r\n            });\r\n            shiftLayoutOnX(labelsNeedsAdjustOnX, 0, width);\r\n            shiftLayoutOnY(labelsNeedsAdjustOnY, 0, height);\r\n            var labelsNeedsHideOverlap = filter(labelList, function (item) {\r\n                return item.layoutOption.hideOverlap;\r\n            });\r\n            hideOverlap(labelsNeedsHideOverlap);\r\n        };\r\n        LabelManager.prototype.processLabelsOverall = function () {\r\n            var _this = this;\r\n            each(this._chartViewList, function (chartView) {\r\n                var seriesModel = chartView.__model;\r\n                var ignoreLabelLineUpdate = chartView.ignoreLabelLineUpdate;\r\n                var animationEnabled = seriesModel.isAnimationEnabled();\r\n                chartView.group.traverse(function (child) {\r\n                    if (child.ignore) {\r\n                        return true;\r\n                    }\r\n                    var needsUpdateLabelLine = !ignoreLabelLineUpdate;\r\n                    var label = child.getTextContent();\r\n                    if (!needsUpdateLabelLine && label) {\r\n                        needsUpdateLabelLine = labelLayoutInnerStore(label).needsUpdateLabelLine;\r\n                    }\r\n                    if (needsUpdateLabelLine) {\r\n                        _this._updateLabelLine(child, seriesModel);\r\n                    }\r\n                    if (animationEnabled) {\r\n                        _this._animateLabels(child, seriesModel);\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        LabelManager.prototype._updateLabelLine = function (el, seriesModel) {\r\n            var textEl = el.getTextContent();\r\n            var ecData = getECData(el);\r\n            var dataIndex = ecData.dataIndex;\r\n            if (textEl && dataIndex != null) {\r\n                var data = seriesModel.getData(ecData.dataType);\r\n                var itemModel = data.getItemModel(dataIndex);\r\n                var defaultStyle = {};\r\n                var visualStyle = data.getItemVisual(dataIndex, 'style');\r\n                var visualType = data.getVisual('drawType');\r\n                defaultStyle.stroke = visualStyle[visualType];\r\n                var labelLineModel = itemModel.getModel('labelLine');\r\n                setLabelLineStyle(el, getLabelLineStatesModels(itemModel), defaultStyle);\r\n                updateLabelLinePoints(el, labelLineModel);\r\n            }\r\n        };\r\n        LabelManager.prototype._animateLabels = function (el, seriesModel) {\r\n            var textEl = el.getTextContent();\r\n            var guideLine = el.getTextGuideLine();\r\n            if (textEl && !textEl.ignore && !textEl.invisible && !el.disableLabelAnimation) {\r\n                var layoutStore = labelLayoutInnerStore(textEl);\r\n                var oldLayout = layoutStore.oldLayout;\r\n                var dataIndex = getECData(el).dataIndex;\r\n                var newProps = {\r\n                    x: textEl.x,\r\n                    y: textEl.y,\r\n                    rotation: textEl.rotation\r\n                };\r\n                if (!oldLayout) {\r\n                    textEl.attr(newProps);\r\n                    var oldOpacity = retrieve2(textEl.style.opacity, 1);\r\n                    textEl.style.opacity = 0;\r\n                    initProps(textEl, {\r\n                        style: { opacity: oldOpacity }\r\n                    }, seriesModel, dataIndex);\r\n                }\r\n                else {\r\n                    textEl.attr(oldLayout);\r\n                    var prevStates = el.prevStates;\r\n                    if (prevStates) {\r\n                        if (indexOf(prevStates, 'select') >= 0) {\r\n                            textEl.attr(layoutStore.oldLayoutSelect);\r\n                        }\r\n                        if (indexOf(prevStates, 'emphasis') >= 0) {\r\n                            textEl.attr(layoutStore.oldLayoutEmphasis);\r\n                        }\r\n                    }\r\n                    updateProps(textEl, newProps, seriesModel, dataIndex);\r\n                }\r\n                layoutStore.oldLayout = newProps;\r\n                if (textEl.states.select) {\r\n                    var layoutSelect = layoutStore.oldLayoutSelect = {};\r\n                    extendWithKeys(layoutSelect, newProps, LABEL_LAYOUT_PROPS);\r\n                    extendWithKeys(layoutSelect, textEl.states.select, LABEL_LAYOUT_PROPS);\r\n                }\r\n                if (textEl.states.emphasis) {\r\n                    var layoutEmphasis = layoutStore.oldLayoutEmphasis = {};\r\n                    extendWithKeys(layoutEmphasis, newProps, LABEL_LAYOUT_PROPS);\r\n                    extendWithKeys(layoutEmphasis, textEl.states.emphasis, LABEL_LAYOUT_PROPS);\r\n                }\r\n            }\r\n            if (guideLine && !guideLine.ignore && !guideLine.invisible) {\r\n                var layoutStore = labelLineAnimationStore(guideLine);\r\n                var oldLayout = layoutStore.oldLayout;\r\n                var newLayout = { points: guideLine.shape.points };\r\n                if (!oldLayout) {\r\n                    guideLine.setShape(newLayout);\r\n                    guideLine.style.strokePercent = 0;\r\n                    initProps(guideLine, {\r\n                        style: { strokePercent: 1 }\r\n                    }, seriesModel);\r\n                }\r\n                else {\r\n                    guideLine.attr({ shape: oldLayout });\r\n                    updateProps(guideLine, {\r\n                        shape: newLayout\r\n                    }, seriesModel);\r\n                }\r\n                layoutStore.oldLayout = newLayout;\r\n            }\r\n        };\r\n        return LabelManager;\r\n    }());\n\n    function createLegacyDataSelectAction(seriesType, ecRegisterAction) {\r\n        function getSeriesIndices(ecModel, payload) {\r\n            var seriesIndices = [];\r\n            ecModel.eachComponent({\r\n                mainType: 'series', subType: seriesType, query: payload\r\n            }, function (seriesModel) {\r\n                seriesIndices.push(seriesModel.seriesIndex);\r\n            });\r\n            return seriesIndices;\r\n        }\r\n        each([\r\n            [seriesType + 'ToggleSelect', 'toggleSelect'],\r\n            [seriesType + 'Select', 'select'],\r\n            [seriesType + 'UnSelect', 'unselect']\r\n        ], function (eventsMap) {\r\n            ecRegisterAction(eventsMap[0], function (payload, ecModel, api) {\r\n                payload = extend({}, payload);\r\n                if (__DEV__) {\r\n                    deprecateReplaceLog(payload.type, eventsMap[1]);\r\n                }\r\n                api.dispatchAction(extend(payload, {\r\n                    type: eventsMap[1],\r\n                    seriesIndex: getSeriesIndices(ecModel, payload)\r\n                }));\r\n            });\r\n        });\r\n    }\r\n    function handleSeriesLegacySelectEvents(type, eventPostfix, ecIns, payload) {\r\n        var legacyEventName = type + eventPostfix;\r\n        if (!ecIns.isSilent(legacyEventName)) {\r\n            if (__DEV__) {\r\n                deprecateLog(\"event \" + legacyEventName + \" is deprecated.\");\r\n            }\r\n            var ecModel = ecIns.getModel();\r\n            ecModel.eachComponent({\r\n                mainType: 'series', subType: 'pie'\r\n            }, function (seriesModel) {\r\n                var seriesIndex = seriesModel.seriesIndex;\r\n                var selected = payload.selected;\r\n                for (var i = 0; i < selected.length; i++) {\r\n                    if (selected[i].seriesIndex === seriesIndex) {\r\n                        var data = seriesModel.getData();\r\n                        var dataIndex = queryDataIndex(data, payload.fromActionPayload);\r\n                        ecIns.trigger(legacyEventName, {\r\n                            type: legacyEventName,\r\n                            seriesId: seriesModel.id,\r\n                            name: isArray(dataIndex) ? data.getName(dataIndex[0]) : data.getName(dataIndex),\r\n                            selected: extend({}, seriesModel.option.selectedMap)\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    function handleLegacySelectEvents(messageCenter, ecIns) {\r\n        messageCenter.on('selectchanged', function (params) {\r\n            if (params.isFromClick) {\r\n                handleSeriesLegacySelectEvents('map', 'selectchanged', ecIns, params);\r\n                handleSeriesLegacySelectEvents('pie', 'selectchanged', ecIns, params);\r\n            }\r\n            else if (params.fromAction === 'select') {\r\n                handleSeriesLegacySelectEvents('map', 'selected', ecIns, params);\r\n                handleSeriesLegacySelectEvents('pie', 'selected', ecIns, params);\r\n            }\r\n            else if (params.fromAction === 'unselect') {\r\n                handleSeriesLegacySelectEvents('map', 'unselected', ecIns, params);\r\n                handleSeriesLegacySelectEvents('pie', 'unselected', ecIns, params);\r\n            }\r\n        });\r\n    }\n\n    function createLinearGradient(ctx, obj, rect) {\r\n        var x = obj.x == null ? 0 : obj.x;\r\n        var x2 = obj.x2 == null ? 1 : obj.x2;\r\n        var y = obj.y == null ? 0 : obj.y;\r\n        var y2 = obj.y2 == null ? 0 : obj.y2;\r\n        if (!obj.global) {\r\n            x = x * rect.width + rect.x;\r\n            x2 = x2 * rect.width + rect.x;\r\n            y = y * rect.height + rect.y;\r\n            y2 = y2 * rect.height + rect.y;\r\n        }\r\n        x = isNaN(x) ? 0 : x;\r\n        x2 = isNaN(x2) ? 1 : x2;\r\n        y = isNaN(y) ? 0 : y;\r\n        y2 = isNaN(y2) ? 0 : y2;\r\n        var canvasGradient = ctx.createLinearGradient(x, y, x2, y2);\r\n        return canvasGradient;\r\n    }\r\n    function createRadialGradient(ctx, obj, rect) {\r\n        var width = rect.width;\r\n        var height = rect.height;\r\n        var min = Math.min(width, height);\r\n        var x = obj.x == null ? 0.5 : obj.x;\r\n        var y = obj.y == null ? 0.5 : obj.y;\r\n        var r = obj.r == null ? 0.5 : obj.r;\r\n        if (!obj.global) {\r\n            x = x * width + rect.x;\r\n            y = y * height + rect.y;\r\n            r = r * min;\r\n        }\r\n        var canvasGradient = ctx.createRadialGradient(x, y, 0, x, y, r);\r\n        return canvasGradient;\r\n    }\r\n    function getCanvasGradient(ctx, obj, rect) {\r\n        var canvasGradient = obj.type === 'radial'\r\n            ? createRadialGradient(ctx, obj, rect)\r\n            : createLinearGradient(ctx, obj, rect);\r\n        var colorStops = obj.colorStops;\r\n        for (var i = 0; i < colorStops.length; i++) {\r\n            canvasGradient.addColorStop(colorStops[i].offset, colorStops[i].color);\r\n        }\r\n        return canvasGradient;\r\n    }\n\n    function normalizeLineDash(lineType, lineWidth) {\r\n        if (!lineType || lineType === 'solid' || !(lineWidth > 0)) {\r\n            return null;\r\n        }\r\n        lineWidth = lineWidth || 1;\r\n        return lineType === 'dashed'\r\n            ? [4 * lineWidth, 2 * lineWidth]\r\n            : lineType === 'dotted'\r\n                ? [lineWidth]\r\n                : isNumber(lineType)\r\n                    ? [lineType] : isArray(lineType) ? lineType : null;\r\n    }\n\n    var pathProxyForDraw = new PathProxy(true);\r\n    function styleHasStroke(style) {\r\n        var stroke = style.stroke;\r\n        return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\r\n    }\r\n    function styleHasFill(style) {\r\n        var fill = style.fill;\r\n        return fill != null && fill !== 'none';\r\n    }\r\n    function doFillPath(ctx, style) {\r\n        if (style.fillOpacity != null && style.fillOpacity !== 1) {\r\n            var originalGlobalAlpha = ctx.globalAlpha;\r\n            ctx.globalAlpha = style.fillOpacity * style.opacity;\r\n            ctx.fill();\r\n            ctx.globalAlpha = originalGlobalAlpha;\r\n        }\r\n        else {\r\n            ctx.fill();\r\n        }\r\n    }\r\n    function doStrokePath(ctx, style) {\r\n        if (style.strokeOpacity != null && style.strokeOpacity !== 1) {\r\n            var originalGlobalAlpha = ctx.globalAlpha;\r\n            ctx.globalAlpha = style.strokeOpacity * style.opacity;\r\n            ctx.stroke();\r\n            ctx.globalAlpha = originalGlobalAlpha;\r\n        }\r\n        else {\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function createCanvasPattern(ctx, pattern, el) {\r\n        var image = createOrUpdateImage(pattern.image, pattern.__image, el);\r\n        if (isImageReady(image)) {\r\n            return ctx.createPattern(image, pattern.repeat || 'repeat');\r\n        }\r\n    }\r\n    function brushPath(ctx, el, style, inBatch) {\r\n        var hasStroke = styleHasStroke(style);\r\n        var hasFill = styleHasFill(style);\r\n        var strokePercent = style.strokePercent;\r\n        var strokePart = strokePercent < 1;\r\n        var firstDraw = !el.path;\r\n        if ((!el.silent || strokePart) && firstDraw) {\r\n            el.createPathProxy();\r\n        }\r\n        var path = el.path || pathProxyForDraw;\r\n        if (!inBatch) {\r\n            var fill = style.fill;\r\n            var stroke = style.stroke;\r\n            var hasFillGradient = hasFill && !!fill.colorStops;\r\n            var hasStrokeGradient = hasStroke && !!stroke.colorStops;\r\n            var hasFillPattern = hasFill && !!fill.image;\r\n            var hasStrokePattern = hasStroke && !!stroke.image;\r\n            var fillGradient = void 0;\r\n            var strokeGradient = void 0;\r\n            var fillPattern = void 0;\r\n            var strokePattern = void 0;\r\n            var rect = void 0;\r\n            if (hasFillGradient || hasStrokeGradient) {\r\n                rect = el.getBoundingRect();\r\n            }\r\n            if (hasFillGradient) {\r\n                fillGradient = el.__dirty\r\n                    ? getCanvasGradient(ctx, fill, rect)\r\n                    : el.__canvasFillGradient;\r\n                el.__canvasFillGradient = fillGradient;\r\n            }\r\n            if (hasStrokeGradient) {\r\n                strokeGradient = el.__dirty\r\n                    ? getCanvasGradient(ctx, stroke, rect)\r\n                    : el.__canvasStrokeGradient;\r\n                el.__canvasStrokeGradient = strokeGradient;\r\n            }\r\n            if (hasFillPattern) {\r\n                fillPattern = (el.__dirty || !el.__canvasFillPattern)\r\n                    ? createCanvasPattern(ctx, fill, el)\r\n                    : el.__canvasFillPattern;\r\n                el.__canvasFillPattern = fillPattern;\r\n            }\r\n            if (hasStrokePattern) {\r\n                strokePattern = (el.__dirty || !el.__canvasStrokePattern)\r\n                    ? createCanvasPattern(ctx, stroke, el)\r\n                    : el.__canvasStrokePattern;\r\n                el.__canvasStrokePattern = fillPattern;\r\n            }\r\n            if (hasFillGradient) {\r\n                ctx.fillStyle = fillGradient;\r\n            }\r\n            else if (hasFillPattern) {\r\n                if (fillPattern) {\r\n                    ctx.fillStyle = fillPattern;\r\n                }\r\n                else {\r\n                    hasFill = false;\r\n                }\r\n            }\r\n            if (hasStrokeGradient) {\r\n                ctx.strokeStyle = strokeGradient;\r\n            }\r\n            else if (hasStrokePattern) {\r\n                if (strokePattern) {\r\n                    ctx.strokeStyle = strokePattern;\r\n                }\r\n                else {\r\n                    hasStroke = false;\r\n                }\r\n            }\r\n        }\r\n        var lineDash = style.lineDash && style.lineWidth > 0 && normalizeLineDash(style.lineDash, style.lineWidth);\r\n        var lineDashOffset = style.lineDashOffset;\r\n        var ctxLineDash = !!ctx.setLineDash;\r\n        var scale = el.getGlobalScale();\r\n        path.setScale(scale[0], scale[1], el.segmentIgnoreThreshold);\r\n        if (lineDash) {\r\n            var lineScale_1 = (style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1;\r\n            if (lineScale_1 && lineScale_1 !== 1) {\r\n                lineDash = map(lineDash, function (rawVal) {\r\n                    return rawVal / lineScale_1;\r\n                });\r\n                lineDashOffset /= lineScale_1;\r\n            }\r\n        }\r\n        var needsRebuild = true;\r\n        if (firstDraw || (el.__dirty & Path.SHAPE_CHANGED_BIT)\r\n            || (lineDash && !ctxLineDash && hasStroke)) {\r\n            path.setDPR(ctx.dpr);\r\n            if (strokePart) {\r\n                path.setContext(null);\r\n            }\r\n            else {\r\n                path.setContext(ctx);\r\n                needsRebuild = false;\r\n            }\r\n            path.reset();\r\n            if (lineDash && !ctxLineDash) {\r\n                path.setLineDash(lineDash);\r\n                path.setLineDashOffset(lineDashOffset);\r\n            }\r\n            el.buildPath(path, el.shape, inBatch);\r\n            path.toStatic();\r\n            el.pathUpdated();\r\n        }\r\n        if (needsRebuild) {\r\n            path.rebuildPath(ctx, strokePart ? strokePercent : 1);\r\n        }\r\n        if (lineDash && ctxLineDash) {\r\n            ctx.setLineDash(lineDash);\r\n            ctx.lineDashOffset = lineDashOffset;\r\n        }\r\n        if (!inBatch) {\r\n            if (style.strokeFirst) {\r\n                if (hasStroke) {\r\n                    doStrokePath(ctx, style);\r\n                }\r\n                if (hasFill) {\r\n                    doFillPath(ctx, style);\r\n                }\r\n            }\r\n            else {\r\n                if (hasFill) {\r\n                    doFillPath(ctx, style);\r\n                }\r\n                if (hasStroke) {\r\n                    doStrokePath(ctx, style);\r\n                }\r\n            }\r\n        }\r\n        if (lineDash && ctxLineDash) {\r\n            ctx.setLineDash([]);\r\n        }\r\n    }\r\n    function brushImage(ctx, el, style) {\r\n        var image = el.__image = createOrUpdateImage(style.image, el.__image, el, el.onload);\r\n        if (!image || !isImageReady(image)) {\r\n            return;\r\n        }\r\n        var x = style.x || 0;\r\n        var y = style.y || 0;\r\n        var width = style.width;\r\n        var height = style.height;\r\n        var aspect = image.width / image.height;\r\n        if (width == null && height != null) {\r\n            width = height * aspect;\r\n        }\r\n        else if (height == null && width != null) {\r\n            height = width / aspect;\r\n        }\r\n        else if (width == null && height == null) {\r\n            width = image.width;\r\n            height = image.height;\r\n        }\r\n        if (style.sWidth && style.sHeight) {\r\n            var sx = style.sx || 0;\r\n            var sy = style.sy || 0;\r\n            ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);\r\n        }\r\n        else if (style.sx && style.sy) {\r\n            var sx = style.sx;\r\n            var sy = style.sy;\r\n            var sWidth = width - sx;\r\n            var sHeight = height - sy;\r\n            ctx.drawImage(image, sx, sy, sWidth, sHeight, x, y, width, height);\r\n        }\r\n        else {\r\n            ctx.drawImage(image, x, y, width, height);\r\n        }\r\n    }\r\n    function brushText(ctx, el, style) {\r\n        var text = style.text;\r\n        text != null && (text += '');\r\n        if (text) {\r\n            ctx.font = style.font || DEFAULT_FONT;\r\n            ctx.textAlign = style.textAlign;\r\n            ctx.textBaseline = style.textBaseline;\r\n            var hasLineDash = void 0;\r\n            if (ctx.setLineDash) {\r\n                var lineDash = style.lineDash && style.lineWidth > 0 && normalizeLineDash(style.lineDash, style.lineWidth);\r\n                var lineDashOffset = style.lineDashOffset;\r\n                if (lineDash) {\r\n                    var lineScale_2 = (style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1;\r\n                    if (lineScale_2 && lineScale_2 !== 1) {\r\n                        lineDash = map(lineDash, function (rawVal) {\r\n                            return rawVal / lineScale_2;\r\n                        });\r\n                        lineDashOffset /= lineScale_2;\r\n                    }\r\n                    ctx.setLineDash(lineDash);\r\n                    ctx.lineDashOffset = lineDashOffset;\r\n                    hasLineDash = true;\r\n                }\r\n            }\r\n            if (style.strokeFirst) {\r\n                if (styleHasStroke(style)) {\r\n                    ctx.strokeText(text, style.x, style.y);\r\n                }\r\n                if (styleHasFill(style)) {\r\n                    ctx.fillText(text, style.x, style.y);\r\n                }\r\n            }\r\n            else {\r\n                if (styleHasFill(style)) {\r\n                    ctx.fillText(text, style.x, style.y);\r\n                }\r\n                if (styleHasStroke(style)) {\r\n                    ctx.strokeText(text, style.x, style.y);\r\n                }\r\n            }\r\n            if (hasLineDash) {\r\n                ctx.setLineDash([]);\r\n            }\r\n        }\r\n    }\r\n    var SHADOW_NUMBER_PROPS = ['shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\r\n    var STROKE_PROPS = [\r\n        ['lineCap', 'butt'], ['lineJoin', 'miter'], ['miterLimit', 10]\r\n    ];\r\n    function bindCommonProps(ctx, style, prevStyle, forceSetAll, scope) {\r\n        var styleChanged = false;\r\n        if (!forceSetAll) {\r\n            prevStyle = prevStyle || {};\r\n            if (style === prevStyle) {\r\n                return false;\r\n            }\r\n        }\r\n        if (forceSetAll || style.opacity !== prevStyle.opacity) {\r\n            if (!styleChanged) {\r\n                flushPathDrawn(ctx, scope);\r\n                styleChanged = true;\r\n            }\r\n            ctx.globalAlpha = style.opacity == null ? DEFAULT_COMMON_STYLE.opacity : style.opacity;\r\n        }\r\n        if (forceSetAll || style.blend !== prevStyle.blend) {\r\n            if (!styleChanged) {\r\n                flushPathDrawn(ctx, scope);\r\n                styleChanged = true;\r\n            }\r\n            ctx.globalCompositeOperation = style.blend || DEFAULT_COMMON_STYLE.blend;\r\n        }\r\n        for (var i = 0; i < SHADOW_NUMBER_PROPS.length; i++) {\r\n            var propName = SHADOW_NUMBER_PROPS[i];\r\n            if (forceSetAll || style[propName] !== prevStyle[propName]) {\r\n                if (!styleChanged) {\r\n                    flushPathDrawn(ctx, scope);\r\n                    styleChanged = true;\r\n                }\r\n                ctx[propName] = ctx.dpr * (style[propName] || 0);\r\n            }\r\n        }\r\n        if (forceSetAll || style.shadowColor !== prevStyle.shadowColor) {\r\n            if (!styleChanged) {\r\n                flushPathDrawn(ctx, scope);\r\n                styleChanged = true;\r\n            }\r\n            ctx.shadowColor = style.shadowColor || DEFAULT_COMMON_STYLE.shadowColor;\r\n        }\r\n        return styleChanged;\r\n    }\r\n    function bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetAll, scope) {\r\n        var style = getStyle(el, scope.inHover);\r\n        var prevStyle = forceSetAll\r\n            ? null\r\n            : (prevEl && getStyle(prevEl, scope.inHover) || {});\r\n        if (style === prevStyle) {\r\n            return false;\r\n        }\r\n        var styleChanged = bindCommonProps(ctx, style, prevStyle, forceSetAll, scope);\r\n        if (forceSetAll || style.fill !== prevStyle.fill) {\r\n            if (!styleChanged) {\r\n                flushPathDrawn(ctx, scope);\r\n                styleChanged = true;\r\n            }\r\n            ctx.fillStyle = style.fill;\r\n        }\r\n        if (forceSetAll || style.stroke !== prevStyle.stroke) {\r\n            if (!styleChanged) {\r\n                flushPathDrawn(ctx, scope);\r\n                styleChanged = true;\r\n            }\r\n            ctx.strokeStyle = style.stroke;\r\n        }\r\n        if (forceSetAll || style.opacity !== prevStyle.opacity) {\r\n            if (!styleChanged) {\r\n                flushPathDrawn(ctx, scope);\r\n                styleChanged = true;\r\n            }\r\n            ctx.globalAlpha = style.opacity == null ? 1 : style.opacity;\r\n        }\r\n        if (el.hasStroke()) {\r\n            var lineWidth = style.lineWidth;\r\n            var newLineWidth = lineWidth / ((style.strokeNoScale && el && el.getLineScale) ? el.getLineScale() : 1);\r\n            if (ctx.lineWidth !== newLineWidth) {\r\n                if (!styleChanged) {\r\n                    flushPathDrawn(ctx, scope);\r\n                    styleChanged = true;\r\n                }\r\n                ctx.lineWidth = newLineWidth;\r\n            }\r\n        }\r\n        for (var i = 0; i < STROKE_PROPS.length; i++) {\r\n            var prop = STROKE_PROPS[i];\r\n            var propName = prop[0];\r\n            if (forceSetAll || style[propName] !== prevStyle[propName]) {\r\n                if (!styleChanged) {\r\n                    flushPathDrawn(ctx, scope);\r\n                    styleChanged = true;\r\n                }\r\n                ctx[propName] = style[propName] || prop[1];\r\n            }\r\n        }\r\n        return styleChanged;\r\n    }\r\n    function bindImageStyle(ctx, el, prevEl, forceSetAll, scope) {\r\n        return bindCommonProps(ctx, getStyle(el, scope.inHover), prevEl && getStyle(prevEl, scope.inHover), forceSetAll, scope);\r\n    }\r\n    function setContextTransform(ctx, el) {\r\n        var m = el.transform;\r\n        var dpr = ctx.dpr || 1;\r\n        if (m) {\r\n            ctx.setTransform(dpr * m[0], dpr * m[1], dpr * m[2], dpr * m[3], dpr * m[4], dpr * m[5]);\r\n        }\r\n        else {\r\n            ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\r\n        }\r\n    }\r\n    var tmpRect = new BoundingRect(0, 0, 0, 0);\r\n    var viewRect = new BoundingRect(0, 0, 0, 0);\r\n    function isDisplayableCulled(el, width, height) {\r\n        if (!width || !height) {\r\n            return false;\r\n        }\r\n        tmpRect.copy(el.getBoundingRect());\r\n        if (el.transform) {\r\n            tmpRect.applyTransform(el.transform);\r\n        }\r\n        viewRect.width = width;\r\n        viewRect.height = height;\r\n        return !tmpRect.intersect(viewRect);\r\n    }\r\n    function isClipPathChanged(clipPaths, prevClipPaths) {\r\n        if (clipPaths === prevClipPaths || (!clipPaths && !prevClipPaths)) {\r\n            return false;\r\n        }\r\n        if (!clipPaths || !prevClipPaths || (clipPaths.length !== prevClipPaths.length)) {\r\n            return true;\r\n        }\r\n        for (var i = 0; i < clipPaths.length; i++) {\r\n            if (clipPaths[i] !== prevClipPaths[i]) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    function updateClipStatus(clipPaths, ctx, scope) {\r\n        var allClipped = false;\r\n        for (var i = 0; i < clipPaths.length; i++) {\r\n            var clipPath = clipPaths[i];\r\n            allClipped = allClipped || clipPath.isZeroArea();\r\n            setContextTransform(ctx, clipPath);\r\n            ctx.beginPath();\r\n            clipPath.buildPath(ctx, clipPath.shape);\r\n            ctx.clip();\r\n        }\r\n        scope.allClipped = allClipped;\r\n    }\r\n    function isTransformChanged(m0, m1) {\r\n        if (m0 && m1) {\r\n            return m0[0] !== m1[0]\r\n                || m0[1] !== m1[1]\r\n                || m0[2] !== m1[2]\r\n                || m0[3] !== m1[3]\r\n                || m0[4] !== m1[4]\r\n                || m0[5] !== m1[5];\r\n        }\r\n        else if (!m0 && !m1) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    var DRAW_TYPE_PATH = 1;\r\n    var DRAW_TYPE_IMAGE = 2;\r\n    var DRAW_TYPE_TEXT = 3;\r\n    var DRAW_TYPE_INCREMENTAL = 4;\r\n    function canPathBatch(style) {\r\n        var hasFill = styleHasFill(style);\r\n        var hasStroke = styleHasStroke(style);\r\n        return !(style.lineDash\r\n            || !(+hasFill ^ +hasStroke)\r\n            || (hasFill && typeof style.fill !== 'string')\r\n            || (hasStroke && typeof style.stroke !== 'string')\r\n            || style.strokePercent < 1\r\n            || style.strokeOpacity < 1\r\n            || style.fillOpacity < 1);\r\n    }\r\n    function flushPathDrawn(ctx, scope) {\r\n        scope.batchFill && ctx.fill();\r\n        scope.batchStroke && ctx.stroke();\r\n        scope.batchFill = '';\r\n        scope.batchStroke = '';\r\n    }\r\n    function getStyle(el, inHover) {\r\n        return inHover ? (el.__hoverStyle || el.style) : el.style;\r\n    }\r\n    function brush(ctx, el, scope, isLast) {\r\n        var m = el.transform;\r\n        if (el.invisible\r\n            || el.style.opacity === 0\r\n            || (el.culling && isDisplayableCulled(el, scope.viewWidth, scope.viewHeight))\r\n            || (m && !m[0] && !m[3])) {\r\n            el.__dirty &= ~Element.REDARAW_BIT;\r\n            return;\r\n        }\r\n        var clipPaths = el.__clipPaths;\r\n        var prevElClipPaths = scope.prevElClipPaths;\r\n        var forceSetTransform = false;\r\n        var forceSetStyle = false;\r\n        if (!prevElClipPaths || isClipPathChanged(clipPaths, prevElClipPaths)) {\r\n            if (prevElClipPaths && prevElClipPaths.length) {\r\n                flushPathDrawn(ctx, scope);\r\n                ctx.restore();\r\n                forceSetStyle = forceSetTransform = true;\r\n                scope.prevElClipPaths = null;\r\n                scope.allClipped = false;\r\n                scope.prevEl = null;\r\n            }\r\n            if (clipPaths && clipPaths.length) {\r\n                flushPathDrawn(ctx, scope);\r\n                ctx.save();\r\n                updateClipStatus(clipPaths, ctx, scope);\r\n                forceSetTransform = true;\r\n            }\r\n            scope.prevElClipPaths = clipPaths;\r\n        }\r\n        if (scope.allClipped) {\r\n            return;\r\n        }\r\n        el.beforeBrush && el.beforeBrush();\r\n        el.innerBeforeBrush();\r\n        var prevEl = scope.prevEl;\r\n        if (!prevEl) {\r\n            forceSetStyle = forceSetTransform = true;\r\n        }\r\n        var canBatchPath = el instanceof Path\r\n            && el.autoBatch\r\n            && canPathBatch(el.style);\r\n        if (forceSetTransform || isTransformChanged(m, prevEl.transform)) {\r\n            flushPathDrawn(ctx, scope);\r\n            setContextTransform(ctx, el);\r\n        }\r\n        else if (!canBatchPath) {\r\n            flushPathDrawn(ctx, scope);\r\n        }\r\n        var style = getStyle(el, scope.inHover);\r\n        if (el instanceof Path) {\r\n            if (scope.lastDrawType !== DRAW_TYPE_PATH) {\r\n                forceSetStyle = true;\r\n                scope.lastDrawType = DRAW_TYPE_PATH;\r\n            }\r\n            bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\r\n            if (!canBatchPath || (!scope.batchFill && !scope.batchStroke)) {\r\n                ctx.beginPath();\r\n            }\r\n            brushPath(ctx, el, style, canBatchPath);\r\n            if (canBatchPath) {\r\n                scope.batchFill = style.fill || '';\r\n                scope.batchStroke = style.stroke || '';\r\n            }\r\n        }\r\n        else {\r\n            if (el instanceof TSpan) {\r\n                if (scope.lastDrawType !== DRAW_TYPE_TEXT) {\r\n                    forceSetStyle = true;\r\n                    scope.lastDrawType = DRAW_TYPE_TEXT;\r\n                }\r\n                bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\r\n                brushText(ctx, el, style);\r\n            }\r\n            else if (el instanceof ZRImage) {\r\n                if (scope.lastDrawType !== DRAW_TYPE_IMAGE) {\r\n                    forceSetStyle = true;\r\n                    scope.lastDrawType = DRAW_TYPE_IMAGE;\r\n                }\r\n                bindImageStyle(ctx, el, prevEl, forceSetStyle, scope);\r\n                brushImage(ctx, el, style);\r\n            }\r\n            else if (el instanceof IncrementalDisplayble) {\r\n                if (scope.lastDrawType !== DRAW_TYPE_INCREMENTAL) {\r\n                    forceSetStyle = true;\r\n                    scope.lastDrawType = DRAW_TYPE_INCREMENTAL;\r\n                }\r\n                brushIncremental(ctx, el, scope);\r\n            }\r\n        }\r\n        if (canBatchPath && isLast) {\r\n            flushPathDrawn(ctx, scope);\r\n        }\r\n        el.innerAfterBrush();\r\n        el.afterBrush && el.afterBrush();\r\n        scope.prevEl = el;\r\n        el.__dirty = 0;\r\n    }\r\n    function brushIncremental(ctx, el, scope) {\r\n        var displayables = el.getDisplayables();\r\n        var temporalDisplayables = el.getTemporalDisplayables();\r\n        ctx.save();\r\n        var innerScope = {\r\n            prevElClipPaths: null,\r\n            prevEl: null,\r\n            allClipped: false,\r\n            viewWidth: scope.viewWidth,\r\n            viewHeight: scope.viewHeight,\r\n            inHover: scope.inHover\r\n        };\r\n        var i;\r\n        var len;\r\n        for (i = el.getCursor(), len = displayables.length; i < len; i++) {\r\n            var displayable = displayables[i];\r\n            displayable.beforeBrush && displayable.beforeBrush();\r\n            displayable.innerBeforeBrush();\r\n            brush(ctx, displayable, innerScope, i === len - 1);\r\n            displayable.innerAfterBrush();\r\n            displayable.afterBrush && displayable.afterBrush();\r\n            innerScope.prevEl = displayable;\r\n        }\r\n        for (var i_1 = 0, len_1 = temporalDisplayables.length - 1; i_1 < len_1; i_1++) {\r\n            var displayable = temporalDisplayables[i_1];\r\n            displayable.beforeBrush && displayable.beforeBrush();\r\n            displayable.innerBeforeBrush();\r\n            brush(ctx, displayable, innerScope, i_1 === len_1 - 1);\r\n            displayable.innerAfterBrush();\r\n            displayable.afterBrush && displayable.afterBrush();\r\n            innerScope.prevEl = displayable;\r\n        }\r\n        el.clearTemporalDisplayables();\r\n        el.notClear = true;\r\n        ctx.restore();\r\n    }\n\n    function returnFalse() {\r\n        return false;\r\n    }\r\n    function createDom(id, painter, dpr) {\r\n        var newDom = createCanvas();\r\n        var width = painter.getWidth();\r\n        var height = painter.getHeight();\r\n        var newDomStyle = newDom.style;\r\n        if (newDomStyle) {\r\n            newDomStyle.position = 'absolute';\r\n            newDomStyle.left = '0';\r\n            newDomStyle.top = '0';\r\n            newDomStyle.width = width + 'px';\r\n            newDomStyle.height = height + 'px';\r\n            newDom.setAttribute('data-zr-dom-id', id);\r\n        }\r\n        newDom.width = width * dpr;\r\n        newDom.height = height * dpr;\r\n        return newDom;\r\n    }\r\n    var Layer = (function (_super) {\r\n        __extends(Layer, _super);\r\n        function Layer(id, painter, dpr) {\r\n            var _this = _super.call(this) || this;\r\n            _this.motionBlur = false;\r\n            _this.lastFrameAlpha = 0.7;\r\n            _this.dpr = 1;\r\n            _this.virtual = false;\r\n            _this.config = {};\r\n            _this.incremental = false;\r\n            _this.zlevel = 0;\r\n            _this.__dirty = true;\r\n            _this.__used = false;\r\n            _this.__drawIndex = 0;\r\n            _this.__startIndex = 0;\r\n            _this.__endIndex = 0;\r\n            var dom;\r\n            dpr = dpr || devicePixelRatio;\r\n            if (typeof id === 'string') {\r\n                dom = createDom(id, painter, dpr);\r\n            }\r\n            else if (isObject(id)) {\r\n                dom = id;\r\n                id = dom.id;\r\n            }\r\n            _this.id = id;\r\n            _this.dom = dom;\r\n            var domStyle = dom.style;\r\n            if (domStyle) {\r\n                dom.onselectstart = returnFalse;\r\n                domStyle.webkitUserSelect = 'none';\r\n                domStyle.userSelect = 'none';\r\n                domStyle.webkitTapHighlightColor = 'rgba(0,0,0,0)';\r\n                domStyle['-webkit-touch-callout'] = 'none';\r\n                domStyle.padding = '0';\r\n                domStyle.margin = '0';\r\n                domStyle.borderWidth = '0';\r\n            }\r\n            _this.domBack = null;\r\n            _this.ctxBack = null;\r\n            _this.painter = painter;\r\n            _this.config = null;\r\n            _this.dpr = dpr;\r\n            return _this;\r\n        }\r\n        Layer.prototype.getElementCount = function () {\r\n            return this.__endIndex - this.__startIndex;\r\n        };\r\n        Layer.prototype.initContext = function () {\r\n            this.ctx = this.dom.getContext('2d');\r\n            this.ctx.dpr = this.dpr;\r\n        };\r\n        Layer.prototype.createBackBuffer = function () {\r\n            var dpr = this.dpr;\r\n            this.domBack = createDom('back-' + this.id, this.painter, dpr);\r\n            this.ctxBack = this.domBack.getContext('2d');\r\n            if (dpr !== 1) {\r\n                this.ctxBack.scale(dpr, dpr);\r\n            }\r\n        };\r\n        Layer.prototype.resize = function (width, height) {\r\n            var dpr = this.dpr;\r\n            var dom = this.dom;\r\n            var domStyle = dom.style;\r\n            var domBack = this.domBack;\r\n            if (domStyle) {\r\n                domStyle.width = width + 'px';\r\n                domStyle.height = height + 'px';\r\n            }\r\n            dom.width = width * dpr;\r\n            dom.height = height * dpr;\r\n            if (domBack) {\r\n                domBack.width = width * dpr;\r\n                domBack.height = height * dpr;\r\n                if (dpr !== 1) {\r\n                    this.ctxBack.scale(dpr, dpr);\r\n                }\r\n            }\r\n        };\r\n        Layer.prototype.clear = function (clearAll, clearColor) {\r\n            var dom = this.dom;\r\n            var ctx = this.ctx;\r\n            var width = dom.width;\r\n            var height = dom.height;\r\n            clearColor = clearColor || this.clearColor;\r\n            var haveMotionBLur = this.motionBlur && !clearAll;\r\n            var lastFrameAlpha = this.lastFrameAlpha;\r\n            var dpr = this.dpr;\r\n            var self = this;\r\n            if (haveMotionBLur) {\r\n                if (!this.domBack) {\r\n                    this.createBackBuffer();\r\n                }\r\n                this.ctxBack.globalCompositeOperation = 'copy';\r\n                this.ctxBack.drawImage(dom, 0, 0, width / dpr, height / dpr);\r\n            }\r\n            ctx.clearRect(0, 0, width, height);\r\n            if (clearColor && clearColor !== 'transparent') {\r\n                var clearColorGradientOrPattern = void 0;\r\n                if (isGradientObject(clearColor)) {\r\n                    clearColorGradientOrPattern = clearColor.__canvasGradient\r\n                        || getCanvasGradient(ctx, clearColor, {\r\n                            x: 0,\r\n                            y: 0,\r\n                            width: width,\r\n                            height: height\r\n                        });\r\n                    clearColor.__canvasGradient = clearColorGradientOrPattern;\r\n                }\r\n                else if (isPatternObject(clearColor)) {\r\n                    clearColorGradientOrPattern = createCanvasPattern(ctx, clearColor, {\r\n                        dirty: function () {\r\n                            self.__painter.refresh();\r\n                        }\r\n                    });\r\n                }\r\n                ctx.save();\r\n                ctx.fillStyle = clearColorGradientOrPattern || clearColor;\r\n                ctx.fillRect(0, 0, width, height);\r\n                ctx.restore();\r\n            }\r\n            if (haveMotionBLur) {\r\n                var domBack = this.domBack;\r\n                ctx.save();\r\n                ctx.globalAlpha = lastFrameAlpha;\r\n                ctx.drawImage(domBack, 0, 0, width, height);\r\n                ctx.restore();\r\n            }\r\n        };\r\n        return Layer;\r\n    }(Eventful));\n\n    var HOVER_LAYER_ZLEVEL = 1e5;\r\n    var CANVAS_ZLEVEL = 314159;\r\n    var EL_AFTER_INCREMENTAL_INC = 0.01;\r\n    var INCREMENTAL_INC = 0.001;\r\n    function parseInt10(val) {\r\n        return parseInt(val, 10);\r\n    }\r\n    function isLayerValid(layer) {\r\n        if (!layer) {\r\n            return false;\r\n        }\r\n        if (layer.__builtin__) {\r\n            return true;\r\n        }\r\n        if (typeof (layer.resize) !== 'function'\r\n            || typeof (layer.refresh) !== 'function') {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    function createRoot(width, height) {\r\n        var domRoot = document.createElement('div');\r\n        domRoot.style.cssText = [\r\n            'position:relative',\r\n            'width:' + width + 'px',\r\n            'height:' + height + 'px',\r\n            'padding:0',\r\n            'margin:0',\r\n            'border-width:0'\r\n        ].join(';') + ';';\r\n        return domRoot;\r\n    }\r\n    var CanvasPainter = (function () {\r\n        function CanvasPainter(root, storage, opts, id) {\r\n            this.type = 'canvas';\r\n            this._zlevelList = [];\r\n            this._layers = {};\r\n            this._layerConfig = {};\r\n            this._needsManuallyCompositing = false;\r\n            this.type = 'canvas';\r\n            var singleCanvas = !root.nodeName\r\n                || root.nodeName.toUpperCase() === 'CANVAS';\r\n            this._opts = opts = extend({}, opts || {});\r\n            this.dpr = opts.devicePixelRatio || devicePixelRatio;\r\n            this._singleCanvas = singleCanvas;\r\n            this.root = root;\r\n            var rootStyle = root.style;\r\n            if (rootStyle) {\r\n                rootStyle.webkitTapHighlightColor = 'transparent';\r\n                rootStyle.webkitUserSelect = 'none';\r\n                rootStyle.userSelect = 'none';\r\n                rootStyle['-webkit-touch-callout'] = 'none';\r\n                root.innerHTML = '';\r\n            }\r\n            this.storage = storage;\r\n            var zlevelList = this._zlevelList;\r\n            var layers = this._layers;\r\n            if (!singleCanvas) {\r\n                this._width = this._getSize(0);\r\n                this._height = this._getSize(1);\r\n                var domRoot = this._domRoot = createRoot(this._width, this._height);\r\n                root.appendChild(domRoot);\r\n            }\r\n            else {\r\n                var rootCanvas = root;\r\n                var width = rootCanvas.width;\r\n                var height = rootCanvas.height;\r\n                if (opts.width != null) {\r\n                    width = opts.width;\r\n                }\r\n                if (opts.height != null) {\r\n                    height = opts.height;\r\n                }\r\n                this.dpr = opts.devicePixelRatio || 1;\r\n                rootCanvas.width = width * this.dpr;\r\n                rootCanvas.height = height * this.dpr;\r\n                this._width = width;\r\n                this._height = height;\r\n                var mainLayer = new Layer(rootCanvas, this, this.dpr);\r\n                mainLayer.__builtin__ = true;\r\n                mainLayer.initContext();\r\n                layers[CANVAS_ZLEVEL] = mainLayer;\r\n                mainLayer.zlevel = CANVAS_ZLEVEL;\r\n                zlevelList.push(CANVAS_ZLEVEL);\r\n                this._domRoot = root;\r\n            }\r\n        }\r\n        CanvasPainter.prototype.getType = function () {\r\n            return 'canvas';\r\n        };\r\n        CanvasPainter.prototype.isSingleCanvas = function () {\r\n            return this._singleCanvas;\r\n        };\r\n        CanvasPainter.prototype.getViewportRoot = function () {\r\n            return this._domRoot;\r\n        };\r\n        CanvasPainter.prototype.getViewportRootOffset = function () {\r\n            var viewportRoot = this.getViewportRoot();\r\n            if (viewportRoot) {\r\n                return {\r\n                    offsetLeft: viewportRoot.offsetLeft || 0,\r\n                    offsetTop: viewportRoot.offsetTop || 0\r\n                };\r\n            }\r\n        };\r\n        CanvasPainter.prototype.refresh = function (paintAll) {\r\n            var list = this.storage.getDisplayList(true);\r\n            var zlevelList = this._zlevelList;\r\n            this._redrawId = Math.random();\r\n            this._paintList(list, paintAll, this._redrawId);\r\n            for (var i = 0; i < zlevelList.length; i++) {\r\n                var z = zlevelList[i];\r\n                var layer = this._layers[z];\r\n                if (!layer.__builtin__ && layer.refresh) {\r\n                    var clearColor = i === 0 ? this._backgroundColor : null;\r\n                    layer.refresh(clearColor);\r\n                }\r\n            }\r\n            return this;\r\n        };\r\n        CanvasPainter.prototype.refreshHover = function () {\r\n            this._paintHoverList(this.storage.getDisplayList(false));\r\n        };\r\n        CanvasPainter.prototype._paintHoverList = function (list) {\r\n            var len = list.length;\r\n            var hoverLayer = this._hoverlayer;\r\n            hoverLayer && hoverLayer.clear();\r\n            if (!len) {\r\n                return;\r\n            }\r\n            var scope = {\r\n                inHover: true,\r\n                viewWidth: this._width,\r\n                viewHeight: this._height\r\n            };\r\n            var ctx;\r\n            for (var i = 0; i < len; i++) {\r\n                var el = list[i];\r\n                if (el.__inHover) {\r\n                    if (!hoverLayer) {\r\n                        hoverLayer = this._hoverlayer = this.getLayer(HOVER_LAYER_ZLEVEL);\r\n                    }\r\n                    if (!ctx) {\r\n                        ctx = hoverLayer.ctx;\r\n                        ctx.save();\r\n                    }\r\n                    brush(ctx, el, scope, i === len - 1);\r\n                }\r\n            }\r\n            if (ctx) {\r\n                ctx.restore();\r\n            }\r\n        };\r\n        CanvasPainter.prototype.getHoverLayer = function () {\r\n            return this.getLayer(HOVER_LAYER_ZLEVEL);\r\n        };\r\n        CanvasPainter.prototype._paintList = function (list, paintAll, redrawId) {\r\n            if (this._redrawId !== redrawId) {\r\n                return;\r\n            }\r\n            paintAll = paintAll || false;\r\n            this._updateLayerStatus(list);\r\n            var _a = this._doPaintList(list, paintAll), finished = _a.finished, needsRefreshHover = _a.needsRefreshHover;\r\n            if (this._needsManuallyCompositing) {\r\n                this._compositeManually();\r\n            }\r\n            if (needsRefreshHover) {\r\n                this._paintHoverList(list);\r\n            }\r\n            if (!finished) {\r\n                var self_1 = this;\r\n                requestAnimationFrame$1(function () {\r\n                    self_1._paintList(list, paintAll, redrawId);\r\n                });\r\n            }\r\n        };\r\n        CanvasPainter.prototype._compositeManually = function () {\r\n            var ctx = this.getLayer(CANVAS_ZLEVEL).ctx;\r\n            var width = this._domRoot.width;\r\n            var height = this._domRoot.height;\r\n            ctx.clearRect(0, 0, width, height);\r\n            this.eachBuiltinLayer(function (layer) {\r\n                if (layer.virtual) {\r\n                    ctx.drawImage(layer.dom, 0, 0, width, height);\r\n                }\r\n            });\r\n        };\r\n        CanvasPainter.prototype._doPaintList = function (list, paintAll) {\r\n            var layerList = [];\r\n            for (var zi = 0; zi < this._zlevelList.length; zi++) {\r\n                var zlevel = this._zlevelList[zi];\r\n                var layer = this._layers[zlevel];\r\n                if (layer.__builtin__\r\n                    && layer !== this._hoverlayer\r\n                    && (layer.__dirty || paintAll)) {\r\n                    layerList.push(layer);\r\n                }\r\n            }\r\n            var finished = true;\r\n            var needsRefreshHover = false;\r\n            for (var k = 0; k < layerList.length; k++) {\r\n                var layer = layerList[k];\r\n                var ctx = layer.ctx;\r\n                var scope = {\r\n                    inHover: false,\r\n                    allClipped: false,\r\n                    prevEl: null,\r\n                    viewWidth: this._width,\r\n                    viewHeight: this._height\r\n                };\r\n                ctx.save();\r\n                var start = paintAll ? layer.__startIndex : layer.__drawIndex;\r\n                var useTimer = !paintAll && layer.incremental && Date.now;\r\n                var startTime = useTimer && Date.now();\r\n                var clearColor = layer.zlevel === this._zlevelList[0]\r\n                    ? this._backgroundColor : null;\r\n                if (layer.__startIndex === layer.__endIndex) {\r\n                    layer.clear(false, clearColor);\r\n                }\r\n                else if (start === layer.__startIndex) {\r\n                    var firstEl = list[start];\r\n                    if (!firstEl.incremental || !firstEl.notClear || paintAll) {\r\n                        layer.clear(false, clearColor);\r\n                    }\r\n                }\r\n                if (start === -1) {\r\n                    console.error('For some unknown reason. drawIndex is -1');\r\n                    start = layer.__startIndex;\r\n                }\r\n                var i = void 0;\r\n                for (i = start; i < layer.__endIndex; i++) {\r\n                    var el = list[i];\r\n                    if (el.__inHover) {\r\n                        needsRefreshHover = true;\r\n                    }\r\n                    brush(ctx, el, scope, i === layer.__endIndex - 1);\r\n                    if (useTimer) {\r\n                        var dTime = Date.now() - startTime;\r\n                        if (dTime > 15) {\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                layer.__drawIndex = i;\r\n                if (layer.__drawIndex < layer.__endIndex) {\r\n                    finished = false;\r\n                }\r\n                if (scope.prevElClipPaths) {\r\n                    ctx.restore();\r\n                }\r\n                ctx.restore();\r\n            }\r\n            if (env.wxa) {\r\n                each(this._layers, function (layer) {\r\n                    if (layer && layer.ctx && layer.ctx.draw) {\r\n                        layer.ctx.draw();\r\n                    }\r\n                });\r\n            }\r\n            return {\r\n                finished: finished,\r\n                needsRefreshHover: needsRefreshHover\r\n            };\r\n        };\r\n        CanvasPainter.prototype.getLayer = function (zlevel, virtual) {\r\n            if (this._singleCanvas && !this._needsManuallyCompositing) {\r\n                zlevel = CANVAS_ZLEVEL;\r\n            }\r\n            var layer = this._layers[zlevel];\r\n            if (!layer) {\r\n                layer = new Layer('zr_' + zlevel, this, this.dpr);\r\n                layer.zlevel = zlevel;\r\n                layer.__builtin__ = true;\r\n                if (this._layerConfig[zlevel]) {\r\n                    merge(layer, this._layerConfig[zlevel], true);\r\n                }\r\n                else if (this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC]) {\r\n                    merge(layer, this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC], true);\r\n                }\r\n                if (virtual) {\r\n                    layer.virtual = virtual;\r\n                }\r\n                this.insertLayer(zlevel, layer);\r\n                layer.initContext();\r\n            }\r\n            return layer;\r\n        };\r\n        CanvasPainter.prototype.insertLayer = function (zlevel, layer) {\r\n            var layersMap = this._layers;\r\n            var zlevelList = this._zlevelList;\r\n            var len = zlevelList.length;\r\n            var domRoot = this._domRoot;\r\n            var prevLayer = null;\r\n            var i = -1;\r\n            if (layersMap[zlevel]) {\r\n                logError('ZLevel ' + zlevel + ' has been used already');\r\n                return;\r\n            }\r\n            if (!isLayerValid(layer)) {\r\n                logError('Layer of zlevel ' + zlevel + ' is not valid');\r\n                return;\r\n            }\r\n            if (len > 0 && zlevel > zlevelList[0]) {\r\n                for (i = 0; i < len - 1; i++) {\r\n                    if (zlevelList[i] < zlevel\r\n                        && zlevelList[i + 1] > zlevel) {\r\n                        break;\r\n                    }\r\n                }\r\n                prevLayer = layersMap[zlevelList[i]];\r\n            }\r\n            zlevelList.splice(i + 1, 0, zlevel);\r\n            layersMap[zlevel] = layer;\r\n            if (!layer.virtual) {\r\n                if (prevLayer) {\r\n                    var prevDom = prevLayer.dom;\r\n                    if (prevDom.nextSibling) {\r\n                        domRoot.insertBefore(layer.dom, prevDom.nextSibling);\r\n                    }\r\n                    else {\r\n                        domRoot.appendChild(layer.dom);\r\n                    }\r\n                }\r\n                else {\r\n                    if (domRoot.firstChild) {\r\n                        domRoot.insertBefore(layer.dom, domRoot.firstChild);\r\n                    }\r\n                    else {\r\n                        domRoot.appendChild(layer.dom);\r\n                    }\r\n                }\r\n            }\r\n            layer.__painter = this;\r\n        };\r\n        CanvasPainter.prototype.eachLayer = function (cb, context) {\r\n            var zlevelList = this._zlevelList;\r\n            for (var i = 0; i < zlevelList.length; i++) {\r\n                var z = zlevelList[i];\r\n                cb.call(context, this._layers[z], z);\r\n            }\r\n        };\r\n        CanvasPainter.prototype.eachBuiltinLayer = function (cb, context) {\r\n            var zlevelList = this._zlevelList;\r\n            for (var i = 0; i < zlevelList.length; i++) {\r\n                var z = zlevelList[i];\r\n                var layer = this._layers[z];\r\n                if (layer.__builtin__) {\r\n                    cb.call(context, layer, z);\r\n                }\r\n            }\r\n        };\r\n        CanvasPainter.prototype.eachOtherLayer = function (cb, context) {\r\n            var zlevelList = this._zlevelList;\r\n            for (var i = 0; i < zlevelList.length; i++) {\r\n                var z = zlevelList[i];\r\n                var layer = this._layers[z];\r\n                if (!layer.__builtin__) {\r\n                    cb.call(context, layer, z);\r\n                }\r\n            }\r\n        };\r\n        CanvasPainter.prototype.getLayers = function () {\r\n            return this._layers;\r\n        };\r\n        CanvasPainter.prototype._updateLayerStatus = function (list) {\r\n            this.eachBuiltinLayer(function (layer, z) {\r\n                layer.__dirty = layer.__used = false;\r\n            });\r\n            function updatePrevLayer(idx) {\r\n                if (prevLayer) {\r\n                    if (prevLayer.__endIndex !== idx) {\r\n                        prevLayer.__dirty = true;\r\n                    }\r\n                    prevLayer.__endIndex = idx;\r\n                }\r\n            }\r\n            if (this._singleCanvas) {\r\n                for (var i_1 = 1; i_1 < list.length; i_1++) {\r\n                    var el = list[i_1];\r\n                    if (el.zlevel !== list[i_1 - 1].zlevel || el.incremental) {\r\n                        this._needsManuallyCompositing = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            var prevLayer = null;\r\n            var incrementalLayerCount = 0;\r\n            var prevZlevel;\r\n            var i;\r\n            for (i = 0; i < list.length; i++) {\r\n                var el = list[i];\r\n                var zlevel = el.zlevel;\r\n                var layer = void 0;\r\n                if (prevZlevel !== zlevel) {\r\n                    prevZlevel = zlevel;\r\n                    incrementalLayerCount = 0;\r\n                }\r\n                if (el.incremental) {\r\n                    layer = this.getLayer(zlevel + INCREMENTAL_INC, this._needsManuallyCompositing);\r\n                    layer.incremental = true;\r\n                    incrementalLayerCount = 1;\r\n                }\r\n                else {\r\n                    layer = this.getLayer(zlevel + (incrementalLayerCount > 0 ? EL_AFTER_INCREMENTAL_INC : 0), this._needsManuallyCompositing);\r\n                }\r\n                if (!layer.__builtin__) {\r\n                    logError('ZLevel ' + zlevel + ' has been used by unkown layer ' + layer.id);\r\n                }\r\n                if (layer !== prevLayer) {\r\n                    layer.__used = true;\r\n                    if (layer.__startIndex !== i) {\r\n                        layer.__dirty = true;\r\n                    }\r\n                    layer.__startIndex = i;\r\n                    if (!layer.incremental) {\r\n                        layer.__drawIndex = i;\r\n                    }\r\n                    else {\r\n                        layer.__drawIndex = -1;\r\n                    }\r\n                    updatePrevLayer(i);\r\n                    prevLayer = layer;\r\n                }\r\n                if ((el.__dirty & Element.REDARAW_BIT) && !el.__inHover) {\r\n                    layer.__dirty = true;\r\n                    if (layer.incremental && layer.__drawIndex < 0) {\r\n                        layer.__drawIndex = i;\r\n                    }\r\n                }\r\n            }\r\n            updatePrevLayer(i);\r\n            this.eachBuiltinLayer(function (layer, z) {\r\n                if (!layer.__used && layer.getElementCount() > 0) {\r\n                    layer.__dirty = true;\r\n                    layer.__startIndex = layer.__endIndex = layer.__drawIndex = 0;\r\n                }\r\n                if (layer.__dirty && layer.__drawIndex < 0) {\r\n                    layer.__drawIndex = layer.__startIndex;\r\n                }\r\n            });\r\n        };\r\n        CanvasPainter.prototype.clear = function () {\r\n            this.eachBuiltinLayer(this._clearLayer);\r\n            return this;\r\n        };\r\n        CanvasPainter.prototype._clearLayer = function (layer) {\r\n            layer.clear();\r\n        };\r\n        CanvasPainter.prototype.setBackgroundColor = function (backgroundColor) {\r\n            this._backgroundColor = backgroundColor;\r\n        };\r\n        CanvasPainter.prototype.configLayer = function (zlevel, config) {\r\n            if (config) {\r\n                var layerConfig = this._layerConfig;\r\n                if (!layerConfig[zlevel]) {\r\n                    layerConfig[zlevel] = config;\r\n                }\r\n                else {\r\n                    merge(layerConfig[zlevel], config, true);\r\n                }\r\n                for (var i = 0; i < this._zlevelList.length; i++) {\r\n                    var _zlevel = this._zlevelList[i];\r\n                    if (_zlevel === zlevel || _zlevel === zlevel + EL_AFTER_INCREMENTAL_INC) {\r\n                        var layer = this._layers[_zlevel];\r\n                        merge(layer, layerConfig[zlevel], true);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        CanvasPainter.prototype.delLayer = function (zlevel) {\r\n            var layers = this._layers;\r\n            var zlevelList = this._zlevelList;\r\n            var layer = layers[zlevel];\r\n            if (!layer) {\r\n                return;\r\n            }\r\n            layer.dom.parentNode.removeChild(layer.dom);\r\n            delete layers[zlevel];\r\n            zlevelList.splice(indexOf(zlevelList, zlevel), 1);\r\n        };\r\n        CanvasPainter.prototype.resize = function (width, height) {\r\n            if (!this._domRoot.style) {\r\n                if (width == null || height == null) {\r\n                    return;\r\n                }\r\n                this._width = width;\r\n                this._height = height;\r\n                this.getLayer(CANVAS_ZLEVEL).resize(width, height);\r\n            }\r\n            else {\r\n                var domRoot = this._domRoot;\r\n                domRoot.style.display = 'none';\r\n                var opts = this._opts;\r\n                width != null && (opts.width = width);\r\n                height != null && (opts.height = height);\r\n                width = this._getSize(0);\r\n                height = this._getSize(1);\r\n                domRoot.style.display = '';\r\n                if (this._width !== width || height !== this._height) {\r\n                    domRoot.style.width = width + 'px';\r\n                    domRoot.style.height = height + 'px';\r\n                    for (var id in this._layers) {\r\n                        if (this._layers.hasOwnProperty(id)) {\r\n                            this._layers[id].resize(width, height);\r\n                        }\r\n                    }\r\n                    this.refresh(true);\r\n                }\r\n                this._width = width;\r\n                this._height = height;\r\n            }\r\n            return this;\r\n        };\r\n        CanvasPainter.prototype.clearLayer = function (zlevel) {\r\n            var layer = this._layers[zlevel];\r\n            if (layer) {\r\n                layer.clear();\r\n            }\r\n        };\r\n        CanvasPainter.prototype.dispose = function () {\r\n            this.root.innerHTML = '';\r\n            this.root =\r\n                this.storage =\r\n                    this._domRoot =\r\n                        this._layers = null;\r\n        };\r\n        CanvasPainter.prototype.getRenderedCanvas = function (opts) {\r\n            opts = opts || {};\r\n            if (this._singleCanvas && !this._compositeManually) {\r\n                return this._layers[CANVAS_ZLEVEL].dom;\r\n            }\r\n            var imageLayer = new Layer('image', this, opts.pixelRatio || this.dpr);\r\n            var ctx = imageLayer.ctx;\r\n            imageLayer.initContext();\r\n            imageLayer.clear(false, opts.backgroundColor || this._backgroundColor);\r\n            if (opts.pixelRatio <= this.dpr) {\r\n                this.refresh();\r\n                var width_1 = imageLayer.dom.width;\r\n                var height_1 = imageLayer.dom.height;\r\n                var ctx_1 = imageLayer.ctx;\r\n                this.eachLayer(function (layer) {\r\n                    if (layer.__builtin__) {\r\n                        ctx_1.drawImage(layer.dom, 0, 0, width_1, height_1);\r\n                    }\r\n                    else if (layer.renderToCanvas) {\r\n                        imageLayer.ctx.save();\r\n                        layer.renderToCanvas(imageLayer.ctx);\r\n                        imageLayer.ctx.restore();\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                var scope = {\r\n                    inHover: false,\r\n                    viewWidth: this._width,\r\n                    viewHeight: this._height\r\n                };\r\n                var displayList = this.storage.getDisplayList(true);\r\n                for (var i = 0, len = displayList.length; i < len; i++) {\r\n                    var el = displayList[i];\r\n                    brush(ctx, el, scope, i === len - 1);\r\n                }\r\n            }\r\n            return imageLayer.dom;\r\n        };\r\n        CanvasPainter.prototype.getWidth = function () {\r\n            return this._width;\r\n        };\r\n        CanvasPainter.prototype.getHeight = function () {\r\n            return this._height;\r\n        };\r\n        CanvasPainter.prototype._getSize = function (whIdx) {\r\n            var opts = this._opts;\r\n            var wh = ['width', 'height'][whIdx];\r\n            var cwh = ['clientWidth', 'clientHeight'][whIdx];\r\n            var plt = ['paddingLeft', 'paddingTop'][whIdx];\r\n            var prb = ['paddingRight', 'paddingBottom'][whIdx];\r\n            if (opts[wh] != null && opts[wh] !== 'auto') {\r\n                return parseFloat(opts[wh]);\r\n            }\r\n            var root = this.root;\r\n            var stl = document.defaultView.getComputedStyle(root);\r\n            return ((root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh]))\r\n                - (parseInt10(stl[plt]) || 0)\r\n                - (parseInt10(stl[prb]) || 0)) | 0;\r\n        };\r\n        CanvasPainter.prototype.pathToImage = function (path, dpr) {\r\n            dpr = dpr || this.dpr;\r\n            var canvas = document.createElement('canvas');\r\n            var ctx = canvas.getContext('2d');\r\n            var rect = path.getBoundingRect();\r\n            var style = path.style;\r\n            var shadowBlurSize = style.shadowBlur * dpr;\r\n            var shadowOffsetX = style.shadowOffsetX * dpr;\r\n            var shadowOffsetY = style.shadowOffsetY * dpr;\r\n            var lineWidth = path.hasStroke() ? style.lineWidth : 0;\r\n            var leftMargin = Math.max(lineWidth / 2, -shadowOffsetX + shadowBlurSize);\r\n            var rightMargin = Math.max(lineWidth / 2, shadowOffsetX + shadowBlurSize);\r\n            var topMargin = Math.max(lineWidth / 2, -shadowOffsetY + shadowBlurSize);\r\n            var bottomMargin = Math.max(lineWidth / 2, shadowOffsetY + shadowBlurSize);\r\n            var width = rect.width + leftMargin + rightMargin;\r\n            var height = rect.height + topMargin + bottomMargin;\r\n            canvas.width = width * dpr;\r\n            canvas.height = height * dpr;\r\n            ctx.scale(dpr, dpr);\r\n            ctx.clearRect(0, 0, width, height);\r\n            ctx.dpr = dpr;\r\n            var pathTransform = {\r\n                x: path.x,\r\n                y: path.y,\r\n                scaleX: path.scaleX,\r\n                scaleY: path.scaleY,\r\n                rotation: path.rotation,\r\n                originX: path.originX,\r\n                originY: path.originY\r\n            };\r\n            path.x = leftMargin - rect.x;\r\n            path.y = topMargin - rect.y;\r\n            path.rotation = 0;\r\n            path.scaleX = 1;\r\n            path.scaleY = 1;\r\n            path.updateTransform();\r\n            if (path) {\r\n                brush(ctx, path, {\r\n                    inHover: false,\r\n                    viewWidth: this._width,\r\n                    viewHeight: this._height\r\n                }, true);\r\n            }\r\n            var imgShape = new ZRImage({\r\n                style: {\r\n                    x: 0,\r\n                    y: 0,\r\n                    image: canvas\r\n                }\r\n            });\r\n            extend(path, pathTransform);\r\n            return imgShape;\r\n        };\r\n        return CanvasPainter;\r\n    }());\n\n    registerPainter('canvas', CanvasPainter);\n\n    function findEventDispatcher(target, det, returnFirstMatch) {\r\n        var found;\r\n        while (target) {\r\n            if (det(target)) {\r\n                found = target;\r\n                if (returnFirstMatch) {\r\n                    break;\r\n                }\r\n            }\r\n            target = target.__hostTarget || target.parent;\r\n        }\r\n        return found;\r\n    }\n\n    var assert$1 = assert;\r\n    var each$3 = each;\r\n    var isFunction$1 = isFunction;\r\n    var isObject$2 = isObject;\r\n    var version = '5.0.0-beta.1';\r\n    var dependencies = {\r\n        zrender: '5.0.0-beta.1'\r\n    };\r\n    var TEST_FRAME_REMAIN_TIME = 1;\r\n    var PRIORITY_PROCESSOR_SERIES_FILTER = 800;\r\n    var PRIORITY_PROCESSOR_DATASTACK = 900;\r\n    var PRIORITY_PROCESSOR_FILTER = 1000;\r\n    var PRIORITY_PROCESSOR_DEFAULT = 2000;\r\n    var PRIORITY_PROCESSOR_STATISTIC = 5000;\r\n    var PRIORITY_VISUAL_LAYOUT = 1000;\r\n    var PRIORITY_VISUAL_PROGRESSIVE_LAYOUT = 1100;\r\n    var PRIORITY_VISUAL_GLOBAL = 2000;\r\n    var PRIORITY_VISUAL_CHART = 3000;\r\n    var PRIORITY_VISUAL_POST_CHART_LAYOUT = 3500;\r\n    var PRIORITY_VISUAL_COMPONENT = 4000;\r\n    var PRIORITY_VISUAL_CHART_DATA_CUSTOM = 4500;\r\n    var PRIORITY_VISUAL_BRUSH = 5000;\r\n    var PRIORITY = {\r\n        PROCESSOR: {\r\n            FILTER: PRIORITY_PROCESSOR_FILTER,\r\n            SERIES_FILTER: PRIORITY_PROCESSOR_SERIES_FILTER,\r\n            STATISTIC: PRIORITY_PROCESSOR_STATISTIC\r\n        },\r\n        VISUAL: {\r\n            LAYOUT: PRIORITY_VISUAL_LAYOUT,\r\n            PROGRESSIVE_LAYOUT: PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,\r\n            GLOBAL: PRIORITY_VISUAL_GLOBAL,\r\n            CHART: PRIORITY_VISUAL_CHART,\r\n            POST_CHART_LAYOUT: PRIORITY_VISUAL_POST_CHART_LAYOUT,\r\n            COMPONENT: PRIORITY_VISUAL_COMPONENT,\r\n            BRUSH: PRIORITY_VISUAL_BRUSH,\r\n            CHART_ITEM: PRIORITY_VISUAL_CHART_DATA_CUSTOM\r\n        }\r\n    };\r\n    var IN_MAIN_PROCESS_KEY = '__flagInMainProcess';\r\n    var OPTION_UPDATED_KEY = '__optionUpdated';\r\n    var STATUS_NEEDS_UPDATE_KEY = '__needsUpdateStatus';\r\n    var ACTION_REG = /^[a-zA-Z0-9_]+$/;\r\n    var CONNECT_STATUS_KEY = '__connectUpdateStatus';\r\n    var CONNECT_STATUS_PENDING = 0;\r\n    var CONNECT_STATUS_UPDATING = 1;\r\n    var CONNECT_STATUS_UPDATED = 2;\r\n    function createRegisterEventWithLowercaseECharts(method) {\r\n        return function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            if (this.isDisposed()) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            return toLowercaseNameAndCallEventful(this, method, args);\r\n        };\r\n    }\r\n    function createRegisterEventWithLowercaseMessageCenter(method) {\r\n        return function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            return toLowercaseNameAndCallEventful(this, method, args);\r\n        };\r\n    }\r\n    function toLowercaseNameAndCallEventful(host, method, args) {\r\n        args[0] = args[0] && args[0].toLowerCase();\r\n        return Eventful.prototype[method].apply(host, args);\r\n    }\r\n    var MessageCenter = (function (_super) {\r\n        __extends(MessageCenter, _super);\r\n        function MessageCenter() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return MessageCenter;\r\n    }(Eventful));\r\n    var messageCenterProto = MessageCenter.prototype;\r\n    messageCenterProto.on = createRegisterEventWithLowercaseMessageCenter('on');\r\n    messageCenterProto.off = createRegisterEventWithLowercaseMessageCenter('off');\r\n    var prepare;\r\n    var prepareView;\r\n    var updateDirectly;\r\n    var updateMethods;\r\n    var doConvertPixel;\r\n    var updateStreamModes;\r\n    var doDispatchAction;\r\n    var flushPendingActions;\r\n    var triggerUpdatedEvent;\r\n    var bindRenderedEvent;\r\n    var bindMouseEvent;\r\n    var clearColorPalette;\r\n    var render;\r\n    var renderComponents;\r\n    var renderSeries;\r\n    var performPostUpdateFuncs;\r\n    var createExtensionAPI;\r\n    var enableConnect;\r\n    var markStatusToUpdate;\r\n    var applyChangedStates;\r\n    var ECharts = (function (_super) {\r\n        __extends(ECharts, _super);\r\n        function ECharts(dom, theme, opts) {\r\n            var _this = _super.call(this, new ECEventProcessor()) || this;\r\n            _this._chartsViews = [];\r\n            _this._chartsMap = {};\r\n            _this._componentsViews = [];\r\n            _this._componentsMap = {};\r\n            _this._pendingActions = [];\r\n            opts = opts || {};\r\n            if (typeof theme === 'string') {\r\n                theme = themeStorage[theme];\r\n            }\r\n            _this._dom = dom;\r\n            var defaultRenderer = 'canvas';\r\n            if (__DEV__) {\r\n                defaultRenderer = (typeof window === 'undefined' ? global : window).__ECHARTS__DEFAULT__RENDERER__ || defaultRenderer;\r\n            }\r\n            var zr = _this._zr = init(dom, {\r\n                renderer: opts.renderer || defaultRenderer,\r\n                devicePixelRatio: opts.devicePixelRatio,\r\n                width: opts.width,\r\n                height: opts.height\r\n            });\r\n            _this._throttledZrFlush = throttle(bind(zr.flush, zr), 17);\r\n            theme = clone(theme);\r\n            theme && backwardCompat(theme, true);\r\n            _this._theme = theme;\r\n            _this._locale = createLocaleObject(opts.locale || SYSTEM_LANG);\r\n            _this._coordSysMgr = new CoordinateSystemManager();\r\n            var api = _this._api = createExtensionAPI(_this);\r\n            function prioritySortFunc(a, b) {\r\n                return a.__prio - b.__prio;\r\n            }\r\n            sort(visualFuncs, prioritySortFunc);\r\n            sort(dataProcessorFuncs, prioritySortFunc);\r\n            _this._scheduler = new Scheduler(_this, api, dataProcessorFuncs, visualFuncs);\r\n            _this._messageCenter = new MessageCenter();\r\n            _this._labelManager = new LabelManager();\r\n            _this._initEvents();\r\n            _this.resize = bind(_this.resize, _this);\r\n            zr.animation.on('frame', _this._onframe, _this);\r\n            bindRenderedEvent(zr, _this);\r\n            bindMouseEvent(zr, _this);\r\n            setAsPrimitive(_this);\r\n            return _this;\r\n        }\r\n        ECharts.prototype._onframe = function () {\r\n            if (this._disposed) {\r\n                return;\r\n            }\r\n            applyChangedStates(this);\r\n            var scheduler = this._scheduler;\r\n            if (this[OPTION_UPDATED_KEY]) {\r\n                var silent = this[OPTION_UPDATED_KEY].silent;\r\n                this[IN_MAIN_PROCESS_KEY] = true;\r\n                prepare(this);\r\n                updateMethods.update.call(this);\r\n                this[IN_MAIN_PROCESS_KEY] = false;\r\n                this[OPTION_UPDATED_KEY] = false;\r\n                flushPendingActions.call(this, silent);\r\n                triggerUpdatedEvent.call(this, silent);\r\n            }\r\n            else if (scheduler.unfinished) {\r\n                var remainTime = TEST_FRAME_REMAIN_TIME;\r\n                var ecModel = this._model;\r\n                var api = this._api;\r\n                scheduler.unfinished = false;\r\n                do {\r\n                    var startTime = +new Date();\r\n                    scheduler.performSeriesTasks(ecModel);\r\n                    scheduler.performDataProcessorTasks(ecModel);\r\n                    updateStreamModes(this, ecModel);\r\n                    scheduler.performVisualTasks(ecModel);\r\n                    renderSeries(this, this._model, api, 'remain');\r\n                    remainTime -= (+new Date() - startTime);\r\n                } while (remainTime > 0 && scheduler.unfinished);\r\n                if (!scheduler.unfinished) {\r\n                    this._zr.flush();\r\n                }\r\n            }\r\n        };\r\n        ECharts.prototype.getDom = function () {\r\n            return this._dom;\r\n        };\r\n        ECharts.prototype.getId = function () {\r\n            return this.id;\r\n        };\r\n        ECharts.prototype.getZr = function () {\r\n            return this._zr;\r\n        };\r\n        ECharts.prototype.setOption = function (option, notMerge, lazyUpdate) {\r\n            if (__DEV__) {\r\n                assert$1(!this[IN_MAIN_PROCESS_KEY], '`setOption` should not be called during main process.');\r\n            }\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            var silent;\r\n            var replaceMerge;\r\n            if (isObject$2(notMerge)) {\r\n                lazyUpdate = notMerge.lazyUpdate;\r\n                silent = notMerge.silent;\r\n                replaceMerge = notMerge.replaceMerge;\r\n                notMerge = notMerge.notMerge;\r\n            }\r\n            this[IN_MAIN_PROCESS_KEY] = true;\r\n            if (!this._model || notMerge) {\r\n                var optionManager = new OptionManager(this._api);\r\n                var theme = this._theme;\r\n                var ecModel = this._model = new GlobalModel();\r\n                ecModel.scheduler = this._scheduler;\r\n                ecModel.init(null, null, null, theme, this._locale, optionManager);\r\n            }\r\n            this._model.setOption(option, { replaceMerge: replaceMerge }, optionPreprocessorFuncs);\r\n            if (lazyUpdate) {\r\n                this[OPTION_UPDATED_KEY] = { silent: silent };\r\n                this[IN_MAIN_PROCESS_KEY] = false;\r\n            }\r\n            else {\r\n                prepare(this);\r\n                updateMethods.update.call(this);\r\n                this._zr.flush();\r\n                this[OPTION_UPDATED_KEY] = false;\r\n                this[IN_MAIN_PROCESS_KEY] = false;\r\n                flushPendingActions.call(this, silent);\r\n                triggerUpdatedEvent.call(this, silent);\r\n            }\r\n        };\r\n        ECharts.prototype.setTheme = function () {\r\n            console.error('ECharts#setTheme() is DEPRECATED in ECharts 3.0');\r\n        };\r\n        ECharts.prototype.getModel = function () {\r\n            return this._model;\r\n        };\r\n        ECharts.prototype.getOption = function () {\r\n            return this._model && this._model.getOption();\r\n        };\r\n        ECharts.prototype.getWidth = function () {\r\n            return this._zr.getWidth();\r\n        };\r\n        ECharts.prototype.getHeight = function () {\r\n            return this._zr.getHeight();\r\n        };\r\n        ECharts.prototype.getDevicePixelRatio = function () {\r\n            return this._zr.painter.dpr || window.devicePixelRatio || 1;\r\n        };\r\n        ECharts.prototype.getRenderedCanvas = function (opts) {\r\n            if (!env.canvasSupported) {\r\n                return;\r\n            }\r\n            opts = extend({}, opts || {});\r\n            opts.pixelRatio = opts.pixelRatio || 1;\r\n            opts.backgroundColor = opts.backgroundColor\r\n                || this._model.get('backgroundColor');\r\n            var zr = this._zr;\r\n            return zr.painter.getRenderedCanvas(opts);\r\n        };\r\n        ECharts.prototype.getSvgDataURL = function () {\r\n            if (!env.svgSupported) {\r\n                return;\r\n            }\r\n            var zr = this._zr;\r\n            var list = zr.storage.getDisplayList();\r\n            each(list, function (el) {\r\n                el.stopAnimation(null, true);\r\n            });\r\n            return zr.painter.toDataURL();\r\n        };\r\n        ECharts.prototype.getDataURL = function (opts) {\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            opts = opts || {};\r\n            var excludeComponents = opts.excludeComponents;\r\n            var ecModel = this._model;\r\n            var excludesComponentViews = [];\r\n            var self = this;\r\n            each$3(excludeComponents, function (componentType) {\r\n                ecModel.eachComponent({\r\n                    mainType: componentType\r\n                }, function (component) {\r\n                    var view = self._componentsMap[component.__viewId];\r\n                    if (!view.group.ignore) {\r\n                        excludesComponentViews.push(view);\r\n                        view.group.ignore = true;\r\n                    }\r\n                });\r\n            });\r\n            var url = this._zr.painter.getType() === 'svg'\r\n                ? this.getSvgDataURL()\r\n                : this.getRenderedCanvas(opts).toDataURL('image/' + (opts && opts.type || 'png'));\r\n            each$3(excludesComponentViews, function (view) {\r\n                view.group.ignore = false;\r\n            });\r\n            return url;\r\n        };\r\n        ECharts.prototype.getConnectedDataURL = function (opts) {\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            if (!env.canvasSupported) {\r\n                return;\r\n            }\r\n            var isSvg = opts.type === 'svg';\r\n            var groupId = this.group;\r\n            var mathMin = Math.min;\r\n            var mathMax = Math.max;\r\n            var MAX_NUMBER = Infinity;\r\n            if (connectedGroups[groupId]) {\r\n                var left_1 = MAX_NUMBER;\r\n                var top_1 = MAX_NUMBER;\r\n                var right_1 = -MAX_NUMBER;\r\n                var bottom_1 = -MAX_NUMBER;\r\n                var canvasList_1 = [];\r\n                var dpr_1 = (opts && opts.pixelRatio) || 1;\r\n                each(instances, function (chart, id) {\r\n                    if (chart.group === groupId) {\r\n                        var canvas = isSvg\r\n                            ? chart.getZr().painter.getSvgDom().innerHTML\r\n                            : chart.getRenderedCanvas(clone(opts));\r\n                        var boundingRect = chart.getDom().getBoundingClientRect();\r\n                        left_1 = mathMin(boundingRect.left, left_1);\r\n                        top_1 = mathMin(boundingRect.top, top_1);\r\n                        right_1 = mathMax(boundingRect.right, right_1);\r\n                        bottom_1 = mathMax(boundingRect.bottom, bottom_1);\r\n                        canvasList_1.push({\r\n                            dom: canvas,\r\n                            left: boundingRect.left,\r\n                            top: boundingRect.top\r\n                        });\r\n                    }\r\n                });\r\n                left_1 *= dpr_1;\r\n                top_1 *= dpr_1;\r\n                right_1 *= dpr_1;\r\n                bottom_1 *= dpr_1;\r\n                var width = right_1 - left_1;\r\n                var height = bottom_1 - top_1;\r\n                var targetCanvas = createCanvas();\r\n                var zr_1 = init(targetCanvas, {\r\n                    renderer: isSvg ? 'svg' : 'canvas'\r\n                });\r\n                zr_1.resize({\r\n                    width: width,\r\n                    height: height\r\n                });\r\n                if (isSvg) {\r\n                    var content_1 = '';\r\n                    each$3(canvasList_1, function (item) {\r\n                        var x = item.left - left_1;\r\n                        var y = item.top - top_1;\r\n                        content_1 += '<g transform=\"translate(' + x + ','\r\n                            + y + ')\">' + item.dom + '</g>';\r\n                    });\r\n                    zr_1.painter.getSvgRoot().innerHTML = content_1;\r\n                    if (opts.connectedBackgroundColor) {\r\n                        zr_1.painter.setBackgroundColor(opts.connectedBackgroundColor);\r\n                    }\r\n                    zr_1.refreshImmediately();\r\n                    return zr_1.painter.toDataURL();\r\n                }\r\n                else {\r\n                    if (opts.connectedBackgroundColor) {\r\n                        zr_1.add(new Rect({\r\n                            shape: {\r\n                                x: 0,\r\n                                y: 0,\r\n                                width: width,\r\n                                height: height\r\n                            },\r\n                            style: {\r\n                                fill: opts.connectedBackgroundColor\r\n                            }\r\n                        }));\r\n                    }\r\n                    each$3(canvasList_1, function (item) {\r\n                        var img = new ZRImage({\r\n                            style: {\r\n                                x: item.left * dpr_1 - left_1,\r\n                                y: item.top * dpr_1 - top_1,\r\n                                image: item.dom\r\n                            }\r\n                        });\r\n                        zr_1.add(img);\r\n                    });\r\n                    zr_1.refreshImmediately();\r\n                    return targetCanvas.toDataURL('image/' + (opts && opts.type || 'png'));\r\n                }\r\n            }\r\n            else {\r\n                return this.getDataURL(opts);\r\n            }\r\n        };\r\n        ECharts.prototype.convertToPixel = function (finder, value) {\r\n            return doConvertPixel(this, 'convertToPixel', finder, value);\r\n        };\r\n        ECharts.prototype.convertFromPixel = function (finder, value) {\r\n            return doConvertPixel(this, 'convertFromPixel', finder, value);\r\n        };\r\n        ECharts.prototype.containPixel = function (finder, value) {\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            var ecModel = this._model;\r\n            var result;\r\n            var findResult = parseFinder(ecModel, finder);\r\n            each(findResult, function (models, key) {\r\n                key.indexOf('Models') >= 0 && each(models, function (model) {\r\n                    var coordSys = model.coordinateSystem;\r\n                    if (coordSys && coordSys.containPoint) {\r\n                        result = result || !!coordSys.containPoint(value);\r\n                    }\r\n                    else if (key === 'seriesModels') {\r\n                        var view = this._chartsMap[model.__viewId];\r\n                        if (view && view.containPoint) {\r\n                            result = result || view.containPoint(value, model);\r\n                        }\r\n                        else {\r\n                            if (__DEV__) {\r\n                                console.warn(key + ': ' + (view\r\n                                    ? 'The found component do not support containPoint.'\r\n                                    : 'No view mapping to the found component.'));\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (__DEV__) {\r\n                            console.warn(key + ': containPoint is not supported');\r\n                        }\r\n                    }\r\n                }, this);\r\n            }, this);\r\n            return !!result;\r\n        };\r\n        ECharts.prototype.getVisual = function (finder, visualType) {\r\n            var ecModel = this._model;\r\n            var parsedFinder = parseFinder(ecModel, finder, {\r\n                defaultMainType: 'series'\r\n            });\r\n            var seriesModel = parsedFinder.seriesModel;\r\n            if (__DEV__) {\r\n                if (!seriesModel) {\r\n                    console.warn('There is no specified seires model');\r\n                }\r\n            }\r\n            var data = seriesModel.getData();\r\n            var dataIndexInside = parsedFinder.hasOwnProperty('dataIndexInside')\r\n                ? parsedFinder.dataIndexInside\r\n                : parsedFinder.hasOwnProperty('dataIndex')\r\n                    ? data.indexOfRawIndex(parsedFinder.dataIndex)\r\n                    : null;\r\n            return dataIndexInside != null\r\n                ? getItemVisualFromData(data, dataIndexInside, visualType)\r\n                : getVisualFromData(data, visualType);\r\n        };\r\n        ECharts.prototype.getViewOfComponentModel = function (componentModel) {\r\n            return this._componentsMap[componentModel.__viewId];\r\n        };\r\n        ECharts.prototype.getViewOfSeriesModel = function (seriesModel) {\r\n            return this._chartsMap[seriesModel.__viewId];\r\n        };\r\n        ECharts.prototype._initEvents = function () {\r\n            var _this = this;\r\n            each$3(MOUSE_EVENT_NAMES, function (eveName) {\r\n                var handler = function (e) {\r\n                    var ecModel = _this.getModel();\r\n                    var el = e.target;\r\n                    var params;\r\n                    var isGlobalOut = eveName === 'globalout';\r\n                    if (isGlobalOut) {\r\n                        params = {};\r\n                    }\r\n                    else {\r\n                        el && findEventDispatcher(el, function (parent) {\r\n                            var ecData = getECData(parent);\r\n                            if (ecData && ecData.dataIndex != null) {\r\n                                var dataModel = ecData.dataModel || ecModel.getSeriesByIndex(ecData.seriesIndex);\r\n                                params = (dataModel && dataModel.getDataParams(ecData.dataIndex, ecData.dataType) || {});\r\n                                return true;\r\n                            }\r\n                            else if (ecData.eventData) {\r\n                                params = extend({}, ecData.eventData);\r\n                                return true;\r\n                            }\r\n                        }, true);\r\n                    }\r\n                    if (params) {\r\n                        var componentType = params.componentType;\r\n                        var componentIndex = params.componentIndex;\r\n                        if (componentType === 'markLine'\r\n                            || componentType === 'markPoint'\r\n                            || componentType === 'markArea') {\r\n                            componentType = 'series';\r\n                            componentIndex = params.seriesIndex;\r\n                        }\r\n                        var model = componentType && componentIndex != null\r\n                            && ecModel.getComponent(componentType, componentIndex);\r\n                        var view = model && _this[model.mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId];\r\n                        if (__DEV__) {\r\n                            if (!isGlobalOut && !(model && view)) {\r\n                                console.warn('model or view can not be found by params');\r\n                            }\r\n                        }\r\n                        params.event = e;\r\n                        params.type = eveName;\r\n                        _this._$eventProcessor.eventInfo = {\r\n                            targetEl: el,\r\n                            packedEvent: params,\r\n                            model: model,\r\n                            view: view\r\n                        };\r\n                        _this.trigger(eveName, params);\r\n                    }\r\n                };\r\n                handler.zrEventfulCallAtLast = true;\r\n                _this._zr.on(eveName, handler, _this);\r\n            });\r\n            each$3(eventActionMap, function (actionType, eventType) {\r\n                _this._messageCenter.on(eventType, function (event) {\r\n                    this.trigger(eventType, event);\r\n                }, _this);\r\n            });\r\n            each$3(['selectchanged'], function (eventType) {\r\n                _this._messageCenter.on(eventType, function (event) {\r\n                    this.trigger(eventType, event);\r\n                }, _this);\r\n            });\r\n            handleLegacySelectEvents(this._messageCenter, this);\r\n        };\r\n        ECharts.prototype.isDisposed = function () {\r\n            return this._disposed;\r\n        };\r\n        ECharts.prototype.clear = function () {\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            this.setOption({ series: [] }, true);\r\n        };\r\n        ECharts.prototype.dispose = function () {\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            this._disposed = true;\r\n            setAttribute(this.getDom(), DOM_ATTRIBUTE_KEY, '');\r\n            var api = this._api;\r\n            var ecModel = this._model;\r\n            each$3(this._componentsViews, function (component) {\r\n                component.dispose(ecModel, api);\r\n            });\r\n            each$3(this._chartsViews, function (chart) {\r\n                chart.dispose(ecModel, api);\r\n            });\r\n            this._zr.dispose();\r\n            delete instances[this.id];\r\n        };\r\n        ECharts.prototype.resize = function (opts) {\r\n            if (__DEV__) {\r\n                assert$1(!this[IN_MAIN_PROCESS_KEY], '`resize` should not be called during main process.');\r\n            }\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            this._zr.resize(opts);\r\n            var ecModel = this._model;\r\n            this._loadingFX && this._loadingFX.resize();\r\n            if (!ecModel) {\r\n                return;\r\n            }\r\n            var optionChanged = ecModel.resetOption('media');\r\n            var silent = opts && opts.silent;\r\n            this[IN_MAIN_PROCESS_KEY] = true;\r\n            optionChanged && prepare(this);\r\n            updateMethods.update.call(this, {\r\n                type: 'resize',\r\n                animation: {\r\n                    duration: 0\r\n                }\r\n            });\r\n            this[IN_MAIN_PROCESS_KEY] = false;\r\n            flushPendingActions.call(this, silent);\r\n            triggerUpdatedEvent.call(this, silent);\r\n        };\r\n        ECharts.prototype.showLoading = function (name, cfg) {\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            if (isObject$2(name)) {\r\n                cfg = name;\r\n                name = '';\r\n            }\r\n            name = name || 'default';\r\n            this.hideLoading();\r\n            if (!loadingEffects[name]) {\r\n                if (__DEV__) {\r\n                    console.warn('Loading effects ' + name + ' not exists.');\r\n                }\r\n                return;\r\n            }\r\n            var el = loadingEffects[name](this._api, cfg);\r\n            var zr = this._zr;\r\n            this._loadingFX = el;\r\n            zr.add(el);\r\n        };\r\n        ECharts.prototype.hideLoading = function () {\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            this._loadingFX && this._zr.remove(this._loadingFX);\r\n            this._loadingFX = null;\r\n        };\r\n        ECharts.prototype.makeActionFromEvent = function (eventObj) {\r\n            var payload = extend({}, eventObj);\r\n            payload.type = eventActionMap[eventObj.type];\r\n            return payload;\r\n        };\r\n        ECharts.prototype.dispatchAction = function (payload, opt) {\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            if (!isObject$2(opt)) {\r\n                opt = { silent: !!opt };\r\n            }\r\n            if (!actions[payload.type]) {\r\n                return;\r\n            }\r\n            if (!this._model) {\r\n                return;\r\n            }\r\n            if (this[IN_MAIN_PROCESS_KEY]) {\r\n                this._pendingActions.push(payload);\r\n                return;\r\n            }\r\n            var silent = opt.silent;\r\n            doDispatchAction.call(this, payload, silent);\r\n            var flush = opt.flush;\r\n            if (flush) {\r\n                this._zr.flush();\r\n            }\r\n            else if (flush !== false && env.browser.weChat) {\r\n                this._throttledZrFlush();\r\n            }\r\n            flushPendingActions.call(this, silent);\r\n            triggerUpdatedEvent.call(this, silent);\r\n        };\r\n        ECharts.prototype.updateLabelLayout = function () {\r\n            var labelManager = this._labelManager;\r\n            labelManager.updateLayoutConfig(this._api);\r\n            labelManager.layout(this._api);\r\n            labelManager.processLabelsOverall();\r\n        };\r\n        ECharts.prototype.appendData = function (params) {\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            var seriesIndex = params.seriesIndex;\r\n            var ecModel = this.getModel();\r\n            var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\r\n            if (__DEV__) {\r\n                assert$1(params.data && seriesModel);\r\n            }\r\n            seriesModel.appendData(params);\r\n            this._scheduler.unfinished = true;\r\n            this.getZr().wakeUp();\r\n        };\r\n        ECharts.internalField = (function () {\r\n            prepare = function (ecIns) {\r\n                var scheduler = ecIns._scheduler;\r\n                scheduler.restorePipelines(ecIns._model);\r\n                scheduler.prepareStageTasks();\r\n                prepareView(ecIns, true);\r\n                prepareView(ecIns, false);\r\n                scheduler.plan();\r\n            };\r\n            prepareView = function (ecIns, isComponent) {\r\n                var ecModel = ecIns._model;\r\n                var scheduler = ecIns._scheduler;\r\n                var viewList = isComponent ? ecIns._componentsViews : ecIns._chartsViews;\r\n                var viewMap = isComponent ? ecIns._componentsMap : ecIns._chartsMap;\r\n                var zr = ecIns._zr;\r\n                var api = ecIns._api;\r\n                for (var i = 0; i < viewList.length; i++) {\r\n                    viewList[i].__alive = false;\r\n                }\r\n                isComponent\r\n                    ? ecModel.eachComponent(function (componentType, model) {\r\n                        componentType !== 'series' && doPrepare(model);\r\n                    })\r\n                    : ecModel.eachSeries(doPrepare);\r\n                function doPrepare(model) {\r\n                    var requireNewView = model.__requireNewView;\r\n                    model.__requireNewView = false;\r\n                    var viewId = '_ec_' + model.id + '_' + model.type;\r\n                    var view = !requireNewView && viewMap[viewId];\r\n                    if (!view) {\r\n                        var classType = parseClassType(model.type);\r\n                        var Clazz = isComponent\r\n                            ? ComponentView.getClass(classType.main, classType.sub)\r\n                            : (ChartView.getClass(classType.sub));\r\n                        if (__DEV__) {\r\n                            assert$1(Clazz, classType.sub + ' does not exist.');\r\n                        }\r\n                        view = new Clazz();\r\n                        view.init(ecModel, api);\r\n                        viewMap[viewId] = view;\r\n                        viewList.push(view);\r\n                        zr.add(view.group);\r\n                    }\r\n                    model.__viewId = view.__id = viewId;\r\n                    view.__alive = true;\r\n                    view.__model = model;\r\n                    view.group.__ecComponentInfo = {\r\n                        mainType: model.mainType,\r\n                        index: model.componentIndex\r\n                    };\r\n                    !isComponent && scheduler.prepareView(view, model, ecModel, api);\r\n                }\r\n                for (var i = 0; i < viewList.length;) {\r\n                    var view = viewList[i];\r\n                    if (!view.__alive) {\r\n                        !isComponent && view.renderTask.dispose();\r\n                        zr.remove(view.group);\r\n                        view.dispose(ecModel, api);\r\n                        viewList.splice(i, 1);\r\n                        if (viewMap[view.__id] === view) {\r\n                            delete viewMap[view.__id];\r\n                        }\r\n                        view.__id = view.group.__ecComponentInfo = null;\r\n                    }\r\n                    else {\r\n                        i++;\r\n                    }\r\n                }\r\n            };\r\n            updateDirectly = function (ecIns, method, payload, mainType, subType) {\r\n                var ecModel = ecIns._model;\r\n                ecModel.setUpdatePayload(payload);\r\n                if (!mainType) {\r\n                    each$3([].concat(ecIns._componentsViews).concat(ecIns._chartsViews), callView);\r\n                    return;\r\n                }\r\n                var query = {};\r\n                query[mainType + 'Id'] = payload[mainType + 'Id'];\r\n                query[mainType + 'Index'] = payload[mainType + 'Index'];\r\n                query[mainType + 'Name'] = payload[mainType + 'Name'];\r\n                var condition = { mainType: mainType, query: query };\r\n                subType && (condition.subType = subType);\r\n                var excludeSeriesId = payload.excludeSeriesId;\r\n                var excludeSeriesIdMap;\r\n                if (excludeSeriesId != null) {\r\n                    excludeSeriesIdMap = createHashMap(normalizeToArray(excludeSeriesId));\r\n                }\r\n                ecModel && ecModel.eachComponent(condition, function (model) {\r\n                    if (!excludeSeriesIdMap || excludeSeriesIdMap.get(model.id) == null) {\r\n                        if (isHighDownPayload(payload) && !payload.notBlur) {\r\n                            if (model instanceof SeriesModel) {\r\n                                toggleSeriesBlurStateFromPayload(model, payload, ecIns);\r\n                            }\r\n                        }\r\n                        else if (isSelectChangePayload(payload)) {\r\n                            if (model instanceof SeriesModel) {\r\n                                toggleSelectionFromPayload(model, payload);\r\n                                updateSeriesElementSelection(model);\r\n                                markStatusToUpdate(ecIns);\r\n                            }\r\n                        }\r\n                        callView(ecIns[mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId]);\r\n                    }\r\n                }, ecIns);\r\n                function callView(view) {\r\n                    view && view.__alive && view[method] && view[method](view.__model, ecModel, ecIns._api, payload);\r\n                }\r\n            };\r\n            updateMethods = {\r\n                prepareAndUpdate: function (payload) {\r\n                    prepare(this);\r\n                    updateMethods.update.call(this, payload);\r\n                },\r\n                update: function (payload) {\r\n                    var ecModel = this._model;\r\n                    var api = this._api;\r\n                    var zr = this._zr;\r\n                    var coordSysMgr = this._coordSysMgr;\r\n                    var scheduler = this._scheduler;\r\n                    if (!ecModel) {\r\n                        return;\r\n                    }\r\n                    ecModel.setUpdatePayload(payload);\r\n                    scheduler.restoreData(ecModel, payload);\r\n                    scheduler.performSeriesTasks(ecModel);\r\n                    coordSysMgr.create(ecModel, api);\r\n                    scheduler.performDataProcessorTasks(ecModel, payload);\r\n                    updateStreamModes(this, ecModel);\r\n                    coordSysMgr.update(ecModel, api);\r\n                    clearColorPalette(ecModel);\r\n                    scheduler.performVisualTasks(ecModel, payload);\r\n                    render(this, ecModel, api, payload);\r\n                    var backgroundColor = ecModel.get('backgroundColor') || 'transparent';\r\n                    var darkMode = ecModel.get('darkMode');\r\n                    if (!env.canvasSupported) {\r\n                        var colorArr = parse(backgroundColor);\r\n                        backgroundColor = stringify(colorArr, 'rgb');\r\n                        if (colorArr[3] === 0) {\r\n                            backgroundColor = 'transparent';\r\n                        }\r\n                    }\r\n                    else {\r\n                        zr.setBackgroundColor(backgroundColor);\r\n                        if (darkMode != null && darkMode !== 'auto') {\r\n                            zr.setDarkMode(darkMode);\r\n                        }\r\n                    }\r\n                    performPostUpdateFuncs(ecModel, api);\r\n                },\r\n                updateTransform: function (payload) {\r\n                    var _this = this;\r\n                    var ecModel = this._model;\r\n                    var api = this._api;\r\n                    if (!ecModel) {\r\n                        return;\r\n                    }\r\n                    ecModel.setUpdatePayload(payload);\r\n                    var componentDirtyList = [];\r\n                    ecModel.eachComponent(function (componentType, componentModel) {\r\n                        if (componentType === 'series') {\r\n                            return;\r\n                        }\r\n                        var componentView = _this.getViewOfComponentModel(componentModel);\r\n                        if (componentView && componentView.__alive) {\r\n                            if (componentView.updateTransform) {\r\n                                var result = componentView.updateTransform(componentModel, ecModel, api, payload);\r\n                                result && result.update && componentDirtyList.push(componentView);\r\n                            }\r\n                            else {\r\n                                componentDirtyList.push(componentView);\r\n                            }\r\n                        }\r\n                    });\r\n                    var seriesDirtyMap = createHashMap();\r\n                    ecModel.eachSeries(function (seriesModel) {\r\n                        var chartView = _this._chartsMap[seriesModel.__viewId];\r\n                        if (chartView.updateTransform) {\r\n                            var result = chartView.updateTransform(seriesModel, ecModel, api, payload);\r\n                            result && result.update && seriesDirtyMap.set(seriesModel.uid, 1);\r\n                        }\r\n                        else {\r\n                            seriesDirtyMap.set(seriesModel.uid, 1);\r\n                        }\r\n                    });\r\n                    clearColorPalette(ecModel);\r\n                    this._scheduler.performVisualTasks(ecModel, payload, { setDirty: true, dirtyMap: seriesDirtyMap });\r\n                    renderSeries(this, ecModel, api, payload, seriesDirtyMap);\r\n                    performPostUpdateFuncs(ecModel, this._api);\r\n                },\r\n                updateView: function (payload) {\r\n                    var ecModel = this._model;\r\n                    if (!ecModel) {\r\n                        return;\r\n                    }\r\n                    ecModel.setUpdatePayload(payload);\r\n                    ChartView.markUpdateMethod(payload, 'updateView');\r\n                    clearColorPalette(ecModel);\r\n                    this._scheduler.performVisualTasks(ecModel, payload, { setDirty: true });\r\n                    render(this, this._model, this._api, payload);\r\n                    performPostUpdateFuncs(ecModel, this._api);\r\n                },\r\n                updateVisual: function (payload) {\r\n                    var _this = this;\r\n                    var ecModel = this._model;\r\n                    if (!ecModel) {\r\n                        return;\r\n                    }\r\n                    ecModel.setUpdatePayload(payload);\r\n                    ecModel.eachSeries(function (seriesModel) {\r\n                        seriesModel.getData().clearAllVisual();\r\n                    });\r\n                    ChartView.markUpdateMethod(payload, 'updateVisual');\r\n                    clearColorPalette(ecModel);\r\n                    this._scheduler.performVisualTasks(ecModel, payload, { visualType: 'visual', setDirty: true });\r\n                    ecModel.eachComponent(function (componentType, componentModel) {\r\n                        if (componentType !== 'series') {\r\n                            var componentView = _this.getViewOfComponentModel(componentModel);\r\n                            componentView && componentView.__alive\r\n                                && componentView.updateVisual(componentModel, ecModel, _this._api, payload);\r\n                        }\r\n                    });\r\n                    ecModel.eachSeries(function (seriesModel) {\r\n                        var chartView = _this._chartsMap[seriesModel.__viewId];\r\n                        chartView.updateVisual(seriesModel, ecModel, _this._api, payload);\r\n                    });\r\n                    performPostUpdateFuncs(ecModel, this._api);\r\n                },\r\n                updateLayout: function (payload) {\r\n                    updateMethods.update.call(this, payload);\r\n                }\r\n            };\r\n            doConvertPixel = function (ecIns, methodName, finder, value) {\r\n                if (ecIns._disposed) {\r\n                    disposedWarning(ecIns.id);\r\n                    return;\r\n                }\r\n                var ecModel = ecIns._model;\r\n                var coordSysList = ecIns._coordSysMgr.getCoordinateSystems();\r\n                var result;\r\n                var parsedFinder = parseFinder(ecModel, finder);\r\n                for (var i = 0; i < coordSysList.length; i++) {\r\n                    var coordSys = coordSysList[i];\r\n                    if (coordSys[methodName]\r\n                        && (result = coordSys[methodName](ecModel, parsedFinder, value)) != null) {\r\n                        return result;\r\n                    }\r\n                }\r\n                if (__DEV__) {\r\n                    console.warn('No coordinate system that supports ' + methodName + ' found by the given finder.');\r\n                }\r\n            };\r\n            updateStreamModes = function (ecIns, ecModel) {\r\n                var chartsMap = ecIns._chartsMap;\r\n                var scheduler = ecIns._scheduler;\r\n                ecModel.eachSeries(function (seriesModel) {\r\n                    scheduler.updateStreamModes(seriesModel, chartsMap[seriesModel.__viewId]);\r\n                });\r\n            };\r\n            doDispatchAction = function (payload, silent) {\r\n                var _this = this;\r\n                var ecModel = this.getModel();\r\n                var payloadType = payload.type;\r\n                var escapeConnect = payload.escapeConnect;\r\n                var actionWrap = actions[payloadType];\r\n                var actionInfo = actionWrap.actionInfo;\r\n                var cptTypeTmp = (actionInfo.update || 'update').split(':');\r\n                var updateMethod = cptTypeTmp.pop();\r\n                var cptType = cptTypeTmp[0] != null && parseClassType(cptTypeTmp[0]);\r\n                this[IN_MAIN_PROCESS_KEY] = true;\r\n                var payloads = [payload];\r\n                var batched = false;\r\n                if (payload.batch) {\r\n                    batched = true;\r\n                    payloads = map(payload.batch, function (item) {\r\n                        item = defaults(extend({}, item), payload);\r\n                        item.batch = null;\r\n                        return item;\r\n                    });\r\n                }\r\n                var eventObjBatch = [];\r\n                var eventObj;\r\n                var isSelectChange = isSelectChangePayload(payload);\r\n                var isStatusChange = isHighDownPayload(payload) || isSelectChange;\r\n                each$3(payloads, function (batchItem) {\r\n                    eventObj = actionWrap.action(batchItem, _this._model, _this._api);\r\n                    eventObj = eventObj || extend({}, batchItem);\r\n                    eventObj.type = actionInfo.event || eventObj.type;\r\n                    eventObjBatch.push(eventObj);\r\n                    if (isStatusChange) {\r\n                        updateDirectly(_this, updateMethod, batchItem, 'series');\r\n                        markStatusToUpdate(_this);\r\n                    }\r\n                    else if (cptType) {\r\n                        updateDirectly(_this, updateMethod, batchItem, cptType.main, cptType.sub);\r\n                    }\r\n                });\r\n                if (payload.statusChanged) {\r\n                    markStatusToUpdate(this);\r\n                }\r\n                if (updateMethod !== 'none' && !isStatusChange && !cptType) {\r\n                    if (this[OPTION_UPDATED_KEY]) {\r\n                        prepare(this);\r\n                        updateMethods.update.call(this, payload);\r\n                        this[OPTION_UPDATED_KEY] = false;\r\n                    }\r\n                    else {\r\n                        updateMethods[updateMethod].call(this, payload);\r\n                    }\r\n                }\r\n                if (batched) {\r\n                    eventObj = {\r\n                        type: actionInfo.event || payloadType,\r\n                        escapeConnect: escapeConnect,\r\n                        batch: eventObjBatch\r\n                    };\r\n                }\r\n                else {\r\n                    eventObj = eventObjBatch[0];\r\n                }\r\n                this[IN_MAIN_PROCESS_KEY] = false;\r\n                if (!silent) {\r\n                    var messageCenter = this._messageCenter;\r\n                    messageCenter.trigger(eventObj.type, eventObj);\r\n                    if (isSelectChange) {\r\n                        var newObj = {\r\n                            type: 'selectchanged',\r\n                            escapeConnect: escapeConnect,\r\n                            selected: getAllSelectedIndices(ecModel),\r\n                            isFromClick: payload.isFromClick || false,\r\n                            fromAction: payload.type,\r\n                            fromActionPayload: payload\r\n                        };\r\n                        messageCenter.trigger(newObj.type, newObj);\r\n                    }\r\n                }\r\n            };\r\n            flushPendingActions = function (silent) {\r\n                var pendingActions = this._pendingActions;\r\n                while (pendingActions.length) {\r\n                    var payload = pendingActions.shift();\r\n                    doDispatchAction.call(this, payload, silent);\r\n                }\r\n            };\r\n            triggerUpdatedEvent = function (silent) {\r\n                !silent && this.trigger('updated');\r\n            };\r\n            bindRenderedEvent = function (zr, ecIns) {\r\n                zr.on('rendered', function (params) {\r\n                    ecIns.trigger('rendered', params);\r\n                    if (zr.animation.isFinished()\r\n                        && !ecIns[OPTION_UPDATED_KEY]\r\n                        && !ecIns._scheduler.unfinished\r\n                        && !ecIns._pendingActions.length) {\r\n                        ecIns.trigger('finished');\r\n                    }\r\n                });\r\n            };\r\n            bindMouseEvent = function (zr, ecIns) {\r\n                zr.on('mouseover', function (e) {\r\n                    var el = e.target;\r\n                    var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\r\n                    if (dispatcher) {\r\n                        var ecData = getECData(dispatcher);\r\n                        toggleSeriesBlurState(ecData.seriesIndex, ecData.focus, ecData.blurScope, ecIns, true);\r\n                        enterEmphasisWhenMouseOver(dispatcher, e);\r\n                        markStatusToUpdate(ecIns);\r\n                    }\r\n                }).on('mouseout', function (e) {\r\n                    var el = e.target;\r\n                    var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\r\n                    if (dispatcher) {\r\n                        var ecData = getECData(dispatcher);\r\n                        toggleSeriesBlurState(ecData.seriesIndex, ecData.focus, ecData.blurScope, ecIns, false);\r\n                        leaveEmphasisWhenMouseOut(dispatcher, e);\r\n                        markStatusToUpdate(ecIns);\r\n                    }\r\n                }).on('click', function (e) {\r\n                    var el = e.target;\r\n                    var dispatcher = findEventDispatcher(el, function (target) { return getECData(target).dataIndex != null; }, true);\r\n                    if (dispatcher) {\r\n                        var actionType = dispatcher.selected ? 'unselect' : 'select';\r\n                        var ecData = getECData(dispatcher);\r\n                        ecIns._api.dispatchAction({\r\n                            type: actionType,\r\n                            dataType: ecData.dataType,\r\n                            dataIndexInside: ecData.dataIndex,\r\n                            seriesIndex: ecData.seriesIndex,\r\n                            isFromClick: true\r\n                        });\r\n                    }\r\n                });\r\n            };\r\n            clearColorPalette = function (ecModel) {\r\n                ecModel.clearColorPalette();\r\n                ecModel.eachSeries(function (seriesModel) {\r\n                    seriesModel.clearColorPalette();\r\n                });\r\n            };\r\n            render = function (ecIns, ecModel, api, payload) {\r\n                renderComponents(ecIns, ecModel, api, payload);\r\n                each$3(ecIns._chartsViews, function (chart) {\r\n                    chart.__alive = false;\r\n                });\r\n                renderSeries(ecIns, ecModel, api, payload);\r\n                each$3(ecIns._chartsViews, function (chart) {\r\n                    if (!chart.__alive) {\r\n                        chart.remove(ecModel, api);\r\n                    }\r\n                });\r\n            };\r\n            renderComponents = function (ecIns, ecModel, api, payload, dirtyList) {\r\n                each$3(dirtyList || ecIns._componentsViews, function (componentView) {\r\n                    var componentModel = componentView.__model;\r\n                    clearStates(componentModel, componentView);\r\n                    componentView.render(componentModel, ecModel, api, payload);\r\n                    updateZ(componentModel, componentView);\r\n                    updateStates(componentModel, componentView);\r\n                });\r\n            };\r\n            renderSeries = function (ecIns, ecModel, api, payload, dirtyMap) {\r\n                var scheduler = ecIns._scheduler;\r\n                var labelManager = ecIns._labelManager;\r\n                labelManager.clearLabels();\r\n                var unfinished = false;\r\n                ecModel.eachSeries(function (seriesModel) {\r\n                    var chartView = ecIns._chartsMap[seriesModel.__viewId];\r\n                    chartView.__alive = true;\r\n                    var renderTask = chartView.renderTask;\r\n                    scheduler.updatePayload(renderTask, payload);\r\n                    clearStates(seriesModel, chartView);\r\n                    if (dirtyMap && dirtyMap.get(seriesModel.uid)) {\r\n                        renderTask.dirty();\r\n                    }\r\n                    if (renderTask.perform(scheduler.getPerformArgs(renderTask))) {\r\n                        unfinished = true;\r\n                    }\r\n                    chartView.group.silent = !!seriesModel.get('silent');\r\n                    updateBlend(seriesModel, chartView);\r\n                    updateSeriesElementSelection(seriesModel);\r\n                    labelManager.addLabelsOfSeries(chartView);\r\n                });\r\n                scheduler.unfinished = unfinished || scheduler.unfinished;\r\n                labelManager.updateLayoutConfig(api);\r\n                labelManager.layout(api);\r\n                labelManager.processLabelsOverall();\r\n                ecModel.eachSeries(function (seriesModel) {\r\n                    var chartView = ecIns._chartsMap[seriesModel.__viewId];\r\n                    updateZ(seriesModel, chartView);\r\n                    updateStates(seriesModel, chartView);\r\n                });\r\n                updateHoverLayerStatus(ecIns, ecModel);\r\n                aria(ecIns._zr.dom, ecModel);\r\n            };\r\n            performPostUpdateFuncs = function (ecModel, api) {\r\n                each$3(postUpdateFuncs, function (func) {\r\n                    func(ecModel, api);\r\n                });\r\n            };\r\n            markStatusToUpdate = function (ecIns) {\r\n                ecIns[STATUS_NEEDS_UPDATE_KEY] = true;\r\n                ecIns.getZr().wakeUp();\r\n            };\r\n            applyChangedStates = function (ecIns) {\r\n                if (!ecIns[STATUS_NEEDS_UPDATE_KEY]) {\r\n                    return;\r\n                }\r\n                ecIns.getZr().storage.traverse(function (el) {\r\n                    if (isElementRemoved(el)) {\r\n                        return;\r\n                    }\r\n                    applyElementStates(el);\r\n                });\r\n                ecIns[STATUS_NEEDS_UPDATE_KEY] = false;\r\n            };\r\n            function applyElementStates(el) {\r\n                var newStates = [];\r\n                var oldStates = el.currentStates;\r\n                for (var i = 0; i < oldStates.length; i++) {\r\n                    var stateName = oldStates[i];\r\n                    if (!(stateName === 'emphasis' || stateName === 'blur' || stateName === 'select')) {\r\n                        newStates.push(stateName);\r\n                    }\r\n                }\r\n                if (el.selected && el.states.select) {\r\n                    newStates.push('select');\r\n                }\r\n                if (el.hoverState === HOVER_STATE_EMPHASIS && el.states.emphasis) {\r\n                    newStates.push('emphasis');\r\n                }\r\n                else if (el.hoverState === HOVER_STATE_BLUR && el.states.blur) {\r\n                    newStates.push('blur');\r\n                }\r\n                el.useStates(newStates);\r\n            }\r\n            function updateHoverLayerStatus(ecIns, ecModel) {\r\n                var zr = ecIns._zr;\r\n                var storage = zr.storage;\r\n                var elCount = 0;\r\n                storage.traverse(function (el) {\r\n                    if (!el.isGroup) {\r\n                        elCount++;\r\n                    }\r\n                });\r\n                if (elCount > ecModel.get('hoverLayerThreshold') && !env.node && !env.worker) {\r\n                    ecModel.eachSeries(function (seriesModel) {\r\n                        if (seriesModel.preventUsingHoverLayer) {\r\n                            return;\r\n                        }\r\n                        var chartView = ecIns._chartsMap[seriesModel.__viewId];\r\n                        if (chartView.__alive) {\r\n                            chartView.group.traverse(function (el) {\r\n                                if (el.states.emphasis) {\r\n                                    el.states.emphasis.hoverLayer = true;\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            function updateBlend(seriesModel, chartView) {\r\n                var blendMode = seriesModel.get('blendMode') || null;\r\n                if (__DEV__) {\r\n                    if (!env.canvasSupported && blendMode && blendMode !== 'source-over') {\r\n                        console.warn('Only canvas support blendMode');\r\n                    }\r\n                }\r\n                chartView.group.traverse(function (el) {\r\n                    if (!el.isGroup) {\r\n                        el.style.blend = blendMode;\r\n                    }\r\n                    if (el.eachPendingDisplayable) {\r\n                        el.eachPendingDisplayable(function (displayable) {\r\n                            displayable.style.blend = blendMode;\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n            function updateZ(model, view) {\r\n                if (model.preventAutoZ) {\r\n                    return;\r\n                }\r\n                var z = model.get('z');\r\n                var zlevel = model.get('zlevel');\r\n                view.group.traverse(function (el) {\r\n                    if (!el.isGroup) {\r\n                        z != null && (el.z = z);\r\n                        zlevel != null && (el.zlevel = zlevel);\r\n                        var label = el.getTextContent();\r\n                        var labelLine = el.getTextGuideLine();\r\n                        if (label) {\r\n                            label.z = el.z;\r\n                            label.zlevel = el.zlevel;\r\n                            label.z2 = el.z2 + 2;\r\n                        }\r\n                        if (labelLine) {\r\n                            var showAbove = el.textGuideLineConfig && el.textGuideLineConfig.showAbove;\r\n                            labelLine.z = el.z;\r\n                            labelLine.zlevel = el.zlevel;\r\n                            labelLine.z2 = el.z2 + (showAbove ? 1 : -1);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            function clearStates(model, view) {\r\n                view.group.traverse(function (el) {\r\n                    if (isElementRemoved(el)) {\r\n                        return;\r\n                    }\r\n                    var textContent = el.getTextContent();\r\n                    var textGuide = el.getTextGuideLine();\r\n                    if (el.stateTransition) {\r\n                        el.stateTransition = null;\r\n                    }\r\n                    if (textContent && textContent.stateTransition) {\r\n                        textContent.stateTransition = null;\r\n                    }\r\n                    if (textGuide && textGuide.stateTransition) {\r\n                        textGuide.stateTransition = null;\r\n                    }\r\n                    if (el.hasState()) {\r\n                        el.prevStates = el.currentStates;\r\n                        el.clearStates();\r\n                    }\r\n                    else if (el.prevStates) {\r\n                        el.prevStates = null;\r\n                    }\r\n                });\r\n            }\r\n            function updateStates(model, view) {\r\n                var stateAnimationModel = model.getModel('stateAnimation');\r\n                var enableAnimation = model.isAnimationEnabled();\r\n                var duration = stateAnimationModel.get('duration');\r\n                var stateTransition = duration > 0 ? {\r\n                    duration: duration,\r\n                    delay: stateAnimationModel.get('delay'),\r\n                    easing: stateAnimationModel.get('easing'),\r\n                    additive: stateAnimationModel.get('additive')\r\n                } : null;\r\n                view.group.traverse(function (el) {\r\n                    if (el.states && el.states.emphasis) {\r\n                        if (isElementRemoved(el)) {\r\n                            return;\r\n                        }\r\n                        if (el instanceof Path) {\r\n                            savePathStates(el);\r\n                        }\r\n                        if (el.__dirty) {\r\n                            var prevStates = el.prevStates;\r\n                            if (prevStates) {\r\n                                el.useStates(prevStates);\r\n                            }\r\n                        }\r\n                        if (enableAnimation) {\r\n                            el.stateTransition = stateTransition;\r\n                            var textContent = el.getTextContent();\r\n                            var textGuide = el.getTextGuideLine();\r\n                            if (textContent) {\r\n                                textContent.stateTransition = stateTransition;\r\n                            }\r\n                            if (textGuide) {\r\n                                textGuide.stateTransition = stateTransition;\r\n                            }\r\n                        }\r\n                        if (el.__dirty) {\r\n                            applyElementStates(el);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            createExtensionAPI = function (ecIns) {\r\n                return new ((function (_super) {\r\n                    __extends(class_1, _super);\r\n                    function class_1() {\r\n                        return _super !== null && _super.apply(this, arguments) || this;\r\n                    }\r\n                    class_1.prototype.getCoordinateSystems = function () {\r\n                        return ecIns._coordSysMgr.getCoordinateSystems();\r\n                    };\r\n                    class_1.prototype.getComponentByElement = function (el) {\r\n                        while (el) {\r\n                            var modelInfo = el.__ecComponentInfo;\r\n                            if (modelInfo != null) {\r\n                                return ecIns._model.getComponent(modelInfo.mainType, modelInfo.index);\r\n                            }\r\n                            el = el.parent;\r\n                        }\r\n                    };\r\n                    class_1.prototype.enterEmphasis = function (el, highlightDigit) {\r\n                        enterEmphasis(el, highlightDigit);\r\n                        markStatusToUpdate(ecIns);\r\n                    };\r\n                    class_1.prototype.leaveEmphasis = function (el, highlightDigit) {\r\n                        leaveEmphasis(el, highlightDigit);\r\n                        markStatusToUpdate(ecIns);\r\n                    };\r\n                    class_1.prototype.enterBlur = function (el) {\r\n                        enterBlur(el);\r\n                        markStatusToUpdate(ecIns);\r\n                    };\r\n                    class_1.prototype.leaveBlur = function (el) {\r\n                        leaveBlur(el);\r\n                        markStatusToUpdate(ecIns);\r\n                    };\r\n                    class_1.prototype.enterSelect = function (el) {\r\n                        enterSelect(el);\r\n                        markStatusToUpdate(ecIns);\r\n                    };\r\n                    class_1.prototype.leaveSelect = function (el) {\r\n                        leaveSelect(el);\r\n                        markStatusToUpdate(ecIns);\r\n                    };\r\n                    return class_1;\r\n                }(ExtensionAPI)))(ecIns);\r\n            };\r\n            enableConnect = function (chart) {\r\n                function updateConnectedChartsStatus(charts, status) {\r\n                    for (var i = 0; i < charts.length; i++) {\r\n                        var otherChart = charts[i];\r\n                        otherChart[CONNECT_STATUS_KEY] = status;\r\n                    }\r\n                }\r\n                each$3(eventActionMap, function (actionType, eventType) {\r\n                    chart._messageCenter.on(eventType, function (event) {\r\n                        if (connectedGroups[chart.group] && chart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_PENDING) {\r\n                            if (event && event.escapeConnect) {\r\n                                return;\r\n                            }\r\n                            var action_1 = chart.makeActionFromEvent(event);\r\n                            var otherCharts_1 = [];\r\n                            each$3(instances, function (otherChart) {\r\n                                if (otherChart !== chart && otherChart.group === chart.group) {\r\n                                    otherCharts_1.push(otherChart);\r\n                                }\r\n                            });\r\n                            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_PENDING);\r\n                            each$3(otherCharts_1, function (otherChart) {\r\n                                if (otherChart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_UPDATING) {\r\n                                    otherChart.dispatchAction(action_1);\r\n                                }\r\n                            });\r\n                            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_UPDATED);\r\n                        }\r\n                    });\r\n                });\r\n            };\r\n        })();\r\n        return ECharts;\r\n    }(Eventful));\r\n    var echartsProto = ECharts.prototype;\r\n    echartsProto.on = createRegisterEventWithLowercaseECharts('on');\r\n    echartsProto.off = createRegisterEventWithLowercaseECharts('off');\r\n    echartsProto.one = function (eventName, cb, ctx) {\r\n        var self = this;\r\n        deprecateLog('ECharts#one is deprecated.');\r\n        function wrapped() {\r\n            var args2 = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args2[_i] = arguments[_i];\r\n            }\r\n            cb && cb.apply && cb.apply(this, args2);\r\n            self.off(eventName, wrapped);\r\n        }\r\n        this.on.call(this, eventName, wrapped, ctx);\r\n    };\r\n    var MOUSE_EVENT_NAMES = [\r\n        'click', 'dblclick', 'mouseover', 'mouseout', 'mousemove',\r\n        'mousedown', 'mouseup', 'globalout', 'contextmenu'\r\n    ];\r\n    function disposedWarning(id) {\r\n        if (__DEV__) {\r\n            console.warn('Instance ' + id + ' has been disposed');\r\n        }\r\n    }\r\n    var actions = {};\r\n    var eventActionMap = {};\r\n    var dataProcessorFuncs = [];\r\n    var optionPreprocessorFuncs = [];\r\n    var postInitFuncs = [];\r\n    var postUpdateFuncs = [];\r\n    var visualFuncs = [];\r\n    var themeStorage = {};\r\n    var loadingEffects = {};\r\n    var instances = {};\r\n    var connectedGroups = {};\r\n    var idBase = +(new Date()) - 0;\r\n    var groupIdBase = +(new Date()) - 0;\r\n    var DOM_ATTRIBUTE_KEY = '_echarts_instance_';\r\n    function init$1(dom, theme, opts) {\r\n        if (__DEV__) {\r\n            if (!dom) {\r\n                throw new Error('Initialize failed: invalid dom.');\r\n            }\r\n        }\r\n        var existInstance = getInstanceByDom(dom);\r\n        if (existInstance) {\r\n            if (__DEV__) {\r\n                console.warn('There is a chart instance already initialized on the dom.');\r\n            }\r\n            return existInstance;\r\n        }\r\n        if (__DEV__) {\r\n            if (isDom(dom)\r\n                && dom.nodeName.toUpperCase() !== 'CANVAS'\r\n                && ((!dom.clientWidth && (!opts || opts.width == null))\r\n                    || (!dom.clientHeight && (!opts || opts.height == null)))) {\r\n                console.warn('Can\\'t get DOM width or height. Please check '\r\n                    + 'dom.clientWidth and dom.clientHeight. They should not be 0.'\r\n                    + 'For example, you may need to call this in the callback '\r\n                    + 'of window.onload.');\r\n            }\r\n        }\r\n        var chart = new ECharts(dom, theme, opts);\r\n        chart.id = 'ec_' + idBase++;\r\n        instances[chart.id] = chart;\r\n        setAttribute(dom, DOM_ATTRIBUTE_KEY, chart.id);\r\n        enableConnect(chart);\r\n        each$3(postInitFuncs, function (postInitFunc) {\r\n            postInitFunc(chart);\r\n        });\r\n        return chart;\r\n    }\r\n    function connect(groupId) {\r\n        if (isArray(groupId)) {\r\n            var charts = groupId;\r\n            groupId = null;\r\n            each$3(charts, function (chart) {\r\n                if (chart.group != null) {\r\n                    groupId = chart.group;\r\n                }\r\n            });\r\n            groupId = groupId || ('g_' + groupIdBase++);\r\n            each$3(charts, function (chart) {\r\n                chart.group = groupId;\r\n            });\r\n        }\r\n        connectedGroups[groupId] = true;\r\n        return groupId;\r\n    }\r\n    function disConnect(groupId) {\r\n        connectedGroups[groupId] = false;\r\n    }\r\n    var disconnect = disConnect;\r\n    function dispose(chart) {\r\n        if (typeof chart === 'string') {\r\n            chart = instances[chart];\r\n        }\r\n        else if (!(chart instanceof ECharts)) {\r\n            chart = getInstanceByDom(chart);\r\n        }\r\n        if ((chart instanceof ECharts) && !chart.isDisposed()) {\r\n            chart.dispose();\r\n        }\r\n    }\r\n    function getInstanceByDom(dom) {\r\n        return instances[getAttribute(dom, DOM_ATTRIBUTE_KEY)];\r\n    }\r\n    function getInstanceById(key) {\r\n        return instances[key];\r\n    }\r\n    function registerTheme(name, theme) {\r\n        themeStorage[name] = theme;\r\n    }\r\n    function registerPreprocessor(preprocessorFunc) {\r\n        optionPreprocessorFuncs.push(preprocessorFunc);\r\n    }\r\n    function registerProcessor(priority, processor) {\r\n        normalizeRegister(dataProcessorFuncs, priority, processor, PRIORITY_PROCESSOR_DEFAULT);\r\n    }\r\n    function registerPostInit(postInitFunc) {\r\n        postInitFunc && postInitFuncs.push(postInitFunc);\r\n    }\r\n    function registerPostUpdate(postUpdateFunc) {\r\n        postUpdateFunc && postUpdateFuncs.push(postUpdateFunc);\r\n    }\r\n    function registerAction(actionInfo, eventName, action) {\r\n        if (typeof eventName === 'function') {\r\n            action = eventName;\r\n            eventName = '';\r\n        }\r\n        var actionType = isObject$2(actionInfo)\r\n            ? actionInfo.type\r\n            : ([actionInfo, actionInfo = {\r\n                    event: eventName\r\n                }][0]);\r\n        actionInfo.event = (actionInfo.event || actionType).toLowerCase();\r\n        eventName = actionInfo.event;\r\n        assert$1(ACTION_REG.test(actionType) && ACTION_REG.test(eventName));\r\n        if (!actions[actionType]) {\r\n            actions[actionType] = { action: action, actionInfo: actionInfo };\r\n        }\r\n        eventActionMap[eventName] = actionType;\r\n    }\r\n    function registerCoordinateSystem(type, coordSysCreator) {\r\n        CoordinateSystemManager.register(type, coordSysCreator);\r\n    }\r\n    function getCoordinateSystemDimensions(type) {\r\n        var coordSysCreator = CoordinateSystemManager.get(type);\r\n        if (coordSysCreator) {\r\n            return coordSysCreator.getDimensionsInfo\r\n                ? coordSysCreator.getDimensionsInfo()\r\n                : coordSysCreator.dimensions.slice();\r\n        }\r\n    }\r\n    function registerLayout(priority, layoutTask) {\r\n        normalizeRegister(visualFuncs, priority, layoutTask, PRIORITY_VISUAL_LAYOUT, 'layout');\r\n    }\r\n    function registerVisual(priority, visualTask) {\r\n        normalizeRegister(visualFuncs, priority, visualTask, PRIORITY_VISUAL_CHART, 'visual');\r\n    }\r\n    function normalizeRegister(targetList, priority, fn, defaultPriority, visualType) {\r\n        if (isFunction$1(priority) || isObject$2(priority)) {\r\n            fn = priority;\r\n            priority = defaultPriority;\r\n        }\r\n        if (__DEV__) {\r\n            if (isNaN(priority) || priority == null) {\r\n                throw new Error('Illegal priority');\r\n            }\r\n            each$3(targetList, function (wrap) {\r\n                assert$1(wrap.__raw !== fn);\r\n            });\r\n        }\r\n        var stageHandler = Scheduler.wrapStageHandler(fn, visualType);\r\n        stageHandler.__prio = priority;\r\n        stageHandler.__raw = fn;\r\n        targetList.push(stageHandler);\r\n    }\r\n    function registerLoading(name, loadingFx) {\r\n        loadingEffects[name] = loadingFx;\r\n    }\r\n    function extendComponentModel(proto) {\r\n        return ComponentModel.extend(proto);\r\n    }\r\n    function extendComponentView(proto) {\r\n        return ComponentView.extend(proto);\r\n    }\r\n    function extendSeriesModel(proto) {\r\n        return SeriesModel.extend(proto);\r\n    }\r\n    function extendChartView(proto) {\r\n        return ChartView.extend(proto);\r\n    }\r\n    function setCanvasCreator(creator) {\r\n        $override('createCanvas', creator);\r\n    }\r\n    function registerMap(mapName, geoJson, specialAreas) {\r\n        mapDataStorage.registerMap(mapName, geoJson, specialAreas);\r\n    }\r\n    function getMap(mapName) {\r\n        var records = mapDataStorage.retrieveMap(mapName);\r\n        return records && records[0] && {\r\n            geoJson: records[0].geoJSON,\r\n            specialAreas: records[0].specialAreas\r\n        };\r\n    }\r\n    var registerTransform = registerExternalTransform;\r\n    registerVisual(PRIORITY_VISUAL_GLOBAL, seriesStyleTask);\r\n    registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataStyleTask);\r\n    registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataColorPaletteTask);\r\n    registerVisual(PRIORITY_VISUAL_GLOBAL, seriesSymbolTask);\r\n    registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataSymbolTask);\r\n    registerPreprocessor(backwardCompat);\r\n    registerProcessor(PRIORITY_PROCESSOR_DATASTACK, dataStack);\r\n    registerLoading('default', loadingDefault);\r\n    registerAction({\r\n        type: HIGHLIGHT_ACTION_TYPE,\r\n        event: HIGHLIGHT_ACTION_TYPE,\r\n        update: HIGHLIGHT_ACTION_TYPE\r\n    }, noop);\r\n    registerAction({\r\n        type: DOWNPLAY_ACTION_TYPE,\r\n        event: DOWNPLAY_ACTION_TYPE,\r\n        update: DOWNPLAY_ACTION_TYPE\r\n    }, noop);\r\n    registerAction({\r\n        type: SELECT_ACTION_TYPE,\r\n        event: SELECT_ACTION_TYPE,\r\n        update: SELECT_ACTION_TYPE\r\n    }, noop);\r\n    registerAction({\r\n        type: UNSELECT_ACTION_TYPE,\r\n        event: UNSELECT_ACTION_TYPE,\r\n        update: UNSELECT_ACTION_TYPE\r\n    }, noop);\r\n    registerAction({\r\n        type: TOGGLE_SELECT_ACTION_TYPE,\r\n        event: TOGGLE_SELECT_ACTION_TYPE,\r\n        update: TOGGLE_SELECT_ACTION_TYPE\r\n    }, noop);\r\n    registerTheme('light', lightTheme);\r\n    registerTheme('dark', theme);\r\n    var dataTool = {};\n\n    function defaultKeyGetter(item) {\r\n        return item;\r\n    }\r\n    var DataDiffer = (function () {\r\n        function DataDiffer(oldArr, newArr, oldKeyGetter, newKeyGetter, context) {\r\n            this._old = oldArr;\r\n            this._new = newArr;\r\n            this._oldKeyGetter = oldKeyGetter || defaultKeyGetter;\r\n            this._newKeyGetter = newKeyGetter || defaultKeyGetter;\r\n            this.context = context;\r\n        }\r\n        DataDiffer.prototype.add = function (func) {\r\n            this._add = func;\r\n            return this;\r\n        };\r\n        DataDiffer.prototype.update = function (func) {\r\n            this._update = func;\r\n            return this;\r\n        };\r\n        DataDiffer.prototype.remove = function (func) {\r\n            this._remove = func;\r\n            return this;\r\n        };\r\n        DataDiffer.prototype.execute = function () {\r\n            var oldArr = this._old;\r\n            var newArr = this._new;\r\n            var oldDataIndexMap = {};\r\n            var newDataIndexMap = {};\r\n            var oldDataKeyArr = [];\r\n            var newDataKeyArr = [];\r\n            var i;\r\n            this._initIndexMap(oldArr, oldDataIndexMap, oldDataKeyArr, '_oldKeyGetter');\r\n            this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\r\n            for (i = 0; i < oldArr.length; i++) {\r\n                var key = oldDataKeyArr[i];\r\n                var idx = newDataIndexMap[key];\r\n                if (idx != null) {\r\n                    var len = idx.length;\r\n                    if (len) {\r\n                        len === 1 && (newDataIndexMap[key] = null);\r\n                        idx = idx.shift();\r\n                    }\r\n                    else {\r\n                        newDataIndexMap[key] = null;\r\n                    }\r\n                    this._update && this._update(idx, i);\r\n                }\r\n                else {\r\n                    this._remove && this._remove(i);\r\n                }\r\n            }\r\n            for (i = 0; i < newDataKeyArr.length; i++) {\r\n                var key = newDataKeyArr[i];\r\n                if (newDataIndexMap.hasOwnProperty(key)) {\r\n                    var idx = newDataIndexMap[key];\r\n                    if (idx == null) {\r\n                        continue;\r\n                    }\r\n                    if (!idx.length) {\r\n                        this._add && this._add(idx);\r\n                    }\r\n                    else {\r\n                        for (var j = 0, len = idx.length; j < len; j++) {\r\n                            this._add && this._add(idx[j]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        DataDiffer.prototype._initIndexMap = function (arr, map, keyArr, keyGetterName) {\r\n            for (var i = 0; i < arr.length; i++) {\r\n                var key = '_ec_' + this[keyGetterName](arr[i], i);\r\n                var existence = map[key];\r\n                if (existence == null) {\r\n                    keyArr.push(key);\r\n                    map[key] = i;\r\n                }\r\n                else {\r\n                    if (!existence.length) {\r\n                        map[key] = existence = [existence];\r\n                    }\r\n                    existence.push(i);\r\n                }\r\n            }\r\n        };\r\n        return DataDiffer;\r\n    }());\n\n    function summarizeDimensions(data) {\r\n        var summary = {};\r\n        var encode = summary.encode = {};\r\n        var notExtraCoordDimMap = createHashMap();\r\n        var defaultedLabel = [];\r\n        var defaultedTooltip = [];\r\n        var userOutput = summary.userOutput = {\r\n            dimensionNames: data.dimensions.slice(),\r\n            encode: {}\r\n        };\r\n        each(data.dimensions, function (dimName) {\r\n            var dimItem = data.getDimensionInfo(dimName);\r\n            var coordDim = dimItem.coordDim;\r\n            if (coordDim) {\r\n                if (__DEV__) {\r\n                    assert(VISUAL_DIMENSIONS.get(coordDim) == null);\r\n                }\r\n                var coordDimIndex = dimItem.coordDimIndex;\r\n                getOrCreateEncodeArr(encode, coordDim)[coordDimIndex] = dimName;\r\n                if (!dimItem.isExtraCoord) {\r\n                    notExtraCoordDimMap.set(coordDim, 1);\r\n                    if (mayLabelDimType(dimItem.type)) {\r\n                        defaultedLabel[0] = dimName;\r\n                    }\r\n                    getOrCreateEncodeArr(userOutput.encode, coordDim)[coordDimIndex] = dimItem.index;\r\n                }\r\n                if (dimItem.defaultTooltip) {\r\n                    defaultedTooltip.push(dimName);\r\n                }\r\n            }\r\n            VISUAL_DIMENSIONS.each(function (v, otherDim) {\r\n                var encodeArr = getOrCreateEncodeArr(encode, otherDim);\r\n                var dimIndex = dimItem.otherDims[otherDim];\r\n                if (dimIndex != null && dimIndex !== false) {\r\n                    encodeArr[dimIndex] = dimItem.name;\r\n                }\r\n            });\r\n        });\r\n        var dataDimsOnCoord = [];\r\n        var encodeFirstDimNotExtra = {};\r\n        notExtraCoordDimMap.each(function (v, coordDim) {\r\n            var dimArr = encode[coordDim];\r\n            encodeFirstDimNotExtra[coordDim] = dimArr[0];\r\n            dataDimsOnCoord = dataDimsOnCoord.concat(dimArr);\r\n        });\r\n        summary.dataDimsOnCoord = dataDimsOnCoord;\r\n        summary.encodeFirstDimNotExtra = encodeFirstDimNotExtra;\r\n        var encodeLabel = encode.label;\r\n        if (encodeLabel && encodeLabel.length) {\r\n            defaultedLabel = encodeLabel.slice();\r\n        }\r\n        var encodeTooltip = encode.tooltip;\r\n        if (encodeTooltip && encodeTooltip.length) {\r\n            defaultedTooltip = encodeTooltip.slice();\r\n        }\r\n        else if (!defaultedTooltip.length) {\r\n            defaultedTooltip = defaultedLabel.slice();\r\n        }\r\n        encode.defaultedLabel = defaultedLabel;\r\n        encode.defaultedTooltip = defaultedTooltip;\r\n        return summary;\r\n    }\r\n    function getOrCreateEncodeArr(encode, dim) {\r\n        if (!encode.hasOwnProperty(dim)) {\r\n            encode[dim] = [];\r\n        }\r\n        return encode[dim];\r\n    }\r\n    function getDimensionTypeByAxis(axisType) {\r\n        return axisType === 'category'\r\n            ? 'ordinal'\r\n            : axisType === 'time'\r\n                ? 'time'\r\n                : 'float';\r\n    }\r\n    function mayLabelDimType(dimType) {\r\n        return !(dimType === 'ordinal' || dimType === 'time');\r\n    }\n\n    var DataDimensionInfo = (function () {\r\n        function DataDimensionInfo(opt) {\r\n            this.otherDims = {};\r\n            if (opt != null) {\r\n                extend(this, opt);\r\n            }\r\n        }\r\n        return DataDimensionInfo;\r\n    }());\n\n    var mathFloor = Math.floor;\r\n    var isObject$3 = isObject;\r\n    var map$1 = map;\r\n    var UNDEFINED = 'undefined';\r\n    var INDEX_NOT_FOUND = -1;\r\n    var ID_PREFIX = 'e\\0\\0';\r\n    var dataCtors = {\r\n        'float': typeof Float64Array === UNDEFINED\r\n            ? Array : Float64Array,\r\n        'int': typeof Int32Array === UNDEFINED\r\n            ? Array : Int32Array,\r\n        'ordinal': Array,\r\n        'number': Array,\r\n        'time': Array\r\n    };\r\n    var CtorUint32Array = typeof Uint32Array === UNDEFINED ? Array : Uint32Array;\r\n    var CtorInt32Array = typeof Int32Array === UNDEFINED ? Array : Int32Array;\r\n    var CtorUint16Array = typeof Uint16Array === UNDEFINED ? Array : Uint16Array;\r\n    var TRANSFERABLE_PROPERTIES = [\r\n        'hasItemOption', '_nameList', '_idList', '_invertedIndicesMap',\r\n        '_rawData', '_dimValueGetter',\r\n        '_count', '_rawCount', '_nameDimIdx', '_idDimIdx', '_nameRepeatCount'\r\n    ];\r\n    var CLONE_PROPERTIES = [\r\n        '_extent', '_approximateExtent', '_rawExtent'\r\n    ];\r\n    var defaultDimValueGetters;\r\n    var prepareInvertedIndex;\r\n    var getRawValueFromStore;\r\n    var getIndicesCtor;\r\n    var prepareStorage;\r\n    var getRawIndexWithoutIndices;\r\n    var getRawIndexWithIndices;\r\n    var getIdFromName;\r\n    var getId;\r\n    var normalizeDimensions;\r\n    var validateDimensions;\r\n    var cloneListForMapAndSample;\r\n    var getInitialExtent;\r\n    var setItemDataAndSeriesIndex;\r\n    var transferProperties;\r\n    var List = (function () {\r\n        function List(dimensions, hostModel) {\r\n            this.type = 'list';\r\n            this._count = 0;\r\n            this._rawCount = 0;\r\n            this._storage = {};\r\n            this._storageArr = [];\r\n            this._nameList = [];\r\n            this._idList = [];\r\n            this._visual = {};\r\n            this._layout = {};\r\n            this._itemVisuals = [];\r\n            this._itemLayouts = [];\r\n            this._graphicEls = [];\r\n            this._rawExtent = {};\r\n            this._extent = {};\r\n            this._approximateExtent = {};\r\n            this._calculationInfo = {};\r\n            this.hasItemOption = true;\r\n            this.TRANSFERABLE_METHODS = ['cloneShallow', 'downSample', 'lttbDownSample', 'map'];\r\n            this.CHANGABLE_METHODS = ['filterSelf', 'selectRange'];\r\n            this.DOWNSAMPLE_METHODS = ['downSample', 'lttbDownSample'];\r\n            this.getRawIndex = getRawIndexWithoutIndices;\r\n            dimensions = dimensions || ['x', 'y'];\r\n            var dimensionInfos = {};\r\n            var dimensionNames = [];\r\n            var invertedIndicesMap = {};\r\n            for (var i = 0; i < dimensions.length; i++) {\r\n                var dimInfoInput = dimensions[i];\r\n                var dimensionInfo = isString(dimInfoInput)\r\n                    ? new DataDimensionInfo({ name: dimInfoInput })\r\n                    : !(dimInfoInput instanceof DataDimensionInfo)\r\n                        ? new DataDimensionInfo(dimInfoInput)\r\n                        : dimInfoInput;\r\n                var dimensionName = dimensionInfo.name;\r\n                dimensionInfo.type = dimensionInfo.type || 'float';\r\n                if (!dimensionInfo.coordDim) {\r\n                    dimensionInfo.coordDim = dimensionName;\r\n                    dimensionInfo.coordDimIndex = 0;\r\n                }\r\n                dimensionInfo.otherDims = dimensionInfo.otherDims || {};\r\n                dimensionNames.push(dimensionName);\r\n                dimensionInfos[dimensionName] = dimensionInfo;\r\n                dimensionInfo.index = i;\r\n                if (dimensionInfo.createInvertedIndices) {\r\n                    invertedIndicesMap[dimensionName] = [];\r\n                }\r\n            }\r\n            this.dimensions = dimensionNames;\r\n            this._dimensionInfos = dimensionInfos;\r\n            this.hostModel = hostModel;\r\n            this._dimensionsSummary = summarizeDimensions(this);\r\n            this._invertedIndicesMap = invertedIndicesMap;\r\n            this.userOutput = this._dimensionsSummary.userOutput;\r\n        }\r\n        List.prototype.getDimension = function (dim) {\r\n            if (typeof dim === 'number'\r\n                || (!isNaN(dim) && !this._dimensionInfos.hasOwnProperty(dim))) {\r\n                dim = this.dimensions[dim];\r\n            }\r\n            return dim;\r\n        };\r\n        List.prototype.getDimensionInfo = function (dim) {\r\n            return this._dimensionInfos[this.getDimension(dim)];\r\n        };\r\n        List.prototype.getDimensionsOnCoord = function () {\r\n            return this._dimensionsSummary.dataDimsOnCoord.slice();\r\n        };\r\n        List.prototype.mapDimension = function (coordDim, idx) {\r\n            var dimensionsSummary = this._dimensionsSummary;\r\n            if (idx == null) {\r\n                return dimensionsSummary.encodeFirstDimNotExtra[coordDim];\r\n            }\r\n            var dims = dimensionsSummary.encode[coordDim];\r\n            return dims ? dims[idx] : null;\r\n        };\r\n        List.prototype.mapDimensionsAll = function (coordDim) {\r\n            var dimensionsSummary = this._dimensionsSummary;\r\n            var dims = dimensionsSummary.encode[coordDim];\r\n            return (dims || []).slice();\r\n        };\r\n        List.prototype.initData = function (data, nameList, dimValueGetter) {\r\n            var notProvider = isSourceInstance(data) || isArrayLike(data);\r\n            if (notProvider) {\r\n                data = new DefaultDataProvider(data, this.dimensions.length);\r\n            }\r\n            if (__DEV__) {\r\n                if (!notProvider\r\n                    && (typeof data.getItem !== 'function' || typeof data.count !== 'function')) {\r\n                    throw new Error('Inavlid data provider.');\r\n                }\r\n            }\r\n            this._rawData = data;\r\n            this._storage = {};\r\n            this._indices = null;\r\n            this._nameList = nameList || [];\r\n            this._idList = [];\r\n            this._nameRepeatCount = {};\r\n            if (!dimValueGetter) {\r\n                this.hasItemOption = false;\r\n            }\r\n            this.defaultDimValueGetter = defaultDimValueGetters[this._rawData.getSource().sourceFormat];\r\n            this._dimValueGetter = dimValueGetter = dimValueGetter\r\n                || this.defaultDimValueGetter;\r\n            this._dimValueGetterArrayRows = defaultDimValueGetters.arrayRows;\r\n            this._rawExtent = {};\r\n            this._initDataFromProvider(0, data.count());\r\n            if (data.pure) {\r\n                this.hasItemOption = false;\r\n            }\r\n        };\r\n        List.prototype.getProvider = function () {\r\n            return this._rawData;\r\n        };\r\n        List.prototype.appendData = function (data) {\r\n            if (__DEV__) {\r\n                assert(!this._indices, 'appendData can only be called on raw data.');\r\n            }\r\n            var rawData = this._rawData;\r\n            var start = this.count();\r\n            rawData.appendData(data);\r\n            var end = rawData.count();\r\n            if (!rawData.persistent) {\r\n                end += start;\r\n            }\r\n            this._initDataFromProvider(start, end, true);\r\n        };\r\n        List.prototype.appendValues = function (values, names) {\r\n            var storage = this._storage;\r\n            var dimensions = this.dimensions;\r\n            var dimLen = dimensions.length;\r\n            var rawExtent = this._rawExtent;\r\n            var start = this.count();\r\n            var end = start + Math.max(values.length, names ? names.length : 0);\r\n            for (var i = 0; i < dimLen; i++) {\r\n                var dim = dimensions[i];\r\n                if (!rawExtent[dim]) {\r\n                    rawExtent[dim] = getInitialExtent();\r\n                }\r\n                prepareStorage(storage, this._dimensionInfos[dim], end, true);\r\n            }\r\n            var rawExtentArr = map$1(dimensions, function (dim) {\r\n                return rawExtent[dim];\r\n            });\r\n            var storageArr = this._storageArr = map$1(dimensions, function (dim) {\r\n                return storage[dim];\r\n            });\r\n            var emptyDataItem = [];\r\n            for (var idx = start; idx < end; idx++) {\r\n                var sourceIdx = idx - start;\r\n                for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\r\n                    var dim = dimensions[dimIdx];\r\n                    var val = this._dimValueGetterArrayRows(values[sourceIdx] || emptyDataItem, dim, sourceIdx, dimIdx);\r\n                    storageArr[dimIdx][idx] = val;\r\n                    var dimRawExtent = rawExtentArr[dimIdx];\r\n                    val < dimRawExtent[0] && (dimRawExtent[0] = val);\r\n                    val > dimRawExtent[1] && (dimRawExtent[1] = val);\r\n                }\r\n                if (names) {\r\n                    this._nameList[idx] = names[sourceIdx];\r\n                }\r\n            }\r\n            this._rawCount = this._count = end;\r\n            this._extent = {};\r\n            prepareInvertedIndex(this);\r\n        };\r\n        List.prototype._initDataFromProvider = function (start, end, append) {\r\n            if (start >= end) {\r\n                return;\r\n            }\r\n            var rawData = this._rawData;\r\n            var storage = this._storage;\r\n            var dimensions = this.dimensions;\r\n            var dimLen = dimensions.length;\r\n            var dimensionInfoMap = this._dimensionInfos;\r\n            var nameList = this._nameList;\r\n            var idList = this._idList;\r\n            var rawExtent = this._rawExtent;\r\n            this._nameRepeatCount = {};\r\n            var nameDimIdx;\r\n            for (var i = 0; i < dimLen; i++) {\r\n                var dim = dimensions[i];\r\n                if (!rawExtent[dim]) {\r\n                    rawExtent[dim] = getInitialExtent();\r\n                }\r\n                var dimInfo = dimensionInfoMap[dim];\r\n                if (dimInfo.otherDims.itemName === 0) {\r\n                    nameDimIdx = this._nameDimIdx = i;\r\n                }\r\n                if (dimInfo.otherDims.itemId === 0) {\r\n                    this._idDimIdx = i;\r\n                }\r\n                prepareStorage(storage, dimInfo, end, append);\r\n            }\r\n            var storageArr = this._storageArr = map$1(dimensions, function (dim) {\r\n                return storage[dim];\r\n            });\r\n            var rawExtentArr = map$1(dimensions, function (dim) {\r\n                return rawExtent[dim];\r\n            });\r\n            if (rawData.fillStorage) {\r\n                rawData.fillStorage(start, end, storageArr, rawExtentArr);\r\n            }\r\n            else {\r\n                var dataItem = [];\r\n                for (var idx = start; idx < end; idx++) {\r\n                    dataItem = rawData.getItem(idx, dataItem);\r\n                    for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\r\n                        var dim = dimensions[dimIdx];\r\n                        var dimStorage = storageArr[dimIdx];\r\n                        var val = this._dimValueGetter(dataItem, dim, idx, dimIdx);\r\n                        dimStorage[idx] = val;\r\n                        var dimRawExtent = rawExtentArr[dimIdx];\r\n                        val < dimRawExtent[0] && (dimRawExtent[0] = val);\r\n                        val > dimRawExtent[1] && (dimRawExtent[1] = val);\r\n                    }\r\n                    if (!rawData.pure) {\r\n                        var name_1 = nameList[idx];\r\n                        if (dataItem && name_1 == null) {\r\n                            if (dataItem.name != null) {\r\n                                nameList[idx] = name_1 = convertOptionIdName(dataItem.name, null);\r\n                            }\r\n                            else if (nameDimIdx != null) {\r\n                                var nameDim = dimensions[nameDimIdx];\r\n                                var nameDimChunk = storage[nameDim];\r\n                                if (nameDimChunk) {\r\n                                    var ordinalMeta = dimensionInfoMap[nameDim].ordinalMeta;\r\n                                    name_1 = convertOptionIdName((ordinalMeta && ordinalMeta.categories.length)\r\n                                        ? ordinalMeta.categories[nameDimChunk[idx]]\r\n                                        : nameDimChunk[idx], null);\r\n                                }\r\n                            }\r\n                        }\r\n                        var id = dataItem == null ? null : convertOptionIdName(dataItem.id, null);\r\n                        if (id == null && name_1 != null) {\r\n                            id = getIdFromName(this, name_1);\r\n                        }\r\n                        id != null && (idList[idx] = id);\r\n                    }\r\n                }\r\n            }\r\n            if (!rawData.persistent && rawData.clean) {\r\n                rawData.clean();\r\n            }\r\n            this._rawCount = this._count = end;\r\n            this._extent = {};\r\n            prepareInvertedIndex(this);\r\n        };\r\n        List.prototype.count = function () {\r\n            return this._count;\r\n        };\r\n        List.prototype.getIndices = function () {\r\n            var newIndices;\r\n            var indices = this._indices;\r\n            if (indices) {\r\n                var Ctor = indices.constructor;\r\n                var thisCount = this._count;\r\n                if (Ctor === Array) {\r\n                    newIndices = new Ctor(thisCount);\r\n                    for (var i = 0; i < thisCount; i++) {\r\n                        newIndices[i] = indices[i];\r\n                    }\r\n                }\r\n                else {\r\n                    newIndices = new Ctor(indices.buffer, 0, thisCount);\r\n                }\r\n            }\r\n            else {\r\n                var Ctor = getIndicesCtor(this);\r\n                newIndices = new Ctor(this.count());\r\n                for (var i = 0; i < newIndices.length; i++) {\r\n                    newIndices[i] = i;\r\n                }\r\n            }\r\n            return newIndices;\r\n        };\r\n        List.prototype.getByDimIdx = function (dimIdx, idx) {\r\n            if (!(idx >= 0 && idx < this._count)) {\r\n                return NaN;\r\n            }\r\n            var dimStore = this._storageArr[dimIdx];\r\n            return dimStore ? dimStore[this.getRawIndex(idx)] : NaN;\r\n        };\r\n        List.prototype.get = function (dim, idx) {\r\n            if (!(idx >= 0 && idx < this._count)) {\r\n                return NaN;\r\n            }\r\n            var dimStore = this._storage[dim];\r\n            return dimStore ? dimStore[this.getRawIndex(idx)] : NaN;\r\n        };\r\n        List.prototype.getByRawIndex = function (dim, rawIdx) {\r\n            if (!(rawIdx >= 0 && rawIdx < this._rawCount)) {\r\n                return NaN;\r\n            }\r\n            var dimStore = this._storage[dim];\r\n            return dimStore ? dimStore[rawIdx] : NaN;\r\n        };\r\n        List.prototype.getValues = function (dimensions, idx) {\r\n            var values = [];\r\n            if (!isArray(dimensions)) {\r\n                idx = dimensions;\r\n                dimensions = this.dimensions;\r\n            }\r\n            for (var i = 0, len = dimensions.length; i < len; i++) {\r\n                values.push(this.get(dimensions[i], idx));\r\n            }\r\n            return values;\r\n        };\r\n        List.prototype.hasValue = function (idx) {\r\n            var dataDimsOnCoord = this._dimensionsSummary.dataDimsOnCoord;\r\n            for (var i = 0, len = dataDimsOnCoord.length; i < len; i++) {\r\n                if (isNaN(this.get(dataDimsOnCoord[i], idx))) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        List.prototype.getDataExtent = function (dim) {\r\n            dim = this.getDimension(dim);\r\n            var dimData = this._storage[dim];\r\n            var initialExtent = getInitialExtent();\r\n            if (!dimData) {\r\n                return initialExtent;\r\n            }\r\n            var currEnd = this.count();\r\n            var useRaw = !this._indices;\r\n            var dimExtent;\r\n            if (useRaw) {\r\n                return this._rawExtent[dim].slice();\r\n            }\r\n            dimExtent = this._extent[dim];\r\n            if (dimExtent) {\r\n                return dimExtent.slice();\r\n            }\r\n            dimExtent = initialExtent;\r\n            var min = dimExtent[0];\r\n            var max = dimExtent[1];\r\n            for (var i = 0; i < currEnd; i++) {\r\n                var rawIdx = this.getRawIndex(i);\r\n                var value = dimData[rawIdx];\r\n                value < min && (min = value);\r\n                value > max && (max = value);\r\n            }\r\n            dimExtent = [min, max];\r\n            this._extent[dim] = dimExtent;\r\n            return dimExtent;\r\n        };\r\n        List.prototype.getApproximateExtent = function (dim) {\r\n            dim = this.getDimension(dim);\r\n            return this._approximateExtent[dim] || this.getDataExtent(dim);\r\n        };\r\n        List.prototype.setApproximateExtent = function (extent, dim) {\r\n            dim = this.getDimension(dim);\r\n            this._approximateExtent[dim] = extent.slice();\r\n        };\r\n        List.prototype.getCalculationInfo = function (key) {\r\n            return this._calculationInfo[key];\r\n        };\r\n        List.prototype.setCalculationInfo = function (key, value) {\r\n            isObject$3(key)\r\n                ? extend(this._calculationInfo, key)\r\n                : (this._calculationInfo[key] = value);\r\n        };\r\n        List.prototype.getSum = function (dim) {\r\n            var dimData = this._storage[dim];\r\n            var sum = 0;\r\n            if (dimData) {\r\n                for (var i = 0, len = this.count(); i < len; i++) {\r\n                    var value = this.get(dim, i);\r\n                    if (!isNaN(value)) {\r\n                        sum += value;\r\n                    }\r\n                }\r\n            }\r\n            return sum;\r\n        };\r\n        List.prototype.getMedian = function (dim) {\r\n            var dimDataArray = [];\r\n            this.each(dim, function (val) {\r\n                if (!isNaN(val)) {\r\n                    dimDataArray.push(val);\r\n                }\r\n            });\r\n            var sortedDimDataArray = dimDataArray.sort(function (a, b) {\r\n                return a - b;\r\n            });\r\n            var len = this.count();\r\n            return len === 0\r\n                ? 0\r\n                : len % 2 === 1\r\n                    ? sortedDimDataArray[(len - 1) / 2]\r\n                    : (sortedDimDataArray[len / 2] + sortedDimDataArray[len / 2 - 1]) / 2;\r\n        };\r\n        List.prototype.rawIndexOf = function (dim, value) {\r\n            var invertedIndices = dim && this._invertedIndicesMap[dim];\r\n            if (__DEV__) {\r\n                if (!invertedIndices) {\r\n                    throw new Error('Do not supported yet');\r\n                }\r\n            }\r\n            var rawIndex = invertedIndices[value];\r\n            if (rawIndex == null || isNaN(rawIndex)) {\r\n                return INDEX_NOT_FOUND;\r\n            }\r\n            return rawIndex;\r\n        };\r\n        List.prototype.indexOfName = function (name) {\r\n            for (var i = 0, len = this.count(); i < len; i++) {\r\n                if (this.getName(i) === name) {\r\n                    return i;\r\n                }\r\n            }\r\n            return -1;\r\n        };\r\n        List.prototype.indexOfRawIndex = function (rawIndex) {\r\n            if (rawIndex >= this._rawCount || rawIndex < 0) {\r\n                return -1;\r\n            }\r\n            if (!this._indices) {\r\n                return rawIndex;\r\n            }\r\n            var indices = this._indices;\r\n            var rawDataIndex = indices[rawIndex];\r\n            if (rawDataIndex != null && rawDataIndex < this._count && rawDataIndex === rawIndex) {\r\n                return rawIndex;\r\n            }\r\n            var left = 0;\r\n            var right = this._count - 1;\r\n            while (left <= right) {\r\n                var mid = (left + right) / 2 | 0;\r\n                if (indices[mid] < rawIndex) {\r\n                    left = mid + 1;\r\n                }\r\n                else if (indices[mid] > rawIndex) {\r\n                    right = mid - 1;\r\n                }\r\n                else {\r\n                    return mid;\r\n                }\r\n            }\r\n            return -1;\r\n        };\r\n        List.prototype.indicesOfNearest = function (dim, value, maxDistance) {\r\n            var storage = this._storage;\r\n            var dimData = storage[dim];\r\n            var nearestIndices = [];\r\n            if (!dimData) {\r\n                return nearestIndices;\r\n            }\r\n            if (maxDistance == null) {\r\n                maxDistance = Infinity;\r\n            }\r\n            var minDist = Infinity;\r\n            var minDiff = -1;\r\n            var nearestIndicesLen = 0;\r\n            for (var i = 0, len = this.count(); i < len; i++) {\r\n                var dataIndex = this.getRawIndex(i);\r\n                var diff = value - dimData[dataIndex];\r\n                var dist = Math.abs(diff);\r\n                if (dist <= maxDistance) {\r\n                    if (dist < minDist\r\n                        || (dist === minDist && diff >= 0 && minDiff < 0)) {\r\n                        minDist = dist;\r\n                        minDiff = diff;\r\n                        nearestIndicesLen = 0;\r\n                    }\r\n                    if (diff === minDiff) {\r\n                        nearestIndices[nearestIndicesLen++] = i;\r\n                    }\r\n                }\r\n            }\r\n            nearestIndices.length = nearestIndicesLen;\r\n            return nearestIndices;\r\n        };\r\n        List.prototype.getRawDataItem = function (idx) {\r\n            if (!this._rawData.persistent) {\r\n                var val = [];\r\n                for (var i = 0; i < this.dimensions.length; i++) {\r\n                    var dim = this.dimensions[i];\r\n                    val.push(this.get(dim, idx));\r\n                }\r\n                return val;\r\n            }\r\n            else {\r\n                return this._rawData.getItem(this.getRawIndex(idx));\r\n            }\r\n        };\r\n        List.prototype.getName = function (idx) {\r\n            var rawIndex = this.getRawIndex(idx);\r\n            return this._nameList[rawIndex]\r\n                || convertOptionIdName(getRawValueFromStore(this, this._nameDimIdx, rawIndex), '')\r\n                || '';\r\n        };\r\n        List.prototype.getId = function (idx) {\r\n            return getId(this, this.getRawIndex(idx));\r\n        };\r\n        List.prototype.each = function (dims, cb, ctx, ctxCompat) {\r\n            var _this = this;\r\n            if (!this._count) {\r\n                return;\r\n            }\r\n            if (typeof dims === 'function') {\r\n                ctxCompat = ctx;\r\n                ctx = cb;\r\n                cb = dims;\r\n                dims = [];\r\n            }\r\n            var fCtx = (ctx || ctxCompat || this);\r\n            var dimNames = map$1(normalizeDimensions(dims), this.getDimension, this);\r\n            if (__DEV__) {\r\n                validateDimensions(this, dimNames);\r\n            }\r\n            var dimSize = dimNames.length;\r\n            var dimIndices = map$1(dimNames, function (dimName) {\r\n                return _this._dimensionInfos[dimName].index;\r\n            });\r\n            var storageArr = this._storageArr;\r\n            for (var i = 0, len = this.count(); i < len; i++) {\r\n                var rawIdx = this.getRawIndex(i);\r\n                switch (dimSize) {\r\n                    case 0:\r\n                        cb.call(fCtx, i);\r\n                        break;\r\n                    case 1:\r\n                        cb.call(fCtx, storageArr[dimIndices[0]][rawIdx], i);\r\n                        break;\r\n                    case 2:\r\n                        cb.call(fCtx, storageArr[dimIndices[0]][rawIdx], storageArr[dimIndices[1]][rawIdx], i);\r\n                        break;\r\n                    default:\r\n                        var k = 0;\r\n                        var value = [];\r\n                        for (; k < dimSize; k++) {\r\n                            value[k] = storageArr[dimIndices[k]][rawIdx];\r\n                        }\r\n                        value[k] = i;\r\n                        cb.apply(fCtx, value);\r\n                }\r\n            }\r\n        };\r\n        List.prototype.filterSelf = function (dims, cb, ctx, ctxCompat) {\r\n            var _this = this;\r\n            if (!this._count) {\r\n                return;\r\n            }\r\n            if (typeof dims === 'function') {\r\n                ctxCompat = ctx;\r\n                ctx = cb;\r\n                cb = dims;\r\n                dims = [];\r\n            }\r\n            var fCtx = (ctx || ctxCompat || this);\r\n            var dimNames = map$1(normalizeDimensions(dims), this.getDimension, this);\r\n            if (__DEV__) {\r\n                validateDimensions(this, dimNames);\r\n            }\r\n            var count = this.count();\r\n            var Ctor = getIndicesCtor(this);\r\n            var newIndices = new Ctor(count);\r\n            var value = [];\r\n            var dimSize = dimNames.length;\r\n            var offset = 0;\r\n            var dimIndices = map$1(dimNames, function (dimName) {\r\n                return _this._dimensionInfos[dimName].index;\r\n            });\r\n            var dim0 = dimIndices[0];\r\n            var storageArr = this._storageArr;\r\n            for (var i = 0; i < count; i++) {\r\n                var keep = void 0;\r\n                var rawIdx = this.getRawIndex(i);\r\n                if (dimSize === 0) {\r\n                    keep = cb.call(fCtx, i);\r\n                }\r\n                else if (dimSize === 1) {\r\n                    var val = storageArr[dim0][rawIdx];\r\n                    keep = cb.call(fCtx, val, i);\r\n                }\r\n                else {\r\n                    var k = 0;\r\n                    for (; k < dimSize; k++) {\r\n                        value[k] = storageArr[dimIndices[k]][rawIdx];\r\n                    }\r\n                    value[k] = i;\r\n                    keep = cb.apply(fCtx, value);\r\n                }\r\n                if (keep) {\r\n                    newIndices[offset++] = rawIdx;\r\n                }\r\n            }\r\n            if (offset < count) {\r\n                this._indices = newIndices;\r\n            }\r\n            this._count = offset;\r\n            this._extent = {};\r\n            this.getRawIndex = this._indices ? getRawIndexWithIndices : getRawIndexWithoutIndices;\r\n            return this;\r\n        };\r\n        List.prototype.selectRange = function (range) {\r\n            var _this = this;\r\n            var len = this._count;\r\n            if (!len) {\r\n                return;\r\n            }\r\n            var dimensions = [];\r\n            for (var dim in range) {\r\n                if (range.hasOwnProperty(dim)) {\r\n                    dimensions.push(dim);\r\n                }\r\n            }\r\n            if (__DEV__) {\r\n                validateDimensions(this, dimensions);\r\n            }\r\n            var dimSize = dimensions.length;\r\n            if (!dimSize) {\r\n                return;\r\n            }\r\n            var originalCount = this.count();\r\n            var Ctor = getIndicesCtor(this);\r\n            var newIndices = new Ctor(originalCount);\r\n            var offset = 0;\r\n            var dim0 = dimensions[0];\r\n            var dimIndices = map$1(dimensions, function (dimName) {\r\n                return _this._dimensionInfos[dimName].index;\r\n            });\r\n            var min = range[dim0][0];\r\n            var max = range[dim0][1];\r\n            var storageArr = this._storageArr;\r\n            var quickFinished = false;\r\n            if (!this._indices) {\r\n                var idx = 0;\r\n                if (dimSize === 1) {\r\n                    var dimStorage = storageArr[dimIndices[0]];\r\n                    for (var i = 0; i < len; i++) {\r\n                        var val = dimStorage[i];\r\n                        if ((val >= min && val <= max) || isNaN(val)) {\r\n                            newIndices[offset++] = idx;\r\n                        }\r\n                        idx++;\r\n                    }\r\n                    quickFinished = true;\r\n                }\r\n                else if (dimSize === 2) {\r\n                    var dimStorage = storageArr[dimIndices[0]];\r\n                    var dimStorage2 = storageArr[dimIndices[1]];\r\n                    var min2 = range[dimensions[1]][0];\r\n                    var max2 = range[dimensions[1]][1];\r\n                    for (var i = 0; i < len; i++) {\r\n                        var val = dimStorage[i];\r\n                        var val2 = dimStorage2[i];\r\n                        if (((val >= min && val <= max) || isNaN(val))\r\n                            && ((val2 >= min2 && val2 <= max2) || isNaN(val2))) {\r\n                            newIndices[offset++] = idx;\r\n                        }\r\n                        idx++;\r\n                    }\r\n                    quickFinished = true;\r\n                }\r\n            }\r\n            if (!quickFinished) {\r\n                if (dimSize === 1) {\r\n                    for (var i = 0; i < originalCount; i++) {\r\n                        var rawIndex = this.getRawIndex(i);\r\n                        var val = storageArr[dimIndices[0]][rawIndex];\r\n                        if ((val >= min && val <= max) || isNaN(val)) {\r\n                            newIndices[offset++] = rawIndex;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    for (var i = 0; i < originalCount; i++) {\r\n                        var keep = true;\r\n                        var rawIndex = this.getRawIndex(i);\r\n                        for (var k = 0; k < dimSize; k++) {\r\n                            var dimk = dimensions[k];\r\n                            var val = storageArr[dimIndices[k]][rawIndex];\r\n                            if (val < range[dimk][0] || val > range[dimk][1]) {\r\n                                keep = false;\r\n                            }\r\n                        }\r\n                        if (keep) {\r\n                            newIndices[offset++] = this.getRawIndex(i);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (offset < originalCount) {\r\n                this._indices = newIndices;\r\n            }\r\n            this._count = offset;\r\n            this._extent = {};\r\n            this.getRawIndex = this._indices ? getRawIndexWithIndices : getRawIndexWithoutIndices;\r\n            return this;\r\n        };\r\n        List.prototype.mapArray = function (dims, cb, ctx, ctxCompat) {\r\n            if (typeof dims === 'function') {\r\n                ctxCompat = ctx;\r\n                ctx = cb;\r\n                cb = dims;\r\n                dims = [];\r\n            }\r\n            ctx = (ctx || ctxCompat || this);\r\n            var result = [];\r\n            this.each(dims, function () {\r\n                result.push(cb && cb.apply(this, arguments));\r\n            }, ctx);\r\n            return result;\r\n        };\r\n        List.prototype.map = function (dims, cb, ctx, ctxCompat) {\r\n            var fCtx = (ctx || ctxCompat || this);\r\n            var dimNames = map$1(normalizeDimensions(dims), this.getDimension, this);\r\n            if (__DEV__) {\r\n                validateDimensions(this, dimNames);\r\n            }\r\n            var list = cloneListForMapAndSample(this, dimNames);\r\n            var storage = list._storage;\r\n            list._indices = this._indices;\r\n            list.getRawIndex = list._indices ? getRawIndexWithIndices : getRawIndexWithoutIndices;\r\n            var tmpRetValue = [];\r\n            var dimSize = dimNames.length;\r\n            var dataCount = this.count();\r\n            var values = [];\r\n            var rawExtent = list._rawExtent;\r\n            for (var dataIndex = 0; dataIndex < dataCount; dataIndex++) {\r\n                for (var dimIndex = 0; dimIndex < dimSize; dimIndex++) {\r\n                    values[dimIndex] = this.get(dimNames[dimIndex], dataIndex);\r\n                }\r\n                values[dimSize] = dataIndex;\r\n                var retValue = cb && cb.apply(fCtx, values);\r\n                if (retValue != null) {\r\n                    if (typeof retValue !== 'object') {\r\n                        tmpRetValue[0] = retValue;\r\n                        retValue = tmpRetValue;\r\n                    }\r\n                    var rawIndex = this.getRawIndex(dataIndex);\r\n                    for (var i = 0; i < retValue.length; i++) {\r\n                        var dim = dimNames[i];\r\n                        var val = retValue[i];\r\n                        var rawExtentOnDim = rawExtent[dim];\r\n                        var dimStore = storage[dim];\r\n                        if (dimStore) {\r\n                            dimStore[rawIndex] = val;\r\n                        }\r\n                        if (val < rawExtentOnDim[0]) {\r\n                            rawExtentOnDim[0] = val;\r\n                        }\r\n                        if (val > rawExtentOnDim[1]) {\r\n                            rawExtentOnDim[1] = val;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return list;\r\n        };\r\n        List.prototype.downSample = function (dimension, rate, sampleValue, sampleIndex) {\r\n            var list = cloneListForMapAndSample(this, [dimension]);\r\n            var targetStorage = list._storage;\r\n            var frameValues = [];\r\n            var frameSize = mathFloor(1 / rate);\r\n            var dimStore = targetStorage[dimension];\r\n            var len = this.count();\r\n            var rawExtentOnDim = list._rawExtent[dimension];\r\n            var newIndices = new (getIndicesCtor(this))(len);\r\n            var offset = 0;\r\n            for (var i = 0; i < len; i += frameSize) {\r\n                if (frameSize > len - i) {\r\n                    frameSize = len - i;\r\n                    frameValues.length = frameSize;\r\n                }\r\n                for (var k = 0; k < frameSize; k++) {\r\n                    var dataIdx = this.getRawIndex(i + k);\r\n                    frameValues[k] = dimStore[dataIdx];\r\n                }\r\n                var value = sampleValue(frameValues);\r\n                var sampleFrameIdx = this.getRawIndex(Math.min(i + sampleIndex(frameValues, value) || 0, len - 1));\r\n                dimStore[sampleFrameIdx] = value;\r\n                if (value < rawExtentOnDim[0]) {\r\n                    rawExtentOnDim[0] = value;\r\n                }\r\n                if (value > rawExtentOnDim[1]) {\r\n                    rawExtentOnDim[1] = value;\r\n                }\r\n                newIndices[offset++] = sampleFrameIdx;\r\n            }\r\n            list._count = offset;\r\n            list._indices = newIndices;\r\n            list.getRawIndex = getRawIndexWithIndices;\r\n            return list;\r\n        };\r\n        List.prototype.lttbDownSample = function (valueDimension, rate) {\r\n            var list = cloneListForMapAndSample(this, []);\r\n            var targetStorage = list._storage;\r\n            var dimStore = targetStorage[valueDimension];\r\n            var len = this.count();\r\n            var newIndices = new (getIndicesCtor(this))(len);\r\n            var sampledIndex = 0;\r\n            var frameSize = mathFloor(1 / rate);\r\n            var currentRawIndex = this.getRawIndex(0);\r\n            var maxArea;\r\n            var area;\r\n            var nextRawIndex;\r\n            newIndices[sampledIndex++] = currentRawIndex;\r\n            for (var i = 1; i < len - 1; i += frameSize) {\r\n                var nextFrameStart = Math.min(i + frameSize, len - 1);\r\n                var nextFrameEnd = Math.min(i + frameSize * 2, len);\r\n                var avgX = (nextFrameEnd + nextFrameStart) / 2;\r\n                var avgY = 0;\r\n                for (var idx = nextFrameStart; idx < nextFrameEnd; idx++) {\r\n                    var rawIndex = this.getRawIndex(idx);\r\n                    var y = dimStore[rawIndex];\r\n                    if (isNaN(y)) {\r\n                        continue;\r\n                    }\r\n                    avgY += y;\r\n                }\r\n                avgY /= (nextFrameEnd - nextFrameStart);\r\n                var frameStart = i;\r\n                var frameEnd = Math.min(i + frameSize, len);\r\n                var pointAX = i - 1;\r\n                var pointAY = dimStore[currentRawIndex];\r\n                maxArea = -1;\r\n                nextRawIndex = frameStart;\r\n                for (var idx = frameStart; idx < frameEnd; idx++) {\r\n                    var rawIndex = this.getRawIndex(idx);\r\n                    var y = dimStore[rawIndex];\r\n                    if (isNaN(y)) {\r\n                        continue;\r\n                    }\r\n                    area = Math.abs((pointAX - avgX) * (y - pointAY)\r\n                        - (pointAX - idx) * (avgY - pointAY));\r\n                    if (area > maxArea) {\r\n                        maxArea = area;\r\n                        nextRawIndex = rawIndex;\r\n                    }\r\n                }\r\n                newIndices[sampledIndex++] = nextRawIndex;\r\n                currentRawIndex = nextRawIndex;\r\n            }\r\n            newIndices[sampledIndex++] = this.getRawIndex(len - 1);\r\n            list._count = sampledIndex;\r\n            list._indices = newIndices;\r\n            list.getRawIndex = getRawIndexWithIndices;\r\n            return list;\r\n        };\r\n        List.prototype.getItemModel = function (idx) {\r\n            var hostModel = this.hostModel;\r\n            var dataItem = this.getRawDataItem(idx);\r\n            return new Model(dataItem, hostModel, hostModel && hostModel.ecModel);\r\n        };\r\n        List.prototype.diff = function (otherList) {\r\n            var thisList = this;\r\n            return new DataDiffer(otherList ? otherList.getIndices() : [], this.getIndices(), function (idx) {\r\n                return getId(otherList, idx);\r\n            }, function (idx) {\r\n                return getId(thisList, idx);\r\n            });\r\n        };\r\n        List.prototype.getVisual = function (key) {\r\n            var visual = this._visual;\r\n            return visual && visual[key];\r\n        };\r\n        List.prototype.setVisual = function (kvObj, val) {\r\n            this._visual = this._visual || {};\r\n            if (isObject$3(kvObj)) {\r\n                extend(this._visual, kvObj);\r\n            }\r\n            else {\r\n                this._visual[kvObj] = val;\r\n            }\r\n        };\r\n        List.prototype.getItemVisual = function (idx, key) {\r\n            var itemVisual = this._itemVisuals[idx];\r\n            var val = itemVisual && itemVisual[key];\r\n            if (val == null) {\r\n                return this.getVisual(key);\r\n            }\r\n            return val;\r\n        };\r\n        List.prototype.ensureUniqueItemVisual = function (idx, key) {\r\n            var itemVisuals = this._itemVisuals;\r\n            var itemVisual = itemVisuals[idx];\r\n            if (!itemVisual) {\r\n                itemVisual = itemVisuals[idx] = {};\r\n            }\r\n            var val = itemVisual[key];\r\n            if (!val) {\r\n                val = this.getVisual(key);\r\n                if (isArray(val)) {\r\n                    val = val.slice();\r\n                }\r\n                else if (isObject$3(val)) {\r\n                    val = extend({}, val);\r\n                }\r\n                itemVisual[key] = val;\r\n            }\r\n            return val;\r\n        };\r\n        List.prototype.setItemVisual = function (idx, key, value) {\r\n            var itemVisual = this._itemVisuals[idx] || {};\r\n            this._itemVisuals[idx] = itemVisual;\r\n            if (isObject$3(key)) {\r\n                extend(itemVisual, key);\r\n            }\r\n            else {\r\n                itemVisual[key] = value;\r\n            }\r\n        };\r\n        List.prototype.clearAllVisual = function () {\r\n            this._visual = {};\r\n            this._itemVisuals = [];\r\n        };\r\n        List.prototype.setLayout = function (key, val) {\r\n            if (isObject$3(key)) {\r\n                for (var name_2 in key) {\r\n                    if (key.hasOwnProperty(name_2)) {\r\n                        this.setLayout(name_2, key[name_2]);\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n            this._layout[key] = val;\r\n        };\r\n        List.prototype.getLayout = function (key) {\r\n            return this._layout[key];\r\n        };\r\n        List.prototype.getItemLayout = function (idx) {\r\n            return this._itemLayouts[idx];\r\n        };\r\n        List.prototype.setItemLayout = function (idx, layout, merge) {\r\n            this._itemLayouts[idx] = merge\r\n                ? extend(this._itemLayouts[idx] || {}, layout)\r\n                : layout;\r\n        };\r\n        List.prototype.clearItemLayouts = function () {\r\n            this._itemLayouts.length = 0;\r\n        };\r\n        List.prototype.setItemGraphicEl = function (idx, el) {\r\n            var hostModel = this.hostModel;\r\n            if (el) {\r\n                var ecData = getECData(el);\r\n                ecData.dataIndex = idx;\r\n                ecData.dataType = this.dataType;\r\n                ecData.seriesIndex = hostModel && hostModel.seriesIndex;\r\n                if (el.type === 'group') {\r\n                    el.traverse(setItemDataAndSeriesIndex, el);\r\n                }\r\n            }\r\n            this._graphicEls[idx] = el;\r\n        };\r\n        List.prototype.getItemGraphicEl = function (idx) {\r\n            return this._graphicEls[idx];\r\n        };\r\n        List.prototype.eachItemGraphicEl = function (cb, context) {\r\n            each(this._graphicEls, function (el, idx) {\r\n                if (el) {\r\n                    cb && cb.call(context, el, idx);\r\n                }\r\n            });\r\n        };\r\n        List.prototype.cloneShallow = function (list) {\r\n            if (!list) {\r\n                var dimensionInfoList = map$1(this.dimensions, this.getDimensionInfo, this);\r\n                list = new List(dimensionInfoList, this.hostModel);\r\n            }\r\n            list._storage = this._storage;\r\n            list._storageArr = this._storageArr;\r\n            transferProperties(list, this);\r\n            if (this._indices) {\r\n                var Ctor = this._indices.constructor;\r\n                if (Ctor === Array) {\r\n                    var thisCount = this._indices.length;\r\n                    list._indices = new Ctor(thisCount);\r\n                    for (var i = 0; i < thisCount; i++) {\r\n                        list._indices[i] = this._indices[i];\r\n                    }\r\n                }\r\n                else {\r\n                    list._indices = new Ctor(this._indices);\r\n                }\r\n            }\r\n            else {\r\n                list._indices = null;\r\n            }\r\n            list.getRawIndex = list._indices ? getRawIndexWithIndices : getRawIndexWithoutIndices;\r\n            return list;\r\n        };\r\n        List.prototype.wrapMethod = function (methodName, injectFunction) {\r\n            var originalMethod = this[methodName];\r\n            if (typeof originalMethod !== 'function') {\r\n                return;\r\n            }\r\n            this.__wrappedMethods = this.__wrappedMethods || [];\r\n            this.__wrappedMethods.push(methodName);\r\n            this[methodName] = function () {\r\n                var res = originalMethod.apply(this, arguments);\r\n                return injectFunction.apply(this, [res].concat(slice(arguments)));\r\n            };\r\n        };\r\n        List.internalField = (function () {\r\n            defaultDimValueGetters = {\r\n                arrayRows: getDimValueSimply,\r\n                objectRows: function (dataItem, dimName, dataIndex, dimIndex) {\r\n                    return parseDataValue(dataItem[dimName], this._dimensionInfos[dimName]);\r\n                },\r\n                keyedColumns: getDimValueSimply,\r\n                original: function (dataItem, dimName, dataIndex, dimIndex) {\r\n                    var value = dataItem && (dataItem.value == null ? dataItem : dataItem.value);\r\n                    if (!this._rawData.pure && isDataItemOption(dataItem)) {\r\n                        this.hasItemOption = true;\r\n                    }\r\n                    return parseDataValue((value instanceof Array)\r\n                        ? value[dimIndex]\r\n                        : value, this._dimensionInfos[dimName]);\r\n                },\r\n                typedArray: function (dataItem, dimName, dataIndex, dimIndex) {\r\n                    return dataItem[dimIndex];\r\n                }\r\n            };\r\n            function getDimValueSimply(dataItem, dimName, dataIndex, dimIndex) {\r\n                return parseDataValue(dataItem[dimIndex], this._dimensionInfos[dimName]);\r\n            }\r\n            prepareInvertedIndex = function (list) {\r\n                var invertedIndicesMap = list._invertedIndicesMap;\r\n                each(invertedIndicesMap, function (invertedIndices, dim) {\r\n                    var dimInfo = list._dimensionInfos[dim];\r\n                    var ordinalMeta = dimInfo.ordinalMeta;\r\n                    if (ordinalMeta) {\r\n                        invertedIndices = invertedIndicesMap[dim] = new CtorInt32Array(ordinalMeta.categories.length);\r\n                        for (var i = 0; i < invertedIndices.length; i++) {\r\n                            invertedIndices[i] = INDEX_NOT_FOUND;\r\n                        }\r\n                        for (var i = 0; i < list._count; i++) {\r\n                            invertedIndices[list.get(dim, i)] = i;\r\n                        }\r\n                    }\r\n                });\r\n            };\r\n            getRawValueFromStore = function (list, dimIndex, rawIndex) {\r\n                var val;\r\n                if (dimIndex != null) {\r\n                    var dim = list.dimensions[dimIndex];\r\n                    var chunk = list._storage[dim];\r\n                    if (chunk) {\r\n                        val = chunk[rawIndex];\r\n                        var ordinalMeta = list._dimensionInfos[dim].ordinalMeta;\r\n                        if (ordinalMeta && ordinalMeta.categories.length) {\r\n                            val = ordinalMeta.categories[val];\r\n                        }\r\n                    }\r\n                }\r\n                return val;\r\n            };\r\n            getIndicesCtor = function (list) {\r\n                return list._rawCount > 65535 ? CtorUint32Array : CtorUint16Array;\r\n            };\r\n            prepareStorage = function (storage, dimInfo, end, append) {\r\n                var DataCtor = dataCtors[dimInfo.type];\r\n                var dim = dimInfo.name;\r\n                if (append) {\r\n                    var oldStore = storage[dim];\r\n                    var oldLen = oldStore && oldStore.length;\r\n                    if (!(oldLen === end)) {\r\n                        var newStore = new DataCtor(end);\r\n                        for (var j = 0; j < oldLen; j++) {\r\n                            newStore[j] = oldStore[j];\r\n                        }\r\n                        storage[dim] = newStore;\r\n                    }\r\n                }\r\n                else {\r\n                    storage[dim] = new DataCtor(end);\r\n                }\r\n            };\r\n            getRawIndexWithoutIndices = function (idx) {\r\n                return idx;\r\n            };\r\n            getRawIndexWithIndices = function (idx) {\r\n                if (idx < this._count && idx >= 0) {\r\n                    return this._indices[idx];\r\n                }\r\n                return -1;\r\n            };\r\n            getIdFromName = function (list, name) {\r\n                var nameRepeatCount = list._nameRepeatCount;\r\n                nameRepeatCount[name] = nameRepeatCount[name] || 0;\r\n                var id = name;\r\n                if (nameRepeatCount[name] > 0) {\r\n                    id += '__ec__' + nameRepeatCount[name];\r\n                }\r\n                nameRepeatCount[name]++;\r\n                return id;\r\n            };\r\n            getId = function (list, rawIndex) {\r\n                var id = list._idList[rawIndex];\r\n                if (id == null) {\r\n                    id = convertOptionIdName(getRawValueFromStore(list, list._idDimIdx, rawIndex), null);\r\n                }\r\n                if (id == null) {\r\n                    id = convertOptionIdName(getRawValueFromStore(list, list._nameDimIdx, rawIndex), null);\r\n                    if (id != null) {\r\n                        id = getIdFromName(list, id);\r\n                        list._idList[rawIndex] = id;\r\n                    }\r\n                    else {\r\n                        id = ID_PREFIX + rawIndex;\r\n                    }\r\n                }\r\n                return id;\r\n            };\r\n            normalizeDimensions = function (dimensions) {\r\n                if (!isArray(dimensions)) {\r\n                    dimensions = [dimensions];\r\n                }\r\n                return dimensions;\r\n            };\r\n            validateDimensions = function (list, dims) {\r\n                for (var i = 0; i < dims.length; i++) {\r\n                    if (!list._dimensionInfos[dims[i]]) {\r\n                        console.error('Unkown dimension ' + dims[i]);\r\n                    }\r\n                }\r\n            };\r\n            cloneListForMapAndSample = function (original, excludeDimensions) {\r\n                var allDimensions = original.dimensions;\r\n                var list = new List(map$1(allDimensions, original.getDimensionInfo, original), original.hostModel);\r\n                transferProperties(list, original);\r\n                var storage = list._storage = {};\r\n                var originalStorage = original._storage;\r\n                var storageArr = list._storageArr = [];\r\n                for (var i = 0; i < allDimensions.length; i++) {\r\n                    var dim = allDimensions[i];\r\n                    if (originalStorage[dim]) {\r\n                        if (indexOf(excludeDimensions, dim) >= 0) {\r\n                            storage[dim] = cloneChunk(originalStorage[dim]);\r\n                            list._rawExtent[dim] = getInitialExtent();\r\n                            list._extent[dim] = null;\r\n                        }\r\n                        else {\r\n                            storage[dim] = originalStorage[dim];\r\n                        }\r\n                        storageArr.push(storage[dim]);\r\n                    }\r\n                }\r\n                return list;\r\n            };\r\n            function cloneChunk(originalChunk) {\r\n                var Ctor = originalChunk.constructor;\r\n                return Ctor === Array\r\n                    ? originalChunk.slice()\r\n                    : new Ctor(originalChunk);\r\n            }\r\n            getInitialExtent = function () {\r\n                return [Infinity, -Infinity];\r\n            };\r\n            setItemDataAndSeriesIndex = function (child) {\r\n                var childECData = getECData(child);\r\n                var thisECData = getECData(this);\r\n                childECData.seriesIndex = thisECData.seriesIndex;\r\n                childECData.dataIndex = thisECData.dataIndex;\r\n                childECData.dataType = thisECData.dataType;\r\n            };\r\n            transferProperties = function (target, source) {\r\n                each(TRANSFERABLE_PROPERTIES.concat(source.__wrappedMethods || []), function (propName) {\r\n                    if (source.hasOwnProperty(propName)) {\r\n                        target[propName] = source[propName];\r\n                    }\r\n                });\r\n                target.__wrappedMethods = source.__wrappedMethods;\r\n                each(CLONE_PROPERTIES, function (propName) {\r\n                    target[propName] = clone(source[propName]);\r\n                });\r\n                target._calculationInfo = extend({}, source._calculationInfo);\r\n            };\r\n        })();\r\n        return List;\r\n    }());\n\n    function completeDimensions(sysDims, source, opt) {\r\n        if (!isSourceInstance(source)) {\r\n            source = createSourceFromSeriesDataOption(source);\r\n        }\r\n        opt = opt || {};\r\n        sysDims = (sysDims || []).slice();\r\n        var dimsDef = (opt.dimsDef || []).slice();\r\n        var dataDimNameMap = createHashMap();\r\n        var coordDimNameMap = createHashMap();\r\n        var result = [];\r\n        var dimCount = getDimCount(source, sysDims, dimsDef, opt.dimCount);\r\n        for (var i = 0; i < dimCount; i++) {\r\n            var dimDefItemRaw = dimsDef[i];\r\n            var dimDefItem = dimsDef[i] = extend({}, isObject(dimDefItemRaw) ? dimDefItemRaw : { name: dimDefItemRaw });\r\n            var userDimName = dimDefItem.name;\r\n            var resultItem = result[i] = new DataDimensionInfo();\r\n            if (userDimName != null && dataDimNameMap.get(userDimName) == null) {\r\n                resultItem.name = resultItem.displayName = userDimName;\r\n                dataDimNameMap.set(userDimName, i);\r\n            }\r\n            dimDefItem.type != null && (resultItem.type = dimDefItem.type);\r\n            dimDefItem.displayName != null && (resultItem.displayName = dimDefItem.displayName);\r\n        }\r\n        var encodeDef = opt.encodeDef;\r\n        if (!encodeDef && opt.encodeDefaulter) {\r\n            encodeDef = opt.encodeDefaulter(source, dimCount);\r\n        }\r\n        var encodeDefMap = createHashMap(encodeDef);\r\n        encodeDefMap.each(function (dataDimsRaw, coordDim) {\r\n            var dataDims = normalizeToArray(dataDimsRaw).slice();\r\n            if (dataDims.length === 1 && !isString(dataDims[0]) && dataDims[0] < 0) {\r\n                encodeDefMap.set(coordDim, false);\r\n                return;\r\n            }\r\n            var validDataDims = encodeDefMap.set(coordDim, []);\r\n            each(dataDims, function (resultDimIdxOrName, idx) {\r\n                var resultDimIdx = isString(resultDimIdxOrName)\r\n                    ? dataDimNameMap.get(resultDimIdxOrName)\r\n                    : resultDimIdxOrName;\r\n                if (resultDimIdx != null && resultDimIdx < dimCount) {\r\n                    validDataDims[idx] = resultDimIdx;\r\n                    applyDim(result[resultDimIdx], coordDim, idx);\r\n                }\r\n            });\r\n        });\r\n        var availDimIdx = 0;\r\n        each(sysDims, function (sysDimItemRaw) {\r\n            var coordDim;\r\n            var sysDimItemDimsDef;\r\n            var sysDimItemOtherDims;\r\n            var sysDimItem;\r\n            if (isString(sysDimItemRaw)) {\r\n                coordDim = sysDimItemRaw;\r\n                sysDimItem = {};\r\n            }\r\n            else {\r\n                sysDimItem = sysDimItemRaw;\r\n                coordDim = sysDimItem.name;\r\n                var ordinalMeta = sysDimItem.ordinalMeta;\r\n                sysDimItem.ordinalMeta = null;\r\n                sysDimItem = clone(sysDimItem);\r\n                sysDimItem.ordinalMeta = ordinalMeta;\r\n                sysDimItemDimsDef = sysDimItem.dimsDef;\r\n                sysDimItemOtherDims = sysDimItem.otherDims;\r\n                sysDimItem.name = sysDimItem.coordDim = sysDimItem.coordDimIndex =\r\n                    sysDimItem.dimsDef = sysDimItem.otherDims = null;\r\n            }\r\n            var dataDims = encodeDefMap.get(coordDim);\r\n            if (dataDims === false) {\r\n                return;\r\n            }\r\n            dataDims = normalizeToArray(dataDims);\r\n            if (!dataDims.length) {\r\n                for (var i = 0; i < (sysDimItemDimsDef && sysDimItemDimsDef.length || 1); i++) {\r\n                    while (availDimIdx < result.length && result[availDimIdx].coordDim != null) {\r\n                        availDimIdx++;\r\n                    }\r\n                    availDimIdx < result.length && dataDims.push(availDimIdx++);\r\n                }\r\n            }\r\n            each(dataDims, function (resultDimIdx, coordDimIndex) {\r\n                var resultItem = result[resultDimIdx];\r\n                applyDim(defaults(resultItem, sysDimItem), coordDim, coordDimIndex);\r\n                if (resultItem.name == null && sysDimItemDimsDef) {\r\n                    var sysDimItemDimsDefItem = sysDimItemDimsDef[coordDimIndex];\r\n                    !isObject(sysDimItemDimsDefItem) && (sysDimItemDimsDefItem = { name: sysDimItemDimsDefItem });\r\n                    resultItem.name = resultItem.displayName = sysDimItemDimsDefItem.name;\r\n                    resultItem.defaultTooltip = sysDimItemDimsDefItem.defaultTooltip;\r\n                }\r\n                sysDimItemOtherDims && defaults(resultItem.otherDims, sysDimItemOtherDims);\r\n            });\r\n        });\r\n        function applyDim(resultItem, coordDim, coordDimIndex) {\r\n            if (VISUAL_DIMENSIONS.get(coordDim) != null) {\r\n                resultItem.otherDims[coordDim] = coordDimIndex;\r\n            }\r\n            else {\r\n                resultItem.coordDim = coordDim;\r\n                resultItem.coordDimIndex = coordDimIndex;\r\n                coordDimNameMap.set(coordDim, true);\r\n            }\r\n        }\r\n        var generateCoord = opt.generateCoord;\r\n        var generateCoordCount = opt.generateCoordCount;\r\n        var fromZero = generateCoordCount != null;\r\n        generateCoordCount = generateCoord ? (generateCoordCount || 1) : 0;\r\n        var extra = generateCoord || 'value';\r\n        for (var resultDimIdx = 0; resultDimIdx < dimCount; resultDimIdx++) {\r\n            var resultItem = result[resultDimIdx] = result[resultDimIdx] || new DataDimensionInfo();\r\n            var coordDim = resultItem.coordDim;\r\n            if (coordDim == null) {\r\n                resultItem.coordDim = genName(extra, coordDimNameMap, fromZero);\r\n                resultItem.coordDimIndex = 0;\r\n                if (!generateCoord || generateCoordCount <= 0) {\r\n                    resultItem.isExtraCoord = true;\r\n                }\r\n                generateCoordCount--;\r\n            }\r\n            resultItem.name == null && (resultItem.name = genName(resultItem.coordDim, dataDimNameMap, false));\r\n            if (resultItem.type == null\r\n                && (guessOrdinal(source, resultDimIdx) === BE_ORDINAL.Must\r\n                    || (resultItem.isExtraCoord\r\n                        && (resultItem.otherDims.itemName != null\r\n                            || resultItem.otherDims.seriesName != null)))) {\r\n                resultItem.type = 'ordinal';\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function getDimCount(source, sysDims, dimsDef, optDimCount) {\r\n        var dimCount = Math.max(source.dimensionsDetectedCount || 1, sysDims.length, dimsDef.length, optDimCount || 0);\r\n        each(sysDims, function (sysDimItem) {\r\n            var sysDimItemDimsDef;\r\n            if (isObject(sysDimItem) && (sysDimItemDimsDef = sysDimItem.dimsDef)) {\r\n                dimCount = Math.max(dimCount, sysDimItemDimsDef.length);\r\n            }\r\n        });\r\n        return dimCount;\r\n    }\r\n    function genName(name, map, fromZero) {\r\n        if (fromZero || map.get(name) != null) {\r\n            var i = 0;\r\n            while (map.get(name + i) != null) {\r\n                i++;\r\n            }\r\n            name += i;\r\n        }\r\n        map.set(name, true);\r\n        return name;\r\n    }\n\n    function createDimensions (source, opt) {\r\n        opt = opt || {};\r\n        return completeDimensions(opt.coordDimensions || [], source, {\r\n            dimsDef: opt.dimensionsDefine || source.dimensionsDefine,\r\n            encodeDef: opt.encodeDefine || source.encodeDefine,\r\n            dimCount: opt.dimensionsCount,\r\n            encodeDefaulter: opt.encodeDefaulter,\r\n            generateCoord: opt.generateCoord,\r\n            generateCoordCount: opt.generateCoordCount\r\n        });\r\n    }\n\n    var CoordSysInfo = (function () {\r\n        function CoordSysInfo(coordSysName) {\r\n            this.coordSysDims = [];\r\n            this.axisMap = createHashMap();\r\n            this.categoryAxisMap = createHashMap();\r\n            this.coordSysName = coordSysName;\r\n        }\r\n        return CoordSysInfo;\r\n    }());\r\n    function getCoordSysInfoBySeries(seriesModel) {\r\n        var coordSysName = seriesModel.get('coordinateSystem');\r\n        var result = new CoordSysInfo(coordSysName);\r\n        var fetch = fetchers[coordSysName];\r\n        if (fetch) {\r\n            fetch(seriesModel, result, result.axisMap, result.categoryAxisMap);\r\n            return result;\r\n        }\r\n    }\r\n    var fetchers = {\r\n        cartesian2d: function (seriesModel, result, axisMap, categoryAxisMap) {\r\n            var xAxisModel = seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\r\n            var yAxisModel = seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\r\n            if (__DEV__) {\r\n                if (!xAxisModel) {\r\n                    throw new Error('xAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('xAxisId'), 0) + '\" not found');\r\n                }\r\n                if (!yAxisModel) {\r\n                    throw new Error('yAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('yAxisId'), 0) + '\" not found');\r\n                }\r\n            }\r\n            result.coordSysDims = ['x', 'y'];\r\n            axisMap.set('x', xAxisModel);\r\n            axisMap.set('y', yAxisModel);\r\n            if (isCategory(xAxisModel)) {\r\n                categoryAxisMap.set('x', xAxisModel);\r\n                result.firstCategoryDimIndex = 0;\r\n            }\r\n            if (isCategory(yAxisModel)) {\r\n                categoryAxisMap.set('y', yAxisModel);\r\n                result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\r\n            }\r\n        },\r\n        singleAxis: function (seriesModel, result, axisMap, categoryAxisMap) {\r\n            var singleAxisModel = seriesModel.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\r\n            if (__DEV__) {\r\n                if (!singleAxisModel) {\r\n                    throw new Error('singleAxis should be specified.');\r\n                }\r\n            }\r\n            result.coordSysDims = ['single'];\r\n            axisMap.set('single', singleAxisModel);\r\n            if (isCategory(singleAxisModel)) {\r\n                categoryAxisMap.set('single', singleAxisModel);\r\n                result.firstCategoryDimIndex = 0;\r\n            }\r\n        },\r\n        polar: function (seriesModel, result, axisMap, categoryAxisMap) {\r\n            var polarModel = seriesModel.getReferringComponents('polar', SINGLE_REFERRING).models[0];\r\n            var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\r\n            var angleAxisModel = polarModel.findAxisModel('angleAxis');\r\n            if (__DEV__) {\r\n                if (!angleAxisModel) {\r\n                    throw new Error('angleAxis option not found');\r\n                }\r\n                if (!radiusAxisModel) {\r\n                    throw new Error('radiusAxis option not found');\r\n                }\r\n            }\r\n            result.coordSysDims = ['radius', 'angle'];\r\n            axisMap.set('radius', radiusAxisModel);\r\n            axisMap.set('angle', angleAxisModel);\r\n            if (isCategory(radiusAxisModel)) {\r\n                categoryAxisMap.set('radius', radiusAxisModel);\r\n                result.firstCategoryDimIndex = 0;\r\n            }\r\n            if (isCategory(angleAxisModel)) {\r\n                categoryAxisMap.set('angle', angleAxisModel);\r\n                result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\r\n            }\r\n        },\r\n        geo: function (seriesModel, result, axisMap, categoryAxisMap) {\r\n            result.coordSysDims = ['lng', 'lat'];\r\n        },\r\n        parallel: function (seriesModel, result, axisMap, categoryAxisMap) {\r\n            var ecModel = seriesModel.ecModel;\r\n            var parallelModel = ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\r\n            var coordSysDims = result.coordSysDims = parallelModel.dimensions.slice();\r\n            each(parallelModel.parallelAxisIndex, function (axisIndex, index) {\r\n                var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\r\n                var axisDim = coordSysDims[index];\r\n                axisMap.set(axisDim, axisModel);\r\n                if (isCategory(axisModel) && result.firstCategoryDimIndex == null) {\r\n                    categoryAxisMap.set(axisDim, axisModel);\r\n                    result.firstCategoryDimIndex = index;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    function isCategory(axisModel) {\r\n        return axisModel.get('type') === 'category';\r\n    }\n\n    function enableDataStack(seriesModel, dimensionInfoList, opt) {\r\n        opt = opt || {};\r\n        var byIndex = opt.byIndex;\r\n        var stackedCoordDimension = opt.stackedCoordDimension;\r\n        var mayStack = !!(seriesModel && seriesModel.get('stack'));\r\n        var stackedByDimInfo;\r\n        var stackedDimInfo;\r\n        var stackResultDimension;\r\n        var stackedOverDimension;\r\n        each(dimensionInfoList, function (dimensionInfo, index) {\r\n            if (isString(dimensionInfo)) {\r\n                dimensionInfoList[index] = dimensionInfo = {\r\n                    name: dimensionInfo\r\n                };\r\n            }\r\n            if (mayStack && !dimensionInfo.isExtraCoord) {\r\n                if (!byIndex && !stackedByDimInfo && dimensionInfo.ordinalMeta) {\r\n                    stackedByDimInfo = dimensionInfo;\r\n                }\r\n                if (!stackedDimInfo\r\n                    && dimensionInfo.type !== 'ordinal'\r\n                    && dimensionInfo.type !== 'time'\r\n                    && (!stackedCoordDimension || stackedCoordDimension === dimensionInfo.coordDim)) {\r\n                    stackedDimInfo = dimensionInfo;\r\n                }\r\n            }\r\n        });\r\n        if (stackedDimInfo && !byIndex && !stackedByDimInfo) {\r\n            byIndex = true;\r\n        }\r\n        if (stackedDimInfo) {\r\n            stackResultDimension = '__\\0ecstackresult';\r\n            stackedOverDimension = '__\\0ecstackedover';\r\n            if (stackedByDimInfo) {\r\n                stackedByDimInfo.createInvertedIndices = true;\r\n            }\r\n            var stackedDimCoordDim_1 = stackedDimInfo.coordDim;\r\n            var stackedDimType = stackedDimInfo.type;\r\n            var stackedDimCoordIndex_1 = 0;\r\n            each(dimensionInfoList, function (dimensionInfo) {\r\n                if (dimensionInfo.coordDim === stackedDimCoordDim_1) {\r\n                    stackedDimCoordIndex_1++;\r\n                }\r\n            });\r\n            dimensionInfoList.push({\r\n                name: stackResultDimension,\r\n                coordDim: stackedDimCoordDim_1,\r\n                coordDimIndex: stackedDimCoordIndex_1,\r\n                type: stackedDimType,\r\n                isExtraCoord: true,\r\n                isCalculationCoord: true\r\n            });\r\n            stackedDimCoordIndex_1++;\r\n            dimensionInfoList.push({\r\n                name: stackedOverDimension,\r\n                coordDim: stackedOverDimension,\r\n                coordDimIndex: stackedDimCoordIndex_1,\r\n                type: stackedDimType,\r\n                isExtraCoord: true,\r\n                isCalculationCoord: true\r\n            });\r\n        }\r\n        return {\r\n            stackedDimension: stackedDimInfo && stackedDimInfo.name,\r\n            stackedByDimension: stackedByDimInfo && stackedByDimInfo.name,\r\n            isStackedByIndex: byIndex,\r\n            stackedOverDimension: stackedOverDimension,\r\n            stackResultDimension: stackResultDimension\r\n        };\r\n    }\r\n    function isDimensionStacked(data, stackedDim) {\r\n        return !!stackedDim && stackedDim === data.getCalculationInfo('stackedDimension');\r\n    }\r\n    function getStackedDimension(data, targetDim) {\r\n        return isDimensionStacked(data, targetDim)\r\n            ? data.getCalculationInfo('stackResultDimension')\r\n            : targetDim;\r\n    }\n\n    function createListFromArray(source, seriesModel, opt) {\r\n        opt = opt || {};\r\n        if (!isSourceInstance(source)) {\r\n            source = createSourceFromSeriesDataOption(source);\r\n        }\r\n        var coordSysName = seriesModel.get('coordinateSystem');\r\n        var registeredCoordSys = CoordinateSystemManager.get(coordSysName);\r\n        var coordSysInfo = getCoordSysInfoBySeries(seriesModel);\r\n        var coordSysDimDefs;\r\n        if (coordSysInfo && coordSysInfo.coordSysDims) {\r\n            coordSysDimDefs = map(coordSysInfo.coordSysDims, function (dim) {\r\n                var dimInfo = {\r\n                    name: dim\r\n                };\r\n                var axisModel = coordSysInfo.axisMap.get(dim);\r\n                if (axisModel) {\r\n                    var axisType = axisModel.get('type');\r\n                    dimInfo.type = getDimensionTypeByAxis(axisType);\r\n                }\r\n                return dimInfo;\r\n            });\r\n        }\r\n        if (!coordSysDimDefs) {\r\n            coordSysDimDefs = (registeredCoordSys && (registeredCoordSys.getDimensionsInfo\r\n                ? registeredCoordSys.getDimensionsInfo()\r\n                : registeredCoordSys.dimensions.slice())) || ['x', 'y'];\r\n        }\r\n        var useEncodeDefaulter = opt.useEncodeDefaulter;\r\n        var dimInfoList = createDimensions(source, {\r\n            coordDimensions: coordSysDimDefs,\r\n            generateCoord: opt.generateCoord,\r\n            encodeDefaulter: isFunction(useEncodeDefaulter)\r\n                ? useEncodeDefaulter\r\n                : useEncodeDefaulter\r\n                    ? curry(makeSeriesEncodeForAxisCoordSys, coordSysDimDefs, seriesModel)\r\n                    : null\r\n        });\r\n        var firstCategoryDimIndex;\r\n        var hasNameEncode;\r\n        coordSysInfo && each(dimInfoList, function (dimInfo, dimIndex) {\r\n            var coordDim = dimInfo.coordDim;\r\n            var categoryAxisModel = coordSysInfo.categoryAxisMap.get(coordDim);\r\n            if (categoryAxisModel) {\r\n                if (firstCategoryDimIndex == null) {\r\n                    firstCategoryDimIndex = dimIndex;\r\n                }\r\n                dimInfo.ordinalMeta = categoryAxisModel.getOrdinalMeta();\r\n            }\r\n            if (dimInfo.otherDims.itemName != null) {\r\n                hasNameEncode = true;\r\n            }\r\n        });\r\n        if (!hasNameEncode && firstCategoryDimIndex != null) {\r\n            dimInfoList[firstCategoryDimIndex].otherDims.itemName = 0;\r\n        }\r\n        var stackCalculationInfo = enableDataStack(seriesModel, dimInfoList);\r\n        var list = new List(dimInfoList, seriesModel);\r\n        list.setCalculationInfo(stackCalculationInfo);\r\n        var dimValueGetter = (firstCategoryDimIndex != null && isNeedCompleteOrdinalData(source))\r\n            ? function (itemOpt, dimName, dataIndex, dimIndex) {\r\n                return dimIndex === firstCategoryDimIndex\r\n                    ? dataIndex\r\n                    : this.defaultDimValueGetter(itemOpt, dimName, dataIndex, dimIndex);\r\n            }\r\n            : null;\r\n        list.hasItemOption = false;\r\n        list.initData(source, null, dimValueGetter);\r\n        return list;\r\n    }\r\n    function isNeedCompleteOrdinalData(source) {\r\n        if (source.sourceFormat === SOURCE_FORMAT_ORIGINAL) {\r\n            var sampleItem = firstDataNotNull(source.data || []);\r\n            return sampleItem != null\r\n                && !isArray(getDataItemValue(sampleItem));\r\n        }\r\n    }\r\n    function firstDataNotNull(data) {\r\n        var i = 0;\r\n        while (i < data.length && data[i] == null) {\r\n            i++;\r\n        }\r\n        return data[i];\r\n    }\n\n    var LineSeriesModel = (function (_super) {\r\n        __extends(LineSeriesModel, _super);\r\n        function LineSeriesModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = LineSeriesModel.type;\r\n            _this.hasSymbolVisual = true;\r\n            _this.legendSymbol = 'line';\r\n            return _this;\r\n        }\r\n        LineSeriesModel.prototype.getInitialData = function (option) {\r\n            if (__DEV__) {\r\n                var coordSys = option.coordinateSystem;\r\n                if (coordSys !== 'polar' && coordSys !== 'cartesian2d') {\r\n                    throw new Error('Line not support coordinateSystem besides cartesian and polar');\r\n                }\r\n            }\r\n            return createListFromArray(this.getSource(), this, {\r\n                useEncodeDefaulter: true\r\n            });\r\n        };\r\n        LineSeriesModel.type = 'series.line';\r\n        LineSeriesModel.dependencies = ['grid', 'polar'];\r\n        LineSeriesModel.defaultOption = {\r\n            zlevel: 0,\r\n            z: 2,\r\n            coordinateSystem: 'cartesian2d',\r\n            legendHoverLink: true,\r\n            clip: true,\r\n            label: {\r\n                position: 'top'\r\n            },\r\n            endLabel: {\r\n                show: false,\r\n                valueAnimation: true,\r\n                distance: 8\r\n            },\r\n            lineStyle: {\r\n                width: 2,\r\n                type: 'solid'\r\n            },\r\n            emphasis: {\r\n                scale: true,\r\n                lineStyle: {\r\n                    width: 'bolder'\r\n                }\r\n            },\r\n            step: false,\r\n            smooth: false,\r\n            smoothMonotone: null,\r\n            symbol: 'emptyCircle',\r\n            symbolSize: 4,\r\n            symbolRotate: null,\r\n            showSymbol: true,\r\n            showAllSymbol: 'auto',\r\n            connectNulls: false,\r\n            sampling: 'none',\r\n            animationEasing: 'linear',\r\n            progressive: 0,\r\n            hoverLayerThreshold: Infinity\r\n        };\r\n        return LineSeriesModel;\r\n    }(SeriesModel));\r\n    SeriesModel.registerClass(LineSeriesModel);\n\n    var Triangle = Path.extend({\r\n        type: 'triangle',\r\n        shape: {\r\n            cx: 0,\r\n            cy: 0,\r\n            width: 0,\r\n            height: 0\r\n        },\r\n        buildPath: function (path, shape) {\r\n            var cx = shape.cx;\r\n            var cy = shape.cy;\r\n            var width = shape.width / 2;\r\n            var height = shape.height / 2;\r\n            path.moveTo(cx, cy - height);\r\n            path.lineTo(cx + width, cy + height);\r\n            path.lineTo(cx - width, cy + height);\r\n            path.closePath();\r\n        }\r\n    });\r\n    var Diamond = Path.extend({\r\n        type: 'diamond',\r\n        shape: {\r\n            cx: 0,\r\n            cy: 0,\r\n            width: 0,\r\n            height: 0\r\n        },\r\n        buildPath: function (path, shape) {\r\n            var cx = shape.cx;\r\n            var cy = shape.cy;\r\n            var width = shape.width / 2;\r\n            var height = shape.height / 2;\r\n            path.moveTo(cx, cy - height);\r\n            path.lineTo(cx + width, cy);\r\n            path.lineTo(cx, cy + height);\r\n            path.lineTo(cx - width, cy);\r\n            path.closePath();\r\n        }\r\n    });\r\n    var Pin = Path.extend({\r\n        type: 'pin',\r\n        shape: {\r\n            x: 0,\r\n            y: 0,\r\n            width: 0,\r\n            height: 0\r\n        },\r\n        buildPath: function (path, shape) {\r\n            var x = shape.x;\r\n            var y = shape.y;\r\n            var w = shape.width / 5 * 3;\r\n            var h = Math.max(w, shape.height);\r\n            var r = w / 2;\r\n            var dy = r * r / (h - r);\r\n            var cy = y - h + r + dy;\r\n            var angle = Math.asin(dy / r);\r\n            var dx = Math.cos(angle) * r;\r\n            var tanX = Math.sin(angle);\r\n            var tanY = Math.cos(angle);\r\n            var cpLen = r * 0.6;\r\n            var cpLen2 = r * 0.7;\r\n            path.moveTo(x - dx, cy + dy);\r\n            path.arc(x, cy, r, Math.PI - angle, Math.PI * 2 + angle);\r\n            path.bezierCurveTo(x + dx - tanX * cpLen, cy + dy + tanY * cpLen, x, y - cpLen2, x, y);\r\n            path.bezierCurveTo(x, y - cpLen2, x - dx + tanX * cpLen, cy + dy + tanY * cpLen, x - dx, cy + dy);\r\n            path.closePath();\r\n        }\r\n    });\r\n    var Arrow = Path.extend({\r\n        type: 'arrow',\r\n        shape: {\r\n            x: 0,\r\n            y: 0,\r\n            width: 0,\r\n            height: 0\r\n        },\r\n        buildPath: function (ctx, shape) {\r\n            var height = shape.height;\r\n            var width = shape.width;\r\n            var x = shape.x;\r\n            var y = shape.y;\r\n            var dx = width / 3 * 2;\r\n            ctx.moveTo(x, y);\r\n            ctx.lineTo(x + dx, y + height);\r\n            ctx.lineTo(x, y + height / 4 * 3);\r\n            ctx.lineTo(x - dx, y + height);\r\n            ctx.lineTo(x, y);\r\n            ctx.closePath();\r\n        }\r\n    });\r\n    var symbolCtors = {\r\n        line: Rect,\r\n        rect: Rect,\r\n        roundRect: Rect,\r\n        square: Rect,\r\n        circle: Circle,\r\n        diamond: Diamond,\r\n        pin: Pin,\r\n        arrow: Arrow,\r\n        triangle: Triangle\r\n    };\r\n    var symbolShapeMakers = {\r\n        line: function (x, y, w, h, shape) {\r\n            var thickness = 2;\r\n            shape.x = x;\r\n            shape.y = y + h / 2 - thickness / 2;\r\n            shape.width = w;\r\n            shape.height = thickness;\r\n        },\r\n        rect: function (x, y, w, h, shape) {\r\n            shape.x = x;\r\n            shape.y = y;\r\n            shape.width = w;\r\n            shape.height = h;\r\n        },\r\n        roundRect: function (x, y, w, h, shape) {\r\n            shape.x = x;\r\n            shape.y = y;\r\n            shape.width = w;\r\n            shape.height = h;\r\n            shape.r = Math.min(w, h) / 4;\r\n        },\r\n        square: function (x, y, w, h, shape) {\r\n            var size = Math.min(w, h);\r\n            shape.x = x;\r\n            shape.y = y;\r\n            shape.width = size;\r\n            shape.height = size;\r\n        },\r\n        circle: function (x, y, w, h, shape) {\r\n            shape.cx = x + w / 2;\r\n            shape.cy = y + h / 2;\r\n            shape.r = Math.min(w, h) / 2;\r\n        },\r\n        diamond: function (x, y, w, h, shape) {\r\n            shape.cx = x + w / 2;\r\n            shape.cy = y + h / 2;\r\n            shape.width = w;\r\n            shape.height = h;\r\n        },\r\n        pin: function (x, y, w, h, shape) {\r\n            shape.x = x + w / 2;\r\n            shape.y = y + h / 2;\r\n            shape.width = w;\r\n            shape.height = h;\r\n        },\r\n        arrow: function (x, y, w, h, shape) {\r\n            shape.x = x + w / 2;\r\n            shape.y = y + h / 2;\r\n            shape.width = w;\r\n            shape.height = h;\r\n        },\r\n        triangle: function (x, y, w, h, shape) {\r\n            shape.cx = x + w / 2;\r\n            shape.cy = y + h / 2;\r\n            shape.width = w;\r\n            shape.height = h;\r\n        }\r\n    };\r\n    var symbolBuildProxies = {};\r\n    each(symbolCtors, function (Ctor, name) {\r\n        symbolBuildProxies[name] = new Ctor();\r\n    });\r\n    var SymbolClz = Path.extend({\r\n        type: 'symbol',\r\n        shape: {\r\n            symbolType: '',\r\n            x: 0,\r\n            y: 0,\r\n            width: 0,\r\n            height: 0\r\n        },\r\n        calculateTextPosition: function (out, config, rect) {\r\n            var res = calculateTextPosition(out, config, rect);\r\n            var shape = this.shape;\r\n            if (shape && shape.symbolType === 'pin' && config.position === 'inside') {\r\n                res.y = rect.y + rect.height * 0.4;\r\n            }\r\n            return res;\r\n        },\r\n        buildPath: function (ctx, shape, inBundle) {\r\n            var symbolType = shape.symbolType;\r\n            if (symbolType !== 'none') {\r\n                var proxySymbol = symbolBuildProxies[symbolType];\r\n                if (!proxySymbol) {\r\n                    symbolType = 'rect';\r\n                    proxySymbol = symbolBuildProxies[symbolType];\r\n                }\r\n                symbolShapeMakers[symbolType](shape.x, shape.y, shape.width, shape.height, proxySymbol.shape);\r\n                proxySymbol.buildPath(ctx, proxySymbol.shape, inBundle);\r\n            }\r\n        }\r\n    });\r\n    function symbolPathSetColor(color, innerColor) {\r\n        if (this.type !== 'image') {\r\n            var symbolStyle = this.style;\r\n            if (this.__isEmptyBrush) {\r\n                symbolStyle.stroke = color;\r\n                symbolStyle.fill = innerColor || '#fff';\r\n                symbolStyle.lineWidth = 2;\r\n            }\r\n            else {\r\n                symbolStyle.fill = color;\r\n            }\r\n            this.markRedraw();\r\n        }\r\n    }\r\n    function createSymbol(symbolType, x, y, w, h, color, keepAspect) {\r\n        var isEmpty = symbolType.indexOf('empty') === 0;\r\n        if (isEmpty) {\r\n            symbolType = symbolType.substr(5, 1).toLowerCase() + symbolType.substr(6);\r\n        }\r\n        var symbolPath;\r\n        if (symbolType.indexOf('image://') === 0) {\r\n            symbolPath = makeImage(symbolType.slice(8), new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\r\n        }\r\n        else if (symbolType.indexOf('path://') === 0) {\r\n            symbolPath = makePath(symbolType.slice(7), {}, new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\r\n        }\r\n        else {\r\n            symbolPath = new SymbolClz({\r\n                shape: {\r\n                    symbolType: symbolType,\r\n                    x: x,\r\n                    y: y,\r\n                    width: w,\r\n                    height: h\r\n                }\r\n            });\r\n        }\r\n        symbolPath.__isEmptyBrush = isEmpty;\r\n        symbolPath.setColor = symbolPathSetColor;\r\n        if (color) {\r\n            symbolPath.setColor(color);\r\n        }\r\n        return symbolPath;\r\n    }\n\n    function getDefaultLabel(data, dataIndex) {\r\n        var labelDims = data.mapDimensionsAll('defaultedLabel');\r\n        var len = labelDims.length;\r\n        if (len === 1) {\r\n            return retrieveRawValue(data, dataIndex, labelDims[0]);\r\n        }\r\n        else if (len) {\r\n            var vals = [];\r\n            for (var i = 0; i < labelDims.length; i++) {\r\n                vals.push(retrieveRawValue(data, dataIndex, labelDims[i]));\r\n            }\r\n            return vals.join(' ');\r\n        }\r\n    }\r\n    function getDefaultInterpolatedLabel(data, interpolatedValue) {\r\n        var labelDims = data.mapDimensionsAll('defaultedLabel');\r\n        if (!isArray(interpolatedValue)) {\r\n            return interpolatedValue + '';\r\n        }\r\n        var vals = [];\r\n        for (var i = 0; i < labelDims.length; i++) {\r\n            var dimInfo = data.getDimensionInfo(labelDims[i]);\r\n            if (dimInfo) {\r\n                vals.push(interpolatedValue[dimInfo.index]);\r\n            }\r\n        }\r\n        return vals.join(' ');\r\n    }\n\n    var Symbol = (function (_super) {\r\n        __extends(Symbol, _super);\r\n        function Symbol(data, idx, seriesScope, opts) {\r\n            var _this = _super.call(this) || this;\r\n            _this.updateData(data, idx, seriesScope, opts);\r\n            return _this;\r\n        }\r\n        Symbol.prototype._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\r\n            this.removeAll();\r\n            var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, null, keepAspect);\r\n            symbolPath.attr({\r\n                z2: 100,\r\n                culling: true,\r\n                scaleX: symbolSize[0] / 2,\r\n                scaleY: symbolSize[1] / 2\r\n            });\r\n            symbolPath.drift = driftSymbol;\r\n            this._symbolType = symbolType;\r\n            this.add(symbolPath);\r\n        };\r\n        Symbol.prototype.stopSymbolAnimation = function (toLastFrame) {\r\n            this.childAt(0).stopAnimation(null, toLastFrame);\r\n        };\r\n        Symbol.prototype.getSymbolPath = function () {\r\n            return this.childAt(0);\r\n        };\r\n        Symbol.prototype.highlight = function () {\r\n            enterEmphasis(this.childAt(0));\r\n        };\r\n        Symbol.prototype.downplay = function () {\r\n            leaveEmphasis(this.childAt(0));\r\n        };\r\n        Symbol.prototype.setZ = function (zlevel, z) {\r\n            var symbolPath = this.childAt(0);\r\n            symbolPath.zlevel = zlevel;\r\n            symbolPath.z = z;\r\n        };\r\n        Symbol.prototype.setDraggable = function (draggable) {\r\n            var symbolPath = this.childAt(0);\r\n            symbolPath.draggable = draggable;\r\n            symbolPath.cursor = draggable ? 'move' : symbolPath.cursor;\r\n        };\r\n        Symbol.prototype.updateData = function (data, idx, seriesScope, opts) {\r\n            this.silent = false;\r\n            var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\r\n            var seriesModel = data.hostModel;\r\n            var symbolSize = Symbol.getSymbolSize(data, idx);\r\n            var isInit = symbolType !== this._symbolType;\r\n            var disableAnimation = opts && opts.disableAnimation;\r\n            if (isInit) {\r\n                var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\r\n                this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\r\n            }\r\n            else {\r\n                var symbolPath = this.childAt(0);\r\n                symbolPath.silent = false;\r\n                var target = {\r\n                    scaleX: symbolSize[0] / 2,\r\n                    scaleY: symbolSize[1] / 2\r\n                };\r\n                disableAnimation ? symbolPath.attr(target)\r\n                    : updateProps(symbolPath, target, seriesModel, idx);\r\n            }\r\n            this._updateCommon(data, idx, symbolSize, seriesScope, opts);\r\n            if (isInit) {\r\n                var symbolPath = this.childAt(0);\r\n                var target = {\r\n                    scaleX: this._sizeX,\r\n                    scaleY: this._sizeY,\r\n                    style: {\r\n                        opacity: symbolPath.style.opacity\r\n                    }\r\n                };\r\n                symbolPath.scaleX = symbolPath.scaleY = 0;\r\n                symbolPath.style.opacity = 0;\r\n                disableAnimation ? symbolPath.attr(target)\r\n                    : initProps(symbolPath, target, seriesModel, idx);\r\n            }\r\n            this._seriesModel = seriesModel;\r\n        };\r\n        Symbol.prototype._updateCommon = function (data, idx, symbolSize, seriesScope, opts) {\r\n            var symbolPath = this.childAt(0);\r\n            var seriesModel = data.hostModel;\r\n            var emphasisItemStyle;\r\n            var blurItemStyle;\r\n            var selectItemStyle;\r\n            var focus;\r\n            var blurScope;\r\n            var symbolOffset;\r\n            var labelStatesModels;\r\n            var hoverScale;\r\n            var cursorStyle;\r\n            if (seriesScope) {\r\n                emphasisItemStyle = seriesScope.emphasisItemStyle;\r\n                blurItemStyle = seriesScope.blurItemStyle;\r\n                selectItemStyle = seriesScope.selectItemStyle;\r\n                focus = seriesScope.focus;\r\n                blurScope = seriesScope.blurScope;\r\n                symbolOffset = seriesScope.symbolOffset;\r\n                labelStatesModels = seriesScope.labelStatesModels;\r\n                hoverScale = seriesScope.hoverScale;\r\n                cursorStyle = seriesScope.cursorStyle;\r\n            }\r\n            if (!seriesScope || data.hasItemOption) {\r\n                var itemModel = (seriesScope && seriesScope.itemModel)\r\n                    ? seriesScope.itemModel : data.getItemModel(idx);\r\n                var emphasisModel = itemModel.getModel('emphasis');\r\n                emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\r\n                selectItemStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\r\n                blurItemStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\r\n                focus = emphasisModel.get('focus');\r\n                blurScope = emphasisModel.get('blurScope');\r\n                symbolOffset = itemModel.getShallow('symbolOffset');\r\n                labelStatesModels = getLabelStatesModels(itemModel);\r\n                hoverScale = emphasisModel.getShallow('scale');\r\n                cursorStyle = itemModel.getShallow('cursor');\r\n            }\r\n            var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\r\n            symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\r\n            if (symbolOffset) {\r\n                symbolPath.x = parsePercent$2(symbolOffset[0], symbolSize[0]);\r\n                symbolPath.y = parsePercent$2(symbolOffset[1], symbolSize[1]);\r\n            }\r\n            cursorStyle && symbolPath.attr('cursor', cursorStyle);\r\n            var symbolStyle = data.getItemVisual(idx, 'style');\r\n            var visualColor = symbolStyle.fill;\r\n            if (symbolPath instanceof ZRImage) {\r\n                var pathStyle = symbolPath.style;\r\n                symbolPath.useStyle(extend({\r\n                    image: pathStyle.image,\r\n                    x: pathStyle.x, y: pathStyle.y,\r\n                    width: pathStyle.width, height: pathStyle.height\r\n                }, symbolStyle));\r\n            }\r\n            else {\r\n                if (symbolPath.__isEmptyBrush) {\r\n                    symbolPath.useStyle(extend({}, symbolStyle));\r\n                }\r\n                else {\r\n                    symbolPath.useStyle(symbolStyle);\r\n                }\r\n                symbolPath.setColor(visualColor, opts && opts.symbolInnerColor);\r\n                symbolPath.style.strokeNoScale = true;\r\n            }\r\n            var liftZ = data.getItemVisual(idx, 'liftZ');\r\n            var z2Origin = this._z2;\r\n            if (liftZ != null) {\r\n                if (z2Origin == null) {\r\n                    this._z2 = symbolPath.z2;\r\n                    symbolPath.z2 += liftZ;\r\n                }\r\n            }\r\n            else if (z2Origin != null) {\r\n                symbolPath.z2 = z2Origin;\r\n                this._z2 = null;\r\n            }\r\n            var useNameLabel = opts && opts.useNameLabel;\r\n            setLabelStyle(symbolPath, labelStatesModels, {\r\n                labelFetcher: seriesModel,\r\n                labelDataIndex: idx,\r\n                defaultText: getLabelDefaultText,\r\n                inheritColor: visualColor\r\n            });\r\n            function getLabelDefaultText(idx) {\r\n                return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\r\n            }\r\n            this._sizeX = symbolSize[0] / 2;\r\n            this._sizeY = symbolSize[1] / 2;\r\n            var emphasisState = symbolPath.ensureState('emphasis');\r\n            emphasisState.style = emphasisItemStyle;\r\n            symbolPath.ensureState('select').style = selectItemStyle;\r\n            symbolPath.ensureState('blur').style = blurItemStyle;\r\n            if (hoverScale) {\r\n                var scaleRatio = Math.max(1.1, 3 / this._sizeY);\r\n                emphasisState.scaleX = this._sizeX * scaleRatio;\r\n                emphasisState.scaleY = this._sizeY * scaleRatio;\r\n            }\r\n            this.setSymbolScale(1);\r\n            enableHoverEmphasis(this, focus, blurScope);\r\n        };\r\n        Symbol.prototype.setSymbolScale = function (scale) {\r\n            this.scaleX = this.scaleY = scale;\r\n        };\r\n        Symbol.prototype.fadeOut = function (cb, opt) {\r\n            var symbolPath = this.childAt(0);\r\n            this.silent = symbolPath.silent = true;\r\n            !(opt && opt.keepLabel) && (symbolPath.removeTextContent());\r\n            removeElement(symbolPath, {\r\n                style: {\r\n                    opacity: 0\r\n                },\r\n                scaleX: 0,\r\n                scaleY: 0\r\n            }, this._seriesModel, getECData(this).dataIndex, cb);\r\n        };\r\n        Symbol.getSymbolSize = function (data, idx) {\r\n            var symbolSize = data.getItemVisual(idx, 'symbolSize');\r\n            return symbolSize instanceof Array\r\n                ? symbolSize.slice()\r\n                : [+symbolSize, +symbolSize];\r\n        };\r\n        return Symbol;\r\n    }(Group));\r\n    function driftSymbol(dx, dy) {\r\n        this.parent.drift(dx, dy);\r\n    }\n\n    function symbolNeedsDraw(data, point, idx, opt) {\r\n        return point && !isNaN(point[0]) && !isNaN(point[1])\r\n            && !(opt.isIgnore && opt.isIgnore(idx))\r\n            && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1]))\r\n            && data.getItemVisual(idx, 'symbol') !== 'none';\r\n    }\r\n    function normalizeUpdateOpt(opt) {\r\n        if (opt != null && !isObject(opt)) {\r\n            opt = { isIgnore: opt };\r\n        }\r\n        return opt || {};\r\n    }\r\n    function makeSeriesScope(data) {\r\n        var seriesModel = data.hostModel;\r\n        var emphasisModel = seriesModel.getModel('emphasis');\r\n        return {\r\n            emphasisItemStyle: emphasisModel.getModel('itemStyle').getItemStyle(),\r\n            blurItemStyle: seriesModel.getModel(['blur', 'itemStyle']).getItemStyle(),\r\n            selectItemStyle: seriesModel.getModel(['select', 'itemStyle']).getItemStyle(),\r\n            focus: emphasisModel.get('focus'),\r\n            blurScope: emphasisModel.get('blurScope'),\r\n            symbolRotate: seriesModel.get('symbolRotate'),\r\n            symbolOffset: seriesModel.get('symbolOffset'),\r\n            hoverScale: emphasisModel.get('scale'),\r\n            labelStatesModels: getLabelStatesModels(seriesModel),\r\n            cursorStyle: seriesModel.get('cursor')\r\n        };\r\n    }\r\n    var SymbolDraw = (function () {\r\n        function SymbolDraw(SymbolCtor) {\r\n            this.group = new Group();\r\n            this._SymbolCtor = SymbolCtor || Symbol;\r\n        }\r\n        SymbolDraw.prototype.updateData = function (data, opt) {\r\n            opt = normalizeUpdateOpt(opt);\r\n            var group = this.group;\r\n            var seriesModel = data.hostModel;\r\n            var oldData = this._data;\r\n            var SymbolCtor = this._SymbolCtor;\r\n            var disableAnimation = opt.disableAnimation;\r\n            var seriesScope = makeSeriesScope(data);\r\n            var symbolUpdateOpt = { disableAnimation: disableAnimation };\r\n            var getSymbolPoint = opt.getSymbolPoint || function (idx) {\r\n                return data.getItemLayout(idx);\r\n            };\r\n            if (!oldData) {\r\n                group.removeAll();\r\n            }\r\n            data.diff(oldData)\r\n                .add(function (newIdx) {\r\n                var point = getSymbolPoint(newIdx);\r\n                if (symbolNeedsDraw(data, point, newIdx, opt)) {\r\n                    var symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\r\n                    symbolEl.setPosition(point);\r\n                    data.setItemGraphicEl(newIdx, symbolEl);\r\n                    group.add(symbolEl);\r\n                }\r\n            })\r\n                .update(function (newIdx, oldIdx) {\r\n                var symbolEl = oldData.getItemGraphicEl(oldIdx);\r\n                var point = getSymbolPoint(newIdx);\r\n                if (!symbolNeedsDraw(data, point, newIdx, opt)) {\r\n                    group.remove(symbolEl);\r\n                    return;\r\n                }\r\n                if (!symbolEl) {\r\n                    symbolEl = new SymbolCtor(data, newIdx);\r\n                    symbolEl.setPosition(point);\r\n                }\r\n                else {\r\n                    symbolEl.updateData(data, newIdx, seriesScope, symbolUpdateOpt);\r\n                    var target = {\r\n                        x: point[0],\r\n                        y: point[1]\r\n                    };\r\n                    disableAnimation\r\n                        ? symbolEl.attr(target)\r\n                        : updateProps(symbolEl, target, seriesModel);\r\n                }\r\n                group.add(symbolEl);\r\n                data.setItemGraphicEl(newIdx, symbolEl);\r\n            })\r\n                .remove(function (oldIdx) {\r\n                var el = oldData.getItemGraphicEl(oldIdx);\r\n                el && el.fadeOut(function () {\r\n                    group.remove(el);\r\n                });\r\n            })\r\n                .execute();\r\n            this._getSymbolPoint = getSymbolPoint;\r\n            this._data = data;\r\n        };\r\n        SymbolDraw.prototype.isPersistent = function () {\r\n            return true;\r\n        };\r\n        SymbolDraw.prototype.updateLayout = function () {\r\n            var _this = this;\r\n            var data = this._data;\r\n            if (data) {\r\n                data.eachItemGraphicEl(function (el, idx) {\r\n                    var point = _this._getSymbolPoint(idx);\r\n                    el.setPosition(point);\r\n                    el.markRedraw();\r\n                });\r\n            }\r\n        };\r\n        SymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\r\n            this._seriesScope = makeSeriesScope(data);\r\n            this._data = null;\r\n            this.group.removeAll();\r\n        };\r\n        SymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\r\n            opt = normalizeUpdateOpt(opt);\r\n            function updateIncrementalAndHover(el) {\r\n                if (!el.isGroup) {\r\n                    el.incremental = true;\r\n                    el.ensureState('emphasis').hoverLayer = true;\r\n                }\r\n            }\r\n            for (var idx = taskParams.start; idx < taskParams.end; idx++) {\r\n                var point = data.getItemLayout(idx);\r\n                if (symbolNeedsDraw(data, point, idx, opt)) {\r\n                    var el = new this._SymbolCtor(data, idx, this._seriesScope);\r\n                    el.traverse(updateIncrementalAndHover);\r\n                    el.setPosition(point);\r\n                    this.group.add(el);\r\n                    data.setItemGraphicEl(idx, el);\r\n                }\r\n            }\r\n        };\r\n        SymbolDraw.prototype.remove = function (enableAnimation) {\r\n            var group = this.group;\r\n            var data = this._data;\r\n            if (data && enableAnimation) {\r\n                data.eachItemGraphicEl(function (el) {\r\n                    el.fadeOut(function () {\r\n                        group.remove(el);\r\n                    });\r\n                });\r\n            }\r\n            else {\r\n                group.removeAll();\r\n            }\r\n        };\r\n        return SymbolDraw;\r\n    }());\n\n    function prepareDataCoordInfo(coordSys, data, valueOrigin) {\r\n        var baseAxis = coordSys.getBaseAxis();\r\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\r\n        var valueStart = getValueStart(valueAxis, valueOrigin);\r\n        var baseAxisDim = baseAxis.dim;\r\n        var valueAxisDim = valueAxis.dim;\r\n        var valueDim = data.mapDimension(valueAxisDim);\r\n        var baseDim = data.mapDimension(baseAxisDim);\r\n        var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\r\n        var dims = map(coordSys.dimensions, function (coordDim) {\r\n            return data.mapDimension(coordDim);\r\n        });\r\n        var stacked = false;\r\n        var stackResultDim = data.getCalculationInfo('stackResultDimension');\r\n        if (isDimensionStacked(data, dims[0])) {\r\n            stacked = true;\r\n            dims[0] = stackResultDim;\r\n        }\r\n        if (isDimensionStacked(data, dims[1])) {\r\n            stacked = true;\r\n            dims[1] = stackResultDim;\r\n        }\r\n        return {\r\n            dataDimsForPoint: dims,\r\n            valueStart: valueStart,\r\n            valueAxisDim: valueAxisDim,\r\n            baseAxisDim: baseAxisDim,\r\n            stacked: !!stacked,\r\n            valueDim: valueDim,\r\n            baseDim: baseDim,\r\n            baseDataOffset: baseDataOffset,\r\n            stackedOverDimension: data.getCalculationInfo('stackedOverDimension')\r\n        };\r\n    }\r\n    function getValueStart(valueAxis, valueOrigin) {\r\n        var valueStart = 0;\r\n        var extent = valueAxis.scale.getExtent();\r\n        if (valueOrigin === 'start') {\r\n            valueStart = extent[0];\r\n        }\r\n        else if (valueOrigin === 'end') {\r\n            valueStart = extent[1];\r\n        }\r\n        else {\r\n            if (extent[0] > 0) {\r\n                valueStart = extent[0];\r\n            }\r\n            else if (extent[1] < 0) {\r\n                valueStart = extent[1];\r\n            }\r\n        }\r\n        return valueStart;\r\n    }\r\n    function getStackedOnPoint(dataCoordInfo, coordSys, data, idx) {\r\n        var value = NaN;\r\n        if (dataCoordInfo.stacked) {\r\n            value = data.get(data.getCalculationInfo('stackedOverDimension'), idx);\r\n        }\r\n        if (isNaN(value)) {\r\n            value = dataCoordInfo.valueStart;\r\n        }\r\n        var baseDataOffset = dataCoordInfo.baseDataOffset;\r\n        var stackedData = [];\r\n        stackedData[baseDataOffset] = data.get(dataCoordInfo.baseDim, idx);\r\n        stackedData[1 - baseDataOffset] = value;\r\n        return coordSys.dataToPoint(stackedData);\r\n    }\n\n    var supportFloat32Array = typeof Float32Array !== 'undefined';\r\n    var Float32ArrayCtor = !supportFloat32Array ? Array : Float32Array;\r\n    function createFloat32Array(arg) {\r\n        if (isArray(arg)) {\r\n            return supportFloat32Array ? new Float32Array(arg) : arg;\r\n        }\r\n        return new Float32ArrayCtor(arg);\r\n    }\n\n    function diffData(oldData, newData) {\r\n        var diffResult = [];\r\n        newData.diff(oldData)\r\n            .add(function (idx) {\r\n            diffResult.push({ cmd: '+', idx: idx });\r\n        })\r\n            .update(function (newIdx, oldIdx) {\r\n            diffResult.push({ cmd: '=', idx: oldIdx, idx1: newIdx });\r\n        })\r\n            .remove(function (idx) {\r\n            diffResult.push({ cmd: '-', idx: idx });\r\n        })\r\n            .execute();\r\n        return diffResult;\r\n    }\r\n    function lineAnimationDiff (oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys, oldValueOrigin, newValueOrigin) {\r\n        var diff = diffData(oldData, newData);\r\n        var currPoints = [];\r\n        var nextPoints = [];\r\n        var currStackedPoints = [];\r\n        var nextStackedPoints = [];\r\n        var status = [];\r\n        var sortedIndices = [];\r\n        var rawIndices = [];\r\n        var newDataOldCoordInfo = prepareDataCoordInfo(oldCoordSys, newData, oldValueOrigin);\r\n        var oldDataNewCoordInfo = prepareDataCoordInfo(newCoordSys, oldData, newValueOrigin);\r\n        var oldPoints = oldData.getLayout('points') || [];\r\n        var newPoints = newData.getLayout('points') || [];\r\n        for (var i = 0; i < diff.length; i++) {\r\n            var diffItem = diff[i];\r\n            var pointAdded = true;\r\n            var oldIdx2 = void 0;\r\n            var newIdx2 = void 0;\r\n            switch (diffItem.cmd) {\r\n                case '=':\r\n                    oldIdx2 = diffItem.idx * 2;\r\n                    newIdx2 = diffItem.idx1 * 2;\r\n                    var currentX = oldPoints[oldIdx2];\r\n                    var currentY = oldPoints[oldIdx2 + 1];\r\n                    var nextX = newPoints[newIdx2];\r\n                    var nextY = newPoints[newIdx2 + 1];\r\n                    if (isNaN(currentX) || isNaN(currentY)) {\r\n                        currentX = nextX;\r\n                        currentY = nextY;\r\n                    }\r\n                    currPoints.push(currentX, currentY);\r\n                    nextPoints.push(nextX, nextY);\r\n                    currStackedPoints.push(oldStackedOnPoints[oldIdx2], oldStackedOnPoints[oldIdx2 + 1]);\r\n                    nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\r\n                    rawIndices.push(newData.getRawIndex(diffItem.idx1));\r\n                    break;\r\n                case '+':\r\n                    var newIdx = diffItem.idx;\r\n                    var newDataDimsForPoint = newDataOldCoordInfo.dataDimsForPoint;\r\n                    var oldPt = oldCoordSys.dataToPoint([\r\n                        newData.get(newDataDimsForPoint[0], newIdx),\r\n                        newData.get(newDataDimsForPoint[1], newIdx)\r\n                    ]);\r\n                    newIdx2 = newIdx * 2;\r\n                    currPoints.push(oldPt[0], oldPt[1]);\r\n                    nextPoints.push(newPoints[newIdx2], newPoints[newIdx2 + 1]);\r\n                    var stackedOnPoint = getStackedOnPoint(newDataOldCoordInfo, oldCoordSys, newData, newIdx);\r\n                    currStackedPoints.push(stackedOnPoint[0], stackedOnPoint[1]);\r\n                    nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\r\n                    rawIndices.push(newData.getRawIndex(newIdx));\r\n                    break;\r\n                case '-':\r\n                    var oldIdx = diffItem.idx;\r\n                    var rawIndex = oldData.getRawIndex(oldIdx);\r\n                    var oldDataDimsForPoint = oldDataNewCoordInfo.dataDimsForPoint;\r\n                    oldIdx2 = oldIdx * 2;\r\n                    if (rawIndex !== oldIdx) {\r\n                        var newPt = newCoordSys.dataToPoint([\r\n                            oldData.get(oldDataDimsForPoint[0], oldIdx),\r\n                            oldData.get(oldDataDimsForPoint[1], oldIdx)\r\n                        ]);\r\n                        var newStackedOnPt = getStackedOnPoint(oldDataNewCoordInfo, newCoordSys, oldData, oldIdx);\r\n                        currPoints.push(oldPoints[oldIdx2], oldPoints[oldIdx2 + 1]);\r\n                        nextPoints.push(newPt[0], newPt[1]);\r\n                        currStackedPoints.push(oldStackedOnPoints[oldIdx2], oldStackedOnPoints[oldIdx2 + 1]);\r\n                        nextStackedPoints.push(newStackedOnPt[0], newStackedOnPt[1]);\r\n                        rawIndices.push(rawIndex);\r\n                    }\r\n                    else {\r\n                        pointAdded = false;\r\n                    }\r\n            }\r\n            if (pointAdded) {\r\n                status.push(diffItem);\r\n                sortedIndices.push(sortedIndices.length);\r\n            }\r\n        }\r\n        sortedIndices.sort(function (a, b) {\r\n            return rawIndices[a] - rawIndices[b];\r\n        });\r\n        var len = currPoints.length;\r\n        var sortedCurrPoints = createFloat32Array(len);\r\n        var sortedNextPoints = createFloat32Array(len);\r\n        var sortedCurrStackedPoints = createFloat32Array(len);\r\n        var sortedNextStackedPoints = createFloat32Array(len);\r\n        var sortedStatus = [];\r\n        for (var i = 0; i < sortedIndices.length; i++) {\r\n            var idx = sortedIndices[i];\r\n            var i2 = i * 2;\r\n            var idx2 = idx * 2;\r\n            sortedCurrPoints[i2] = currPoints[idx2];\r\n            sortedCurrPoints[i2 + 1] = currPoints[idx2 + 1];\r\n            sortedNextPoints[i2] = nextPoints[idx2];\r\n            sortedNextPoints[i2 + 1] = nextPoints[idx2 + 1];\r\n            sortedCurrStackedPoints[i2] = currStackedPoints[idx2];\r\n            sortedCurrStackedPoints[i2 + 1] = currStackedPoints[idx2 + 1];\r\n            sortedNextStackedPoints[i2] = nextStackedPoints[idx2];\r\n            sortedNextStackedPoints[i2 + 1] = nextStackedPoints[idx2 + 1];\r\n            sortedStatus[i] = status[idx];\r\n        }\r\n        return {\r\n            current: sortedCurrPoints,\r\n            next: sortedNextPoints,\r\n            stackedOnCurrent: sortedCurrStackedPoints,\r\n            stackedOnNext: sortedNextStackedPoints,\r\n            status: sortedStatus\r\n        };\r\n    }\n\n    var mathMin$4 = Math.min;\r\n    var mathMax$4 = Math.max;\r\n    function isPointNull(x, y) {\r\n        return isNaN(x) || isNaN(y);\r\n    }\r\n    function drawSegment(ctx, points, start, segLen, allLen, dir, smooth, smoothMonotone, connectNulls) {\r\n        var prevX;\r\n        var prevY;\r\n        var cpx0;\r\n        var cpy0;\r\n        var cpx1;\r\n        var cpy1;\r\n        var idx = start;\r\n        var k = 0;\r\n        for (; k < segLen; k++) {\r\n            var x = points[idx * 2];\r\n            var y = points[idx * 2 + 1];\r\n            if (idx >= allLen || idx < 0) {\r\n                break;\r\n            }\r\n            if (isPointNull(x, y)) {\r\n                if (connectNulls) {\r\n                    idx += dir;\r\n                    continue;\r\n                }\r\n                break;\r\n            }\r\n            if (idx === start) {\r\n                ctx[dir > 0 ? 'moveTo' : 'lineTo'](x, y);\r\n                cpx0 = x;\r\n                cpy0 = y;\r\n            }\r\n            else {\r\n                var dx = x - prevX;\r\n                var dy = y - prevY;\r\n                if ((dx * dx + dy * dy) < 0.5) {\r\n                    idx += dir;\r\n                    continue;\r\n                }\r\n                if (smooth > 0) {\r\n                    var nextIdx = idx + dir;\r\n                    var nextX = points[nextIdx * 2];\r\n                    var nextY = points[nextIdx * 2 + 1];\r\n                    var tmpK = k + 1;\r\n                    if (connectNulls) {\r\n                        while (isPointNull(nextX, nextY) && tmpK < segLen) {\r\n                            tmpK++;\r\n                            nextIdx += dir;\r\n                            nextX = points[nextIdx * 2];\r\n                            nextY = points[nextIdx * 2 + 1];\r\n                        }\r\n                    }\r\n                    var ratioNextSeg = 0.5;\r\n                    var vx = 0;\r\n                    var vy = 0;\r\n                    var nextCpx0 = void 0;\r\n                    var nextCpy0 = void 0;\r\n                    if (tmpK >= segLen || isPointNull(nextX, nextY)) {\r\n                        cpx1 = x;\r\n                        cpy1 = y;\r\n                    }\r\n                    else {\r\n                        vx = nextX - prevX;\r\n                        vy = nextY - prevY;\r\n                        var dx0 = x - prevX;\r\n                        var dx1 = nextX - x;\r\n                        var dy0 = y - prevY;\r\n                        var dy1 = nextY - y;\r\n                        var lenPrevSeg = void 0;\r\n                        var lenNextSeg = void 0;\r\n                        if (smoothMonotone === 'x') {\r\n                            lenPrevSeg = Math.abs(dx0);\r\n                            lenNextSeg = Math.abs(dx1);\r\n                            cpx1 = x - lenPrevSeg * smooth;\r\n                            cpy1 = y;\r\n                            nextCpx0 = x + lenPrevSeg * smooth;\r\n                            nextCpy0 = y;\r\n                        }\r\n                        else if (smoothMonotone === 'y') {\r\n                            lenPrevSeg = Math.abs(dy0);\r\n                            lenNextSeg = Math.abs(dy1);\r\n                            cpx1 = x;\r\n                            cpy1 = y - lenPrevSeg * smooth;\r\n                            nextCpx0 = x;\r\n                            nextCpy0 = y + lenPrevSeg * smooth;\r\n                        }\r\n                        else {\r\n                            lenPrevSeg = Math.sqrt(dx0 * dx0 + dy0 * dy0);\r\n                            lenNextSeg = Math.sqrt(dx1 * dx1 + dy1 * dy1);\r\n                            ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\r\n                            cpx1 = x - vx * smooth * (1 - ratioNextSeg);\r\n                            cpy1 = y - vy * smooth * (1 - ratioNextSeg);\r\n                            nextCpx0 = x + vx * smooth * ratioNextSeg;\r\n                            nextCpy0 = y + vy * smooth * ratioNextSeg;\r\n                            nextCpx0 = mathMin$4(nextCpx0, mathMax$4(nextX, x));\r\n                            nextCpy0 = mathMin$4(nextCpy0, mathMax$4(nextY, y));\r\n                            nextCpx0 = mathMax$4(nextCpx0, mathMin$4(nextX, x));\r\n                            nextCpy0 = mathMax$4(nextCpy0, mathMin$4(nextY, y));\r\n                            vx = nextCpx0 - x;\r\n                            vy = nextCpy0 - y;\r\n                            cpx1 = x - vx * lenPrevSeg / lenNextSeg;\r\n                            cpy1 = y - vy * lenPrevSeg / lenNextSeg;\r\n                            cpx1 = mathMin$4(cpx1, mathMax$4(prevX, x));\r\n                            cpy1 = mathMin$4(cpy1, mathMax$4(prevY, y));\r\n                            cpx1 = mathMax$4(cpx1, mathMin$4(prevX, x));\r\n                            cpy1 = mathMax$4(cpy1, mathMin$4(prevY, y));\r\n                            vx = x - cpx1;\r\n                            vy = y - cpy1;\r\n                            nextCpx0 = x + vx * lenNextSeg / lenPrevSeg;\r\n                            nextCpy0 = y + vy * lenNextSeg / lenPrevSeg;\r\n                        }\r\n                    }\r\n                    ctx.bezierCurveTo(cpx0, cpy0, cpx1, cpy1, x, y);\r\n                    cpx0 = nextCpx0;\r\n                    cpy0 = nextCpy0;\r\n                }\r\n                else {\r\n                    ctx.lineTo(x, y);\r\n                }\r\n            }\r\n            prevX = x;\r\n            prevY = y;\r\n            idx += dir;\r\n        }\r\n        return k;\r\n    }\r\n    var ECPolylineShape = (function () {\r\n        function ECPolylineShape() {\r\n            this.smooth = 0;\r\n            this.smoothConstraint = true;\r\n        }\r\n        return ECPolylineShape;\r\n    }());\r\n    var ECPolyline = (function (_super) {\r\n        __extends(ECPolyline, _super);\r\n        function ECPolyline(opts) {\r\n            var _this = _super.call(this, opts) || this;\r\n            _this.type = 'ec-polyline';\r\n            return _this;\r\n        }\r\n        ECPolyline.prototype.getDefaultStyle = function () {\r\n            return {\r\n                stroke: '#000',\r\n                fill: null\r\n            };\r\n        };\r\n        ECPolyline.prototype.getDefaultShape = function () {\r\n            return new ECPolylineShape();\r\n        };\r\n        ECPolyline.prototype.buildPath = function (ctx, shape) {\r\n            var points = shape.points;\r\n            var i = 0;\r\n            var len = points.length / 2;\r\n            if (shape.connectNulls) {\r\n                for (; len > 0; len--) {\r\n                    if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\r\n                        break;\r\n                    }\r\n                }\r\n                for (; i < len; i++) {\r\n                    if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            while (i < len) {\r\n                i += drawSegment(ctx, points, i, len, len, 1, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\r\n            }\r\n        };\r\n        ECPolyline.prototype.getLastIndexNotNull = function () {\r\n            var points = this.shape.points;\r\n            var len = points.length / 2;\r\n            for (; len > 0; len--) {\r\n                if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\r\n                    break;\r\n                }\r\n            }\r\n            return len - 1;\r\n        };\r\n        ECPolyline.prototype.getPointAtIndex = function (idx) {\r\n            var points = this.shape.points;\r\n            return [points[idx * 2], points[idx * 2 + 1]];\r\n        };\r\n        ECPolyline.prototype.getIndexRange = function (xOrY, dim) {\r\n            var points = this.shape.points;\r\n            var len = points.length / 2;\r\n            var dimIdx = dim === 'x' ? 0 : 1;\r\n            var a;\r\n            var b;\r\n            var prevIndex = 0;\r\n            var nextIndex = -1;\r\n            for (var i = 0; i < len; i++) {\r\n                b = points[i * 2 + dimIdx];\r\n                if (isNaN(b) || isNaN(points[i * 2 + 1 - dimIdx])) {\r\n                    continue;\r\n                }\r\n                if (i === 0) {\r\n                    a = b;\r\n                    continue;\r\n                }\r\n                if (a <= xOrY && b >= xOrY || a >= xOrY && b <= xOrY) {\r\n                    nextIndex = i;\r\n                    break;\r\n                }\r\n                prevIndex = i;\r\n                a = b;\r\n            }\r\n            return {\r\n                range: [prevIndex, nextIndex],\r\n                t: (xOrY - a) / (b - a)\r\n            };\r\n        };\r\n        ECPolyline.prototype.getPointOn = function (xOrY, dim) {\r\n            if (!this.path) {\r\n                this.createPathProxy();\r\n                this.buildPath(this.path, this.shape);\r\n            }\r\n            var path = this.path;\r\n            var data = path.data;\r\n            var CMD = PathProxy.CMD;\r\n            var x0;\r\n            var y0;\r\n            var isDimX = dim === 'x';\r\n            var roots = [];\r\n            for (var i = 0; i < data.length;) {\r\n                var cmd = data[i++];\r\n                var x = void 0;\r\n                var y = void 0;\r\n                var x2 = void 0;\r\n                var y2 = void 0;\r\n                var x3 = void 0;\r\n                var y3 = void 0;\r\n                var t = void 0;\r\n                switch (cmd) {\r\n                    case CMD.M:\r\n                        x0 = data[i++];\r\n                        y0 = data[i++];\r\n                        break;\r\n                    case CMD.L:\r\n                        x = data[i++];\r\n                        y = data[i++];\r\n                        t = isDimX ? (xOrY - x0) / (x - x0)\r\n                            : (xOrY - y0) / (y - y0);\r\n                        if (t <= 1 && t >= 0) {\r\n                            var val = isDimX ? (y - y0) * t + y0\r\n                                : (x - x0) * t + x0;\r\n                            return isDimX ? [xOrY, val] : [val, xOrY];\r\n                        }\r\n                        x0 = x;\r\n                        y0 = y;\r\n                        break;\r\n                    case CMD.C:\r\n                        x = data[i++];\r\n                        y = data[i++];\r\n                        x2 = data[i++];\r\n                        y2 = data[i++];\r\n                        x3 = data[i++];\r\n                        y3 = data[i++];\r\n                        var nRoot = isDimX ? cubicRootAt(x0, x, x2, x3, xOrY, roots)\r\n                            : cubicRootAt(y0, y, y2, y3, xOrY, roots);\r\n                        if (nRoot > 0) {\r\n                            for (var i_1 = 0; i_1 < nRoot; i_1++) {\r\n                                var t_1 = roots[i_1];\r\n                                if (t_1 <= 1 && t_1 >= 0) {\r\n                                    var val = isDimX ? cubicAt(y0, y, y2, y3, t_1)\r\n                                        : cubicAt(x0, x, x2, x3, t_1);\r\n                                    return isDimX ? [xOrY, val] : [val, xOrY];\r\n                                }\r\n                            }\r\n                        }\r\n                        x0 = x3;\r\n                        y0 = y3;\r\n                        break;\r\n                }\r\n            }\r\n        };\r\n        return ECPolyline;\r\n    }(Path));\r\n    var ECPolygonShape = (function (_super) {\r\n        __extends(ECPolygonShape, _super);\r\n        function ECPolygonShape() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return ECPolygonShape;\r\n    }(ECPolylineShape));\r\n    var ECPolygon = (function (_super) {\r\n        __extends(ECPolygon, _super);\r\n        function ECPolygon(opts) {\r\n            var _this = _super.call(this, opts) || this;\r\n            _this.type = 'ec-polygon';\r\n            return _this;\r\n        }\r\n        ECPolygon.prototype.getDefaultShape = function () {\r\n            return new ECPolygonShape();\r\n        };\r\n        ECPolygon.prototype.buildPath = function (ctx, shape) {\r\n            var points = shape.points;\r\n            var stackedOnPoints = shape.stackedOnPoints;\r\n            var i = 0;\r\n            var len = points.length / 2;\r\n            var smoothMonotone = shape.smoothMonotone;\r\n            if (shape.connectNulls) {\r\n                for (; len > 0; len--) {\r\n                    if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\r\n                        break;\r\n                    }\r\n                }\r\n                for (; i < len; i++) {\r\n                    if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            while (i < len) {\r\n                var k = drawSegment(ctx, points, i, len, len, 1, shape.smooth, smoothMonotone, shape.connectNulls);\r\n                drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\r\n                i += k + 1;\r\n                ctx.closePath();\r\n            }\r\n        };\r\n        return ECPolygon;\r\n    }(Path));\n\n    function createGridClipPath(cartesian, hasAnimation, seriesModel, done, during) {\r\n        var rect = cartesian.getArea();\r\n        var x = rect.x;\r\n        var y = rect.y;\r\n        var width = rect.width;\r\n        var height = rect.height;\r\n        var lineWidth = seriesModel.get(['lineStyle', 'width']) || 2;\r\n        x -= lineWidth / 2;\r\n        y -= lineWidth / 2;\r\n        width += lineWidth;\r\n        height += lineWidth;\r\n        x = Math.floor(x);\r\n        width = Math.round(width);\r\n        var clipPath = new Rect({\r\n            shape: {\r\n                x: x,\r\n                y: y,\r\n                width: width,\r\n                height: height\r\n            }\r\n        });\r\n        if (hasAnimation) {\r\n            var baseAxis = cartesian.getBaseAxis();\r\n            var isHorizontal = baseAxis.isHorizontal();\r\n            var isAxisInversed = baseAxis.inverse;\r\n            if (isHorizontal) {\r\n                if (isAxisInversed) {\r\n                    clipPath.shape.x += width;\r\n                }\r\n                clipPath.shape.width = 0;\r\n            }\r\n            else {\r\n                if (!isAxisInversed) {\r\n                    clipPath.shape.y += height;\r\n                }\r\n                clipPath.shape.height = 0;\r\n            }\r\n            var duringCb = typeof during === 'function'\r\n                ? function (percent) {\r\n                    during(percent, clipPath);\r\n                }\r\n                : null;\r\n            initProps(clipPath, {\r\n                shape: {\r\n                    width: width,\r\n                    height: height,\r\n                    x: x,\r\n                    y: y\r\n                }\r\n            }, seriesModel, null, done, duringCb);\r\n        }\r\n        return clipPath;\r\n    }\r\n    function createPolarClipPath(polar, hasAnimation, seriesModel) {\r\n        var sectorArea = polar.getArea();\r\n        var r0 = round$1(sectorArea.r0, 1);\r\n        var r = round$1(sectorArea.r, 1);\r\n        var clipPath = new Sector({\r\n            shape: {\r\n                cx: round$1(polar.cx, 1),\r\n                cy: round$1(polar.cy, 1),\r\n                r0: r0,\r\n                r: r,\r\n                startAngle: sectorArea.startAngle,\r\n                endAngle: sectorArea.endAngle,\r\n                clockwise: sectorArea.clockwise\r\n            }\r\n        });\r\n        if (hasAnimation) {\r\n            var isRadial = polar.getBaseAxis().dim === 'angle';\r\n            if (isRadial) {\r\n                clipPath.shape.endAngle = sectorArea.startAngle;\r\n            }\r\n            else {\r\n                clipPath.shape.r = r0;\r\n            }\r\n            initProps(clipPath, {\r\n                shape: {\r\n                    endAngle: sectorArea.endAngle,\r\n                    r: r\r\n                }\r\n            }, seriesModel);\r\n        }\r\n        return clipPath;\r\n    }\r\n    function createClipPath(coordSys, hasAnimation, seriesModel, done, during) {\r\n        if (!coordSys) {\r\n            return null;\r\n        }\r\n        else if (coordSys.type === 'polar') {\r\n            return createPolarClipPath(coordSys, hasAnimation, seriesModel);\r\n        }\r\n        else if (coordSys.type === 'cartesian2d') {\r\n            return createGridClipPath(coordSys, hasAnimation, seriesModel, done, during);\r\n        }\r\n        return null;\r\n    }\n\n    function isCoordinateSystemType(coordSys, type) {\r\n        return coordSys.type === type;\r\n    }\n\n    function isPointsSame(points1, points2) {\r\n        if (points1.length !== points2.length) {\r\n            return;\r\n        }\r\n        for (var i = 0; i < points1.length; i++) {\r\n            if (points1[i] !== points2[i]) {\r\n                return;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    function bboxFromPoints(points) {\r\n        var minX = Infinity;\r\n        var minY = Infinity;\r\n        var maxX = -Infinity;\r\n        var maxY = -Infinity;\r\n        for (var i = 0; i < points.length;) {\r\n            var x = points[i++];\r\n            var y = points[i++];\r\n            if (!isNaN(x)) {\r\n                minX = Math.min(x, minX);\r\n                maxX = Math.max(x, maxX);\r\n            }\r\n            if (!isNaN(y)) {\r\n                minY = Math.min(y, minY);\r\n                maxY = Math.max(y, maxY);\r\n            }\r\n        }\r\n        return [\r\n            [minX, minY],\r\n            [maxX, maxY]\r\n        ];\r\n    }\r\n    function getBoundingDiff(points1, points2) {\r\n        var _a = bboxFromPoints(points1), min1 = _a[0], max1 = _a[1];\r\n        var _b = bboxFromPoints(points2), min2 = _b[0], max2 = _b[1];\r\n        return Math.max(Math.abs(min1[0] - min2[0]), Math.abs(min1[1] - min2[1]), Math.abs(max1[0] - max2[0]), Math.abs(max1[1] - max2[1]));\r\n    }\r\n    function getSmooth(smooth) {\r\n        return typeof smooth === 'number' ? smooth : (smooth ? 0.5 : 0);\r\n    }\r\n    function getStackedOnPoints(coordSys, data, dataCoordInfo) {\r\n        if (!dataCoordInfo.valueDim) {\r\n            return [];\r\n        }\r\n        var len = data.count();\r\n        var points = createFloat32Array(len * 2);\r\n        for (var idx = 0; idx < len; idx++) {\r\n            var pt = getStackedOnPoint(dataCoordInfo, coordSys, data, idx);\r\n            points[idx * 2] = pt[0];\r\n            points[idx * 2 + 1] = pt[1];\r\n        }\r\n        return points;\r\n    }\r\n    function turnPointsIntoStep(points, coordSys, stepTurnAt) {\r\n        var baseAxis = coordSys.getBaseAxis();\r\n        var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\r\n        var stepPoints = [];\r\n        var i = 0;\r\n        var stepPt = [];\r\n        var pt = [];\r\n        var nextPt = [];\r\n        for (; i < points.length - 2; i += 2) {\r\n            nextPt[0] = points[i + 2];\r\n            nextPt[1] = points[i + 3];\r\n            pt[0] = points[i];\r\n            pt[1] = points[i + 1];\r\n            stepPoints.push(pt[0], pt[1]);\r\n            switch (stepTurnAt) {\r\n                case 'end':\r\n                    stepPt[baseIndex] = nextPt[baseIndex];\r\n                    stepPt[1 - baseIndex] = pt[1 - baseIndex];\r\n                    stepPoints.push(stepPt[0], stepPt[1]);\r\n                    break;\r\n                case 'middle':\r\n                    var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\r\n                    var stepPt2 = [];\r\n                    stepPt[baseIndex] = stepPt2[baseIndex] = middle;\r\n                    stepPt[1 - baseIndex] = pt[1 - baseIndex];\r\n                    stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\r\n                    stepPoints.push(stepPt[0], stepPt[1]);\r\n                    stepPoints.push(stepPt2[0], stepPt[1]);\r\n                    break;\r\n                default:\r\n                    stepPt[baseIndex] = pt[baseIndex];\r\n                    stepPt[1 - baseIndex] = nextPt[1 - baseIndex];\r\n                    stepPoints.push(stepPt[0], stepPt[1]);\r\n            }\r\n        }\r\n        stepPoints.push(points[i++], points[i++]);\r\n        return stepPoints;\r\n    }\r\n    function getVisualGradient(data, coordSys) {\r\n        var visualMetaList = data.getVisual('visualMeta');\r\n        if (!visualMetaList || !visualMetaList.length || !data.count()) {\r\n            return;\r\n        }\r\n        if (coordSys.type !== 'cartesian2d') {\r\n            if (__DEV__) {\r\n                console.warn('Visual map on line style is only supported on cartesian2d.');\r\n            }\r\n            return;\r\n        }\r\n        var coordDim;\r\n        var visualMeta;\r\n        for (var i = visualMetaList.length - 1; i >= 0; i--) {\r\n            var dimIndex = visualMetaList[i].dimension;\r\n            var dimName = data.dimensions[dimIndex];\r\n            var dimInfo = data.getDimensionInfo(dimName);\r\n            coordDim = (dimInfo && dimInfo.coordDim);\r\n            if (coordDim === 'x' || coordDim === 'y') {\r\n                visualMeta = visualMetaList[i];\r\n                break;\r\n            }\r\n        }\r\n        if (!visualMeta) {\r\n            if (__DEV__) {\r\n                console.warn('Visual map on line style only support x or y dimension.');\r\n            }\r\n            return;\r\n        }\r\n        var axis = coordSys.getAxis(coordDim);\r\n        var colorStops = map(visualMeta.stops, function (stop) {\r\n            return {\r\n                offset: 0,\r\n                coord: axis.toGlobalCoord(axis.dataToCoord(stop.value)),\r\n                color: stop.color\r\n            };\r\n        });\r\n        var stopLen = colorStops.length;\r\n        var outerColors = visualMeta.outerColors.slice();\r\n        if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\r\n            colorStops.reverse();\r\n            outerColors.reverse();\r\n        }\r\n        var tinyExtent = 10;\r\n        var minCoord = colorStops[0].coord - tinyExtent;\r\n        var maxCoord = colorStops[stopLen - 1].coord + tinyExtent;\r\n        var coordSpan = maxCoord - minCoord;\r\n        if (coordSpan < 1e-3) {\r\n            return 'transparent';\r\n        }\r\n        each(colorStops, function (stop) {\r\n            stop.offset = (stop.coord - minCoord) / coordSpan;\r\n        });\r\n        colorStops.push({\r\n            offset: stopLen ? colorStops[stopLen - 1].offset : 0.5,\r\n            color: outerColors[1] || 'transparent'\r\n        });\r\n        colorStops.unshift({\r\n            offset: stopLen ? colorStops[0].offset : 0.5,\r\n            color: outerColors[0] || 'transparent'\r\n        });\r\n        var gradient = new LinearGradient(0, 0, 0, 0, colorStops, true);\r\n        gradient[coordDim] = minCoord;\r\n        gradient[coordDim + '2'] = maxCoord;\r\n        return gradient;\r\n    }\r\n    function getIsIgnoreFunc(seriesModel, data, coordSys) {\r\n        var showAllSymbol = seriesModel.get('showAllSymbol');\r\n        var isAuto = showAllSymbol === 'auto';\r\n        if (showAllSymbol && !isAuto) {\r\n            return;\r\n        }\r\n        var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\r\n        if (!categoryAxis) {\r\n            return;\r\n        }\r\n        if (isAuto\r\n            && canShowAllSymbolForCategory(categoryAxis, data)) {\r\n            return;\r\n        }\r\n        var categoryDataDim = data.mapDimension(categoryAxis.dim);\r\n        var labelMap = {};\r\n        each(categoryAxis.getViewLabels(), function (labelItem) {\r\n            labelMap[labelItem.tickValue] = 1;\r\n        });\r\n        return function (dataIndex) {\r\n            return !labelMap.hasOwnProperty(data.get(categoryDataDim, dataIndex));\r\n        };\r\n    }\r\n    function canShowAllSymbolForCategory(categoryAxis, data) {\r\n        var axisExtent = categoryAxis.getExtent();\r\n        var availSize = Math.abs(axisExtent[1] - axisExtent[0]) / categoryAxis.scale.count();\r\n        isNaN(availSize) && (availSize = 0);\r\n        var dataLen = data.count();\r\n        var step = Math.max(1, Math.round(dataLen / 5));\r\n        for (var dataIndex = 0; dataIndex < dataLen; dataIndex += step) {\r\n            if (Symbol.getSymbolSize(data, dataIndex)[categoryAxis.isHorizontal() ? 1 : 0]\r\n                * 1.5 > availSize) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    function createLineClipPath(lineView, coordSys, hasAnimation, seriesModel) {\r\n        if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\r\n            var endLabelModel_1 = seriesModel.getModel('endLabel');\r\n            var showEndLabel = endLabelModel_1.get('show');\r\n            var valueAnimation_1 = endLabelModel_1.get('valueAnimation');\r\n            var data_1 = seriesModel.getData();\r\n            var labelAnimationRecord_1 = { lastFrameIndex: 0 };\r\n            var during = showEndLabel\r\n                ? function (percent, clipRect) {\r\n                    lineView._endLabelOnDuring(percent, clipRect, data_1, labelAnimationRecord_1, valueAnimation_1, endLabelModel_1, coordSys);\r\n                }\r\n                : null;\r\n            var isHorizontal = coordSys.getBaseAxis().isHorizontal();\r\n            var clipPath = createGridClipPath(coordSys, hasAnimation, seriesModel, function () {\r\n                if (lineView._endLabel && labelAnimationRecord_1.originalX != null) {\r\n                    lineView._endLabel.attr({ x: labelAnimationRecord_1.originalX, y: labelAnimationRecord_1.originalY });\r\n                }\r\n            }, during);\r\n            if (!seriesModel.get('clip', true)) {\r\n                var rectShape = clipPath.shape;\r\n                var expandSize = Math.max(rectShape.width, rectShape.height);\r\n                if (isHorizontal) {\r\n                    rectShape.y -= expandSize;\r\n                    rectShape.height += expandSize * 2;\r\n                }\r\n                else {\r\n                    rectShape.x -= expandSize;\r\n                    rectShape.width += expandSize * 2;\r\n                }\r\n            }\r\n            if (during) {\r\n                during(1, clipPath);\r\n            }\r\n            return clipPath;\r\n        }\r\n        else {\r\n            if (__DEV__) {\r\n                if (seriesModel.get(['endLabel', 'show'])) {\r\n                    console.warn('endLabel is not supported for lines in polar systems.');\r\n                }\r\n            }\r\n            return createPolarClipPath(coordSys, hasAnimation, seriesModel);\r\n        }\r\n    }\r\n    function getEndLabelStateSpecified(endLabelModel, coordSys) {\r\n        var baseAxis = coordSys.getBaseAxis();\r\n        var isHorizontal = baseAxis.isHorizontal();\r\n        var isBaseInversed = baseAxis.inverse;\r\n        var align = isHorizontal\r\n            ? isBaseInversed ? 'right' : 'left'\r\n            : 'center';\r\n        var verticalAlign = isHorizontal\r\n            ? 'middle'\r\n            : (isBaseInversed ? 'top' : 'bottom');\r\n        return {\r\n            normal: {\r\n                align: endLabelModel.get('align') || align,\r\n                verticalAlign: endLabelModel.get('verticalAlign') || verticalAlign,\r\n                padding: endLabelModel.get('distance') || 0\r\n            }\r\n        };\r\n    }\r\n    var LineView = (function (_super) {\r\n        __extends(LineView, _super);\r\n        function LineView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        LineView.prototype.init = function () {\r\n            var lineGroup = new Group();\r\n            var symbolDraw = new SymbolDraw();\r\n            this.group.add(symbolDraw.group);\r\n            this._symbolDraw = symbolDraw;\r\n            this._lineGroup = lineGroup;\r\n        };\r\n        LineView.prototype.render = function (seriesModel, ecModel, api) {\r\n            var _this = this;\r\n            var coordSys = seriesModel.coordinateSystem;\r\n            var group = this.group;\r\n            var data = seriesModel.getData();\r\n            var lineStyleModel = seriesModel.getModel('lineStyle');\r\n            var areaStyleModel = seriesModel.getModel('areaStyle');\r\n            var points = data.getLayout('points') || [];\r\n            var isCoordSysPolar = coordSys.type === 'polar';\r\n            var prevCoordSys = this._coordSys;\r\n            var symbolDraw = this._symbolDraw;\r\n            var polyline = this._polyline;\r\n            var polygon = this._polygon;\r\n            var lineGroup = this._lineGroup;\r\n            var hasAnimation = seriesModel.get('animation');\r\n            var isAreaChart = !areaStyleModel.isEmpty();\r\n            var valueOrigin = areaStyleModel.get('origin');\r\n            var dataCoordInfo = prepareDataCoordInfo(coordSys, data, valueOrigin);\r\n            var stackedOnPoints = isAreaChart && getStackedOnPoints(coordSys, data, dataCoordInfo);\r\n            var showSymbol = seriesModel.get('showSymbol');\r\n            var isIgnoreFunc = showSymbol && !isCoordSysPolar\r\n                && getIsIgnoreFunc(seriesModel, data, coordSys);\r\n            var oldData = this._data;\r\n            oldData && oldData.eachItemGraphicEl(function (el, idx) {\r\n                if (el.__temp) {\r\n                    group.remove(el);\r\n                    oldData.setItemGraphicEl(idx, null);\r\n                }\r\n            });\r\n            if (!showSymbol) {\r\n                symbolDraw.remove();\r\n            }\r\n            group.add(lineGroup);\r\n            var step = !isCoordSysPolar ? seriesModel.get('step') : false;\r\n            var clipShapeForSymbol;\r\n            if (coordSys && coordSys.getArea && seriesModel.get('clip', true)) {\r\n                clipShapeForSymbol = coordSys.getArea();\r\n                if (clipShapeForSymbol.width != null) {\r\n                    clipShapeForSymbol.x -= 0.1;\r\n                    clipShapeForSymbol.y -= 0.1;\r\n                    clipShapeForSymbol.width += 0.2;\r\n                    clipShapeForSymbol.height += 0.2;\r\n                }\r\n                else if (clipShapeForSymbol.r0) {\r\n                    clipShapeForSymbol.r0 -= 0.5;\r\n                    clipShapeForSymbol.r += 0.5;\r\n                }\r\n            }\r\n            this._clipShapeForSymbol = clipShapeForSymbol;\r\n            if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\r\n                showSymbol && symbolDraw.updateData(data, {\r\n                    isIgnore: isIgnoreFunc,\r\n                    clipShape: clipShapeForSymbol,\r\n                    disableAnimation: true,\r\n                    getSymbolPoint: function (idx) {\r\n                        return [points[idx * 2], points[idx * 2 + 1]];\r\n                    }\r\n                });\r\n                this._initSymbolLabelAnimation(data, coordSys, clipShapeForSymbol);\r\n                if (step) {\r\n                    points = turnPointsIntoStep(points, coordSys, step);\r\n                    if (stackedOnPoints) {\r\n                        stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\r\n                    }\r\n                }\r\n                polyline = this._newPolyline(points);\r\n                if (isAreaChart) {\r\n                    polygon = this._newPolygon(points, stackedOnPoints);\r\n                }\r\n                if (!isCoordSysPolar) {\r\n                    this._initOrUpdateEndLabel(seriesModel, coordSys);\r\n                }\r\n                lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\r\n            }\r\n            else {\r\n                if (isAreaChart && !polygon) {\r\n                    polygon = this._newPolygon(points, stackedOnPoints);\r\n                }\r\n                else if (polygon && !isAreaChart) {\r\n                    lineGroup.remove(polygon);\r\n                    polygon = this._polygon = null;\r\n                }\r\n                if (!isCoordSysPolar) {\r\n                    this._initOrUpdateEndLabel(seriesModel, coordSys);\r\n                }\r\n                lineGroup.setClipPath(createLineClipPath(this, coordSys, false, seriesModel));\r\n                showSymbol && symbolDraw.updateData(data, {\r\n                    isIgnore: isIgnoreFunc,\r\n                    clipShape: clipShapeForSymbol,\r\n                    disableAnimation: true,\r\n                    getSymbolPoint: function (idx) {\r\n                        return [points[idx * 2], points[idx * 2 + 1]];\r\n                    }\r\n                });\r\n                if (!isPointsSame(this._stackedOnPoints, stackedOnPoints)\r\n                    || !isPointsSame(this._points, points)) {\r\n                    if (hasAnimation) {\r\n                        this._doUpdateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin);\r\n                    }\r\n                    else {\r\n                        if (step) {\r\n                            points = turnPointsIntoStep(points, coordSys, step);\r\n                            if (stackedOnPoints) {\r\n                                stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\r\n                            }\r\n                        }\r\n                        polyline.setShape({\r\n                            points: points\r\n                        });\r\n                        polygon && polygon.setShape({\r\n                            points: points,\r\n                            stackedOnPoints: stackedOnPoints\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            var visualColor = getVisualGradient(data, coordSys)\r\n                || data.getVisual('style')[data.getVisual('drawType')];\r\n            var focus = seriesModel.get(['emphasis', 'focus']);\r\n            var blurScope = seriesModel.get(['emphasis', 'blurScope']);\r\n            polyline.useStyle(defaults(lineStyleModel.getLineStyle(), {\r\n                fill: 'none',\r\n                stroke: visualColor,\r\n                lineJoin: 'bevel'\r\n            }));\r\n            setStatesStylesFromModel(polyline, seriesModel, 'lineStyle');\r\n            var shouldBolderOnEmphasis = seriesModel.get(['emphasis', 'lineStyle', 'width']) === 'bolder';\r\n            if (shouldBolderOnEmphasis) {\r\n                var emphasisLineStyle = polyline.getState('emphasis').style;\r\n                emphasisLineStyle.lineWidth = polyline.style.lineWidth + 1;\r\n            }\r\n            getECData(polyline).seriesIndex = seriesModel.seriesIndex;\r\n            enableHoverEmphasis(polyline, focus, blurScope);\r\n            var smooth = getSmooth(seriesModel.get('smooth'));\r\n            var smoothMonotone = seriesModel.get('smoothMonotone');\r\n            var connectNulls = seriesModel.get('connectNulls');\r\n            polyline.setShape({\r\n                smooth: smooth,\r\n                smoothMonotone: smoothMonotone,\r\n                connectNulls: connectNulls\r\n            });\r\n            if (polygon) {\r\n                var stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\r\n                var stackedOnSmooth = 0;\r\n                polygon.useStyle(defaults(areaStyleModel.getAreaStyle(), {\r\n                    fill: visualColor,\r\n                    opacity: 0.7,\r\n                    lineJoin: 'bevel'\r\n                }));\r\n                if (stackedOnSeries) {\r\n                    stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\r\n                }\r\n                polygon.setShape({\r\n                    smooth: smooth,\r\n                    stackedOnSmooth: stackedOnSmooth,\r\n                    smoothMonotone: smoothMonotone,\r\n                    connectNulls: connectNulls\r\n                });\r\n                setStatesStylesFromModel(polygon, seriesModel, 'areaStyle');\r\n                getECData(polygon).seriesIndex = seriesModel.seriesIndex;\r\n                enableHoverEmphasis(polygon, focus, blurScope);\r\n            }\r\n            var changePolyState = function (toState) {\r\n                _this._changePolyState(toState);\r\n            };\r\n            data.eachItemGraphicEl(function (el) {\r\n                el && (el.onHoverStateChange = changePolyState);\r\n            });\r\n            this._polyline.onHoverStateChange = changePolyState;\r\n            this._data = data;\r\n            this._coordSys = coordSys;\r\n            this._stackedOnPoints = stackedOnPoints;\r\n            this._points = points;\r\n            this._step = step;\r\n            this._valueOrigin = valueOrigin;\r\n        };\r\n        LineView.prototype.dispose = function () { };\r\n        LineView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\r\n            var data = seriesModel.getData();\r\n            var dataIndex = queryDataIndex(data, payload);\r\n            this._changePolyState('emphasis');\r\n            if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\r\n                var points = data.getLayout('points');\r\n                var symbol = data.getItemGraphicEl(dataIndex);\r\n                if (!symbol) {\r\n                    var x = points[dataIndex * 2];\r\n                    var y = points[dataIndex * 2 + 1];\r\n                    if (isNaN(x) || isNaN(y)) {\r\n                        return;\r\n                    }\r\n                    if (this._clipShapeForSymbol && !this._clipShapeForSymbol.contain(x, y)) {\r\n                        return;\r\n                    }\r\n                    symbol = new Symbol(data, dataIndex);\r\n                    symbol.x = x;\r\n                    symbol.y = y;\r\n                    symbol.setZ(seriesModel.get('zlevel'), seriesModel.get('z'));\r\n                    symbol.__temp = true;\r\n                    data.setItemGraphicEl(dataIndex, symbol);\r\n                    symbol.stopSymbolAnimation(true);\r\n                    this.group.add(symbol);\r\n                }\r\n                symbol.highlight();\r\n            }\r\n            else {\r\n                ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\r\n            }\r\n        };\r\n        LineView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\r\n            var data = seriesModel.getData();\r\n            var dataIndex = queryDataIndex(data, payload);\r\n            this._changePolyState('normal');\r\n            if (dataIndex != null && dataIndex >= 0) {\r\n                var symbol = data.getItemGraphicEl(dataIndex);\r\n                if (symbol) {\r\n                    if (symbol.__temp) {\r\n                        data.setItemGraphicEl(dataIndex, null);\r\n                        this.group.remove(symbol);\r\n                    }\r\n                    else {\r\n                        symbol.downplay();\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\r\n            }\r\n        };\r\n        LineView.prototype._changePolyState = function (toState) {\r\n            var polygon = this._polygon;\r\n            setStatesFlag(this._polyline, toState);\r\n            polygon && setStatesFlag(polygon, toState);\r\n        };\r\n        LineView.prototype._newPolyline = function (points) {\r\n            var polyline = this._polyline;\r\n            if (polyline) {\r\n                this._lineGroup.remove(polyline);\r\n            }\r\n            polyline = new ECPolyline({\r\n                shape: {\r\n                    points: points\r\n                },\r\n                segmentIgnoreThreshold: 2,\r\n                z2: 10\r\n            });\r\n            this._lineGroup.add(polyline);\r\n            this._polyline = polyline;\r\n            return polyline;\r\n        };\r\n        LineView.prototype._newPolygon = function (points, stackedOnPoints) {\r\n            var polygon = this._polygon;\r\n            if (polygon) {\r\n                this._lineGroup.remove(polygon);\r\n            }\r\n            polygon = new ECPolygon({\r\n                shape: {\r\n                    points: points,\r\n                    stackedOnPoints: stackedOnPoints\r\n                },\r\n                segmentIgnoreThreshold: 2\r\n            });\r\n            this._lineGroup.add(polygon);\r\n            this._polygon = polygon;\r\n            return polygon;\r\n        };\r\n        LineView.prototype._initSymbolLabelAnimation = function (data, coordSys, clipShape) {\r\n            var isHorizontalOrRadial;\r\n            var isCoordSysPolar;\r\n            var baseAxis = coordSys.getBaseAxis();\r\n            var isAxisInverse = baseAxis.inverse;\r\n            if (coordSys.type === 'cartesian2d') {\r\n                isHorizontalOrRadial = baseAxis.isHorizontal();\r\n                isCoordSysPolar = false;\r\n            }\r\n            else if (coordSys.type === 'polar') {\r\n                isHorizontalOrRadial = baseAxis.dim === 'angle';\r\n                isCoordSysPolar = true;\r\n            }\r\n            var seriesModel = data.hostModel;\r\n            var seriesDuration = seriesModel.get('animationDuration');\r\n            if (typeof seriesDuration === 'function') {\r\n                seriesDuration = seriesDuration(null);\r\n            }\r\n            var seriesDalay = seriesModel.get('animationDelay') || 0;\r\n            var seriesDalayValue = typeof seriesDalay === 'function'\r\n                ? seriesDalay(null)\r\n                : seriesDalay;\r\n            data.eachItemGraphicEl(function (symbol, idx) {\r\n                var el = symbol;\r\n                if (el) {\r\n                    var point = [symbol.x, symbol.y];\r\n                    var start = void 0;\r\n                    var end = void 0;\r\n                    var current = void 0;\r\n                    if (isCoordSysPolar) {\r\n                        var polarClip = clipShape;\r\n                        var coord = coordSys.pointToCoord(point);\r\n                        if (isHorizontalOrRadial) {\r\n                            start = polarClip.startAngle;\r\n                            end = polarClip.endAngle;\r\n                            current = -coord[1] / 180 * Math.PI;\r\n                        }\r\n                        else {\r\n                            start = polarClip.r0;\r\n                            end = polarClip.r;\r\n                            current = coord[0];\r\n                        }\r\n                    }\r\n                    else {\r\n                        var gridClip = clipShape;\r\n                        if (isHorizontalOrRadial) {\r\n                            start = gridClip.x;\r\n                            end = gridClip.x + gridClip.width;\r\n                            current = symbol.x;\r\n                        }\r\n                        else {\r\n                            start = gridClip.y + gridClip.height;\r\n                            end = gridClip.y;\r\n                            current = symbol.y;\r\n                        }\r\n                    }\r\n                    var ratio = end === start ? 0 : (current - start) / (end - start);\r\n                    if (isAxisInverse) {\r\n                        ratio = 1 - ratio;\r\n                    }\r\n                    var delay = typeof seriesDalay === 'function' ? seriesDalay(idx)\r\n                        : (seriesDuration * ratio) + seriesDalayValue;\r\n                    el.animateFrom({\r\n                        scaleX: 0,\r\n                        scaleY: 0\r\n                    }, {\r\n                        duration: 200,\r\n                        delay: delay\r\n                    });\r\n                    var symbolPath = el.getSymbolPath();\r\n                    var text = symbolPath.getTextContent();\r\n                    if (text) {\r\n                        text.animateFrom({\r\n                            style: {\r\n                                opacity: 0\r\n                            }\r\n                        }, {\r\n                            duration: 300,\r\n                            delay: delay\r\n                        });\r\n                    }\r\n                    symbolPath.disableLabelAnimation = true;\r\n                }\r\n            });\r\n        };\r\n        LineView.prototype._initOrUpdateEndLabel = function (seriesModel, coordSys) {\r\n            var endLabelModel = seriesModel.getModel('endLabel');\r\n            if (endLabelModel.get('show')) {\r\n                var data_2 = seriesModel.getData();\r\n                var polyline = this._polyline;\r\n                var endLabel = this._endLabel;\r\n                if (!endLabel) {\r\n                    endLabel = this._endLabel = new ZRText({\r\n                        z2: 200\r\n                    });\r\n                    endLabel.ignoreClip = true;\r\n                    polyline.setTextContent(this._endLabel);\r\n                    polyline.disableLabelAnimation = true;\r\n                }\r\n                var dataIndex = this._polyline.getLastIndexNotNull();\r\n                if (dataIndex >= 0) {\r\n                    setLabelStyle(endLabel, getLabelStatesModels(seriesModel, 'endLabel'), {\r\n                        labelFetcher: seriesModel,\r\n                        labelDataIndex: dataIndex,\r\n                        defaultText: function (dataIndex, opt, overrideValue) {\r\n                            return overrideValue ? getDefaultInterpolatedLabel(data_2, overrideValue)\r\n                                : getDefaultLabel(data_2, dataIndex);\r\n                        },\r\n                        enableTextSetter: true\r\n                    }, getEndLabelStateSpecified(endLabelModel, coordSys));\r\n                }\r\n            }\r\n            else if (this._endLabel) {\r\n                this._polyline.removeTextContent();\r\n                this._endLabel = null;\r\n            }\r\n        };\r\n        LineView.prototype._endLabelOnDuring = function (percent, clipRect, data, animationRecord, valueAnimation, endLabelModel, coordSys) {\r\n            var endLabel = this._endLabel;\r\n            var polyline = this._polyline;\r\n            if (endLabel) {\r\n                if (percent < 1 && animationRecord.originalX == null) {\r\n                    animationRecord.originalX = endLabel.x;\r\n                    animationRecord.originalY = endLabel.y;\r\n                }\r\n                var seriesModel = data.hostModel;\r\n                var connectNulls = seriesModel.get('connectNulls');\r\n                var precision = endLabelModel.get('precision');\r\n                var baseAxis = coordSys.getBaseAxis();\r\n                var isHorizontal = baseAxis.isHorizontal();\r\n                var isBaseInversed = baseAxis.inverse;\r\n                var clipShape = clipRect.shape;\r\n                var xOrY = isBaseInversed\r\n                    ? isHorizontal ? clipShape.x : (clipShape.y + clipShape.height)\r\n                    : isHorizontal ? (clipShape.x + clipShape.width) : clipShape.y;\r\n                var dim = isHorizontal ? 'x' : 'y';\r\n                var dataIndexRange = polyline.getIndexRange(xOrY, dim);\r\n                var indices = dataIndexRange.range;\r\n                var diff = indices[1] - indices[0];\r\n                var value = void 0;\r\n                if (diff >= 1) {\r\n                    if (diff > 1 && !connectNulls) {\r\n                        var pt = polyline.getPointAtIndex(indices[0]);\r\n                        endLabel.attr({ x: pt[0], y: pt[1] });\r\n                        valueAnimation && (value = seriesModel.getRawValue(indices[0]));\r\n                    }\r\n                    else {\r\n                        var pt = polyline.getPointOn(xOrY, dim);\r\n                        pt && endLabel.attr({ x: pt[0], y: pt[1] });\r\n                        var startValue = seriesModel.getRawValue(indices[0]);\r\n                        var endValue = seriesModel.getRawValue(indices[1]);\r\n                        valueAnimation && (value = interpolateRawValues(data, precision, startValue, endValue, dataIndexRange.t));\r\n                    }\r\n                    animationRecord.lastFrameIndex = indices[0];\r\n                }\r\n                else {\r\n                    var idx = (percent === 1 || animationRecord.lastFrameIndex > 0) ? indices[0] : 0;\r\n                    var pt = polyline.getPointAtIndex(idx);\r\n                    valueAnimation && (value = seriesModel.getRawValue(idx));\r\n                    endLabel.attr({ x: pt[0], y: pt[1] });\r\n                }\r\n                if (valueAnimation) {\r\n                    labelInner(endLabel).setLabelText(value);\r\n                }\r\n            }\r\n        };\r\n        LineView.prototype._doUpdateAnimation = function (data, stackedOnPoints, coordSys, api, step, valueOrigin) {\r\n            var polyline = this._polyline;\r\n            var polygon = this._polygon;\r\n            var seriesModel = data.hostModel;\r\n            var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys, this._valueOrigin, valueOrigin);\r\n            var current = diff.current;\r\n            var stackedOnCurrent = diff.stackedOnCurrent;\r\n            var next = diff.next;\r\n            var stackedOnNext = diff.stackedOnNext;\r\n            if (step) {\r\n                current = turnPointsIntoStep(diff.current, coordSys, step);\r\n                stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, coordSys, step);\r\n                next = turnPointsIntoStep(diff.next, coordSys, step);\r\n                stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, coordSys, step);\r\n            }\r\n            if (getBoundingDiff(current, next) > 3000\r\n                || (polygon && getBoundingDiff(stackedOnCurrent, stackedOnNext) > 3000)) {\r\n                polyline.setShape({\r\n                    points: next\r\n                });\r\n                if (polygon) {\r\n                    polygon.setShape({\r\n                        points: next,\r\n                        stackedOnPoints: stackedOnNext\r\n                    });\r\n                }\r\n                return;\r\n            }\r\n            polyline.shape.__points = diff.current;\r\n            polyline.shape.points = current;\r\n            var target = {\r\n                shape: {\r\n                    points: next\r\n                }\r\n            };\r\n            if (diff.current !== current) {\r\n                target.shape.__points = diff.next;\r\n            }\r\n            polyline.stopAnimation();\r\n            updateProps(polyline, target, seriesModel);\r\n            if (polygon) {\r\n                polygon.setShape({\r\n                    points: current,\r\n                    stackedOnPoints: stackedOnCurrent\r\n                });\r\n                polygon.stopAnimation();\r\n                updateProps(polygon, {\r\n                    shape: {\r\n                        stackedOnPoints: stackedOnNext\r\n                    }\r\n                }, seriesModel);\r\n                if (polyline.shape.points !== polygon.shape.points) {\r\n                    polygon.shape.points = polyline.shape.points;\r\n                }\r\n            }\r\n            var updatedDataInfo = [];\r\n            var diffStatus = diff.status;\r\n            for (var i = 0; i < diffStatus.length; i++) {\r\n                var cmd = diffStatus[i].cmd;\r\n                if (cmd === '=') {\r\n                    var el = data.getItemGraphicEl(diffStatus[i].idx1);\r\n                    if (el) {\r\n                        updatedDataInfo.push({\r\n                            el: el,\r\n                            ptIdx: i\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            if (polyline.animators && polyline.animators.length) {\r\n                polyline.animators[0].during(function () {\r\n                    polygon && polygon.dirtyShape();\r\n                    var points = polyline.shape.__points;\r\n                    for (var i = 0; i < updatedDataInfo.length; i++) {\r\n                        var el = updatedDataInfo[i].el;\r\n                        var offset = updatedDataInfo[i].ptIdx * 2;\r\n                        el.x = points[offset];\r\n                        el.y = points[offset + 1];\r\n                        el.markRedraw();\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        LineView.prototype.remove = function (ecModel) {\r\n            var group = this.group;\r\n            var oldData = this._data;\r\n            this._lineGroup.removeAll();\r\n            this._symbolDraw.remove(true);\r\n            oldData && oldData.eachItemGraphicEl(function (el, idx) {\r\n                if (el.__temp) {\r\n                    group.remove(el);\r\n                    oldData.setItemGraphicEl(idx, null);\r\n                }\r\n            });\r\n            this._polyline =\r\n                this._polygon =\r\n                    this._coordSys =\r\n                        this._points =\r\n                            this._stackedOnPoints =\r\n                                this._endLabel =\r\n                                    this._data = null;\r\n        };\r\n        LineView.type = 'line';\r\n        return LineView;\r\n    }(ChartView));\r\n    ChartView.registerClass(LineView);\n\n    function layoutPoints (seriesType, forceStoreInTypedArray) {\r\n        return {\r\n            seriesType: seriesType,\r\n            plan: createRenderPlanner(),\r\n            reset: function (seriesModel) {\r\n                var data = seriesModel.getData();\r\n                var coordSys = seriesModel.coordinateSystem;\r\n                var pipelineContext = seriesModel.pipelineContext;\r\n                var useTypedArray = forceStoreInTypedArray || pipelineContext.large;\r\n                if (!coordSys) {\r\n                    return;\r\n                }\r\n                var dims = map(coordSys.dimensions, function (dim) {\r\n                    return data.mapDimension(dim);\r\n                }).slice(0, 2);\r\n                var dimLen = dims.length;\r\n                var stackResultDim = data.getCalculationInfo('stackResultDimension');\r\n                if (isDimensionStacked(data, dims[0])) {\r\n                    dims[0] = stackResultDim;\r\n                }\r\n                if (isDimensionStacked(data, dims[1])) {\r\n                    dims[1] = stackResultDim;\r\n                }\r\n                var dimInfo0 = data.getDimensionInfo(dims[0]);\r\n                var dimInfo1 = data.getDimensionInfo(dims[1]);\r\n                var dimIdx0 = dimInfo0 && dimInfo0.index;\r\n                var dimIdx1 = dimInfo1 && dimInfo1.index;\r\n                return dimLen && {\r\n                    progress: function (params, data) {\r\n                        var segCount = params.end - params.start;\r\n                        var points = useTypedArray && createFloat32Array(segCount * dimLen);\r\n                        var tmpIn = [];\r\n                        var tmpOut = [];\r\n                        for (var i = params.start, offset = 0; i < params.end; i++) {\r\n                            var point = void 0;\r\n                            if (dimLen === 1) {\r\n                                var x = data.getByDimIdx(dimIdx0, i);\r\n                                point = coordSys.dataToPoint(x, null, tmpOut);\r\n                            }\r\n                            else {\r\n                                tmpIn[0] = data.getByDimIdx(dimIdx0, i);\r\n                                tmpIn[1] = data.getByDimIdx(dimIdx1, i);\r\n                                point = coordSys.dataToPoint(tmpIn, null, tmpOut);\r\n                            }\r\n                            if (useTypedArray) {\r\n                                points[offset++] = point[0];\r\n                                points[offset++] = point[1];\r\n                            }\r\n                            else {\r\n                                data.setItemLayout(i, point.slice());\r\n                            }\r\n                        }\r\n                        useTypedArray && data.setLayout('points', points);\r\n                    }\r\n                };\r\n            }\r\n        };\r\n    }\n\n    var samplers = {\r\n        average: function (frame) {\r\n            var sum = 0;\r\n            var count = 0;\r\n            for (var i = 0; i < frame.length; i++) {\r\n                if (!isNaN(frame[i])) {\r\n                    sum += frame[i];\r\n                    count++;\r\n                }\r\n            }\r\n            return count === 0 ? NaN : sum / count;\r\n        },\r\n        sum: function (frame) {\r\n            var sum = 0;\r\n            for (var i = 0; i < frame.length; i++) {\r\n                sum += frame[i] || 0;\r\n            }\r\n            return sum;\r\n        },\r\n        max: function (frame) {\r\n            var max = -Infinity;\r\n            for (var i = 0; i < frame.length; i++) {\r\n                frame[i] > max && (max = frame[i]);\r\n            }\r\n            return isFinite(max) ? max : NaN;\r\n        },\r\n        min: function (frame) {\r\n            var min = Infinity;\r\n            for (var i = 0; i < frame.length; i++) {\r\n                frame[i] < min && (min = frame[i]);\r\n            }\r\n            return isFinite(min) ? min : NaN;\r\n        },\r\n        nearest: function (frame) {\r\n            return frame[0];\r\n        }\r\n    };\r\n    var indexSampler = function (frame) {\r\n        return Math.round(frame.length / 2);\r\n    };\r\n    function dataSample (seriesType) {\r\n        return {\r\n            seriesType: seriesType,\r\n            reset: function (seriesModel, ecModel, api) {\r\n                var data = seriesModel.getData();\r\n                var sampling = seriesModel.get('sampling');\r\n                var coordSys = seriesModel.coordinateSystem;\r\n                var count = data.count();\r\n                if (count > 10 && coordSys.type === 'cartesian2d' && sampling) {\r\n                    var baseAxis = coordSys.getBaseAxis();\r\n                    var valueAxis = coordSys.getOtherAxis(baseAxis);\r\n                    var extent = baseAxis.getExtent();\r\n                    var dpr = api.getDevicePixelRatio();\r\n                    var size = Math.abs(extent[1] - extent[0]) * (dpr || 1);\r\n                    var rate = Math.round(count / size);\r\n                    if (rate > 1) {\r\n                        if (sampling === 'lttb') {\r\n                            seriesModel.setData(data.lttbDownSample(data.mapDimension(valueAxis.dim), 1 / rate));\r\n                        }\r\n                        var sampler = void 0;\r\n                        if (typeof sampling === 'string') {\r\n                            sampler = samplers[sampling];\r\n                        }\r\n                        else if (typeof sampling === 'function') {\r\n                            sampler = sampling;\r\n                        }\r\n                        if (sampler) {\r\n                            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }\n\n    var defaultOption = {\r\n        show: true,\r\n        zlevel: 0,\r\n        z: 0,\r\n        inverse: false,\r\n        name: '',\r\n        nameLocation: 'end',\r\n        nameRotate: null,\r\n        nameTruncate: {\r\n            maxWidth: null,\r\n            ellipsis: '...',\r\n            placeholder: '.'\r\n        },\r\n        nameTextStyle: {},\r\n        nameGap: 15,\r\n        silent: false,\r\n        triggerEvent: false,\r\n        tooltip: {\r\n            show: false\r\n        },\r\n        axisPointer: {},\r\n        axisLine: {\r\n            show: true,\r\n            onZero: true,\r\n            onZeroAxisIndex: null,\r\n            lineStyle: {\r\n                color: '#6E7079',\r\n                width: 1,\r\n                type: 'solid'\r\n            },\r\n            symbol: ['none', 'none'],\r\n            symbolSize: [10, 15]\r\n        },\r\n        axisTick: {\r\n            show: true,\r\n            inside: false,\r\n            length: 5,\r\n            lineStyle: {\r\n                width: 1\r\n            }\r\n        },\r\n        axisLabel: {\r\n            show: true,\r\n            inside: false,\r\n            rotate: 0,\r\n            showMinLabel: null,\r\n            showMaxLabel: null,\r\n            margin: 8,\r\n            fontSize: 12\r\n        },\r\n        splitLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: ['#E0E6F1'],\r\n                width: 1,\r\n                type: 'solid'\r\n            }\r\n        },\r\n        splitArea: {\r\n            show: false,\r\n            areaStyle: {\r\n                color: ['rgba(250,250,250,0.2)', 'rgba(210,219,238,0.2)']\r\n            }\r\n        }\r\n    };\r\n    var categoryAxis = merge({\r\n        boundaryGap: true,\r\n        deduplication: null,\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            alignWithLabel: false,\r\n            interval: 'auto'\r\n        },\r\n        axisLabel: {\r\n            interval: 'auto'\r\n        }\r\n    }, defaultOption);\r\n    var valueAxis = merge({\r\n        boundaryGap: [0, 0],\r\n        axisLine: {\r\n            show: 'auto'\r\n        },\r\n        axisTick: {\r\n            show: 'auto'\r\n        },\r\n        splitNumber: 5,\r\n        minorTick: {\r\n            show: false,\r\n            splitNumber: 5,\r\n            length: 3,\r\n            lineStyle: {}\r\n        },\r\n        minorSplitLine: {\r\n            show: false,\r\n            lineStyle: {\r\n                color: '#F4F7FD',\r\n                width: 1\r\n            }\r\n        }\r\n    }, defaultOption);\r\n    var timeAxis = merge({\r\n        scale: true,\r\n        splitNumber: 6,\r\n        axisLabel: {\r\n            showMinLabel: false,\r\n            showMaxLabel: false,\r\n            rich: {\r\n                primary: {\r\n                    fontWeight: 'bold'\r\n                }\r\n            }\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        }\r\n    }, valueAxis);\r\n    var logAxis = defaults({\r\n        scale: true,\r\n        logBase: 10\r\n    }, valueAxis);\r\n    var axisDefault = {\r\n        category: categoryAxis,\r\n        value: valueAxis,\r\n        time: timeAxis,\r\n        log: logAxis\r\n    };\n\n    var OrdinalMeta = (function () {\r\n        function OrdinalMeta(opt) {\r\n            this.categories = opt.categories || [];\r\n            this._needCollect = opt.needCollect;\r\n            this._deduplication = opt.deduplication;\r\n        }\r\n        OrdinalMeta.createByAxisModel = function (axisModel) {\r\n            var option = axisModel.option;\r\n            var data = option.data;\r\n            var categories = data && map(data, getName);\r\n            return new OrdinalMeta({\r\n                categories: categories,\r\n                needCollect: !categories,\r\n                deduplication: option.dedplication !== false\r\n            });\r\n        };\r\n        OrdinalMeta.prototype.getOrdinal = function (category) {\r\n            return this._getOrCreateMap().get(category);\r\n        };\r\n        OrdinalMeta.prototype.parseAndCollect = function (category) {\r\n            var index;\r\n            var needCollect = this._needCollect;\r\n            if (typeof category !== 'string' && !needCollect) {\r\n                return category;\r\n            }\r\n            if (needCollect && !this._deduplication) {\r\n                index = this.categories.length;\r\n                this.categories[index] = category;\r\n                return index;\r\n            }\r\n            var map = this._getOrCreateMap();\r\n            index = map.get(category);\r\n            if (index == null) {\r\n                if (needCollect) {\r\n                    index = this.categories.length;\r\n                    this.categories[index] = category;\r\n                    map.set(category, index);\r\n                }\r\n                else {\r\n                    index = NaN;\r\n                }\r\n            }\r\n            return index;\r\n        };\r\n        OrdinalMeta.prototype._getOrCreateMap = function () {\r\n            return this._map || (this._map = createHashMap(this.categories));\r\n        };\r\n        return OrdinalMeta;\r\n    }());\r\n    function getName(obj) {\r\n        if (isObject(obj) && obj.value != null) {\r\n            return obj.value;\r\n        }\r\n        else {\r\n            return obj + '';\r\n        }\r\n    }\n\n    var AXIS_TYPES = { value: 1, category: 1, time: 1, log: 1 };\n\n    function axisModelCreator (axisName, BaseAxisModelClass, extraDefaultOption) {\r\n        each(AXIS_TYPES, function (v, axisType) {\r\n            var defaultOption = merge(merge({}, axisDefault[axisType], true), extraDefaultOption, true);\r\n            var AxisModel = (function (_super) {\r\n                __extends(AxisModel, _super);\r\n                function AxisModel() {\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    var _this = _super.apply(this, args) || this;\r\n                    _this.type = axisName + 'Axis.' + axisType;\r\n                    return _this;\r\n                }\r\n                AxisModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\r\n                    var layoutMode = fetchLayoutMode(this);\r\n                    var inputPositionParams = layoutMode\r\n                        ? getLayoutParams(option) : {};\r\n                    var themeModel = ecModel.getTheme();\r\n                    merge(option, themeModel.get(axisType + 'Axis'));\r\n                    merge(option, this.getDefaultOption());\r\n                    option.type = getAxisType(option);\r\n                    if (layoutMode) {\r\n                        mergeLayoutParam(option, inputPositionParams, layoutMode);\r\n                    }\r\n                };\r\n                AxisModel.prototype.optionUpdated = function () {\r\n                    var thisOption = this.option;\r\n                    if (thisOption.type === 'category') {\r\n                        this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\r\n                    }\r\n                };\r\n                AxisModel.prototype.getCategories = function (rawData) {\r\n                    var option = this.option;\r\n                    if (option.type === 'category') {\r\n                        if (rawData) {\r\n                            return option.data;\r\n                        }\r\n                        return this.__ordinalMeta.categories;\r\n                    }\r\n                };\r\n                AxisModel.prototype.getOrdinalMeta = function () {\r\n                    return this.__ordinalMeta;\r\n                };\r\n                AxisModel.type = axisName + 'Axis.' + axisType;\r\n                AxisModel.defaultOption = defaultOption;\r\n                return AxisModel;\r\n            }(BaseAxisModelClass));\r\n            ComponentModel.registerClass(AxisModel);\r\n        });\r\n        ComponentModel.registerSubTypeDefaulter(axisName + 'Axis', getAxisType);\r\n    }\r\n    function getAxisType(option) {\r\n        return option.type || (option.data ? 'category' : 'value');\r\n    }\n\n    var AxisModelCommonMixin = (function () {\r\n        function AxisModelCommonMixin() {\r\n        }\r\n        AxisModelCommonMixin.prototype.getNeedCrossZero = function () {\r\n            var option = this.option;\r\n            return !option.scale;\r\n        };\r\n        AxisModelCommonMixin.prototype.getCoordSysModel = function () {\r\n            return;\r\n        };\r\n        return AxisModelCommonMixin;\r\n    }());\n\n    var CartesianAxisModel = (function (_super) {\r\n        __extends(CartesianAxisModel, _super);\r\n        function CartesianAxisModel() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        CartesianAxisModel.prototype.getCoordSysModel = function () {\r\n            return this.getReferringComponents('grid', SINGLE_REFERRING).models[0];\r\n        };\r\n        CartesianAxisModel.type = 'cartesian2dAxis';\r\n        return CartesianAxisModel;\r\n    }(ComponentModel));\r\n    mixin(CartesianAxisModel, AxisModelCommonMixin);\r\n    var extraOption = {\r\n        offset: 0,\r\n        categorySortInfo: []\r\n    };\r\n    axisModelCreator('x', CartesianAxisModel, extraOption);\r\n    axisModelCreator('y', CartesianAxisModel, extraOption);\n\n    var Scale = (function () {\r\n        function Scale(setting) {\r\n            this._setting = setting || {};\r\n            this._extent = [Infinity, -Infinity];\r\n        }\r\n        Scale.prototype.getSetting = function (name) {\r\n            return this._setting[name];\r\n        };\r\n        Scale.prototype.unionExtent = function (other) {\r\n            var extent = this._extent;\r\n            other[0] < extent[0] && (extent[0] = other[0]);\r\n            other[1] > extent[1] && (extent[1] = other[1]);\r\n        };\r\n        Scale.prototype.unionExtentFromData = function (data, dim) {\r\n            this.unionExtent(data.getApproximateExtent(dim));\r\n        };\r\n        Scale.prototype.getExtent = function () {\r\n            return this._extent.slice();\r\n        };\r\n        Scale.prototype.setExtent = function (start, end) {\r\n            var thisExtent = this._extent;\r\n            if (!isNaN(start)) {\r\n                thisExtent[0] = start;\r\n            }\r\n            if (!isNaN(end)) {\r\n                thisExtent[1] = end;\r\n            }\r\n        };\r\n        Scale.prototype.isInExtentRange = function (value) {\r\n            return this._extent[0] <= value && this._extent[1] >= value;\r\n        };\r\n        Scale.prototype.isBlank = function () {\r\n            return this._isBlank;\r\n        };\r\n        Scale.prototype.setBlank = function (isBlank) {\r\n            this._isBlank = isBlank;\r\n        };\r\n        return Scale;\r\n    }());\r\n    enableClassManagement(Scale, {\r\n        registerWhenExtend: true\r\n    });\n\n    var roundNumber = round$1;\r\n    function intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval) {\r\n        var result = {};\r\n        var span = extent[1] - extent[0];\r\n        var interval = result.interval = nice(span / splitNumber, true);\r\n        if (minInterval != null && interval < minInterval) {\r\n            interval = result.interval = minInterval;\r\n        }\r\n        if (maxInterval != null && interval > maxInterval) {\r\n            interval = result.interval = maxInterval;\r\n        }\r\n        var precision = result.intervalPrecision = getIntervalPrecision(interval);\r\n        var niceTickExtent = result.niceTickExtent = [\r\n            roundNumber(Math.ceil(extent[0] / interval) * interval, precision),\r\n            roundNumber(Math.floor(extent[1] / interval) * interval, precision)\r\n        ];\r\n        fixExtent(niceTickExtent, extent);\r\n        return result;\r\n    }\r\n    function getIntervalPrecision(interval) {\r\n        return getPrecisionSafe(interval) + 2;\r\n    }\r\n    function clamp(niceTickExtent, idx, extent) {\r\n        niceTickExtent[idx] = Math.max(Math.min(niceTickExtent[idx], extent[1]), extent[0]);\r\n    }\r\n    function fixExtent(niceTickExtent, extent) {\r\n        !isFinite(niceTickExtent[0]) && (niceTickExtent[0] = extent[0]);\r\n        !isFinite(niceTickExtent[1]) && (niceTickExtent[1] = extent[1]);\r\n        clamp(niceTickExtent, 0, extent);\r\n        clamp(niceTickExtent, 1, extent);\r\n        if (niceTickExtent[0] > niceTickExtent[1]) {\r\n            niceTickExtent[0] = niceTickExtent[1];\r\n        }\r\n    }\r\n    function contain$1(val, extent) {\r\n        return val >= extent[0] && val <= extent[1];\r\n    }\r\n    function normalize$1(val, extent) {\r\n        if (extent[1] === extent[0]) {\r\n            return 0.5;\r\n        }\r\n        return (val - extent[0]) / (extent[1] - extent[0]);\r\n    }\r\n    function scale$2(val, extent) {\r\n        return val * (extent[1] - extent[0]) + extent[0];\r\n    }\n\n    var OrdinalScale = (function (_super) {\r\n        __extends(OrdinalScale, _super);\r\n        function OrdinalScale(setting) {\r\n            var _this = _super.call(this, setting) || this;\r\n            _this.type = 'ordinal';\r\n            var ordinalMeta = _this.getSetting('ordinalMeta');\r\n            if (!ordinalMeta || isArray(ordinalMeta)) {\r\n                ordinalMeta = new OrdinalMeta({ categories: ordinalMeta });\r\n            }\r\n            _this._ordinalMeta = ordinalMeta;\r\n            _this._categorySortInfo = [];\r\n            _this._extent = _this.getSetting('extent') || [0, ordinalMeta.categories.length - 1];\r\n            return _this;\r\n        }\r\n        OrdinalScale.prototype.parse = function (val) {\r\n            return typeof val === 'string'\r\n                ? this._ordinalMeta.getOrdinal(val)\r\n                : Math.round(val);\r\n        };\r\n        OrdinalScale.prototype.contain = function (rank) {\r\n            rank = this.parse(rank);\r\n            return contain$1(rank, this._extent)\r\n                && this._ordinalMeta.categories[rank] != null;\r\n        };\r\n        OrdinalScale.prototype.normalize = function (val) {\r\n            val = this.getCategoryIndex(this.parse(val));\r\n            return normalize$1(val, this._extent);\r\n        };\r\n        OrdinalScale.prototype.scale = function (val) {\r\n            val = this.getCategoryIndex(val);\r\n            return Math.round(scale$2(val, this._extent));\r\n        };\r\n        OrdinalScale.prototype.getTicks = function () {\r\n            var ticks = [];\r\n            var extent = this._extent;\r\n            var rank = extent[0];\r\n            while (rank <= extent[1]) {\r\n                ticks.push({\r\n                    value: this.getCategoryIndex(rank)\r\n                });\r\n                rank++;\r\n            }\r\n            return ticks;\r\n        };\r\n        OrdinalScale.prototype.getMinorTicks = function (splitNumber) {\r\n            return;\r\n        };\r\n        OrdinalScale.prototype.setCategorySortInfo = function (info) {\r\n            this._categorySortInfo = info;\r\n        };\r\n        OrdinalScale.prototype.getCategorySortInfo = function () {\r\n            return this._categorySortInfo;\r\n        };\r\n        OrdinalScale.prototype.getCategoryIndex = function (n) {\r\n            if (this._categorySortInfo.length) {\r\n                return this._categorySortInfo[n].beforeSortIndex;\r\n            }\r\n            else {\r\n                return n;\r\n            }\r\n        };\r\n        OrdinalScale.prototype.getRawIndex = function (displayIndex) {\r\n            if (this._categorySortInfo.length) {\r\n                return this._categorySortInfo[displayIndex].ordinalNumber;\r\n            }\r\n            else {\r\n                return displayIndex;\r\n            }\r\n        };\r\n        OrdinalScale.prototype.getLabel = function (tick) {\r\n            if (!this.isBlank()) {\r\n                var rawIndex = this.getRawIndex(tick.value);\r\n                var cateogry = this._ordinalMeta.categories[rawIndex];\r\n                return cateogry == null ? '' : cateogry + '';\r\n            }\r\n        };\r\n        OrdinalScale.prototype.count = function () {\r\n            return this._extent[1] - this._extent[0] + 1;\r\n        };\r\n        OrdinalScale.prototype.unionExtentFromData = function (data, dim) {\r\n            this.unionExtent(data.getApproximateExtent(dim));\r\n        };\r\n        OrdinalScale.prototype.isInExtentRange = function (value) {\r\n            value = this.getCategoryIndex(value);\r\n            return this._extent[0] <= value && this._extent[1] >= value;\r\n        };\r\n        OrdinalScale.prototype.getOrdinalMeta = function () {\r\n            return this._ordinalMeta;\r\n        };\r\n        OrdinalScale.prototype.niceTicks = function () { };\r\n        OrdinalScale.prototype.niceExtent = function () { };\r\n        OrdinalScale.type = 'ordinal';\r\n        return OrdinalScale;\r\n    }(Scale));\r\n    Scale.registerClass(OrdinalScale);\n\n    var roundNumber$1 = round$1;\r\n    var IntervalScale = (function (_super) {\r\n        __extends(IntervalScale, _super);\r\n        function IntervalScale() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = 'interval';\r\n            _this._interval = 0;\r\n            _this._intervalPrecision = 2;\r\n            return _this;\r\n        }\r\n        IntervalScale.prototype.parse = function (val) {\r\n            return val;\r\n        };\r\n        IntervalScale.prototype.contain = function (val) {\r\n            return contain$1(val, this._extent);\r\n        };\r\n        IntervalScale.prototype.normalize = function (val) {\r\n            return normalize$1(val, this._extent);\r\n        };\r\n        IntervalScale.prototype.scale = function (val) {\r\n            return scale$2(val, this._extent);\r\n        };\r\n        IntervalScale.prototype.setExtent = function (start, end) {\r\n            var thisExtent = this._extent;\r\n            if (!isNaN(start)) {\r\n                thisExtent[0] = parseFloat(start);\r\n            }\r\n            if (!isNaN(end)) {\r\n                thisExtent[1] = parseFloat(end);\r\n            }\r\n        };\r\n        IntervalScale.prototype.unionExtent = function (other) {\r\n            var extent = this._extent;\r\n            other[0] < extent[0] && (extent[0] = other[0]);\r\n            other[1] > extent[1] && (extent[1] = other[1]);\r\n            this.setExtent(extent[0], extent[1]);\r\n        };\r\n        IntervalScale.prototype.getInterval = function () {\r\n            return this._interval;\r\n        };\r\n        IntervalScale.prototype.setInterval = function (interval) {\r\n            this._interval = interval;\r\n            this._niceExtent = this._extent.slice();\r\n            this._intervalPrecision = getIntervalPrecision(interval);\r\n        };\r\n        IntervalScale.prototype.getTicks = function (expandToNicedExtent) {\r\n            var interval = this._interval;\r\n            var extent = this._extent;\r\n            var niceTickExtent = this._niceExtent;\r\n            var intervalPrecision = this._intervalPrecision;\r\n            var ticks = [];\r\n            if (!interval) {\r\n                return ticks;\r\n            }\r\n            var safeLimit = 10000;\r\n            if (extent[0] < niceTickExtent[0]) {\r\n                if (expandToNicedExtent) {\r\n                    ticks.push({\r\n                        value: roundNumber$1(niceTickExtent[0] - interval, intervalPrecision)\r\n                    });\r\n                }\r\n                else {\r\n                    ticks.push({\r\n                        value: extent[0]\r\n                    });\r\n                }\r\n            }\r\n            var tick = niceTickExtent[0];\r\n            while (tick <= niceTickExtent[1]) {\r\n                ticks.push({\r\n                    value: tick\r\n                });\r\n                tick = roundNumber$1(tick + interval, intervalPrecision);\r\n                if (tick === ticks[ticks.length - 1].value) {\r\n                    break;\r\n                }\r\n                if (ticks.length > safeLimit) {\r\n                    return [];\r\n                }\r\n            }\r\n            var lastNiceTick = ticks.length ? ticks[ticks.length - 1].value : niceTickExtent[1];\r\n            if (extent[1] > lastNiceTick) {\r\n                if (expandToNicedExtent) {\r\n                    ticks.push({\r\n                        value: roundNumber$1(lastNiceTick + interval, intervalPrecision)\r\n                    });\r\n                }\r\n                else {\r\n                    ticks.push({\r\n                        value: extent[1]\r\n                    });\r\n                }\r\n            }\r\n            return ticks;\r\n        };\r\n        IntervalScale.prototype.getMinorTicks = function (splitNumber) {\r\n            var ticks = this.getTicks(true);\r\n            var minorTicks = [];\r\n            var extent = this.getExtent();\r\n            for (var i = 1; i < ticks.length; i++) {\r\n                var nextTick = ticks[i];\r\n                var prevTick = ticks[i - 1];\r\n                var count = 0;\r\n                var minorTicksGroup = [];\r\n                var interval = nextTick.value - prevTick.value;\r\n                var minorInterval = interval / splitNumber;\r\n                while (count < splitNumber - 1) {\r\n                    var minorTick = roundNumber$1(prevTick.value + (count + 1) * minorInterval);\r\n                    if (minorTick > extent[0] && minorTick < extent[1]) {\r\n                        minorTicksGroup.push(minorTick);\r\n                    }\r\n                    count++;\r\n                }\r\n                minorTicks.push(minorTicksGroup);\r\n            }\r\n            return minorTicks;\r\n        };\r\n        IntervalScale.prototype.getLabel = function (data, opt) {\r\n            if (data == null) {\r\n                return '';\r\n            }\r\n            var precision = opt && opt.precision;\r\n            if (precision == null) {\r\n                precision = getPrecisionSafe(data.value) || 0;\r\n            }\r\n            else if (precision === 'auto') {\r\n                precision = this._intervalPrecision;\r\n            }\r\n            var dataNum = roundNumber$1(data.value, precision, true);\r\n            return addCommas(dataNum);\r\n        };\r\n        IntervalScale.prototype.niceTicks = function (splitNumber, minInterval, maxInterval) {\r\n            splitNumber = splitNumber || 5;\r\n            var extent = this._extent;\r\n            var span = extent[1] - extent[0];\r\n            if (!isFinite(span)) {\r\n                return;\r\n            }\r\n            if (span < 0) {\r\n                span = -span;\r\n                extent.reverse();\r\n            }\r\n            var result = intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval);\r\n            this._intervalPrecision = result.intervalPrecision;\r\n            this._interval = result.interval;\r\n            this._niceExtent = result.niceTickExtent;\r\n        };\r\n        IntervalScale.prototype.niceExtent = function (opt) {\r\n            var extent = this._extent;\r\n            if (extent[0] === extent[1]) {\r\n                if (extent[0] !== 0) {\r\n                    var expandSize = extent[0];\r\n                    if (!opt.fixMax) {\r\n                        extent[1] += expandSize / 2;\r\n                        extent[0] -= expandSize / 2;\r\n                    }\r\n                    else {\r\n                        extent[0] -= expandSize / 2;\r\n                    }\r\n                }\r\n                else {\r\n                    extent[1] = 1;\r\n                }\r\n            }\r\n            var span = extent[1] - extent[0];\r\n            if (!isFinite(span)) {\r\n                extent[0] = 0;\r\n                extent[1] = 1;\r\n            }\r\n            this.niceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\r\n            var interval = this._interval;\r\n            if (!opt.fixMin) {\r\n                extent[0] = roundNumber$1(Math.floor(extent[0] / interval) * interval);\r\n            }\r\n            if (!opt.fixMax) {\r\n                extent[1] = roundNumber$1(Math.ceil(extent[1] / interval) * interval);\r\n            }\r\n        };\r\n        IntervalScale.type = 'interval';\r\n        return IntervalScale;\r\n    }(Scale));\r\n    Scale.registerClass(IntervalScale);\n\n    var STACK_PREFIX = '__ec_stack_';\r\n    var LARGE_BAR_MIN_WIDTH = 0.5;\r\n    var LargeArr = typeof Float32Array !== 'undefined' ? Float32Array : Array;\r\n    function getSeriesStackId(seriesModel) {\r\n        return seriesModel.get('stack') || STACK_PREFIX + seriesModel.seriesIndex;\r\n    }\r\n    function getAxisKey(axis) {\r\n        return axis.dim + axis.index;\r\n    }\r\n    function prepareLayoutBarSeries(seriesType, ecModel) {\r\n        var seriesModels = [];\r\n        ecModel.eachSeriesByType(seriesType, function (seriesModel) {\r\n            if (isOnCartesian(seriesModel) && !isInLargeMode(seriesModel)) {\r\n                seriesModels.push(seriesModel);\r\n            }\r\n        });\r\n        return seriesModels;\r\n    }\r\n    function getValueAxesMinGaps(barSeries) {\r\n        var axisValues = {};\r\n        each(barSeries, function (seriesModel) {\r\n            var cartesian = seriesModel.coordinateSystem;\r\n            var baseAxis = cartesian.getBaseAxis();\r\n            if (baseAxis.type !== 'time' && baseAxis.type !== 'value') {\r\n                return;\r\n            }\r\n            var data = seriesModel.getData();\r\n            var key = baseAxis.dim + '_' + baseAxis.index;\r\n            var dim = data.mapDimension(baseAxis.dim);\r\n            for (var i = 0, cnt = data.count(); i < cnt; ++i) {\r\n                var value = data.get(dim, i);\r\n                if (!axisValues[key]) {\r\n                    axisValues[key] = [value];\r\n                }\r\n                else {\r\n                    axisValues[key].push(value);\r\n                }\r\n            }\r\n        });\r\n        var axisMinGaps = {};\r\n        for (var key in axisValues) {\r\n            if (axisValues.hasOwnProperty(key)) {\r\n                var valuesInAxis = axisValues[key];\r\n                if (valuesInAxis) {\r\n                    valuesInAxis.sort(function (a, b) {\r\n                        return a - b;\r\n                    });\r\n                    var min = null;\r\n                    for (var j = 1; j < valuesInAxis.length; ++j) {\r\n                        var delta = valuesInAxis[j] - valuesInAxis[j - 1];\r\n                        if (delta > 0) {\r\n                            min = min === null ? delta : Math.min(min, delta);\r\n                        }\r\n                    }\r\n                    axisMinGaps[key] = min;\r\n                }\r\n            }\r\n        }\r\n        return axisMinGaps;\r\n    }\r\n    function makeColumnLayout(barSeries) {\r\n        var axisMinGaps = getValueAxesMinGaps(barSeries);\r\n        var seriesInfoList = [];\r\n        each(barSeries, function (seriesModel) {\r\n            var cartesian = seriesModel.coordinateSystem;\r\n            var baseAxis = cartesian.getBaseAxis();\r\n            var axisExtent = baseAxis.getExtent();\r\n            var bandWidth;\r\n            if (baseAxis.type === 'category') {\r\n                bandWidth = baseAxis.getBandWidth();\r\n            }\r\n            else if (baseAxis.type === 'value' || baseAxis.type === 'time') {\r\n                var key = baseAxis.dim + '_' + baseAxis.index;\r\n                var minGap = axisMinGaps[key];\r\n                var extentSpan = Math.abs(axisExtent[1] - axisExtent[0]);\r\n                var scale = baseAxis.scale.getExtent();\r\n                var scaleSpan = Math.abs(scale[1] - scale[0]);\r\n                bandWidth = minGap\r\n                    ? extentSpan / scaleSpan * minGap\r\n                    : extentSpan;\r\n            }\r\n            else {\r\n                var data = seriesModel.getData();\r\n                bandWidth = Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\r\n            }\r\n            var barWidth = parsePercent$2(seriesModel.get('barWidth'), bandWidth);\r\n            var barMaxWidth = parsePercent$2(seriesModel.get('barMaxWidth'), bandWidth);\r\n            var barMinWidth = parsePercent$2(seriesModel.get('barMinWidth') || 1, bandWidth);\r\n            var barGap = seriesModel.get('barGap');\r\n            var barCategoryGap = seriesModel.get('barCategoryGap');\r\n            seriesInfoList.push({\r\n                bandWidth: bandWidth,\r\n                barWidth: barWidth,\r\n                barMaxWidth: barMaxWidth,\r\n                barMinWidth: barMinWidth,\r\n                barGap: barGap,\r\n                barCategoryGap: barCategoryGap,\r\n                axisKey: getAxisKey(baseAxis),\r\n                stackId: getSeriesStackId(seriesModel)\r\n            });\r\n        });\r\n        return doCalBarWidthAndOffset(seriesInfoList);\r\n    }\r\n    function doCalBarWidthAndOffset(seriesInfoList) {\r\n        var columnsMap = {};\r\n        each(seriesInfoList, function (seriesInfo, idx) {\r\n            var axisKey = seriesInfo.axisKey;\r\n            var bandWidth = seriesInfo.bandWidth;\r\n            var columnsOnAxis = columnsMap[axisKey] || {\r\n                bandWidth: bandWidth,\r\n                remainedWidth: bandWidth,\r\n                autoWidthCount: 0,\r\n                categoryGap: null,\r\n                gap: '20%',\r\n                stacks: {}\r\n            };\r\n            var stacks = columnsOnAxis.stacks;\r\n            columnsMap[axisKey] = columnsOnAxis;\r\n            var stackId = seriesInfo.stackId;\r\n            if (!stacks[stackId]) {\r\n                columnsOnAxis.autoWidthCount++;\r\n            }\r\n            stacks[stackId] = stacks[stackId] || {\r\n                width: 0,\r\n                maxWidth: 0\r\n            };\r\n            var barWidth = seriesInfo.barWidth;\r\n            if (barWidth && !stacks[stackId].width) {\r\n                stacks[stackId].width = barWidth;\r\n                barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\r\n                columnsOnAxis.remainedWidth -= barWidth;\r\n            }\r\n            var barMaxWidth = seriesInfo.barMaxWidth;\r\n            barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\r\n            var barMinWidth = seriesInfo.barMinWidth;\r\n            barMinWidth && (stacks[stackId].minWidth = barMinWidth);\r\n            var barGap = seriesInfo.barGap;\r\n            (barGap != null) && (columnsOnAxis.gap = barGap);\r\n            var barCategoryGap = seriesInfo.barCategoryGap;\r\n            (barCategoryGap != null) && (columnsOnAxis.categoryGap = barCategoryGap);\r\n        });\r\n        var result = {};\r\n        each(columnsMap, function (columnsOnAxis, coordSysName) {\r\n            result[coordSysName] = {};\r\n            var stacks = columnsOnAxis.stacks;\r\n            var bandWidth = columnsOnAxis.bandWidth;\r\n            var categoryGapPercent = columnsOnAxis.categoryGap;\r\n            if (categoryGapPercent == null) {\r\n                var columnCount = keys(stacks).length;\r\n                categoryGapPercent = Math.max((35 - columnCount * 4), 15) + '%';\r\n            }\r\n            var categoryGap = parsePercent$2(categoryGapPercent, bandWidth);\r\n            var barGapPercent = parsePercent$2(columnsOnAxis.gap, 1);\r\n            var remainedWidth = columnsOnAxis.remainedWidth;\r\n            var autoWidthCount = columnsOnAxis.autoWidthCount;\r\n            var autoWidth = (remainedWidth - categoryGap)\r\n                / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\r\n            autoWidth = Math.max(autoWidth, 0);\r\n            each(stacks, function (column) {\r\n                var maxWidth = column.maxWidth;\r\n                var minWidth = column.minWidth;\r\n                if (!column.width) {\r\n                    var finalWidth = autoWidth;\r\n                    if (maxWidth && maxWidth < finalWidth) {\r\n                        finalWidth = Math.min(maxWidth, remainedWidth);\r\n                    }\r\n                    if (minWidth && minWidth > finalWidth) {\r\n                        finalWidth = minWidth;\r\n                    }\r\n                    if (finalWidth !== autoWidth) {\r\n                        column.width = finalWidth;\r\n                        remainedWidth -= finalWidth + barGapPercent * finalWidth;\r\n                        autoWidthCount--;\r\n                    }\r\n                }\r\n                else {\r\n                    var finalWidth = column.width;\r\n                    if (maxWidth) {\r\n                        finalWidth = Math.min(finalWidth, maxWidth);\r\n                    }\r\n                    if (minWidth) {\r\n                        finalWidth = Math.max(finalWidth, minWidth);\r\n                    }\r\n                    column.width = finalWidth;\r\n                    remainedWidth -= finalWidth + barGapPercent * finalWidth;\r\n                    autoWidthCount--;\r\n                }\r\n            });\r\n            autoWidth = (remainedWidth - categoryGap)\r\n                / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\r\n            autoWidth = Math.max(autoWidth, 0);\r\n            var widthSum = 0;\r\n            var lastColumn;\r\n            each(stacks, function (column, idx) {\r\n                if (!column.width) {\r\n                    column.width = autoWidth;\r\n                }\r\n                lastColumn = column;\r\n                widthSum += column.width * (1 + barGapPercent);\r\n            });\r\n            if (lastColumn) {\r\n                widthSum -= lastColumn.width * barGapPercent;\r\n            }\r\n            var offset = -widthSum / 2;\r\n            each(stacks, function (column, stackId) {\r\n                result[coordSysName][stackId] = result[coordSysName][stackId] || {\r\n                    bandWidth: bandWidth,\r\n                    offset: offset,\r\n                    width: column.width\r\n                };\r\n                offset += column.width * (1 + barGapPercent);\r\n            });\r\n        });\r\n        return result;\r\n    }\r\n    function retrieveColumnLayout(barWidthAndOffset, axis, seriesModel) {\r\n        if (barWidthAndOffset && axis) {\r\n            var result = barWidthAndOffset[getAxisKey(axis)];\r\n            if (result != null && seriesModel != null) {\r\n                return result[getSeriesStackId(seriesModel)];\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n    function layout(seriesType, ecModel) {\r\n        var seriesModels = prepareLayoutBarSeries(seriesType, ecModel);\r\n        var barWidthAndOffset = makeColumnLayout(seriesModels);\r\n        var lastStackCoords = {};\r\n        each(seriesModels, function (seriesModel) {\r\n            var data = seriesModel.getData();\r\n            var cartesian = seriesModel.coordinateSystem;\r\n            var baseAxis = cartesian.getBaseAxis();\r\n            var stackId = getSeriesStackId(seriesModel);\r\n            var columnLayoutInfo = barWidthAndOffset[getAxisKey(baseAxis)][stackId];\r\n            var columnOffset = columnLayoutInfo.offset;\r\n            var columnWidth = columnLayoutInfo.width;\r\n            var valueAxis = cartesian.getOtherAxis(baseAxis);\r\n            var barMinHeight = seriesModel.get('barMinHeight') || 0;\r\n            lastStackCoords[stackId] = lastStackCoords[stackId] || [];\r\n            data.setLayout({\r\n                bandWidth: columnLayoutInfo.bandWidth,\r\n                offset: columnOffset,\r\n                size: columnWidth\r\n            });\r\n            var valueDim = data.mapDimension(valueAxis.dim);\r\n            var baseDim = data.mapDimension(baseAxis.dim);\r\n            var stacked = isDimensionStacked(data, valueDim);\r\n            var isValueAxisH = valueAxis.isHorizontal();\r\n            var valueAxisStart = getValueAxisStart(baseAxis, valueAxis);\r\n            for (var idx = 0, len = data.count(); idx < len; idx++) {\r\n                var value = data.get(valueDim, idx);\r\n                var baseValue = data.get(baseDim, idx);\r\n                var sign = value >= 0 ? 'p' : 'n';\r\n                var baseCoord = valueAxisStart;\r\n                if (stacked) {\r\n                    if (!lastStackCoords[stackId][baseValue]) {\r\n                        lastStackCoords[stackId][baseValue] = {\r\n                            p: valueAxisStart,\r\n                            n: valueAxisStart\r\n                        };\r\n                    }\r\n                    baseCoord = lastStackCoords[stackId][baseValue][sign];\r\n                }\r\n                var x = void 0;\r\n                var y = void 0;\r\n                var width = void 0;\r\n                var height = void 0;\r\n                if (isValueAxisH) {\r\n                    var coord = cartesian.dataToPoint([value, baseValue]);\r\n                    x = baseCoord;\r\n                    y = coord[1] + columnOffset;\r\n                    width = coord[0] - valueAxisStart;\r\n                    height = columnWidth;\r\n                    if (Math.abs(width) < barMinHeight) {\r\n                        width = (width < 0 ? -1 : 1) * barMinHeight;\r\n                    }\r\n                    if (!isNaN(width)) {\r\n                        stacked && (lastStackCoords[stackId][baseValue][sign] += width);\r\n                    }\r\n                }\r\n                else {\r\n                    var coord = cartesian.dataToPoint([baseValue, value]);\r\n                    x = coord[0] + columnOffset;\r\n                    y = baseCoord;\r\n                    width = columnWidth;\r\n                    height = coord[1] - valueAxisStart;\r\n                    if (Math.abs(height) < barMinHeight) {\r\n                        height = (height <= 0 ? -1 : 1) * barMinHeight;\r\n                    }\r\n                    if (!isNaN(height)) {\r\n                        stacked && (lastStackCoords[stackId][baseValue][sign] += height);\r\n                    }\r\n                }\r\n                data.setItemLayout(idx, {\r\n                    x: x,\r\n                    y: y,\r\n                    width: width,\r\n                    height: height\r\n                });\r\n            }\r\n        });\r\n    }\r\n    var largeLayout = {\r\n        seriesType: 'bar',\r\n        plan: createRenderPlanner(),\r\n        reset: function (seriesModel) {\r\n            if (!isOnCartesian(seriesModel) || !isInLargeMode(seriesModel)) {\r\n                return;\r\n            }\r\n            var data = seriesModel.getData();\r\n            var cartesian = seriesModel.coordinateSystem;\r\n            var coordLayout = cartesian.master.getRect();\r\n            var baseAxis = cartesian.getBaseAxis();\r\n            var valueAxis = cartesian.getOtherAxis(baseAxis);\r\n            var valueDim = data.mapDimension(valueAxis.dim);\r\n            var baseDim = data.mapDimension(baseAxis.dim);\r\n            var valueAxisHorizontal = valueAxis.isHorizontal();\r\n            var valueDimIdx = valueAxisHorizontal ? 0 : 1;\r\n            var barWidth = retrieveColumnLayout(makeColumnLayout([seriesModel]), baseAxis, seriesModel).width;\r\n            if (!(barWidth > LARGE_BAR_MIN_WIDTH)) {\r\n                barWidth = LARGE_BAR_MIN_WIDTH;\r\n            }\r\n            return {\r\n                progress: function (params, data) {\r\n                    var count = params.count;\r\n                    var largePoints = new LargeArr(count * 2);\r\n                    var largeBackgroundPoints = new LargeArr(count * 2);\r\n                    var largeDataIndices = new LargeArr(count);\r\n                    var dataIndex;\r\n                    var coord = [];\r\n                    var valuePair = [];\r\n                    var pointsOffset = 0;\r\n                    var idxOffset = 0;\r\n                    while ((dataIndex = params.next()) != null) {\r\n                        valuePair[valueDimIdx] = data.get(valueDim, dataIndex);\r\n                        valuePair[1 - valueDimIdx] = data.get(baseDim, dataIndex);\r\n                        coord = cartesian.dataToPoint(valuePair, null, coord);\r\n                        largeBackgroundPoints[pointsOffset] =\r\n                            valueAxisHorizontal ? coordLayout.x + coordLayout.width : coord[0];\r\n                        largePoints[pointsOffset++] = coord[0];\r\n                        largeBackgroundPoints[pointsOffset] =\r\n                            valueAxisHorizontal ? coord[1] : coordLayout.y + coordLayout.height;\r\n                        largePoints[pointsOffset++] = coord[1];\r\n                        largeDataIndices[idxOffset++] = dataIndex;\r\n                    }\r\n                    data.setLayout({\r\n                        largePoints: largePoints,\r\n                        largeDataIndices: largeDataIndices,\r\n                        largeBackgroundPoints: largeBackgroundPoints,\r\n                        barWidth: barWidth,\r\n                        valueAxisStart: getValueAxisStart(baseAxis, valueAxis),\r\n                        backgroundStart: valueAxisHorizontal ? coordLayout.x : coordLayout.y,\r\n                        valueAxisHorizontal: valueAxisHorizontal\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    };\r\n    function isOnCartesian(seriesModel) {\r\n        return seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'cartesian2d';\r\n    }\r\n    function isInLargeMode(seriesModel) {\r\n        return seriesModel.pipelineContext && seriesModel.pipelineContext.large;\r\n    }\r\n    function getValueAxisStart(baseAxis, valueAxis, stacked) {\r\n        return valueAxis.toGlobalCoord(valueAxis.dataToCoord(valueAxis.type === 'log' ? 1 : 0));\r\n    }\n\n    var bisect = function (a, x, lo, hi) {\r\n        while (lo < hi) {\r\n            var mid = lo + hi >>> 1;\r\n            if (a[mid][1] < x) {\r\n                lo = mid + 1;\r\n            }\r\n            else {\r\n                hi = mid;\r\n            }\r\n        }\r\n        return lo;\r\n    };\r\n    var TimeScale = (function (_super) {\r\n        __extends(TimeScale, _super);\r\n        function TimeScale() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = 'time';\r\n            return _this;\r\n        }\r\n        TimeScale.prototype.getLabel = function (tick) {\r\n            var useUTC = this.getSetting('useUTC');\r\n            return format(tick.value, fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))] || fullLeveledFormatter.second, useUTC);\r\n        };\r\n        TimeScale.prototype.getFormattedLabel = function (tick, idx, labelFormatter) {\r\n            var isUTC = this.getSetting('useUTC');\r\n            var lang = this.getSetting('locale');\r\n            return leveledFormat(tick, idx, labelFormatter, lang, isUTC);\r\n        };\r\n        TimeScale.prototype.getTicks = function (expandToNicedExtent) {\r\n            var interval = this._interval;\r\n            var extent = this._extent;\r\n            var ticks = [];\r\n            if (!interval) {\r\n                return ticks;\r\n            }\r\n            ticks.push({\r\n                value: extent[0],\r\n                level: 0\r\n            });\r\n            var useUTC = this.getSetting('useUTC');\r\n            var innerTicks = getIntervalTicks(this._minLevelUnit, this._approxInterval, useUTC, extent);\r\n            ticks = ticks.concat(innerTicks);\r\n            ticks.push({\r\n                value: extent[1],\r\n                level: 0\r\n            });\r\n            return ticks;\r\n        };\r\n        TimeScale.prototype.niceExtent = function (opt) {\r\n            var extent = this._extent;\r\n            if (extent[0] === extent[1]) {\r\n                extent[0] -= ONE_DAY;\r\n                extent[1] += ONE_DAY;\r\n            }\r\n            if (extent[1] === -Infinity && extent[0] === Infinity) {\r\n                var d = new Date();\r\n                extent[1] = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\r\n                extent[0] = extent[1] - ONE_DAY;\r\n            }\r\n            this.niceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\r\n        };\r\n        TimeScale.prototype.niceTicks = function (approxTickNum, minInterval, maxInterval) {\r\n            approxTickNum = approxTickNum || 10;\r\n            var extent = this._extent;\r\n            var span = extent[1] - extent[0];\r\n            this._approxInterval = span / approxTickNum;\r\n            if (minInterval != null && this._approxInterval < minInterval) {\r\n                this._approxInterval = minInterval;\r\n            }\r\n            if (maxInterval != null && this._approxInterval > maxInterval) {\r\n                this._approxInterval = maxInterval;\r\n            }\r\n            var scaleIntervalsLen = scaleIntervals.length;\r\n            var idx = Math.min(bisect(scaleIntervals, this._approxInterval, 0, scaleIntervalsLen), scaleIntervalsLen - 1);\r\n            this._interval = scaleIntervals[idx][1];\r\n            this._minLevelUnit = scaleIntervals[Math.max(idx - 1, 0)][0];\r\n        };\r\n        TimeScale.prototype.parse = function (val) {\r\n            return typeof val === 'number' ? val : +parseDate(val);\r\n        };\r\n        TimeScale.prototype.contain = function (val) {\r\n            return contain$1(this.parse(val), this._extent);\r\n        };\r\n        TimeScale.prototype.normalize = function (val) {\r\n            return normalize$1(this.parse(val), this._extent);\r\n        };\r\n        TimeScale.prototype.scale = function (val) {\r\n            return scale$2(val, this._extent);\r\n        };\r\n        TimeScale.type = 'time';\r\n        return TimeScale;\r\n    }(IntervalScale));\r\n    var scaleIntervals = [\r\n        ['second', ONE_SECOND],\r\n        ['minute', ONE_MINUTE],\r\n        ['hour', ONE_HOUR],\r\n        ['quarter-day', ONE_HOUR * 6],\r\n        ['half-day', ONE_HOUR * 12],\r\n        ['day', ONE_DAY * 1.2],\r\n        ['half-week', ONE_DAY * 3.5],\r\n        ['week', ONE_DAY * 7],\r\n        ['month', ONE_DAY * 31],\r\n        ['quarter', ONE_DAY * 95],\r\n        ['half-year', ONE_YEAR / 2],\r\n        ['year', ONE_YEAR]\r\n    ];\r\n    function isUnitValueSame(unit, valueA, valueB, isUTC) {\r\n        var dateA = parseDate(valueA);\r\n        var dateB = parseDate(valueB);\r\n        var isSame = function (unit) {\r\n            return getUnitValue(dateA, unit, isUTC)\r\n                === getUnitValue(dateB, unit, isUTC);\r\n        };\r\n        var isSameYear = function () { return isSame('year'); };\r\n        var isSameMonth = function () { return isSameYear() && isSame('month'); };\r\n        var isSameDay = function () { return isSameMonth() && isSame('day'); };\r\n        var isSameHour = function () { return isSameDay() && isSame('hour'); };\r\n        var isSameMinute = function () { return isSameHour() && isSame('minute'); };\r\n        var isSameSecond = function () { return isSameMinute() && isSame('second'); };\r\n        var isSameMilliSecond = function () { return isSameSecond() && isSame('millisecond'); };\r\n        switch (unit) {\r\n            case 'year':\r\n                return isSameYear();\r\n            case 'month':\r\n                return isSameMonth();\r\n            case 'day':\r\n                return isSameDay();\r\n            case 'hour':\r\n                return isSameHour();\r\n            case 'minute':\r\n                return isSameMinute();\r\n            case 'second':\r\n                return isSameSecond();\r\n            case 'millisecond':\r\n                return isSameMilliSecond();\r\n        }\r\n    }\r\n    function getDateInterval(approxInterval, daysInMonth) {\r\n        approxInterval /= ONE_DAY;\r\n        return approxInterval > 16 ? 16\r\n            : approxInterval > 7.5 ? 7\r\n                : approxInterval > 3.5 ? 4\r\n                    : approxInterval > 1.5 ? 2 : 1;\r\n    }\r\n    function getMonthInterval(approxInterval) {\r\n        var APPROX_ONE_MONTH = 30 * ONE_DAY;\r\n        approxInterval /= APPROX_ONE_MONTH;\r\n        return approxInterval > 6 ? 6\r\n            : approxInterval > 3 ? 3\r\n                : approxInterval > 2 ? 2 : 1;\r\n    }\r\n    function getHourInterval(approxInterval) {\r\n        approxInterval /= ONE_HOUR;\r\n        return approxInterval > 12 ? 12\r\n            : approxInterval > 6 ? 6\r\n                : approxInterval > 3.5 ? 4\r\n                    : approxInterval > 2 ? 2 : 1;\r\n    }\r\n    function getMinutesAndSecondsInterval(approxInterval, isMinutes) {\r\n        approxInterval /= isMinutes ? ONE_MINUTE : ONE_SECOND;\r\n        return approxInterval > 30 ? 30\r\n            : approxInterval > 20 ? 20\r\n                : approxInterval > 15 ? 15\r\n                    : approxInterval > 10 ? 10\r\n                        : approxInterval > 5 ? 5\r\n                            : approxInterval > 2 ? 2 : 1;\r\n    }\r\n    function getMillisecondsInterval(approxInterval) {\r\n        return nice(approxInterval, true);\r\n    }\r\n    function getFirstTimestampOfUnit(date, unitName, isUTC) {\r\n        var outDate = new Date(date);\r\n        switch (getPrimaryTimeUnit(unitName)) {\r\n            case 'year':\r\n            case 'month':\r\n                outDate[monthSetterName(isUTC)](0);\r\n            case 'day':\r\n                outDate[dateSetterName(isUTC)](1);\r\n            case 'hour':\r\n                outDate[hoursSetterName(isUTC)](0);\r\n            case 'minute':\r\n                outDate[minutesSetterName(isUTC)](0);\r\n            case 'second':\r\n                outDate[secondsSetterName(isUTC)](0);\r\n                outDate[millisecondsSetterName(isUTC)](0);\r\n        }\r\n        return outDate.getTime();\r\n    }\r\n    function getIntervalTicks(bottomUnitName, approxInterval, isUTC, extent) {\r\n        var safeLimit = 10000;\r\n        var unitNames = timeUnits;\r\n        var iter = 0;\r\n        function addTicksInSpan(interval, minTimestamp, maxTimestamp, getMethodName, setMethodName, isDate, out) {\r\n            var date = new Date(minTimestamp);\r\n            var dateTime = minTimestamp;\r\n            var d = date[getMethodName]();\r\n            while (dateTime < maxTimestamp && dateTime <= extent[1]) {\r\n                out.push({\r\n                    value: dateTime\r\n                });\r\n                d += interval;\r\n                date[setMethodName](d);\r\n                dateTime = date.getTime();\r\n            }\r\n            out.push({\r\n                value: dateTime,\r\n                notAdd: true\r\n            });\r\n        }\r\n        function addLevelTicks(unitName, lastLevelTicks, levelTicks) {\r\n            var newAddedTicks = [];\r\n            var isFirstLevel = !lastLevelTicks.length;\r\n            if (isUnitValueSame(getPrimaryTimeUnit(unitName), extent[0], extent[1], isUTC)) {\r\n                return;\r\n            }\r\n            if (isFirstLevel) {\r\n                lastLevelTicks = [{\r\n                        value: getFirstTimestampOfUnit(new Date(extent[0]), unitName, isUTC)\r\n                    }, {\r\n                        value: extent[1]\r\n                    }];\r\n            }\r\n            for (var i = 0; i < lastLevelTicks.length - 1; i++) {\r\n                var startTick = lastLevelTicks[i].value;\r\n                var endTick = lastLevelTicks[i + 1].value;\r\n                if (startTick === endTick) {\r\n                    continue;\r\n                }\r\n                var interval = void 0;\r\n                var getterName = void 0;\r\n                var setterName = void 0;\r\n                var isDate = false;\r\n                switch (unitName) {\r\n                    case 'year':\r\n                        interval = Math.max(1, Math.round(approxInterval / ONE_DAY / 365));\r\n                        getterName = fullYearGetterName(isUTC);\r\n                        setterName = fullYearSetterName(isUTC);\r\n                        break;\r\n                    case 'half-year':\r\n                    case 'quarter':\r\n                    case 'month':\r\n                        interval = getMonthInterval(approxInterval);\r\n                        getterName = monthGetterName(isUTC);\r\n                        setterName = monthSetterName(isUTC);\r\n                        break;\r\n                    case 'week':\r\n                    case 'half-week':\r\n                    case 'day':\r\n                        interval = getDateInterval(approxInterval);\r\n                        getterName = dateGetterName(isUTC);\r\n                        setterName = dateSetterName(isUTC);\r\n                        isDate = true;\r\n                        break;\r\n                    case 'half-day':\r\n                    case 'quarter-day':\r\n                    case 'hour':\r\n                        interval = getHourInterval(approxInterval);\r\n                        getterName = hoursGetterName(isUTC);\r\n                        setterName = hoursSetterName(isUTC);\r\n                        break;\r\n                    case 'minute':\r\n                        interval = getMinutesAndSecondsInterval(approxInterval, true);\r\n                        getterName = minutesGetterName(isUTC);\r\n                        setterName = minutesSetterName(isUTC);\r\n                        break;\r\n                    case 'second':\r\n                        interval = getMinutesAndSecondsInterval(approxInterval, false);\r\n                        getterName = secondsGetterName(isUTC);\r\n                        setterName = secondsSetterName(isUTC);\r\n                        break;\r\n                    case 'millisecond':\r\n                        interval = getMillisecondsInterval(approxInterval);\r\n                        getterName = millisecondsGetterName(isUTC);\r\n                        setterName = millisecondsSetterName(isUTC);\r\n                        break;\r\n                }\r\n                addTicksInSpan(interval, startTick, endTick, getterName, setterName, isDate, newAddedTicks);\r\n                if (unitName === 'year' && levelTicks.length > 1 && i === 0) {\r\n                    levelTicks.unshift({\r\n                        value: levelTicks[0].value - interval\r\n                    });\r\n                }\r\n            }\r\n            for (var i = 0; i < newAddedTicks.length; i++) {\r\n                levelTicks.push(newAddedTicks[i]);\r\n            }\r\n            return newAddedTicks;\r\n        }\r\n        var levelsTicks = [];\r\n        var currentLevelTicks = [];\r\n        var tickCount = 0;\r\n        var lastLevelTickCount = 0;\r\n        for (var i = 0; i < unitNames.length && iter++ < safeLimit; ++i) {\r\n            var primaryTimeUnit = getPrimaryTimeUnit(unitNames[i]);\r\n            if (!isPrimaryTimeUnit(unitNames[i])) {\r\n                continue;\r\n            }\r\n            addLevelTicks(unitNames[i], levelsTicks[levelsTicks.length - 1] || [], currentLevelTicks);\r\n            var nextPrimaryTimeUnit = unitNames[i + 1] ? getPrimaryTimeUnit(unitNames[i + 1]) : null;\r\n            if (primaryTimeUnit !== nextPrimaryTimeUnit) {\r\n                if (currentLevelTicks.length) {\r\n                    lastLevelTickCount = tickCount;\r\n                    currentLevelTicks.sort(function (a, b) { return a.value - b.value; });\r\n                    var levelTicksRemoveDuplicated = [];\r\n                    for (var i_1 = 0; i_1 < currentLevelTicks.length; ++i_1) {\r\n                        var tickValue = currentLevelTicks[i_1].value;\r\n                        if (i_1 === 0 || currentLevelTicks[i_1 - 1].value !== tickValue) {\r\n                            levelTicksRemoveDuplicated.push(currentLevelTicks[i_1]);\r\n                            if (tickValue >= extent[0] && tickValue <= extent[1]) {\r\n                                tickCount++;\r\n                            }\r\n                        }\r\n                    }\r\n                    var targetTickNum = (extent[1] - extent[0]) / approxInterval;\r\n                    if (tickCount > targetTickNum * 1.5 && lastLevelTickCount > targetTickNum / 1.5) {\r\n                        break;\r\n                    }\r\n                    levelsTicks.push(levelTicksRemoveDuplicated);\r\n                    if (tickCount > targetTickNum || bottomUnitName === unitNames[i]) {\r\n                        break;\r\n                    }\r\n                }\r\n                currentLevelTicks = [];\r\n            }\r\n        }\r\n        if (__DEV__) {\r\n            if (iter >= safeLimit) {\r\n                warn('Exceed safe limit.');\r\n            }\r\n        }\r\n        var levelsTicksInExtent = filter(map(levelsTicks, function (levelTicks) {\r\n            return filter(levelTicks, function (tick) { return tick.value >= extent[0] && tick.value <= extent[1] && !tick.notAdd; });\r\n        }), function (levelTicks) { return levelTicks.length > 0; });\r\n        var ticks = [];\r\n        var maxLevel = levelsTicksInExtent.length - 1;\r\n        for (var i = 0; i < levelsTicksInExtent.length; ++i) {\r\n            var levelTicks = levelsTicksInExtent[i];\r\n            for (var k = 0; k < levelTicks.length; ++k) {\r\n                ticks.push({\r\n                    value: levelTicks[k].value,\r\n                    level: maxLevel - i\r\n                });\r\n            }\r\n        }\r\n        ticks.sort(function (a, b) { return a.value - b.value; });\r\n        var result = [];\r\n        for (var i = 0; i < ticks.length; ++i) {\r\n            if (i === 0 || ticks[i].value !== ticks[i - 1].value) {\r\n                result.push(ticks[i]);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    Scale.registerClass(TimeScale);\n\n    var scaleProto = Scale.prototype;\r\n    var intervalScaleProto = IntervalScale.prototype;\r\n    var getPrecisionSafe$1 = getPrecisionSafe;\r\n    var roundingErrorFix = round$1;\r\n    var mathFloor$1 = Math.floor;\r\n    var mathCeil = Math.ceil;\r\n    var mathPow$1 = Math.pow;\r\n    var mathLog = Math.log;\r\n    var LogScale = (function (_super) {\r\n        __extends(LogScale, _super);\r\n        function LogScale() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = 'log';\r\n            _this.base = 10;\r\n            _this._originalScale = new IntervalScale();\r\n            _this._interval = 0;\r\n            return _this;\r\n        }\r\n        LogScale.prototype.getTicks = function (expandToNicedExtent) {\r\n            var originalScale = this._originalScale;\r\n            var extent = this._extent;\r\n            var originalExtent = originalScale.getExtent();\r\n            var ticks = intervalScaleProto.getTicks.call(this, expandToNicedExtent);\r\n            return map(ticks, function (tick) {\r\n                var val = tick.value;\r\n                var powVal = round$1(mathPow$1(this.base, val));\r\n                powVal = (val === extent[0] && this._fixMin)\r\n                    ? fixRoundingError(powVal, originalExtent[0])\r\n                    : powVal;\r\n                powVal = (val === extent[1] && this._fixMax)\r\n                    ? fixRoundingError(powVal, originalExtent[1])\r\n                    : powVal;\r\n                return {\r\n                    value: powVal\r\n                };\r\n            }, this);\r\n        };\r\n        LogScale.prototype.setExtent = function (start, end) {\r\n            var base = this.base;\r\n            start = mathLog(start) / mathLog(base);\r\n            end = mathLog(end) / mathLog(base);\r\n            intervalScaleProto.setExtent.call(this, start, end);\r\n        };\r\n        LogScale.prototype.getExtent = function () {\r\n            var base = this.base;\r\n            var extent = scaleProto.getExtent.call(this);\r\n            extent[0] = mathPow$1(base, extent[0]);\r\n            extent[1] = mathPow$1(base, extent[1]);\r\n            var originalScale = this._originalScale;\r\n            var originalExtent = originalScale.getExtent();\r\n            this._fixMin && (extent[0] = fixRoundingError(extent[0], originalExtent[0]));\r\n            this._fixMax && (extent[1] = fixRoundingError(extent[1], originalExtent[1]));\r\n            return extent;\r\n        };\r\n        LogScale.prototype.unionExtent = function (extent) {\r\n            this._originalScale.unionExtent(extent);\r\n            var base = this.base;\r\n            extent[0] = mathLog(extent[0]) / mathLog(base);\r\n            extent[1] = mathLog(extent[1]) / mathLog(base);\r\n            scaleProto.unionExtent.call(this, extent);\r\n        };\r\n        LogScale.prototype.unionExtentFromData = function (data, dim) {\r\n            this.unionExtent(data.getApproximateExtent(dim));\r\n        };\r\n        LogScale.prototype.niceTicks = function (approxTickNum) {\r\n            approxTickNum = approxTickNum || 10;\r\n            var extent = this._extent;\r\n            var span = extent[1] - extent[0];\r\n            if (span === Infinity || span <= 0) {\r\n                return;\r\n            }\r\n            var interval = quantity(span);\r\n            var err = approxTickNum / span * interval;\r\n            if (err <= 0.5) {\r\n                interval *= 10;\r\n            }\r\n            while (!isNaN(interval) && Math.abs(interval) < 1 && Math.abs(interval) > 0) {\r\n                interval *= 10;\r\n            }\r\n            var niceExtent = [\r\n                round$1(mathCeil(extent[0] / interval) * interval),\r\n                round$1(mathFloor$1(extent[1] / interval) * interval)\r\n            ];\r\n            this._interval = interval;\r\n            this._niceExtent = niceExtent;\r\n        };\r\n        LogScale.prototype.niceExtent = function (opt) {\r\n            intervalScaleProto.niceExtent.call(this, opt);\r\n            this._fixMin = opt.fixMin;\r\n            this._fixMax = opt.fixMax;\r\n        };\r\n        LogScale.prototype.parse = function (val) {\r\n            return val;\r\n        };\r\n        LogScale.prototype.contain = function (val) {\r\n            val = mathLog(val) / mathLog(this.base);\r\n            return contain$1(val, this._extent);\r\n        };\r\n        LogScale.prototype.normalize = function (val) {\r\n            val = mathLog(val) / mathLog(this.base);\r\n            return normalize$1(val, this._extent);\r\n        };\r\n        LogScale.prototype.scale = function (val) {\r\n            val = scale$2(val, this._extent);\r\n            return mathPow$1(this.base, val);\r\n        };\r\n        LogScale.type = 'log';\r\n        return LogScale;\r\n    }(Scale));\r\n    var proto = LogScale.prototype;\r\n    proto.getMinorTicks = intervalScaleProto.getMinorTicks;\r\n    proto.getLabel = intervalScaleProto.getLabel;\r\n    function fixRoundingError(val, originalVal) {\r\n        return roundingErrorFix(val, getPrecisionSafe$1(originalVal));\r\n    }\r\n    Scale.registerClass(LogScale);\n\n    var ScaleRawExtentInfo = (function () {\r\n        function ScaleRawExtentInfo(scale, model, originalExtent) {\r\n            this._prepareParams(scale, model, originalExtent);\r\n        }\r\n        ScaleRawExtentInfo.prototype._prepareParams = function (scale, model, dataExtent) {\r\n            if (dataExtent[1] < dataExtent[0]) {\r\n                dataExtent = [NaN, NaN];\r\n            }\r\n            this._dataMin = dataExtent[0];\r\n            this._dataMax = dataExtent[1];\r\n            var isOrdinal = this._isOrdinal = scale.type === 'ordinal';\r\n            this._needCrossZero = model.getNeedCrossZero && model.getNeedCrossZero();\r\n            var modelMinRaw = this._modelMinRaw = model.get('min', true);\r\n            if (isFunction(modelMinRaw)) {\r\n                this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw({\r\n                    min: dataExtent[0],\r\n                    max: dataExtent[1]\r\n                }));\r\n            }\r\n            else if (modelMinRaw !== 'dataMin') {\r\n                this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw);\r\n            }\r\n            var modelMaxRaw = this._modelMaxRaw = model.get('max', true);\r\n            if (isFunction(modelMaxRaw)) {\r\n                this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw({\r\n                    min: dataExtent[0],\r\n                    max: dataExtent[1]\r\n                }));\r\n            }\r\n            else if (modelMaxRaw !== 'dataMax') {\r\n                this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw);\r\n            }\r\n            if (isOrdinal) {\r\n                this._axisDataLen = model.getCategories().length;\r\n            }\r\n            else {\r\n                var boundaryGap = model.get('boundaryGap');\r\n                var boundaryGapArr = isArray(boundaryGap)\r\n                    ? boundaryGap : [boundaryGap || 0, boundaryGap || 0];\r\n                if (typeof boundaryGapArr[0] === 'boolean' || typeof boundaryGapArr[1] === 'boolean') {\r\n                    if (__DEV__) {\r\n                        console.warn('Boolean type for boundaryGap is only '\r\n                            + 'allowed for ordinal axis. Please use string in '\r\n                            + 'percentage instead, e.g., \"20%\". Currently, '\r\n                            + 'boundaryGap is set to be 0.');\r\n                    }\r\n                    this._boundaryGapInner = [0, 0];\r\n                }\r\n                else {\r\n                    this._boundaryGapInner = [\r\n                        parsePercent(boundaryGapArr[0], 1),\r\n                        parsePercent(boundaryGapArr[1], 1)\r\n                    ];\r\n                }\r\n            }\r\n        };\r\n        ScaleRawExtentInfo.prototype.calculate = function () {\r\n            var isOrdinal = this._isOrdinal;\r\n            var dataMin = this._dataMin;\r\n            var dataMax = this._dataMax;\r\n            var axisDataLen = this._axisDataLen;\r\n            var boundaryGapInner = this._boundaryGapInner;\r\n            var span = !isOrdinal\r\n                ? ((dataMax - dataMin) || Math.abs(dataMin))\r\n                : null;\r\n            var min = this._modelMinRaw === 'dataMin' ? dataMin : this._modelMinNum;\r\n            var max = this._modelMaxRaw === 'dataMax' ? dataMax : this._modelMaxNum;\r\n            var minFixed = min != null;\r\n            var maxFixed = max != null;\r\n            if (min == null) {\r\n                min = isOrdinal\r\n                    ? (axisDataLen ? 0 : NaN)\r\n                    : dataMin - boundaryGapInner[0] * span;\r\n            }\r\n            if (max == null) {\r\n                max = isOrdinal\r\n                    ? (axisDataLen ? axisDataLen - 1 : NaN)\r\n                    : dataMax + boundaryGapInner[1] * span;\r\n            }\r\n            (min == null || !isFinite(min)) && (min = NaN);\r\n            (max == null || !isFinite(max)) && (max = NaN);\r\n            if (min > max) {\r\n                min = NaN;\r\n                max = NaN;\r\n            }\r\n            var isBlank = eqNaN(min)\r\n                || eqNaN(max)\r\n                || (isOrdinal && !axisDataLen);\r\n            if (this._needCrossZero) {\r\n                if (min > 0 && max > 0 && !minFixed) {\r\n                    min = 0;\r\n                }\r\n                if (min < 0 && max < 0 && !maxFixed) {\r\n                    max = 0;\r\n                }\r\n            }\r\n            var determinedMin = this._determinedMin;\r\n            var determinedMax = this._determinedMax;\r\n            if (determinedMin != null) {\r\n                min = determinedMin;\r\n                minFixed = true;\r\n            }\r\n            if (determinedMax != null) {\r\n                max = determinedMax;\r\n                maxFixed = true;\r\n            }\r\n            return {\r\n                min: min,\r\n                max: max,\r\n                minFixed: minFixed,\r\n                maxFixed: maxFixed,\r\n                isBlank: isBlank\r\n            };\r\n        };\r\n        ScaleRawExtentInfo.prototype.modifyDataMinMax = function (minMaxName, val) {\r\n            if (__DEV__) {\r\n                assert(!this.frozen);\r\n            }\r\n            this[DATA_MIN_MAX_ATTR[minMaxName]] = val;\r\n        };\r\n        ScaleRawExtentInfo.prototype.setDeterminedMinMax = function (minMaxName, val) {\r\n            var attr = DETERMINED_MIN_MAX_ATTR[minMaxName];\r\n            if (__DEV__) {\r\n                assert(!this.frozen\r\n                    && (this[attr] == null));\r\n            }\r\n            this[attr] = val;\r\n        };\r\n        ScaleRawExtentInfo.prototype.freeze = function () {\r\n            this.frozen = true;\r\n        };\r\n        return ScaleRawExtentInfo;\r\n    }());\r\n    var DETERMINED_MIN_MAX_ATTR = { min: '_determinedMin', max: '_determinedMax' };\r\n    var DATA_MIN_MAX_ATTR = { min: '_dataMin', max: '_dataMax' };\r\n    function ensureScaleRawExtentInfo(scale, model, originalExtent) {\r\n        var rawExtentInfo = scale.rawExtentInfo;\r\n        if (rawExtentInfo) {\r\n            return rawExtentInfo;\r\n        }\r\n        rawExtentInfo = new ScaleRawExtentInfo(scale, model, originalExtent);\r\n        scale.rawExtentInfo = rawExtentInfo;\r\n        return rawExtentInfo;\r\n    }\r\n    function parseAxisModelMinMax(scale, minMax) {\r\n        return minMax == null ? null\r\n            : eqNaN(minMax) ? NaN\r\n                : scale.parse(minMax);\r\n    }\n\n    function getScaleExtent(scale, model) {\r\n        var scaleType = scale.type;\r\n        var rawExtentResult = ensureScaleRawExtentInfo(scale, model, scale.getExtent()).calculate();\r\n        scale.setBlank(rawExtentResult.isBlank);\r\n        var min = rawExtentResult.min;\r\n        var max = rawExtentResult.max;\r\n        var ecModel = model.ecModel;\r\n        if (ecModel && (scaleType === 'time')) {\r\n            var barSeriesModels = prepareLayoutBarSeries('bar', ecModel);\r\n            var isBaseAxisAndHasBarSeries_1 = false;\r\n            each(barSeriesModels, function (seriesModel) {\r\n                isBaseAxisAndHasBarSeries_1 = isBaseAxisAndHasBarSeries_1 || seriesModel.getBaseAxis() === model.axis;\r\n            });\r\n            if (isBaseAxisAndHasBarSeries_1) {\r\n                var barWidthAndOffset = makeColumnLayout(barSeriesModels);\r\n                var adjustedScale = adjustScaleForOverflow(min, max, model, barWidthAndOffset);\r\n                min = adjustedScale.min;\r\n                max = adjustedScale.max;\r\n            }\r\n        }\r\n        return {\r\n            extent: [min, max],\r\n            fixMin: rawExtentResult.minFixed,\r\n            fixMax: rawExtentResult.maxFixed\r\n        };\r\n    }\r\n    function adjustScaleForOverflow(min, max, model, barWidthAndOffset) {\r\n        var axisExtent = model.axis.getExtent();\r\n        var axisLength = axisExtent[1] - axisExtent[0];\r\n        var barsOnCurrentAxis = retrieveColumnLayout(barWidthAndOffset, model.axis);\r\n        if (barsOnCurrentAxis === undefined) {\r\n            return { min: min, max: max };\r\n        }\r\n        var minOverflow = Infinity;\r\n        each(barsOnCurrentAxis, function (item) {\r\n            minOverflow = Math.min(item.offset, minOverflow);\r\n        });\r\n        var maxOverflow = -Infinity;\r\n        each(barsOnCurrentAxis, function (item) {\r\n            maxOverflow = Math.max(item.offset + item.width, maxOverflow);\r\n        });\r\n        minOverflow = Math.abs(minOverflow);\r\n        maxOverflow = Math.abs(maxOverflow);\r\n        var totalOverFlow = minOverflow + maxOverflow;\r\n        var oldRange = max - min;\r\n        var oldRangePercentOfNew = (1 - (minOverflow + maxOverflow) / axisLength);\r\n        var overflowBuffer = ((oldRange / oldRangePercentOfNew) - oldRange);\r\n        max += overflowBuffer * (maxOverflow / totalOverFlow);\r\n        min -= overflowBuffer * (minOverflow / totalOverFlow);\r\n        return { min: min, max: max };\r\n    }\r\n    function niceScaleExtent(scale, model) {\r\n        var extentInfo = getScaleExtent(scale, model);\r\n        var extent = extentInfo.extent;\r\n        var splitNumber = model.get('splitNumber');\r\n        if (scale instanceof LogScale) {\r\n            scale.base = model.get('logBase');\r\n        }\r\n        var scaleType = scale.type;\r\n        scale.setExtent(extent[0], extent[1]);\r\n        scale.niceExtent({\r\n            splitNumber: splitNumber,\r\n            fixMin: extentInfo.fixMin,\r\n            fixMax: extentInfo.fixMax,\r\n            minInterval: (scaleType === 'interval' || scaleType === 'time')\r\n                ? model.get('minInterval') : null,\r\n            maxInterval: (scaleType === 'interval' || scaleType === 'time')\r\n                ? model.get('maxInterval') : null\r\n        });\r\n        var interval = model.get('interval');\r\n        if (interval != null) {\r\n            scale.setInterval && scale.setInterval(interval);\r\n        }\r\n    }\r\n    function createScaleByModel(model, axisType) {\r\n        axisType = axisType || model.get('type');\r\n        if (axisType) {\r\n            switch (axisType) {\r\n                case 'category':\r\n                    return new OrdinalScale({\r\n                        ordinalMeta: model.getOrdinalMeta\r\n                            ? model.getOrdinalMeta()\r\n                            : model.getCategories(),\r\n                        extent: [Infinity, -Infinity]\r\n                    });\r\n                case 'time':\r\n                    return new TimeScale({\r\n                        locale: model.ecModel.getLocaleModel(),\r\n                        useUTC: model.ecModel.get('useUTC')\r\n                    });\r\n                default:\r\n                    return new (Scale.getClass(axisType) || IntervalScale)();\r\n            }\r\n        }\r\n    }\r\n    function ifAxisCrossZero(axis) {\r\n        var dataExtent = axis.scale.getExtent();\r\n        var min = dataExtent[0];\r\n        var max = dataExtent[1];\r\n        return !((min > 0 && max > 0) || (min < 0 && max < 0));\r\n    }\r\n    function makeLabelFormatter(axis) {\r\n        var labelFormatter = axis.getLabelModel().get('formatter');\r\n        var categoryTickStart = axis.type === 'category' ? axis.scale.getExtent()[0] : null;\r\n        if (axis.scale.type === 'time') {\r\n            return (function (tpl) {\r\n                return function (tick, idx) {\r\n                    return axis.scale.getFormattedLabel(tick, idx, tpl);\r\n                };\r\n            })(labelFormatter);\r\n        }\r\n        else if (typeof labelFormatter === 'string') {\r\n            return (function (tpl) {\r\n                return function (tick) {\r\n                    var label = axis.scale.getLabel(tick);\r\n                    var text = tpl.replace('{value}', label != null ? label : '');\r\n                    return text;\r\n                };\r\n            })(labelFormatter);\r\n        }\r\n        else if (typeof labelFormatter === 'function') {\r\n            return (function (cb) {\r\n                return function (tick, idx) {\r\n                    if (categoryTickStart != null) {\r\n                        idx = tick.value - categoryTickStart;\r\n                    }\r\n                    return cb(getAxisRawValue(axis, tick), idx, tick.level != null ? {\r\n                        level: tick.level\r\n                    } : null);\r\n                };\r\n            })(labelFormatter);\r\n        }\r\n        else {\r\n            return function (tick) {\r\n                return axis.scale.getLabel(tick);\r\n            };\r\n        }\r\n    }\r\n    function getAxisRawValue(axis, tick) {\r\n        return axis.type === 'category' ? axis.scale.getLabel(tick) : tick.value;\r\n    }\r\n    function estimateLabelUnionRect(axis) {\r\n        var axisModel = axis.model;\r\n        var scale = axis.scale;\r\n        if (!axisModel.get(['axisLabel', 'show']) || scale.isBlank()) {\r\n            return;\r\n        }\r\n        var realNumberScaleTicks;\r\n        var tickCount;\r\n        var categoryScaleExtent = scale.getExtent();\r\n        if (scale instanceof OrdinalScale) {\r\n            tickCount = scale.count();\r\n        }\r\n        else {\r\n            realNumberScaleTicks = scale.getTicks();\r\n            tickCount = realNumberScaleTicks.length;\r\n        }\r\n        var axisLabelModel = axis.getLabelModel();\r\n        var labelFormatter = makeLabelFormatter(axis);\r\n        var rect;\r\n        var step = 1;\r\n        if (tickCount > 40) {\r\n            step = Math.ceil(tickCount / 40);\r\n        }\r\n        for (var i = 0; i < tickCount; i += step) {\r\n            var tick = realNumberScaleTicks\r\n                ? realNumberScaleTicks[i]\r\n                : {\r\n                    value: categoryScaleExtent[0] + i\r\n                };\r\n            var label = labelFormatter(tick, i);\r\n            var unrotatedSingleRect = axisLabelModel.getTextRect(label);\r\n            var singleRect = rotateTextRect(unrotatedSingleRect, axisLabelModel.get('rotate') || 0);\r\n            rect ? rect.union(singleRect) : (rect = singleRect);\r\n        }\r\n        return rect;\r\n    }\r\n    function rotateTextRect(textRect, rotate) {\r\n        var rotateRadians = rotate * Math.PI / 180;\r\n        var beforeWidth = textRect.width;\r\n        var beforeHeight = textRect.height;\r\n        var afterWidth = beforeWidth * Math.abs(Math.cos(rotateRadians))\r\n            + Math.abs(beforeHeight * Math.sin(rotateRadians));\r\n        var afterHeight = beforeWidth * Math.abs(Math.sin(rotateRadians))\r\n            + Math.abs(beforeHeight * Math.cos(rotateRadians));\r\n        var rotatedRect = new BoundingRect(textRect.x, textRect.y, afterWidth, afterHeight);\r\n        return rotatedRect;\r\n    }\r\n    function getOptionCategoryInterval(model) {\r\n        var interval = model.get('interval');\r\n        return interval == null ? 'auto' : interval;\r\n    }\r\n    function shouldShowAllLabels(axis) {\r\n        return axis.type === 'category'\r\n            && getOptionCategoryInterval(axis.getLabelModel()) === 0;\r\n    }\r\n    function getDataDimensionsOnAxis(data, axisDim) {\r\n        var dataDimMap = {};\r\n        each(data.mapDimensionsAll(axisDim), function (dataDim) {\r\n            dataDimMap[getStackedDimension(data, dataDim)] = true;\r\n        });\r\n        return keys(dataDimMap);\r\n    }\r\n    function unionAxisExtentFromData(dataExtent, data, axisDim) {\r\n        if (data) {\r\n            each(getDataDimensionsOnAxis(data, axisDim), function (dim) {\r\n                var seriesExtent = data.getApproximateExtent(dim);\r\n                seriesExtent[0] < dataExtent[0] && (dataExtent[0] = seriesExtent[0]);\r\n                seriesExtent[1] > dataExtent[1] && (dataExtent[1] = seriesExtent[1]);\r\n            });\r\n        }\r\n    }\n\n    var PI$6 = Math.PI;\r\n    var AxisBuilder = (function () {\r\n        function AxisBuilder(axisModel, opt) {\r\n            this.group = new Group();\r\n            this.opt = opt;\r\n            this.axisModel = axisModel;\r\n            defaults(opt, {\r\n                labelOffset: 0,\r\n                nameDirection: 1,\r\n                tickDirection: 1,\r\n                labelDirection: 1,\r\n                silent: true,\r\n                handleAutoShown: function () { return true; }\r\n            });\r\n            var transformGroup = new Group({\r\n                x: opt.position[0],\r\n                y: opt.position[1],\r\n                rotation: opt.rotation\r\n            });\r\n            transformGroup.updateTransform();\r\n            this._transformGroup = transformGroup;\r\n        }\r\n        AxisBuilder.prototype.hasBuilder = function (name) {\r\n            return !!builders[name];\r\n        };\r\n        AxisBuilder.prototype.add = function (name) {\r\n            builders[name](this.opt, this.axisModel, this.group, this._transformGroup);\r\n        };\r\n        AxisBuilder.prototype.getGroup = function () {\r\n            return this.group;\r\n        };\r\n        AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\r\n            var rotationDiff = remRadian(textRotation - axisRotation);\r\n            var textAlign;\r\n            var textVerticalAlign;\r\n            if (isRadianAroundZero(rotationDiff)) {\r\n                textVerticalAlign = direction > 0 ? 'top' : 'bottom';\r\n                textAlign = 'center';\r\n            }\r\n            else if (isRadianAroundZero(rotationDiff - PI$6)) {\r\n                textVerticalAlign = direction > 0 ? 'bottom' : 'top';\r\n                textAlign = 'center';\r\n            }\r\n            else {\r\n                textVerticalAlign = 'middle';\r\n                if (rotationDiff > 0 && rotationDiff < PI$6) {\r\n                    textAlign = direction > 0 ? 'right' : 'left';\r\n                }\r\n                else {\r\n                    textAlign = direction > 0 ? 'left' : 'right';\r\n                }\r\n            }\r\n            return {\r\n                rotation: rotationDiff,\r\n                textAlign: textAlign,\r\n                textVerticalAlign: textVerticalAlign\r\n            };\r\n        };\r\n        AxisBuilder.makeAxisEventDataBase = function (axisModel) {\r\n            var eventData = {\r\n                componentType: axisModel.mainType,\r\n                componentIndex: axisModel.componentIndex\r\n            };\r\n            eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\r\n            return eventData;\r\n        };\r\n        AxisBuilder.isLabelSilent = function (axisModel) {\r\n            var tooltipOpt = axisModel.get('tooltip');\r\n            return axisModel.get('silent')\r\n                || !(axisModel.get('triggerEvent') || (tooltipOpt && tooltipOpt.show));\r\n        };\r\n        return AxisBuilder;\r\n    }());\r\n    var builders = {\r\n        axisLine: function (opt, axisModel, group, transformGroup) {\r\n            var shown = axisModel.get(['axisLine', 'show']);\r\n            if (shown === 'auto' && opt.handleAutoShown) {\r\n                shown = opt.handleAutoShown('axisLine');\r\n            }\r\n            if (!shown) {\r\n                return;\r\n            }\r\n            var extent = axisModel.axis.getExtent();\r\n            var matrix = transformGroup.transform;\r\n            var pt1 = [extent[0], 0];\r\n            var pt2 = [extent[1], 0];\r\n            if (matrix) {\r\n                applyTransform(pt1, pt1, matrix);\r\n                applyTransform(pt2, pt2, matrix);\r\n            }\r\n            var lineStyle = extend({\r\n                lineCap: 'round'\r\n            }, axisModel.getModel(['axisLine', 'lineStyle']).getLineStyle());\r\n            var line = new Line({\r\n                subPixelOptimize: true,\r\n                shape: {\r\n                    x1: pt1[0],\r\n                    y1: pt1[1],\r\n                    x2: pt2[0],\r\n                    y2: pt2[1]\r\n                },\r\n                style: lineStyle,\r\n                strokeContainThreshold: opt.strokeContainThreshold || 5,\r\n                silent: true,\r\n                z2: 1\r\n            });\r\n            line.anid = 'line';\r\n            group.add(line);\r\n            var arrows = axisModel.get(['axisLine', 'symbol']);\r\n            var arrowSize = axisModel.get(['axisLine', 'symbolSize']);\r\n            var arrowOffset = axisModel.get(['axisLine', 'symbolOffset']) || 0;\r\n            if (typeof arrowOffset === 'number') {\r\n                arrowOffset = [arrowOffset, arrowOffset];\r\n            }\r\n            if (arrows != null) {\r\n                if (typeof arrows === 'string') {\r\n                    arrows = [arrows, arrows];\r\n                }\r\n                if (typeof arrowSize === 'string'\r\n                    || typeof arrowSize === 'number') {\r\n                    arrowSize = [arrowSize, arrowSize];\r\n                }\r\n                var symbolWidth_1 = arrowSize[0];\r\n                var symbolHeight_1 = arrowSize[1];\r\n                each([{\r\n                        rotate: opt.rotation + Math.PI / 2,\r\n                        offset: arrowOffset[0],\r\n                        r: 0\r\n                    }, {\r\n                        rotate: opt.rotation - Math.PI / 2,\r\n                        offset: arrowOffset[1],\r\n                        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0])\r\n                            + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\r\n                    }], function (point, index) {\r\n                    if (arrows[index] !== 'none' && arrows[index] != null) {\r\n                        var symbol = createSymbol(arrows[index], -symbolWidth_1 / 2, -symbolHeight_1 / 2, symbolWidth_1, symbolHeight_1, lineStyle.stroke, true);\r\n                        var r = point.r + point.offset;\r\n                        symbol.attr({\r\n                            rotation: point.rotate,\r\n                            x: pt1[0] + r * Math.cos(opt.rotation),\r\n                            y: pt1[1] - r * Math.sin(opt.rotation),\r\n                            silent: true,\r\n                            z2: 11\r\n                        });\r\n                        group.add(symbol);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        axisTickLabel: function (opt, axisModel, group, transformGroup) {\r\n            var ticksEls = buildAxisMajorTicks(group, transformGroup, axisModel, opt);\r\n            var labelEls = buildAxisLabel(group, transformGroup, axisModel, opt);\r\n            fixMinMaxLabelShow(axisModel, labelEls, ticksEls);\r\n            buildAxisMinorTicks(group, transformGroup, axisModel, opt.tickDirection);\r\n        },\r\n        axisName: function (opt, axisModel, group, transformGroup) {\r\n            var name = retrieve(opt.axisName, axisModel.get('name'));\r\n            if (!name) {\r\n                return;\r\n            }\r\n            var nameLocation = axisModel.get('nameLocation');\r\n            var nameDirection = opt.nameDirection;\r\n            var textStyleModel = axisModel.getModel('nameTextStyle');\r\n            var gap = axisModel.get('nameGap') || 0;\r\n            var extent = axisModel.axis.getExtent();\r\n            var gapSignal = extent[0] > extent[1] ? -1 : 1;\r\n            var pos = [\r\n                nameLocation === 'start'\r\n                    ? extent[0] - gapSignal * gap\r\n                    : nameLocation === 'end'\r\n                        ? extent[1] + gapSignal * gap\r\n                        : (extent[0] + extent[1]) / 2,\r\n                isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0\r\n            ];\r\n            var labelLayout;\r\n            var nameRotation = axisModel.get('nameRotate');\r\n            if (nameRotation != null) {\r\n                nameRotation = nameRotation * PI$6 / 180;\r\n            }\r\n            var axisNameAvailableWidth;\r\n            if (isNameLocationCenter(nameLocation)) {\r\n                labelLayout = AxisBuilder.innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation, nameDirection);\r\n            }\r\n            else {\r\n                labelLayout = endTextLayout(opt.rotation, nameLocation, nameRotation || 0, extent);\r\n                axisNameAvailableWidth = opt.axisNameAvailableWidth;\r\n                if (axisNameAvailableWidth != null) {\r\n                    axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\r\n                    !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\r\n                }\r\n            }\r\n            var textFont = textStyleModel.getFont();\r\n            var truncateOpt = axisModel.get('nameTruncate', true) || {};\r\n            var ellipsis = truncateOpt.ellipsis;\r\n            var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth);\r\n            var tooltipOpt = axisModel.get('tooltip', true);\r\n            var mainType = axisModel.mainType;\r\n            var formatterParams = {\r\n                componentType: mainType,\r\n                name: name,\r\n                $vars: ['name']\r\n            };\r\n            formatterParams[mainType + 'Index'] = axisModel.componentIndex;\r\n            var textEl = new ZRText({\r\n                x: pos[0],\r\n                y: pos[1],\r\n                rotation: labelLayout.rotation,\r\n                silent: AxisBuilder.isLabelSilent(axisModel),\r\n                style: createTextStyle(textStyleModel, {\r\n                    text: name,\r\n                    font: textFont,\r\n                    overflow: 'truncate',\r\n                    width: maxWidth,\r\n                    ellipsis: ellipsis,\r\n                    fill: textStyleModel.getTextColor()\r\n                        || axisModel.get(['axisLine', 'lineStyle', 'color']),\r\n                    align: textStyleModel.get('align')\r\n                        || labelLayout.textAlign,\r\n                    verticalAlign: textStyleModel.get('verticalAlign')\r\n                        || labelLayout.textVerticalAlign\r\n                }),\r\n                z2: 1\r\n            });\r\n            textEl.tooltip = (tooltipOpt && tooltipOpt.show)\r\n                ? extend({\r\n                    content: name,\r\n                    formatter: function () {\r\n                        return name;\r\n                    },\r\n                    formatterParams: formatterParams\r\n                }, tooltipOpt)\r\n                : null;\r\n            textEl.__fullText = name;\r\n            textEl.anid = 'name';\r\n            if (axisModel.get('triggerEvent')) {\r\n                var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\r\n                eventData.targetType = 'axisName';\r\n                eventData.name = name;\r\n                getECData(textEl).eventData = eventData;\r\n            }\r\n            transformGroup.add(textEl);\r\n            textEl.updateTransform();\r\n            group.add(textEl);\r\n            textEl.decomposeTransform();\r\n        }\r\n    };\r\n    function endTextLayout(rotation, textPosition, textRotate, extent) {\r\n        var rotationDiff = remRadian(textRotate - rotation);\r\n        var textAlign;\r\n        var textVerticalAlign;\r\n        var inverse = extent[0] > extent[1];\r\n        var onLeft = (textPosition === 'start' && !inverse)\r\n            || (textPosition !== 'start' && inverse);\r\n        if (isRadianAroundZero(rotationDiff - PI$6 / 2)) {\r\n            textVerticalAlign = onLeft ? 'bottom' : 'top';\r\n            textAlign = 'center';\r\n        }\r\n        else if (isRadianAroundZero(rotationDiff - PI$6 * 1.5)) {\r\n            textVerticalAlign = onLeft ? 'top' : 'bottom';\r\n            textAlign = 'center';\r\n        }\r\n        else {\r\n            textVerticalAlign = 'middle';\r\n            if (rotationDiff < PI$6 * 1.5 && rotationDiff > PI$6 / 2) {\r\n                textAlign = onLeft ? 'left' : 'right';\r\n            }\r\n            else {\r\n                textAlign = onLeft ? 'right' : 'left';\r\n            }\r\n        }\r\n        return {\r\n            rotation: rotationDiff,\r\n            textAlign: textAlign,\r\n            textVerticalAlign: textVerticalAlign\r\n        };\r\n    }\r\n    function fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\r\n        if (shouldShowAllLabels(axisModel.axis)) {\r\n            return;\r\n        }\r\n        var showMinLabel = axisModel.get(['axisLabel', 'showMinLabel']);\r\n        var showMaxLabel = axisModel.get(['axisLabel', 'showMaxLabel']);\r\n        labelEls = labelEls || [];\r\n        tickEls = tickEls || [];\r\n        var firstLabel = labelEls[0];\r\n        var nextLabel = labelEls[1];\r\n        var lastLabel = labelEls[labelEls.length - 1];\r\n        var prevLabel = labelEls[labelEls.length - 2];\r\n        var firstTick = tickEls[0];\r\n        var nextTick = tickEls[1];\r\n        var lastTick = tickEls[tickEls.length - 1];\r\n        var prevTick = tickEls[tickEls.length - 2];\r\n        if (showMinLabel === false) {\r\n            ignoreEl(firstLabel);\r\n            ignoreEl(firstTick);\r\n        }\r\n        else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\r\n            if (showMinLabel) {\r\n                ignoreEl(nextLabel);\r\n                ignoreEl(nextTick);\r\n            }\r\n            else {\r\n                ignoreEl(firstLabel);\r\n                ignoreEl(firstTick);\r\n            }\r\n        }\r\n        if (showMaxLabel === false) {\r\n            ignoreEl(lastLabel);\r\n            ignoreEl(lastTick);\r\n        }\r\n        else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\r\n            if (showMaxLabel) {\r\n                ignoreEl(prevLabel);\r\n                ignoreEl(prevTick);\r\n            }\r\n            else {\r\n                ignoreEl(lastLabel);\r\n                ignoreEl(lastTick);\r\n            }\r\n        }\r\n    }\r\n    function ignoreEl(el) {\r\n        el && (el.ignore = true);\r\n    }\r\n    function isTwoLabelOverlapped(current, next) {\r\n        var firstRect = current && current.getBoundingRect().clone();\r\n        var nextRect = next && next.getBoundingRect().clone();\r\n        if (!firstRect || !nextRect) {\r\n            return;\r\n        }\r\n        var mRotationBack = identity([]);\r\n        rotate(mRotationBack, mRotationBack, -current.rotation);\r\n        firstRect.applyTransform(mul([], mRotationBack, current.getLocalTransform()));\r\n        nextRect.applyTransform(mul([], mRotationBack, next.getLocalTransform()));\r\n        return firstRect.intersect(nextRect);\r\n    }\r\n    function isNameLocationCenter(nameLocation) {\r\n        return nameLocation === 'middle' || nameLocation === 'center';\r\n    }\r\n    function createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, anidPrefix) {\r\n        var tickEls = [];\r\n        var pt1 = [];\r\n        var pt2 = [];\r\n        for (var i = 0; i < ticksCoords.length; i++) {\r\n            var tickCoord = ticksCoords[i].coord;\r\n            pt1[0] = tickCoord;\r\n            pt1[1] = 0;\r\n            pt2[0] = tickCoord;\r\n            pt2[1] = tickEndCoord;\r\n            if (tickTransform) {\r\n                applyTransform(pt1, pt1, tickTransform);\r\n                applyTransform(pt2, pt2, tickTransform);\r\n            }\r\n            var tickEl = new Line({\r\n                subPixelOptimize: true,\r\n                shape: {\r\n                    x1: pt1[0],\r\n                    y1: pt1[1],\r\n                    x2: pt2[0],\r\n                    y2: pt2[1]\r\n                },\r\n                style: tickLineStyle,\r\n                z2: 2,\r\n                autoBatch: true,\r\n                silent: true\r\n            });\r\n            tickEl.anid = anidPrefix + '_' + ticksCoords[i].tickValue;\r\n            tickEls.push(tickEl);\r\n        }\r\n        return tickEls;\r\n    }\r\n    function buildAxisMajorTicks(group, transformGroup, axisModel, opt) {\r\n        var axis = axisModel.axis;\r\n        var tickModel = axisModel.getModel('axisTick');\r\n        var shown = tickModel.get('show');\r\n        if (shown === 'auto' && opt.handleAutoShown) {\r\n            shown = opt.handleAutoShown('axisTick');\r\n        }\r\n        if (!shown || axis.scale.isBlank()) {\r\n            return;\r\n        }\r\n        var lineStyleModel = tickModel.getModel('lineStyle');\r\n        var tickEndCoord = opt.tickDirection * tickModel.get('length');\r\n        var ticksCoords = axis.getTicksCoords();\r\n        var ticksEls = createTicks(ticksCoords, transformGroup.transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {\r\n            stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\r\n        }), 'ticks');\r\n        for (var i = 0; i < ticksEls.length; i++) {\r\n            group.add(ticksEls[i]);\r\n        }\r\n        return ticksEls;\r\n    }\r\n    function buildAxisMinorTicks(group, transformGroup, axisModel, tickDirection) {\r\n        var axis = axisModel.axis;\r\n        var minorTickModel = axisModel.getModel('minorTick');\r\n        if (!minorTickModel.get('show') || axis.scale.isBlank()) {\r\n            return;\r\n        }\r\n        var minorTicksCoords = axis.getMinorTicksCoords();\r\n        if (!minorTicksCoords.length) {\r\n            return;\r\n        }\r\n        var lineStyleModel = minorTickModel.getModel('lineStyle');\r\n        var tickEndCoord = tickDirection * minorTickModel.get('length');\r\n        var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel('axisTick').getLineStyle(), {\r\n            stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\r\n        }));\r\n        for (var i = 0; i < minorTicksCoords.length; i++) {\r\n            var minorTicksEls = createTicks(minorTicksCoords[i], transformGroup.transform, tickEndCoord, minorTickLineStyle, 'minorticks_' + i);\r\n            for (var k = 0; k < minorTicksEls.length; k++) {\r\n                group.add(minorTicksEls[k]);\r\n            }\r\n        }\r\n    }\r\n    function buildAxisLabel(group, transformGroup, axisModel, opt) {\r\n        var axis = axisModel.axis;\r\n        var show = retrieve(opt.axisLabelShow, axisModel.get(['axisLabel', 'show']));\r\n        if (!show || axis.scale.isBlank()) {\r\n            return;\r\n        }\r\n        var labelModel = axisModel.getModel('axisLabel');\r\n        var labelMargin = labelModel.get('margin');\r\n        var labels = axis.getViewLabels();\r\n        var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI$6 / 180;\r\n        var labelLayout = AxisBuilder.innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\r\n        var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\r\n        var labelEls = [];\r\n        var silent = AxisBuilder.isLabelSilent(axisModel);\r\n        var triggerEvent = axisModel.get('triggerEvent');\r\n        each(labels, function (labelItem, index) {\r\n            var tickValue = axis.scale.type === 'ordinal'\r\n                ? axis.scale.getRawIndex(labelItem.tickValue)\r\n                : labelItem.tickValue;\r\n            var formattedLabel = labelItem.formattedLabel;\r\n            var rawLabel = labelItem.rawLabel;\r\n            var itemLabelModel = labelModel;\r\n            if (rawCategoryData && rawCategoryData[tickValue]) {\r\n                var rawCategoryItem = rawCategoryData[tickValue];\r\n                if (isObject(rawCategoryItem) && rawCategoryItem.textStyle) {\r\n                    itemLabelModel = new Model(rawCategoryItem.textStyle, labelModel, axisModel.ecModel);\r\n                }\r\n            }\r\n            var textColor = itemLabelModel.getTextColor()\r\n                || axisModel.get(['axisLine', 'lineStyle', 'color']);\r\n            var tickCoord = axis.dataToCoord(tickValue);\r\n            var textEl = new ZRText({\r\n                x: tickCoord,\r\n                y: opt.labelOffset + opt.labelDirection * labelMargin,\r\n                rotation: labelLayout.rotation,\r\n                silent: silent,\r\n                z2: 10,\r\n                style: createTextStyle(itemLabelModel, {\r\n                    text: formattedLabel,\r\n                    align: itemLabelModel.getShallow('align', true)\r\n                        || labelLayout.textAlign,\r\n                    verticalAlign: itemLabelModel.getShallow('verticalAlign', true)\r\n                        || itemLabelModel.getShallow('baseline', true)\r\n                        || labelLayout.textVerticalAlign,\r\n                    fill: typeof textColor === 'function'\r\n                        ? textColor(axis.type === 'category'\r\n                            ? rawLabel\r\n                            : axis.type === 'value'\r\n                                ? tickValue + ''\r\n                                : tickValue, index)\r\n                        : textColor\r\n                })\r\n            });\r\n            textEl.anid = 'label_' + tickValue;\r\n            if (triggerEvent) {\r\n                var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\r\n                eventData.targetType = 'axisLabel';\r\n                eventData.value = rawLabel;\r\n                getECData(textEl).eventData = eventData;\r\n            }\r\n            transformGroup.add(textEl);\r\n            textEl.updateTransform();\r\n            labelEls.push(textEl);\r\n            group.add(textEl);\r\n            textEl.decomposeTransform();\r\n        });\r\n        return labelEls;\r\n    }\n\n    function fixValue(axisModel) {\r\n        var axisInfo = getAxisInfo(axisModel);\r\n        if (!axisInfo) {\r\n            return;\r\n        }\r\n        var axisPointerModel = axisInfo.axisPointerModel;\r\n        var scale = axisInfo.axis.scale;\r\n        var option = axisPointerModel.option;\r\n        var status = axisPointerModel.get('status');\r\n        var value = axisPointerModel.get('value');\r\n        if (value != null) {\r\n            value = scale.parse(value);\r\n        }\r\n        var useHandle = isHandleTrigger(axisPointerModel);\r\n        if (status == null) {\r\n            option.status = useHandle ? 'show' : 'hide';\r\n        }\r\n        var extent = scale.getExtent().slice();\r\n        extent[0] > extent[1] && extent.reverse();\r\n        if (value == null\r\n            || value > extent[1]) {\r\n            value = extent[1];\r\n        }\r\n        if (value < extent[0]) {\r\n            value = extent[0];\r\n        }\r\n        option.value = value;\r\n        if (useHandle) {\r\n            option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\r\n        }\r\n    }\r\n    function getAxisInfo(axisModel) {\r\n        var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {})\r\n            .coordSysAxesInfo;\r\n        return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\r\n    }\r\n    function getAxisPointerModel(axisModel) {\r\n        var axisInfo = getAxisInfo(axisModel);\r\n        return axisInfo && axisInfo.axisPointerModel;\r\n    }\r\n    function isHandleTrigger(axisPointerModel) {\r\n        return !!axisPointerModel.get(['handle', 'show']);\r\n    }\r\n    function makeKey(model) {\r\n        return model.type + '||' + model.id;\r\n    }\n\n    var axisPointerClazz = {};\r\n    var AxisView = (function (_super) {\r\n        __extends(AxisView, _super);\r\n        function AxisView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = AxisView.type;\r\n            return _this;\r\n        }\r\n        AxisView.prototype.render = function (axisModel, ecModel, api, payload) {\r\n            this.axisPointerClass && fixValue(axisModel);\r\n            _super.prototype.render.apply(this, arguments);\r\n            this._doUpdateAxisPointerClass(axisModel, api, true);\r\n        };\r\n        AxisView.prototype.updateAxisPointer = function (axisModel, ecModel, api, payload) {\r\n            this._doUpdateAxisPointerClass(axisModel, api, false);\r\n        };\r\n        AxisView.prototype.remove = function (ecModel, api) {\r\n            var axisPointer = this._axisPointer;\r\n            axisPointer && axisPointer.remove(api);\r\n        };\r\n        AxisView.prototype.dispose = function (ecModel, api) {\r\n            this._disposeAxisPointer(api);\r\n            _super.prototype.dispose.apply(this, arguments);\r\n        };\r\n        AxisView.prototype._doUpdateAxisPointerClass = function (axisModel, api, forceRender) {\r\n            var Clazz = AxisView.getAxisPointerClass(this.axisPointerClass);\r\n            if (!Clazz) {\r\n                return;\r\n            }\r\n            var axisPointerModel = getAxisPointerModel(axisModel);\r\n            axisPointerModel\r\n                ? (this._axisPointer || (this._axisPointer = new Clazz()))\r\n                    .render(axisModel, axisPointerModel, api, forceRender)\r\n                : this._disposeAxisPointer(api);\r\n        };\r\n        AxisView.prototype._disposeAxisPointer = function (api) {\r\n            this._axisPointer && this._axisPointer.dispose(api);\r\n            this._axisPointer = null;\r\n        };\r\n        AxisView.registerAxisPointerClass = function (type, clazz) {\r\n            if (__DEV__) {\r\n                if (axisPointerClazz[type]) {\r\n                    throw new Error('axisPointer ' + type + ' exists');\r\n                }\r\n            }\r\n            axisPointerClazz[type] = clazz;\r\n        };\r\n        AxisView.getAxisPointerClass = function (type) {\r\n            return type && axisPointerClazz[type];\r\n        };\r\n        AxisView.type = 'axis';\r\n        return AxisView;\r\n    }(ComponentView));\n\n    function layout$1(gridModel, axisModel, opt) {\r\n        opt = opt || {};\r\n        var grid = gridModel.coordinateSystem;\r\n        var axis = axisModel.axis;\r\n        var layout = {};\r\n        var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\r\n        var rawAxisPosition = axis.position;\r\n        var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\r\n        var axisDim = axis.dim;\r\n        var rect = grid.getRect();\r\n        var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\r\n        var idx = { left: 0, right: 1, top: 0, bottom: 1, onZero: 2 };\r\n        var axisOffset = axisModel.get('offset') || 0;\r\n        var posBound = axisDim === 'x'\r\n            ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset]\r\n            : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\r\n        if (otherAxisOnZeroOf) {\r\n            var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\r\n            posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\r\n        }\r\n        layout.position = [\r\n            axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0],\r\n            axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]\r\n        ];\r\n        layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1);\r\n        var dirMap = { top: -1, bottom: 1, left: -1, right: 1 };\r\n        layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\r\n        layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\r\n        if (axisModel.get(['axisTick', 'inside'])) {\r\n            layout.tickDirection = -layout.tickDirection;\r\n        }\r\n        if (retrieve(opt.labelInside, axisModel.get(['axisLabel', 'inside']))) {\r\n            layout.labelDirection = -layout.labelDirection;\r\n        }\r\n        var labelRotate = axisModel.get(['axisLabel', 'rotate']);\r\n        layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate;\r\n        layout.z2 = 1;\r\n        return layout;\r\n    }\r\n    function isCartesian2DSeries(seriesModel) {\r\n        return seriesModel.get('coordinateSystem') === 'cartesian2d';\r\n    }\r\n    function findAxisModels(seriesModel) {\r\n        var axisModelMap = {\r\n            xAxisModel: null,\r\n            yAxisModel: null\r\n        };\r\n        each(axisModelMap, function (v, key) {\r\n            var axisType = key.replace(/Model$/, '');\r\n            var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\r\n            if (__DEV__) {\r\n                if (!axisModel) {\r\n                    throw new Error(axisType + ' \"' + retrieve3(seriesModel.get(axisType + 'Index'), seriesModel.get(axisType + 'Id'), 0) + '\" not found');\r\n                }\r\n            }\r\n            axisModelMap[key] = axisModel;\r\n        });\r\n        return axisModelMap;\r\n    }\n\n    var inner$5 = makeInner();\r\n    function rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\r\n        var axis = axisModel.axis;\r\n        if (axis.scale.isBlank()) {\r\n            return;\r\n        }\r\n        var splitAreaModel = axisModel.getModel('splitArea');\r\n        var areaStyleModel = splitAreaModel.getModel('areaStyle');\r\n        var areaColors = areaStyleModel.get('color');\r\n        var gridRect = gridModel.coordinateSystem.getRect();\r\n        var ticksCoords = axis.getTicksCoords({\r\n            tickModel: splitAreaModel,\r\n            clamp: true\r\n        });\r\n        if (!ticksCoords.length) {\r\n            return;\r\n        }\r\n        var areaColorsLen = areaColors.length;\r\n        var lastSplitAreaColors = inner$5(axisView).splitAreaColors;\r\n        var newSplitAreaColors = createHashMap();\r\n        var colorIndex = 0;\r\n        if (lastSplitAreaColors) {\r\n            for (var i = 0; i < ticksCoords.length; i++) {\r\n                var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\r\n                if (cIndex != null) {\r\n                    colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        var prev = axis.toGlobalCoord(ticksCoords[0].coord);\r\n        var areaStyle = areaStyleModel.getAreaStyle();\r\n        areaColors = isArray(areaColors) ? areaColors : [areaColors];\r\n        for (var i = 1; i < ticksCoords.length; i++) {\r\n            var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\r\n            var x = void 0;\r\n            var y = void 0;\r\n            var width = void 0;\r\n            var height = void 0;\r\n            if (axis.isHorizontal()) {\r\n                x = prev;\r\n                y = gridRect.y;\r\n                width = tickCoord - x;\r\n                height = gridRect.height;\r\n                prev = x + width;\r\n            }\r\n            else {\r\n                x = gridRect.x;\r\n                y = prev;\r\n                width = gridRect.width;\r\n                height = tickCoord - y;\r\n                prev = y + height;\r\n            }\r\n            var tickValue = ticksCoords[i - 1].tickValue;\r\n            tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\r\n            axisGroup.add(new Rect({\r\n                anid: tickValue != null ? 'area_' + tickValue : null,\r\n                shape: {\r\n                    x: x,\r\n                    y: y,\r\n                    width: width,\r\n                    height: height\r\n                },\r\n                style: defaults({\r\n                    fill: areaColors[colorIndex]\r\n                }, areaStyle),\r\n                autoBatch: true,\r\n                silent: true\r\n            }));\r\n            colorIndex = (colorIndex + 1) % areaColorsLen;\r\n        }\r\n        inner$5(axisView).splitAreaColors = newSplitAreaColors;\r\n    }\r\n    function rectCoordAxisHandleRemove(axisView) {\r\n        inner$5(axisView).splitAreaColors = null;\r\n    }\n\n    var axisBuilderAttrs = [\r\n        'axisLine', 'axisTickLabel', 'axisName'\r\n    ];\r\n    var selfBuilderAttrs = [\r\n        'splitArea', 'splitLine', 'minorSplitLine'\r\n    ];\r\n    var CartesianAxisView = (function (_super) {\r\n        __extends(CartesianAxisView, _super);\r\n        function CartesianAxisView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = CartesianAxisView.type;\r\n            _this.axisPointerClass = 'CartesianAxisPointer';\r\n            return _this;\r\n        }\r\n        CartesianAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\r\n            this.group.removeAll();\r\n            var oldAxisGroup = this._axisGroup;\r\n            this._axisGroup = new Group();\r\n            this.group.add(this._axisGroup);\r\n            if (!axisModel.get('show')) {\r\n                return;\r\n            }\r\n            var gridModel = axisModel.getCoordSysModel();\r\n            var layout = layout$1(gridModel, axisModel);\r\n            var axisBuilder = new AxisBuilder(axisModel, extend({\r\n                handleAutoShown: function (elementType) {\r\n                    var cartesians = gridModel.coordinateSystem.getCartesians();\r\n                    for (var i = 0; i < cartesians.length; i++) {\r\n                        var otherAxisType = cartesians[i].getOtherAxis(axisModel.axis).type;\r\n                        if (otherAxisType === 'value' || otherAxisType === 'log') {\r\n                            return true;\r\n                        }\r\n                    }\r\n                    return false;\r\n                }\r\n            }, layout));\r\n            each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\r\n            this._axisGroup.add(axisBuilder.getGroup());\r\n            each(selfBuilderAttrs, function (name) {\r\n                if (axisModel.get([name, 'show'])) {\r\n                    axisElementBuilders[name](this, this._axisGroup, axisModel, gridModel);\r\n                }\r\n            }, this);\r\n            groupTransition(oldAxisGroup, this._axisGroup, axisModel);\r\n            _super.prototype.render.call(this, axisModel, ecModel, api, payload);\r\n        };\r\n        CartesianAxisView.prototype.remove = function () {\r\n            rectCoordAxisHandleRemove(this);\r\n        };\r\n        CartesianAxisView.type = 'cartesianAxis';\r\n        return CartesianAxisView;\r\n    }(AxisView));\r\n    var axisElementBuilders = {\r\n        splitLine: function (axisView, axisGroup, axisModel, gridModel) {\r\n            var axis = axisModel.axis;\r\n            if (axis.scale.isBlank()) {\r\n                return;\r\n            }\r\n            var splitLineModel = axisModel.getModel('splitLine');\r\n            var lineStyleModel = splitLineModel.getModel('lineStyle');\r\n            var lineColors = lineStyleModel.get('color');\r\n            lineColors = isArray(lineColors) ? lineColors : [lineColors];\r\n            var gridRect = gridModel.coordinateSystem.getRect();\r\n            var isHorizontal = axis.isHorizontal();\r\n            var lineCount = 0;\r\n            var ticksCoords = axis.getTicksCoords({\r\n                tickModel: splitLineModel\r\n            });\r\n            var p1 = [];\r\n            var p2 = [];\r\n            var lineStyle = lineStyleModel.getLineStyle();\r\n            for (var i = 0; i < ticksCoords.length; i++) {\r\n                var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\r\n                if (isHorizontal) {\r\n                    p1[0] = tickCoord;\r\n                    p1[1] = gridRect.y;\r\n                    p2[0] = tickCoord;\r\n                    p2[1] = gridRect.y + gridRect.height;\r\n                }\r\n                else {\r\n                    p1[0] = gridRect.x;\r\n                    p1[1] = tickCoord;\r\n                    p2[0] = gridRect.x + gridRect.width;\r\n                    p2[1] = tickCoord;\r\n                }\r\n                var colorIndex = (lineCount++) % lineColors.length;\r\n                var tickValue = ticksCoords[i].tickValue;\r\n                axisGroup.add(new Line({\r\n                    anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null,\r\n                    subPixelOptimize: true,\r\n                    autoBatch: true,\r\n                    shape: {\r\n                        x1: p1[0],\r\n                        y1: p1[1],\r\n                        x2: p2[0],\r\n                        y2: p2[1]\r\n                    },\r\n                    style: defaults({\r\n                        stroke: lineColors[colorIndex]\r\n                    }, lineStyle),\r\n                    silent: true\r\n                }));\r\n            }\r\n        },\r\n        minorSplitLine: function (axisView, axisGroup, axisModel, gridModel) {\r\n            var axis = axisModel.axis;\r\n            var minorSplitLineModel = axisModel.getModel('minorSplitLine');\r\n            var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\r\n            var gridRect = gridModel.coordinateSystem.getRect();\r\n            var isHorizontal = axis.isHorizontal();\r\n            var minorTicksCoords = axis.getMinorTicksCoords();\r\n            if (!minorTicksCoords.length) {\r\n                return;\r\n            }\r\n            var p1 = [];\r\n            var p2 = [];\r\n            var lineStyle = lineStyleModel.getLineStyle();\r\n            for (var i = 0; i < minorTicksCoords.length; i++) {\r\n                for (var k = 0; k < minorTicksCoords[i].length; k++) {\r\n                    var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\r\n                    if (isHorizontal) {\r\n                        p1[0] = tickCoord;\r\n                        p1[1] = gridRect.y;\r\n                        p2[0] = tickCoord;\r\n                        p2[1] = gridRect.y + gridRect.height;\r\n                    }\r\n                    else {\r\n                        p1[0] = gridRect.x;\r\n                        p1[1] = tickCoord;\r\n                        p2[0] = gridRect.x + gridRect.width;\r\n                        p2[1] = tickCoord;\r\n                    }\r\n                    axisGroup.add(new Line({\r\n                        anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\r\n                        subPixelOptimize: true,\r\n                        autoBatch: true,\r\n                        shape: {\r\n                            x1: p1[0],\r\n                            y1: p1[1],\r\n                            x2: p2[0],\r\n                            y2: p2[1]\r\n                        },\r\n                        style: lineStyle,\r\n                        silent: true\r\n                    }));\r\n                }\r\n            }\r\n        },\r\n        splitArea: function (axisView, axisGroup, axisModel, gridModel) {\r\n            rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel);\r\n        }\r\n    };\r\n    var CartesianXAxisView = (function (_super) {\r\n        __extends(CartesianXAxisView, _super);\r\n        function CartesianXAxisView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = CartesianXAxisView.type;\r\n            return _this;\r\n        }\r\n        CartesianXAxisView.type = 'xAxis';\r\n        return CartesianXAxisView;\r\n    }(CartesianAxisView));\r\n    var CartesianYAxisView = (function (_super) {\r\n        __extends(CartesianYAxisView, _super);\r\n        function CartesianYAxisView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = CartesianXAxisView.type;\r\n            return _this;\r\n        }\r\n        CartesianYAxisView.type = 'yAxis';\r\n        return CartesianYAxisView;\r\n    }(CartesianAxisView));\r\n    ComponentView.registerClass(CartesianXAxisView);\r\n    ComponentView.registerClass(CartesianYAxisView);\n\n    registerProcessor(PRIORITY.PROCESSOR.FILTER + 10, {\r\n        getTargetSeries: function (ecModel) {\r\n            var seriesModelMap = createHashMap();\r\n            ecModel.eachSeries(function (seriesModel) {\r\n                isCartesian2DSeries(seriesModel) && seriesModelMap.set(seriesModel.uid, seriesModel);\r\n            });\r\n            return seriesModelMap;\r\n        },\r\n        overallReset: function (ecModel, api) {\r\n            var seriesRecords = [];\r\n            var axisRecordMap = createHashMap();\r\n            prepareDataExtentOnAxis(ecModel, axisRecordMap, seriesRecords);\r\n            calculateFilteredExtent(axisRecordMap, seriesRecords);\r\n            shrinkAxisExtent(axisRecordMap);\r\n        }\r\n    });\r\n    function prepareDataExtentOnAxis(ecModel, axisRecordMap, seriesRecords) {\r\n        ecModel.eachSeries(function (seriesModel) {\r\n            if (!isCartesian2DSeries(seriesModel)) {\r\n                return;\r\n            }\r\n            var axesModelMap = findAxisModels(seriesModel);\r\n            var xAxisModel = axesModelMap.xAxisModel;\r\n            var yAxisModel = axesModelMap.yAxisModel;\r\n            var xAxis = xAxisModel.axis;\r\n            var yAxis = yAxisModel.axis;\r\n            var xRawExtentInfo = xAxis.scale.rawExtentInfo;\r\n            var yRawExtentInfo = yAxis.scale.rawExtentInfo;\r\n            var data = seriesModel.getData();\r\n            if ((xRawExtentInfo && xRawExtentInfo.frozen)\r\n                || (yRawExtentInfo && yRawExtentInfo.frozen)) {\r\n                return;\r\n            }\r\n            seriesRecords.push({\r\n                seriesModel: seriesModel,\r\n                xAxisModel: xAxisModel,\r\n                yAxisModel: yAxisModel\r\n            });\r\n            unionAxisExtentFromData(prepareAxisRecord(axisRecordMap, xAxisModel).condExtent, data, xAxis.dim);\r\n            unionAxisExtentFromData(prepareAxisRecord(axisRecordMap, yAxisModel).condExtent, data, yAxis.dim);\r\n        });\r\n    }\r\n    function calculateFilteredExtent(axisRecordMap, seriesRecords) {\r\n        each(seriesRecords, function (seriesRecord) {\r\n            var xAxisModel = seriesRecord.xAxisModel;\r\n            var yAxisModel = seriesRecord.yAxisModel;\r\n            var xAxis = xAxisModel.axis;\r\n            var yAxis = yAxisModel.axis;\r\n            var xAxisRecord = prepareAxisRecord(axisRecordMap, xAxisModel);\r\n            var yAxisRecord = prepareAxisRecord(axisRecordMap, yAxisModel);\r\n            xAxisRecord.rawExtentInfo = ensureScaleRawExtentInfo(xAxis.scale, xAxisModel, xAxisRecord.condExtent);\r\n            yAxisRecord.rawExtentInfo = ensureScaleRawExtentInfo(yAxis.scale, yAxisModel, yAxisRecord.condExtent);\r\n            xAxisRecord.rawExtentResult = xAxisRecord.rawExtentInfo.calculate();\r\n            yAxisRecord.rawExtentResult = yAxisRecord.rawExtentInfo.calculate();\r\n            var data = seriesRecord.seriesModel.getData();\r\n            var condDimMap = {};\r\n            var tarDimMap = {};\r\n            var condAxis;\r\n            var tarAxisRecord;\r\n            function addCondition(axis, axisRecord) {\r\n                var condExtent = axisRecord.condExtent;\r\n                var rawExtentResult = axisRecord.rawExtentResult;\r\n                if (axis.type === 'category'\r\n                    && (condExtent[0] < rawExtentResult.min || rawExtentResult.max < condExtent[1])) {\r\n                    each(getDataDimensionsOnAxis(data, axis.dim), function (dataDim) {\r\n                        if (!hasOwn(condDimMap, dataDim)) {\r\n                            condDimMap[dataDim] = true;\r\n                            condAxis = axis;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            function addTarget(axis, axisRecord) {\r\n                var rawExtentResult = axisRecord.rawExtentResult;\r\n                if (axis.type !== 'category'\r\n                    && (!rawExtentResult.minFixed || !rawExtentResult.maxFixed)) {\r\n                    each(getDataDimensionsOnAxis(data, axis.dim), function (dataDim) {\r\n                        if (!hasOwn(condDimMap, dataDim) && !hasOwn(tarDimMap, dataDim)) {\r\n                            tarDimMap[dataDim] = true;\r\n                            tarAxisRecord = axisRecord;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            addCondition(xAxis, xAxisRecord);\r\n            addCondition(yAxis, yAxisRecord);\r\n            addTarget(xAxis, xAxisRecord);\r\n            addTarget(yAxis, yAxisRecord);\r\n            var condDims = keys(condDimMap);\r\n            var tarDims = keys(tarDimMap);\r\n            var tarDimExtents = map(tarDims, function () {\r\n                return initExtent();\r\n            });\r\n            var condDimsLen = condDims.length;\r\n            var tarDimsLen = tarDims.length;\r\n            if (!condDimsLen || !tarDimsLen) {\r\n                return;\r\n            }\r\n            var singleCondDim = condDimsLen === 1 ? condDims[0] : null;\r\n            var singleTarDim = tarDimsLen === 1 ? tarDims[0] : null;\r\n            var dataLen = data.count();\r\n            if (singleCondDim && singleTarDim) {\r\n                for (var dataIdx = 0; dataIdx < dataLen; dataIdx++) {\r\n                    var condVal = data.get(singleCondDim, dataIdx);\r\n                    if (condAxis.scale.isInExtentRange(condVal)) {\r\n                        unionExtent(tarDimExtents[0], data.get(singleTarDim, dataIdx));\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                for (var dataIdx = 0; dataIdx < dataLen; dataIdx++) {\r\n                    for (var j = 0; j < condDimsLen; j++) {\r\n                        var condVal = data.get(condDims[j], dataIdx);\r\n                        if (condAxis.scale.isInExtentRange(condVal)) {\r\n                            for (var k = 0; k < tarDimsLen; k++) {\r\n                                unionExtent(tarDimExtents[k], data.get(tarDims[k], dataIdx));\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            each(tarDimExtents, function (tarDimExtent, i) {\r\n                var dim = tarDims[i];\r\n                data.setApproximateExtent(tarDimExtent, dim);\r\n                var tarAxisExtent = tarAxisRecord.tarExtent = tarAxisRecord.tarExtent || initExtent();\r\n                unionExtent(tarAxisExtent, tarDimExtent[0]);\r\n                unionExtent(tarAxisExtent, tarDimExtent[1]);\r\n            });\r\n        });\r\n    }\r\n    function shrinkAxisExtent(axisRecordMap) {\r\n        axisRecordMap.each(function (axisRecord) {\r\n            var tarAxisExtent = axisRecord.tarExtent;\r\n            if (tarAxisExtent) {\r\n                var rawExtentResult = axisRecord.rawExtentResult;\r\n                var rawExtentInfo = axisRecord.rawExtentInfo;\r\n                if (!rawExtentResult.minFixed && tarAxisExtent[0] > rawExtentResult.min) {\r\n                    rawExtentInfo.modifyDataMinMax('min', tarAxisExtent[0]);\r\n                }\r\n                if (!rawExtentResult.maxFixed && tarAxisExtent[1] < rawExtentResult.max) {\r\n                    rawExtentInfo.modifyDataMinMax('max', tarAxisExtent[1]);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    function prepareAxisRecord(axisRecordMap, axisModel) {\r\n        return axisRecordMap.get(axisModel.uid)\r\n            || axisRecordMap.set(axisModel.uid, { condExtent: initExtent() });\r\n    }\r\n    function initExtent() {\r\n        return [Infinity, -Infinity];\r\n    }\r\n    function unionExtent(extent, val) {\r\n        val < extent[0] && (extent[0] = val);\r\n        val > extent[1] && (extent[1] = val);\r\n    }\n\n    var GridModel = (function (_super) {\r\n        __extends(GridModel, _super);\r\n        function GridModel() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        GridModel.type = 'grid';\r\n        GridModel.dependencies = ['xAxis', 'yAxis'];\r\n        GridModel.layoutMode = 'box';\r\n        GridModel.defaultOption = {\r\n            show: false,\r\n            zlevel: 0,\r\n            z: 0,\r\n            left: '10%',\r\n            top: 60,\r\n            right: '10%',\r\n            bottom: 60,\r\n            containLabel: false,\r\n            backgroundColor: 'rgba(0,0,0,0)',\r\n            borderWidth: 1,\r\n            borderColor: '#ccc'\r\n        };\r\n        return GridModel;\r\n    }(ComponentModel));\n\n    var GridView = (function (_super) {\r\n        __extends(GridView, _super);\r\n        function GridView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = 'grid';\r\n            return _this;\r\n        }\r\n        GridView.prototype.render = function (gridModel, ecModel) {\r\n            this.group.removeAll();\r\n            if (gridModel.get('show')) {\r\n                this.group.add(new Rect({\r\n                    shape: gridModel.coordinateSystem.getRect(),\r\n                    style: defaults({\r\n                        fill: gridModel.get('backgroundColor')\r\n                    }, gridModel.getItemStyle()),\r\n                    silent: true,\r\n                    z2: -1\r\n                }));\r\n            }\r\n        };\r\n        GridView.type = 'grid';\r\n        return GridView;\r\n    }(ComponentView));\r\n    ComponentView.registerClass(GridView);\r\n    ComponentModel.registerClass(GridModel);\r\n    registerPreprocessor(function (option) {\r\n        if (option.xAxis && option.yAxis && !option.grid) {\r\n            option.grid = {};\r\n        }\r\n    });\n\n    registerLayout(layoutPoints('line', true));\r\n    registerProcessor(PRIORITY.PROCESSOR.STATISTIC, dataSample('line'));\n\n    var Cartesian = (function () {\r\n        function Cartesian(name) {\r\n            this.type = 'cartesian';\r\n            this._dimList = [];\r\n            this._axes = {};\r\n            this.name = name || '';\r\n        }\r\n        Cartesian.prototype.getAxis = function (dim) {\r\n            return this._axes[dim];\r\n        };\r\n        Cartesian.prototype.getAxes = function () {\r\n            return map(this._dimList, function (dim) {\r\n                return this._axes[dim];\r\n            }, this);\r\n        };\r\n        Cartesian.prototype.getAxesByScale = function (scaleType) {\r\n            scaleType = scaleType.toLowerCase();\r\n            return filter(this.getAxes(), function (axis) {\r\n                return axis.scale.type === scaleType;\r\n            });\r\n        };\r\n        Cartesian.prototype.addAxis = function (axis) {\r\n            var dim = axis.dim;\r\n            this._axes[dim] = axis;\r\n            this._dimList.push(dim);\r\n        };\r\n        return Cartesian;\r\n    }());\n\n    var cartesian2DDimensions = ['x', 'y'];\r\n    function canCalculateAffineTransform(scale) {\r\n        return scale.type === 'interval' || scale.type === 'time';\r\n    }\r\n    var Cartesian2D = (function (_super) {\r\n        __extends(Cartesian2D, _super);\r\n        function Cartesian2D() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = 'cartesian2d';\r\n            _this.dimensions = cartesian2DDimensions;\r\n            return _this;\r\n        }\r\n        Cartesian2D.prototype.calcAffineTransform = function () {\r\n            this._transform = this._invTransform = null;\r\n            var xAxisScale = this.getAxis('x').scale;\r\n            var yAxisScale = this.getAxis('y').scale;\r\n            if (!canCalculateAffineTransform(xAxisScale) || !canCalculateAffineTransform(yAxisScale)) {\r\n                return;\r\n            }\r\n            var xScaleExtent = xAxisScale.getExtent();\r\n            var yScaleExtent = yAxisScale.getExtent();\r\n            var start = this.dataToPoint([xScaleExtent[0], yScaleExtent[0]]);\r\n            var end = this.dataToPoint([xScaleExtent[1], yScaleExtent[1]]);\r\n            var xScaleSpan = xScaleExtent[1] - xScaleExtent[0];\r\n            var yScaleSpan = yScaleExtent[1] - yScaleExtent[0];\r\n            if (!xScaleSpan || !yScaleSpan) {\r\n                return;\r\n            }\r\n            var scaleX = (end[0] - start[0]) / xScaleSpan;\r\n            var scaleY = (end[1] - start[1]) / yScaleSpan;\r\n            var translateX = start[0] - xScaleExtent[0] * scaleX;\r\n            var translateY = start[1] - yScaleExtent[0] * scaleY;\r\n            var m = this._transform = [scaleX, 0, 0, scaleY, translateX, translateY];\r\n            this._invTransform = invert([], m);\r\n        };\r\n        Cartesian2D.prototype.getBaseAxis = function () {\r\n            return this.getAxesByScale('ordinal')[0]\r\n                || this.getAxesByScale('time')[0]\r\n                || this.getAxis('x');\r\n        };\r\n        Cartesian2D.prototype.containPoint = function (point) {\r\n            var axisX = this.getAxis('x');\r\n            var axisY = this.getAxis('y');\r\n            return axisX.contain(axisX.toLocalCoord(point[0]))\r\n                && axisY.contain(axisY.toLocalCoord(point[1]));\r\n        };\r\n        Cartesian2D.prototype.containData = function (data) {\r\n            return this.getAxis('x').containData(data[0])\r\n                && this.getAxis('y').containData(data[1]);\r\n        };\r\n        Cartesian2D.prototype.dataToPoint = function (data, reserved, out) {\r\n            out = out || [];\r\n            if (this._transform && !isNaN(data[0]) && !isNaN(data[1])) {\r\n                return applyTransform(out, data, this._transform);\r\n            }\r\n            var xAxis = this.getAxis('x');\r\n            var yAxis = this.getAxis('y');\r\n            out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(data[0]));\r\n            out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(data[1]));\r\n            return out;\r\n        };\r\n        Cartesian2D.prototype.clampData = function (data, out) {\r\n            var xScale = this.getAxis('x').scale;\r\n            var yScale = this.getAxis('y').scale;\r\n            var xAxisExtent = xScale.getExtent();\r\n            var yAxisExtent = yScale.getExtent();\r\n            var x = xScale.parse(data[0]);\r\n            var y = yScale.parse(data[1]);\r\n            out = out || [];\r\n            out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\r\n            out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\r\n            return out;\r\n        };\r\n        Cartesian2D.prototype.pointToData = function (point, out) {\r\n            out = out || [];\r\n            if (this._invTransform) {\r\n                return applyTransform(out, point, this._invTransform);\r\n            }\r\n            var xAxis = this.getAxis('x');\r\n            var yAxis = this.getAxis('y');\r\n            out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]));\r\n            out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]));\r\n            return out;\r\n        };\r\n        Cartesian2D.prototype.getOtherAxis = function (axis) {\r\n            return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\r\n        };\r\n        Cartesian2D.prototype.getArea = function () {\r\n            var xExtent = this.getAxis('x').getGlobalExtent();\r\n            var yExtent = this.getAxis('y').getGlobalExtent();\r\n            var x = Math.min(xExtent[0], xExtent[1]);\r\n            var y = Math.min(yExtent[0], yExtent[1]);\r\n            var width = Math.max(xExtent[0], xExtent[1]) - x;\r\n            var height = Math.max(yExtent[0], yExtent[1]) - y;\r\n            return new BoundingRect(x, y, width, height);\r\n        };\r\n        return Cartesian2D;\r\n    }(Cartesian));\n\n    var inner$6 = makeInner();\r\n    function createAxisLabels(axis) {\r\n        return axis.type === 'category'\r\n            ? makeCategoryLabels(axis)\r\n            : makeRealNumberLabels(axis);\r\n    }\r\n    function createAxisTicks(axis, tickModel) {\r\n        return axis.type === 'category'\r\n            ? makeCategoryTicks(axis, tickModel)\r\n            : { ticks: map(axis.scale.getTicks(), function (tick) { return tick.value; }) };\r\n    }\r\n    function makeCategoryLabels(axis) {\r\n        var labelModel = axis.getLabelModel();\r\n        var result = makeCategoryLabelsActually(axis, labelModel);\r\n        return (!labelModel.get('show') || axis.scale.isBlank())\r\n            ? { labels: [], labelCategoryInterval: result.labelCategoryInterval }\r\n            : result;\r\n    }\r\n    function makeCategoryLabelsActually(axis, labelModel) {\r\n        var labelsCache = getListCache(axis, 'labels');\r\n        var optionLabelInterval = getOptionCategoryInterval(labelModel);\r\n        var result = listCacheGet(labelsCache, optionLabelInterval);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        var labels;\r\n        var numericLabelInterval;\r\n        if (isFunction(optionLabelInterval)) {\r\n            labels = makeLabelsByCustomizedCategoryInterval(axis, optionLabelInterval);\r\n        }\r\n        else {\r\n            numericLabelInterval = optionLabelInterval === 'auto'\r\n                ? makeAutoCategoryInterval(axis) : optionLabelInterval;\r\n            labels = makeLabelsByNumericCategoryInterval(axis, numericLabelInterval);\r\n        }\r\n        return listCacheSet(labelsCache, optionLabelInterval, {\r\n            labels: labels, labelCategoryInterval: numericLabelInterval\r\n        });\r\n    }\r\n    function makeCategoryTicks(axis, tickModel) {\r\n        var ticksCache = getListCache(axis, 'ticks');\r\n        var optionTickInterval = getOptionCategoryInterval(tickModel);\r\n        var result = listCacheGet(ticksCache, optionTickInterval);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        var ticks;\r\n        var tickCategoryInterval;\r\n        if (!tickModel.get('show') || axis.scale.isBlank()) {\r\n            ticks = [];\r\n        }\r\n        if (isFunction(optionTickInterval)) {\r\n            ticks = makeLabelsByCustomizedCategoryInterval(axis, optionTickInterval, true);\r\n        }\r\n        else if (optionTickInterval === 'auto') {\r\n            var labelsResult = makeCategoryLabelsActually(axis, axis.getLabelModel());\r\n            tickCategoryInterval = labelsResult.labelCategoryInterval;\r\n            ticks = map(labelsResult.labels, function (labelItem) {\r\n                return labelItem.tickValue;\r\n            });\r\n        }\r\n        else {\r\n            tickCategoryInterval = optionTickInterval;\r\n            ticks = makeLabelsByNumericCategoryInterval(axis, tickCategoryInterval, true);\r\n        }\r\n        return listCacheSet(ticksCache, optionTickInterval, {\r\n            ticks: ticks, tickCategoryInterval: tickCategoryInterval\r\n        });\r\n    }\r\n    function makeRealNumberLabels(axis) {\r\n        var ticks = axis.scale.getTicks();\r\n        var labelFormatter = makeLabelFormatter(axis);\r\n        return {\r\n            labels: map(ticks, function (tick, idx) {\r\n                return {\r\n                    formattedLabel: labelFormatter(tick, idx),\r\n                    rawLabel: axis.scale.getLabel(tick),\r\n                    tickValue: tick.value\r\n                };\r\n            })\r\n        };\r\n    }\r\n    function getListCache(axis, prop) {\r\n        return inner$6(axis)[prop] || (inner$6(axis)[prop] = []);\r\n    }\r\n    function listCacheGet(cache, key) {\r\n        for (var i = 0; i < cache.length; i++) {\r\n            if (cache[i].key === key) {\r\n                return cache[i].value;\r\n            }\r\n        }\r\n    }\r\n    function listCacheSet(cache, key, value) {\r\n        cache.push({ key: key, value: value });\r\n        return value;\r\n    }\r\n    function makeAutoCategoryInterval(axis) {\r\n        var result = inner$6(axis).autoInterval;\r\n        return result != null\r\n            ? result\r\n            : (inner$6(axis).autoInterval = axis.calculateCategoryInterval());\r\n    }\r\n    function calculateCategoryInterval(axis) {\r\n        var params = fetchAutoCategoryIntervalCalculationParams(axis);\r\n        var labelFormatter = makeLabelFormatter(axis);\r\n        var rotation = (params.axisRotate - params.labelRotate) / 180 * Math.PI;\r\n        var ordinalScale = axis.scale;\r\n        var ordinalExtent = ordinalScale.getExtent();\r\n        var tickCount = ordinalScale.count();\r\n        if (ordinalExtent[1] - ordinalExtent[0] < 1) {\r\n            return 0;\r\n        }\r\n        var step = 1;\r\n        if (tickCount > 40) {\r\n            step = Math.max(1, Math.floor(tickCount / 40));\r\n        }\r\n        var tickValue = ordinalExtent[0];\r\n        var unitSpan = axis.dataToCoord(tickValue + 1) - axis.dataToCoord(tickValue);\r\n        var unitW = Math.abs(unitSpan * Math.cos(rotation));\r\n        var unitH = Math.abs(unitSpan * Math.sin(rotation));\r\n        var maxW = 0;\r\n        var maxH = 0;\r\n        for (; tickValue <= ordinalExtent[1]; tickValue += step) {\r\n            var width = 0;\r\n            var height = 0;\r\n            var rect = getBoundingRect(labelFormatter({ value: tickValue }), params.font, 'center', 'top');\r\n            width = rect.width * 1.3;\r\n            height = rect.height * 1.3;\r\n            maxW = Math.max(maxW, width, 7);\r\n            maxH = Math.max(maxH, height, 7);\r\n        }\r\n        var dw = maxW / unitW;\r\n        var dh = maxH / unitH;\r\n        isNaN(dw) && (dw = Infinity);\r\n        isNaN(dh) && (dh = Infinity);\r\n        var interval = Math.max(0, Math.floor(Math.min(dw, dh)));\r\n        var cache = inner$6(axis.model);\r\n        var axisExtent = axis.getExtent();\r\n        var lastAutoInterval = cache.lastAutoInterval;\r\n        var lastTickCount = cache.lastTickCount;\r\n        if (lastAutoInterval != null\r\n            && lastTickCount != null\r\n            && Math.abs(lastAutoInterval - interval) <= 1\r\n            && Math.abs(lastTickCount - tickCount) <= 1\r\n            && lastAutoInterval > interval\r\n            && cache.axisExtent0 === axisExtent[0]\r\n            && cache.axisExtent1 === axisExtent[1]) {\r\n            interval = lastAutoInterval;\r\n        }\r\n        else {\r\n            cache.lastTickCount = tickCount;\r\n            cache.lastAutoInterval = interval;\r\n            cache.axisExtent0 = axisExtent[0];\r\n            cache.axisExtent1 = axisExtent[1];\r\n        }\r\n        return interval;\r\n    }\r\n    function fetchAutoCategoryIntervalCalculationParams(axis) {\r\n        var labelModel = axis.getLabelModel();\r\n        return {\r\n            axisRotate: axis.getRotate\r\n                ? axis.getRotate()\r\n                : (axis.isHorizontal && !axis.isHorizontal())\r\n                    ? 90\r\n                    : 0,\r\n            labelRotate: labelModel.get('rotate') || 0,\r\n            font: labelModel.getFont()\r\n        };\r\n    }\r\n    function makeLabelsByNumericCategoryInterval(axis, categoryInterval, onlyTick) {\r\n        var labelFormatter = makeLabelFormatter(axis);\r\n        var ordinalScale = axis.scale;\r\n        var ordinalExtent = ordinalScale.getExtent();\r\n        var labelModel = axis.getLabelModel();\r\n        var result = [];\r\n        var step = Math.max((categoryInterval || 0) + 1, 1);\r\n        var startTick = ordinalExtent[0];\r\n        var tickCount = ordinalScale.count();\r\n        if (startTick !== 0 && step > 1 && tickCount / step > 2) {\r\n            startTick = Math.round(Math.ceil(startTick / step) * step);\r\n        }\r\n        var showAllLabel = shouldShowAllLabels(axis);\r\n        var includeMinLabel = labelModel.get('showMinLabel') || showAllLabel;\r\n        var includeMaxLabel = labelModel.get('showMaxLabel') || showAllLabel;\r\n        if (includeMinLabel && startTick !== ordinalExtent[0]) {\r\n            addItem(ordinalExtent[0]);\r\n        }\r\n        var tickValue = startTick;\r\n        for (; tickValue <= ordinalExtent[1]; tickValue += step) {\r\n            addItem(tickValue);\r\n        }\r\n        if (includeMaxLabel && tickValue - step !== ordinalExtent[1]) {\r\n            addItem(ordinalExtent[1]);\r\n        }\r\n        function addItem(tickValue) {\r\n            var tickObj = { value: tickValue };\r\n            result.push(onlyTick\r\n                ? tickValue\r\n                : {\r\n                    formattedLabel: labelFormatter(tickObj),\r\n                    rawLabel: ordinalScale.getLabel(tickObj),\r\n                    tickValue: tickValue\r\n                });\r\n        }\r\n        return result;\r\n    }\r\n    function makeLabelsByCustomizedCategoryInterval(axis, categoryInterval, onlyTick) {\r\n        var ordinalScale = axis.scale;\r\n        var labelFormatter = makeLabelFormatter(axis);\r\n        var result = [];\r\n        each(ordinalScale.getTicks(), function (tick) {\r\n            var rawLabel = ordinalScale.getLabel(tick);\r\n            var tickValue = tick.value;\r\n            if (categoryInterval(tick.value, rawLabel)) {\r\n                result.push(onlyTick\r\n                    ? tickValue\r\n                    : {\r\n                        formattedLabel: labelFormatter(tick),\r\n                        rawLabel: rawLabel,\r\n                        tickValue: tickValue\r\n                    });\r\n            }\r\n        });\r\n        return result;\r\n    }\n\n    var NORMALIZED_EXTENT = [0, 1];\r\n    var Axis = (function () {\r\n        function Axis(dim, scale, extent) {\r\n            this.onBand = false;\r\n            this.inverse = false;\r\n            this.dim = dim;\r\n            this.scale = scale;\r\n            this._extent = extent || [0, 0];\r\n        }\r\n        Axis.prototype.contain = function (coord) {\r\n            var extent = this._extent;\r\n            var min = Math.min(extent[0], extent[1]);\r\n            var max = Math.max(extent[0], extent[1]);\r\n            return coord >= min && coord <= max;\r\n        };\r\n        Axis.prototype.containData = function (data) {\r\n            return this.scale.contain(data);\r\n        };\r\n        Axis.prototype.getExtent = function () {\r\n            return this._extent.slice();\r\n        };\r\n        Axis.prototype.getPixelPrecision = function (dataExtent) {\r\n            return getPixelPrecision(dataExtent || this.scale.getExtent(), this._extent);\r\n        };\r\n        Axis.prototype.setExtent = function (start, end) {\r\n            var extent = this._extent;\r\n            extent[0] = start;\r\n            extent[1] = end;\r\n        };\r\n        Axis.prototype.dataToCoord = function (data, clamp) {\r\n            var extent = this._extent;\r\n            var scale = this.scale;\r\n            data = scale.normalize(data);\r\n            if (this.onBand && scale.type === 'ordinal') {\r\n                extent = extent.slice();\r\n                fixExtentWithBands(extent, scale.count());\r\n            }\r\n            return linearMap(data, NORMALIZED_EXTENT, extent, clamp);\r\n        };\r\n        Axis.prototype.coordToData = function (coord, clamp) {\r\n            var extent = this._extent;\r\n            var scale = this.scale;\r\n            if (this.onBand && scale.type === 'ordinal') {\r\n                extent = extent.slice();\r\n                fixExtentWithBands(extent, scale.count());\r\n            }\r\n            var t = linearMap(coord, extent, NORMALIZED_EXTENT, clamp);\r\n            return this.scale.scale(t);\r\n        };\r\n        Axis.prototype.pointToData = function (point, clamp) {\r\n            return;\r\n        };\r\n        Axis.prototype.getTicksCoords = function (opt) {\r\n            opt = opt || {};\r\n            var tickModel = opt.tickModel || this.getTickModel();\r\n            var result = createAxisTicks(this, tickModel);\r\n            var ticks = result.ticks;\r\n            var ticksCoords = map(ticks, function (tickVal) {\r\n                return {\r\n                    coord: this.dataToCoord(this.scale.type === 'ordinal'\r\n                        ? this.scale.getRawIndex(tickVal)\r\n                        : tickVal),\r\n                    tickValue: tickVal\r\n                };\r\n            }, this);\r\n            var alignWithLabel = tickModel.get('alignWithLabel');\r\n            fixOnBandTicksCoords(this, ticksCoords, alignWithLabel, opt.clamp);\r\n            return ticksCoords;\r\n        };\r\n        Axis.prototype.getMinorTicksCoords = function () {\r\n            if (this.scale.type === 'ordinal') {\r\n                return [];\r\n            }\r\n            var minorTickModel = this.model.getModel('minorTick');\r\n            var splitNumber = minorTickModel.get('splitNumber');\r\n            if (!(splitNumber > 0 && splitNumber < 100)) {\r\n                splitNumber = 5;\r\n            }\r\n            var minorTicks = this.scale.getMinorTicks(splitNumber);\r\n            var minorTicksCoords = map(minorTicks, function (minorTicksGroup) {\r\n                return map(minorTicksGroup, function (minorTick) {\r\n                    return {\r\n                        coord: this.dataToCoord(minorTick),\r\n                        tickValue: minorTick\r\n                    };\r\n                }, this);\r\n            }, this);\r\n            return minorTicksCoords;\r\n        };\r\n        Axis.prototype.getViewLabels = function () {\r\n            return createAxisLabels(this).labels;\r\n        };\r\n        Axis.prototype.getLabelModel = function () {\r\n            return this.model.getModel('axisLabel');\r\n        };\r\n        Axis.prototype.getTickModel = function () {\r\n            return this.model.getModel('axisTick');\r\n        };\r\n        Axis.prototype.getBandWidth = function () {\r\n            var axisExtent = this._extent;\r\n            var dataExtent = this.scale.getExtent();\r\n            var len = dataExtent[1] - dataExtent[0] + (this.onBand ? 1 : 0);\r\n            len === 0 && (len = 1);\r\n            var size = Math.abs(axisExtent[1] - axisExtent[0]);\r\n            return Math.abs(size) / len;\r\n        };\r\n        Axis.prototype.calculateCategoryInterval = function () {\r\n            return calculateCategoryInterval(this);\r\n        };\r\n        return Axis;\r\n    }());\r\n    function fixExtentWithBands(extent, nTick) {\r\n        var size = extent[1] - extent[0];\r\n        var len = nTick;\r\n        var margin = size / len / 2;\r\n        extent[0] += margin;\r\n        extent[1] -= margin;\r\n    }\r\n    function fixOnBandTicksCoords(axis, ticksCoords, alignWithLabel, clamp) {\r\n        var ticksLen = ticksCoords.length;\r\n        if (!axis.onBand || alignWithLabel || !ticksLen) {\r\n            return;\r\n        }\r\n        var axisExtent = axis.getExtent();\r\n        var last;\r\n        var diffSize;\r\n        if (ticksLen === 1) {\r\n            ticksCoords[0].coord = axisExtent[0];\r\n            last = ticksCoords[1] = { coord: axisExtent[0] };\r\n        }\r\n        else {\r\n            var crossLen = ticksCoords[ticksLen - 1].tickValue - ticksCoords[0].tickValue;\r\n            var shift_1 = (ticksCoords[ticksLen - 1].coord - ticksCoords[0].coord) / crossLen;\r\n            each(ticksCoords, function (ticksItem) {\r\n                ticksItem.coord -= shift_1 / 2;\r\n            });\r\n            var dataExtent = axis.scale.getExtent();\r\n            diffSize = 1 + dataExtent[1] - ticksCoords[ticksLen - 1].tickValue;\r\n            last = { coord: ticksCoords[ticksLen - 1].coord + shift_1 * diffSize };\r\n            ticksCoords.push(last);\r\n        }\r\n        var inverse = axisExtent[0] > axisExtent[1];\r\n        if (littleThan(ticksCoords[0].coord, axisExtent[0])) {\r\n            clamp ? (ticksCoords[0].coord = axisExtent[0]) : ticksCoords.shift();\r\n        }\r\n        if (clamp && littleThan(axisExtent[0], ticksCoords[0].coord)) {\r\n            ticksCoords.unshift({ coord: axisExtent[0] });\r\n        }\r\n        if (littleThan(axisExtent[1], last.coord)) {\r\n            clamp ? (last.coord = axisExtent[1]) : ticksCoords.pop();\r\n        }\r\n        if (clamp && littleThan(last.coord, axisExtent[1])) {\r\n            ticksCoords.push({ coord: axisExtent[1] });\r\n        }\r\n        function littleThan(a, b) {\r\n            a = round$1(a);\r\n            b = round$1(b);\r\n            return inverse ? a > b : a < b;\r\n        }\r\n    }\n\n    var Axis2D = (function (_super) {\r\n        __extends(Axis2D, _super);\r\n        function Axis2D(dim, scale, coordExtent, axisType, position) {\r\n            var _this = _super.call(this, dim, scale, coordExtent) || this;\r\n            _this.index = 0;\r\n            _this.type = axisType || 'value';\r\n            _this.position = position || 'bottom';\r\n            return _this;\r\n        }\r\n        Axis2D.prototype.isHorizontal = function () {\r\n            var position = this.position;\r\n            return position === 'top' || position === 'bottom';\r\n        };\r\n        Axis2D.prototype.getGlobalExtent = function (asc) {\r\n            var ret = this.getExtent();\r\n            ret[0] = this.toGlobalCoord(ret[0]);\r\n            ret[1] = this.toGlobalCoord(ret[1]);\r\n            asc && ret[0] > ret[1] && ret.reverse();\r\n            return ret;\r\n        };\r\n        Axis2D.prototype.pointToData = function (point, clamp) {\r\n            return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\r\n        };\r\n        Axis2D.prototype.setCategorySortInfo = function (info) {\r\n            if (this.type !== 'category') {\r\n                return false;\r\n            }\r\n            this.model.option.categorySortInfo = info;\r\n            this.scale.setCategorySortInfo(info);\r\n        };\r\n        return Axis2D;\r\n    }(Axis));\n\n    var Grid = (function () {\r\n        function Grid(gridModel, ecModel, api) {\r\n            this.type = 'grid';\r\n            this._coordsMap = {};\r\n            this._coordsList = [];\r\n            this._axesMap = {};\r\n            this._axesList = [];\r\n            this.axisPointerEnabled = true;\r\n            this.dimensions = cartesian2DDimensions;\r\n            this._initCartesian(gridModel, ecModel, api);\r\n            this.model = gridModel;\r\n        }\r\n        Grid.prototype.getRect = function () {\r\n            return this._rect;\r\n        };\r\n        Grid.prototype.update = function (ecModel, api) {\r\n            var axesMap = this._axesMap;\r\n            this._updateScale(ecModel, this.model);\r\n            each(axesMap.x, function (xAxis) {\r\n                niceScaleExtent(xAxis.scale, xAxis.model);\r\n            });\r\n            each(axesMap.y, function (yAxis) {\r\n                niceScaleExtent(yAxis.scale, yAxis.model);\r\n            });\r\n            var onZeroRecords = {};\r\n            each(axesMap.x, function (xAxis) {\r\n                fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\r\n            });\r\n            each(axesMap.y, function (yAxis) {\r\n                fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\r\n            });\r\n            this.resize(this.model, api);\r\n        };\r\n        Grid.prototype.resize = function (gridModel, api, ignoreContainLabel) {\r\n            var gridRect = getLayoutRect(gridModel.getBoxLayoutParams(), {\r\n                width: api.getWidth(),\r\n                height: api.getHeight()\r\n            });\r\n            this._rect = gridRect;\r\n            var axesList = this._axesList;\r\n            adjustAxes();\r\n            if (!ignoreContainLabel && gridModel.get('containLabel')) {\r\n                each(axesList, function (axis) {\r\n                    if (!axis.model.get(['axisLabel', 'inside'])) {\r\n                        var labelUnionRect = estimateLabelUnionRect(axis);\r\n                        if (labelUnionRect) {\r\n                            var dim = axis.isHorizontal() ? 'height' : 'width';\r\n                            var margin = axis.model.get(['axisLabel', 'margin']);\r\n                            gridRect[dim] -= labelUnionRect[dim] + margin;\r\n                            if (axis.position === 'top') {\r\n                                gridRect.y += labelUnionRect.height + margin;\r\n                            }\r\n                            else if (axis.position === 'left') {\r\n                                gridRect.x += labelUnionRect.width + margin;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                adjustAxes();\r\n            }\r\n            each(this._coordsList, function (coord) {\r\n                coord.calcAffineTransform();\r\n            });\r\n            function adjustAxes() {\r\n                each(axesList, function (axis) {\r\n                    var isHorizontal = axis.isHorizontal();\r\n                    var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\r\n                    var idx = axis.inverse ? 1 : 0;\r\n                    axis.setExtent(extent[idx], extent[1 - idx]);\r\n                    updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\r\n                });\r\n            }\r\n        };\r\n        Grid.prototype.getAxis = function (dim, axisIndex) {\r\n            var axesMapOnDim = this._axesMap[dim];\r\n            if (axesMapOnDim != null) {\r\n                return axesMapOnDim[axisIndex || 0];\r\n            }\r\n        };\r\n        Grid.prototype.getAxes = function () {\r\n            return this._axesList.slice();\r\n        };\r\n        Grid.prototype.getCartesian = function (xAxisIndex, yAxisIndex) {\r\n            if (xAxisIndex != null && yAxisIndex != null) {\r\n                var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\r\n                return this._coordsMap[key];\r\n            }\r\n            if (isObject(xAxisIndex)) {\r\n                yAxisIndex = xAxisIndex.yAxisIndex;\r\n                xAxisIndex = xAxisIndex.xAxisIndex;\r\n            }\r\n            for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\r\n                if (coordList[i].getAxis('x').index === xAxisIndex\r\n                    || coordList[i].getAxis('y').index === yAxisIndex) {\r\n                    return coordList[i];\r\n                }\r\n            }\r\n        };\r\n        Grid.prototype.getCartesians = function () {\r\n            return this._coordsList.slice();\r\n        };\r\n        Grid.prototype.convertToPixel = function (ecModel, finder, value) {\r\n            var target = this._findConvertTarget(finder);\r\n            return target.cartesian\r\n                ? target.cartesian.dataToPoint(value)\r\n                : target.axis\r\n                    ? target.axis.toGlobalCoord(target.axis.dataToCoord(value))\r\n                    : null;\r\n        };\r\n        Grid.prototype.convertFromPixel = function (ecModel, finder, value) {\r\n            var target = this._findConvertTarget(finder);\r\n            return target.cartesian\r\n                ? target.cartesian.pointToData(value)\r\n                : target.axis\r\n                    ? target.axis.coordToData(target.axis.toLocalCoord(value))\r\n                    : null;\r\n        };\r\n        Grid.prototype._findConvertTarget = function (finder) {\r\n            var seriesModel = finder.seriesModel;\r\n            var xAxisModel = finder.xAxisModel\r\n                || (seriesModel && seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0]);\r\n            var yAxisModel = finder.yAxisModel\r\n                || (seriesModel && seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0]);\r\n            var gridModel = finder.gridModel;\r\n            var coordsList = this._coordsList;\r\n            var cartesian;\r\n            var axis;\r\n            if (seriesModel) {\r\n                cartesian = seriesModel.coordinateSystem;\r\n                indexOf(coordsList, cartesian) < 0 && (cartesian = null);\r\n            }\r\n            else if (xAxisModel && yAxisModel) {\r\n                cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\r\n            }\r\n            else if (xAxisModel) {\r\n                axis = this.getAxis('x', xAxisModel.componentIndex);\r\n            }\r\n            else if (yAxisModel) {\r\n                axis = this.getAxis('y', yAxisModel.componentIndex);\r\n            }\r\n            else if (gridModel) {\r\n                var grid = gridModel.coordinateSystem;\r\n                if (grid === this) {\r\n                    cartesian = this._coordsList[0];\r\n                }\r\n            }\r\n            return { cartesian: cartesian, axis: axis };\r\n        };\r\n        Grid.prototype.containPoint = function (point) {\r\n            var coord = this._coordsList[0];\r\n            if (coord) {\r\n                return coord.containPoint(point);\r\n            }\r\n        };\r\n        Grid.prototype._initCartesian = function (gridModel, ecModel, api) {\r\n            var _this = this;\r\n            var grid = this;\r\n            var axisPositionUsed = {\r\n                left: false,\r\n                right: false,\r\n                top: false,\r\n                bottom: false\r\n            };\r\n            var axesMap = {\r\n                x: {},\r\n                y: {}\r\n            };\r\n            var axesCount = {\r\n                x: 0,\r\n                y: 0\r\n            };\r\n            ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\r\n            ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\r\n            if (!axesCount.x || !axesCount.y) {\r\n                this._axesMap = {};\r\n                this._axesList = [];\r\n                return;\r\n            }\r\n            this._axesMap = axesMap;\r\n            each(axesMap.x, function (xAxis, xAxisIndex) {\r\n                each(axesMap.y, function (yAxis, yAxisIndex) {\r\n                    var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\r\n                    var cartesian = new Cartesian2D(key);\r\n                    cartesian.master = _this;\r\n                    cartesian.model = gridModel;\r\n                    _this._coordsMap[key] = cartesian;\r\n                    _this._coordsList.push(cartesian);\r\n                    cartesian.addAxis(xAxis);\r\n                    cartesian.addAxis(yAxis);\r\n                });\r\n            });\r\n            function createAxisCreator(dimName) {\r\n                return function (axisModel, idx) {\r\n                    if (!isAxisUsedInTheGrid(axisModel, gridModel)) {\r\n                        return;\r\n                    }\r\n                    var axisPosition = axisModel.get('position');\r\n                    if (dimName === 'x') {\r\n                        if (axisPosition !== 'top' && axisPosition !== 'bottom') {\r\n                            axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (axisPosition !== 'left' && axisPosition !== 'right') {\r\n                            axisPosition = axisPositionUsed.left ? 'right' : 'left';\r\n                        }\r\n                    }\r\n                    axisPositionUsed[axisPosition] = true;\r\n                    var axis = new Axis2D(dimName, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\r\n                    var isCategory = axis.type === 'category';\r\n                    axis.onBand = isCategory && axisModel.get('boundaryGap');\r\n                    axis.inverse = axisModel.get('inverse');\r\n                    axisModel.axis = axis;\r\n                    axis.model = axisModel;\r\n                    axis.grid = grid;\r\n                    axis.index = idx;\r\n                    grid._axesList.push(axis);\r\n                    axesMap[dimName][idx] = axis;\r\n                    axesCount[dimName]++;\r\n                };\r\n            }\r\n        };\r\n        Grid.prototype._updateScale = function (ecModel, gridModel) {\r\n            each(this._axesList, function (axis) {\r\n                axis.scale.setExtent(Infinity, -Infinity);\r\n                if (axis.type === 'category') {\r\n                    var categorySortInfo = axis.model.get('categorySortInfo');\r\n                    axis.scale.setCategorySortInfo(categorySortInfo);\r\n                }\r\n            });\r\n            ecModel.eachSeries(function (seriesModel) {\r\n                if (isCartesian2DSeries(seriesModel)) {\r\n                    var axesModelMap = findAxisModels(seriesModel);\r\n                    var xAxisModel = axesModelMap.xAxisModel;\r\n                    var yAxisModel = axesModelMap.yAxisModel;\r\n                    if (!isAxisUsedInTheGrid(xAxisModel, gridModel)\r\n                        || !isAxisUsedInTheGrid(yAxisModel, gridModel)) {\r\n                        return;\r\n                    }\r\n                    var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\r\n                    var data = seriesModel.getData();\r\n                    var xAxis = cartesian.getAxis('x');\r\n                    var yAxis = cartesian.getAxis('y');\r\n                    if (data.type === 'list') {\r\n                        unionExtent(data, xAxis);\r\n                        unionExtent(data, yAxis);\r\n                    }\r\n                }\r\n            }, this);\r\n            function unionExtent(data, axis) {\r\n                each(getDataDimensionsOnAxis(data, axis.dim), function (dim) {\r\n                    axis.scale.unionExtentFromData(data, dim);\r\n                });\r\n            }\r\n        };\r\n        Grid.prototype.getTooltipAxes = function (dim) {\r\n            var baseAxes = [];\r\n            var otherAxes = [];\r\n            each(this.getCartesians(), function (cartesian) {\r\n                var baseAxis = (dim != null && dim !== 'auto')\r\n                    ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\r\n                var otherAxis = cartesian.getOtherAxis(baseAxis);\r\n                indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\r\n                indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\r\n            });\r\n            return { baseAxes: baseAxes, otherAxes: otherAxes };\r\n        };\r\n        Grid.create = function (ecModel, api) {\r\n            var grids = [];\r\n            ecModel.eachComponent('grid', function (gridModel, idx) {\r\n                var grid = new Grid(gridModel, ecModel, api);\r\n                grid.name = 'grid_' + idx;\r\n                grid.resize(gridModel, api, true);\r\n                gridModel.coordinateSystem = grid;\r\n                grids.push(grid);\r\n            });\r\n            ecModel.eachSeries(function (seriesModel) {\r\n                if (!isCartesian2DSeries(seriesModel)) {\r\n                    return;\r\n                }\r\n                var axesModelMap = findAxisModels(seriesModel);\r\n                var xAxisModel = axesModelMap.xAxisModel;\r\n                var yAxisModel = axesModelMap.yAxisModel;\r\n                var gridModel = xAxisModel.getCoordSysModel();\r\n                if (__DEV__) {\r\n                    if (!gridModel) {\r\n                        throw new Error('Grid \"' + retrieve3(xAxisModel.get('gridIndex'), xAxisModel.get('gridId'), 0) + '\" not found');\r\n                    }\r\n                    if (xAxisModel.getCoordSysModel() !== yAxisModel.getCoordSysModel()) {\r\n                        throw new Error('xAxis and yAxis must use the same grid');\r\n                    }\r\n                }\r\n                var grid = gridModel.coordinateSystem;\r\n                seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\r\n            });\r\n            return grids;\r\n        };\r\n        Grid.dimensions = cartesian2DDimensions;\r\n        return Grid;\r\n    }());\r\n    function isAxisUsedInTheGrid(axisModel, gridModel) {\r\n        return axisModel.getCoordSysModel() === gridModel;\r\n    }\r\n    function fixAxisOnZero(axesMap, otherAxisDim, axis, onZeroRecords) {\r\n        axis.getAxesOnZeroOf = function () {\r\n            return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\r\n        };\r\n        var otherAxes = axesMap[otherAxisDim];\r\n        var otherAxisOnZeroOf;\r\n        var axisModel = axis.model;\r\n        var onZero = axisModel.get(['axisLine', 'onZero']);\r\n        var onZeroAxisIndex = axisModel.get(['axisLine', 'onZeroAxisIndex']);\r\n        if (!onZero) {\r\n            return;\r\n        }\r\n        if (onZeroAxisIndex != null) {\r\n            if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\r\n                otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\r\n            }\r\n        }\r\n        else {\r\n            for (var idx in otherAxes) {\r\n                if (otherAxes.hasOwnProperty(idx)\r\n                    && canOnZeroToAxis(otherAxes[idx])\r\n                    && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\r\n                    otherAxisOnZeroOf = otherAxes[idx];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (otherAxisOnZeroOf) {\r\n            onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\r\n        }\r\n        function getOnZeroRecordKey(axis) {\r\n            return axis.dim + '_' + axis.index;\r\n        }\r\n    }\r\n    function canOnZeroToAxis(axis) {\r\n        return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\r\n    }\r\n    function updateAxisTransform(axis, coordBase) {\r\n        var axisExtent = axis.getExtent();\r\n        var axisExtentSum = axisExtent[0] + axisExtent[1];\r\n        axis.toGlobalCoord = axis.dim === 'x'\r\n            ? function (coord) {\r\n                return coord + coordBase;\r\n            }\r\n            : function (coord) {\r\n                return axisExtentSum - coord + coordBase;\r\n            };\r\n        axis.toLocalCoord = axis.dim === 'x'\r\n            ? function (coord) {\r\n                return coord - coordBase;\r\n            }\r\n            : function (coord) {\r\n                return axisExtentSum - coord + coordBase;\r\n            };\r\n    }\r\n    CoordinateSystemManager.register('cartesian2d', Grid);\n\n    var BaseBarSeriesModel = (function (_super) {\r\n        __extends(BaseBarSeriesModel, _super);\r\n        function BaseBarSeriesModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = BaseBarSeriesModel.type;\r\n            return _this;\r\n        }\r\n        BaseBarSeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n            return createListFromArray(this.getSource(), this, { useEncodeDefaulter: true });\r\n        };\r\n        BaseBarSeriesModel.prototype.getMarkerPosition = function (value) {\r\n            var coordSys = this.coordinateSystem;\r\n            if (coordSys) {\r\n                var pt = coordSys.dataToPoint(coordSys.clampData(value));\r\n                var data = this.getData();\r\n                var offset = data.getLayout('offset');\r\n                var size = data.getLayout('size');\r\n                var offsetIndex = coordSys.getBaseAxis().isHorizontal() ? 0 : 1;\r\n                pt[offsetIndex] += offset + size / 2;\r\n                return pt;\r\n            }\r\n            return [NaN, NaN];\r\n        };\r\n        BaseBarSeriesModel.type = 'series.__base_bar__';\r\n        BaseBarSeriesModel.defaultOption = {\r\n            zlevel: 0,\r\n            z: 2,\r\n            coordinateSystem: 'cartesian2d',\r\n            legendHoverLink: true,\r\n            barMinHeight: 0,\r\n            barMinAngle: 0,\r\n            large: false,\r\n            largeThreshold: 400,\r\n            progressive: 3e3,\r\n            progressiveChunkMode: 'mod'\r\n        };\r\n        return BaseBarSeriesModel;\r\n    }(SeriesModel));\r\n    SeriesModel.registerClass(BaseBarSeriesModel);\n\n    var BarSeriesModel = (function (_super) {\r\n        __extends(BarSeriesModel, _super);\r\n        function BarSeriesModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = BarSeriesModel.type;\r\n            return _this;\r\n        }\r\n        BarSeriesModel.prototype.getProgressive = function () {\r\n            return this.get('large')\r\n                ? this.get('progressive')\r\n                : false;\r\n        };\r\n        BarSeriesModel.prototype.getProgressiveThreshold = function () {\r\n            var progressiveThreshold = this.get('progressiveThreshold');\r\n            var largeThreshold = this.get('largeThreshold');\r\n            if (largeThreshold > progressiveThreshold) {\r\n                progressiveThreshold = largeThreshold;\r\n            }\r\n            return progressiveThreshold;\r\n        };\r\n        BarSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\r\n            return selectors.rect(data.getItemLayout(dataIndex));\r\n        };\r\n        BarSeriesModel.type = 'series.bar';\r\n        BarSeriesModel.dependencies = ['grid', 'polar'];\r\n        BarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\r\n            clip: true,\r\n            roundCap: false,\r\n            showBackground: false,\r\n            backgroundStyle: {\r\n                color: 'rgba(180, 180, 180, 0.2)',\r\n                borderColor: null,\r\n                borderWidth: 0,\r\n                borderType: 'solid',\r\n                borderRadius: 0,\r\n                shadowBlur: 0,\r\n                shadowColor: null,\r\n                shadowOffsetX: 0,\r\n                shadowOffsetY: 0,\r\n                opacity: 1\r\n            },\r\n            select: {\r\n                itemStyle: {\r\n                    borderColor: '#212121'\r\n                }\r\n            },\r\n            realtimeSort: false\r\n        });\r\n        return BarSeriesModel;\r\n    }(BaseBarSeriesModel));\r\n    SeriesModel.registerClass(BarSeriesModel);\n\n    var SausageShape = (function () {\r\n        function SausageShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.r0 = 0;\r\n            this.r = 0;\r\n            this.startAngle = 0;\r\n            this.endAngle = Math.PI * 2;\r\n            this.clockwise = true;\r\n        }\r\n        return SausageShape;\r\n    }());\r\n    var SausagePath = (function (_super) {\r\n        __extends(SausagePath, _super);\r\n        function SausagePath(opts) {\r\n            var _this = _super.call(this, opts) || this;\r\n            _this.type = 'sausage';\r\n            return _this;\r\n        }\r\n        SausagePath.prototype.getDefaultShape = function () {\r\n            return new SausageShape();\r\n        };\r\n        SausagePath.prototype.buildPath = function (ctx, shape) {\r\n            var x = shape.cx;\r\n            var y = shape.cy;\r\n            var r0 = Math.max(shape.r0 || 0, 0);\r\n            var r = Math.max(shape.r, 0);\r\n            var dr = (r - r0) * 0.5;\r\n            var rCenter = r0 + dr;\r\n            var startAngle = shape.startAngle;\r\n            var endAngle = shape.endAngle;\r\n            var clockwise = shape.clockwise;\r\n            var unitStartX = Math.cos(startAngle);\r\n            var unitStartY = Math.sin(startAngle);\r\n            var unitEndX = Math.cos(endAngle);\r\n            var unitEndY = Math.sin(endAngle);\r\n            var lessThanCircle = clockwise\r\n                ? endAngle - startAngle < Math.PI * 2\r\n                : startAngle - endAngle < Math.PI * 2;\r\n            if (lessThanCircle) {\r\n                ctx.moveTo(unitStartX * r0 + x, unitStartY * r0 + y);\r\n                ctx.arc(unitStartX * rCenter + x, unitStartY * rCenter + y, dr, -Math.PI + startAngle, startAngle, !clockwise);\r\n            }\r\n            ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\r\n            ctx.moveTo(unitEndX * r + x, unitEndY * r + y);\r\n            ctx.arc(unitEndX * rCenter + x, unitEndY * rCenter + y, dr, endAngle - Math.PI * 2, endAngle - Math.PI, !clockwise);\r\n            if (r0 !== 0) {\r\n                ctx.arc(x, y, r0, endAngle, startAngle, clockwise);\r\n                ctx.moveTo(unitStartX * r0 + x, unitEndY * r0 + y);\r\n            }\r\n            ctx.closePath();\r\n        };\r\n        return SausagePath;\r\n    }(Path));\n\n    var BAR_BORDER_WIDTH_QUERY = ['itemStyle', 'borderWidth'];\r\n    var BAR_BORDER_RADIUS_QUERY = ['itemStyle', 'borderRadius'];\r\n    var _eventPos = [0, 0];\r\n    var mathMax$5 = Math.max;\r\n    var mathMin$5 = Math.min;\r\n    function getClipArea(coord, data) {\r\n        var coordSysClipArea = coord.getArea && coord.getArea();\r\n        if (isCoordinateSystemType(coord, 'cartesian2d')) {\r\n            var baseAxis = coord.getBaseAxis();\r\n            if (baseAxis.type !== 'category' || !baseAxis.onBand) {\r\n                var expandWidth = data.getLayout('bandWidth');\r\n                if (baseAxis.isHorizontal()) {\r\n                    coordSysClipArea.x -= expandWidth;\r\n                    coordSysClipArea.width += expandWidth * 2;\r\n                }\r\n                else {\r\n                    coordSysClipArea.y -= expandWidth;\r\n                    coordSysClipArea.height += expandWidth * 2;\r\n                }\r\n            }\r\n        }\r\n        return coordSysClipArea;\r\n    }\r\n    var BarView = (function (_super) {\r\n        __extends(BarView, _super);\r\n        function BarView() {\r\n            var _this = _super.call(this) || this;\r\n            _this.type = BarView.type;\r\n            _this._isFirstFrame = true;\r\n            return _this;\r\n        }\r\n        BarView.prototype.render = function (seriesModel, ecModel, api, payload) {\r\n            this._model = seriesModel;\r\n            this.removeOnRenderedListener(api);\r\n            this._updateDrawMode(seriesModel);\r\n            var coordinateSystemType = seriesModel.get('coordinateSystem');\r\n            if (coordinateSystemType === 'cartesian2d'\r\n                || coordinateSystemType === 'polar') {\r\n                this._isLargeDraw\r\n                    ? this._renderLarge(seriesModel, ecModel, api)\r\n                    : this._renderNormal(seriesModel, ecModel, api, payload);\r\n            }\r\n            else if (__DEV__) {\r\n                console.warn('Only cartesian2d and polar supported for bar.');\r\n            }\r\n        };\r\n        BarView.prototype.incrementalPrepareRender = function (seriesModel) {\r\n            this._clear();\r\n            this._updateDrawMode(seriesModel);\r\n            this._updateLargeClip(seriesModel);\r\n        };\r\n        BarView.prototype.incrementalRender = function (params, seriesModel) {\r\n            this._incrementalRenderLarge(params, seriesModel);\r\n        };\r\n        BarView.prototype._updateDrawMode = function (seriesModel) {\r\n            var isLargeDraw = seriesModel.pipelineContext.large;\r\n            if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\r\n                this._isLargeDraw = isLargeDraw;\r\n                this._clear();\r\n            }\r\n        };\r\n        BarView.prototype._renderNormal = function (seriesModel, ecModel, api, payload) {\r\n            var _this = this;\r\n            var group = this.group;\r\n            var data = seriesModel.getData();\r\n            var oldData = this._data;\r\n            var coord = seriesModel.coordinateSystem;\r\n            var baseAxis = coord.getBaseAxis();\r\n            var isHorizontalOrRadial;\r\n            if (coord.type === 'cartesian2d') {\r\n                isHorizontalOrRadial = baseAxis.isHorizontal();\r\n            }\r\n            else if (coord.type === 'polar') {\r\n                isHorizontalOrRadial = baseAxis.dim === 'angle';\r\n            }\r\n            var animationModel = seriesModel.isAnimationEnabled() ? seriesModel : null;\r\n            var axis2DModel = baseAxis.model;\r\n            var realtimeSort = seriesModel.get('realtimeSort');\r\n            if (realtimeSort && data.count()) {\r\n                if (this._isFirstFrame) {\r\n                    this._initSort(data, isHorizontalOrRadial, baseAxis, api);\r\n                    this._isFirstFrame = false;\r\n                    return;\r\n                }\r\n                else {\r\n                    this._onRendered = function () {\r\n                        var orderMap = function (idx) {\r\n                            var el = data.getItemGraphicEl(idx);\r\n                            if (el) {\r\n                                var shape = el.shape;\r\n                                return (isHorizontalOrRadial ? shape.y + shape.height : shape.x + shape.width) || 0;\r\n                            }\r\n                            else {\r\n                                return 0;\r\n                            }\r\n                        };\r\n                        _this._updateSort(data, orderMap, baseAxis, api);\r\n                    };\r\n                    api.getZr().on('rendered', this._onRendered);\r\n                }\r\n            }\r\n            var needsClip = seriesModel.get('clip', true) || realtimeSort;\r\n            var coordSysClipArea = getClipArea(coord, data);\r\n            group.removeClipPath();\r\n            var roundCap = seriesModel.get('roundCap', true);\r\n            var drawBackground = seriesModel.get('showBackground', true);\r\n            var backgroundModel = seriesModel.getModel('backgroundStyle');\r\n            var barBorderRadius = backgroundModel.get('borderRadius') || 0;\r\n            var bgEls = [];\r\n            var oldBgEls = this._backgroundEls;\r\n            var isInitSort = payload && payload.isInitSort;\r\n            var isChangeOrder = payload && payload.type === 'changeAxisOrder';\r\n            var defaultTextGetter = function (values) {\r\n                return getDefaultInterpolatedLabel(seriesModel.getData(), values);\r\n            };\r\n            function createBackground(dataIndex) {\r\n                var bgLayout = getLayout[coord.type](data, dataIndex);\r\n                var bgEl = createBackgroundEl(coord, isHorizontalOrRadial, bgLayout);\r\n                bgEl.useStyle(backgroundModel.getItemStyle());\r\n                if (coord.type === 'cartesian2d') {\r\n                    bgEl.setShape('r', barBorderRadius);\r\n                }\r\n                bgEls[dataIndex] = bgEl;\r\n                return bgEl;\r\n            }\r\n            data.diff(oldData)\r\n                .add(function (dataIndex) {\r\n                var itemModel = data.getItemModel(dataIndex);\r\n                var layout = getLayout[coord.type](data, dataIndex, itemModel);\r\n                if (drawBackground) {\r\n                    createBackground(dataIndex);\r\n                }\r\n                if (!data.hasValue(dataIndex)) {\r\n                    return;\r\n                }\r\n                var isClipped = false;\r\n                if (needsClip) {\r\n                    isClipped = clip[coord.type](coordSysClipArea, layout);\r\n                }\r\n                var el = elementCreator[coord.type](seriesModel, data, dataIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, false, roundCap);\r\n                updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\r\n                initLabel(el, data, dataIndex, itemModel.getModel('label'), seriesModel, animationModel, defaultTextGetter);\r\n                if (isInitSort) {\r\n                    el.attr({ shape: layout });\r\n                }\r\n                else if (realtimeSort) {\r\n                    el.disableLabelAnimation = true;\r\n                    updateRealtimeAnimation(seriesModel, axis2DModel, animationModel, el, layout, dataIndex, isHorizontalOrRadial, false, false);\r\n                }\r\n                else {\r\n                    initProps(el, { shape: layout }, seriesModel, dataIndex);\r\n                }\r\n                data.setItemGraphicEl(dataIndex, el);\r\n                group.add(el);\r\n                el.ignore = isClipped;\r\n            })\r\n                .update(function (newIndex, oldIndex) {\r\n                var itemModel = data.getItemModel(newIndex);\r\n                var layout = getLayout[coord.type](data, newIndex, itemModel);\r\n                if (drawBackground) {\r\n                    var bgEl = void 0;\r\n                    if (oldBgEls.length === 0) {\r\n                        bgEl = createBackground(oldIndex);\r\n                    }\r\n                    else {\r\n                        bgEl = oldBgEls[oldIndex];\r\n                        bgEl.useStyle(backgroundModel.getItemStyle());\r\n                        if (coord.type === 'cartesian2d') {\r\n                            bgEl.setShape('r', barBorderRadius);\r\n                        }\r\n                        bgEls[newIndex] = bgEl;\r\n                    }\r\n                    var bgLayout = getLayout[coord.type](data, newIndex);\r\n                    var shape = createBackgroundShape(isHorizontalOrRadial, bgLayout, coord);\r\n                    updateProps(bgEl, { shape: shape }, animationModel, newIndex);\r\n                }\r\n                var el = oldData.getItemGraphicEl(oldIndex);\r\n                if (!data.hasValue(newIndex)) {\r\n                    group.remove(el);\r\n                    el = null;\r\n                    return;\r\n                }\r\n                var isClipped = false;\r\n                if (needsClip) {\r\n                    isClipped = clip[coord.type](coordSysClipArea, layout);\r\n                    if (isClipped) {\r\n                        group.remove(el);\r\n                    }\r\n                }\r\n                if (!el) {\r\n                    el = elementCreator[coord.type](seriesModel, data, newIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, !!el, roundCap);\r\n                }\r\n                if (!isChangeOrder) {\r\n                    updateStyle(el, data, newIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\r\n                    updateLabel(el, data, newIndex, itemModel.getModel('label'), seriesModel, animationModel, defaultTextGetter);\r\n                }\r\n                if (isInitSort) {\r\n                    el.attr({ shape: layout });\r\n                }\r\n                else if (realtimeSort) {\r\n                    el.disableLabelAnimation = true;\r\n                    updateRealtimeAnimation(seriesModel, axis2DModel, animationModel, el, layout, newIndex, isHorizontalOrRadial, true, isChangeOrder);\r\n                }\r\n                else {\r\n                    updateProps(el, {\r\n                        shape: layout\r\n                    }, seriesModel, newIndex, null);\r\n                }\r\n                data.setItemGraphicEl(newIndex, el);\r\n                el.ignore = isClipped;\r\n                group.add(el);\r\n            })\r\n                .remove(function (dataIndex) {\r\n                var el = oldData.getItemGraphicEl(dataIndex);\r\n                el && removeElementWithFadeOut(el, seriesModel, dataIndex);\r\n            })\r\n                .execute();\r\n            var bgGroup = this._backgroundGroup || (this._backgroundGroup = new Group());\r\n            bgGroup.removeAll();\r\n            for (var i = 0; i < bgEls.length; ++i) {\r\n                bgGroup.add(bgEls[i]);\r\n            }\r\n            group.add(bgGroup);\r\n            this._backgroundEls = bgEls;\r\n            this._data = data;\r\n        };\r\n        BarView.prototype._renderLarge = function (seriesModel, ecModel, api) {\r\n            this._clear();\r\n            createLarge(seriesModel, this.group);\r\n            this._updateLargeClip(seriesModel);\r\n        };\r\n        BarView.prototype._incrementalRenderLarge = function (params, seriesModel) {\r\n            this._removeBackground();\r\n            createLarge(seriesModel, this.group, true);\r\n        };\r\n        BarView.prototype._updateLargeClip = function (seriesModel) {\r\n            var clipPath = seriesModel.get('clip', true)\r\n                ? createClipPath(seriesModel.coordinateSystem, false, seriesModel)\r\n                : null;\r\n            if (clipPath) {\r\n                this.group.setClipPath(clipPath);\r\n            }\r\n            else {\r\n                this.group.removeClipPath();\r\n            }\r\n        };\r\n        BarView.prototype._dataSort = function (data, idxMap) {\r\n            var info = [];\r\n            data.each(function (idx) {\r\n                info.push({\r\n                    mappedValue: idxMap(idx),\r\n                    ordinalNumber: idx,\r\n                    beforeSortIndex: null\r\n                });\r\n            });\r\n            info.sort(function (a, b) {\r\n                return b.mappedValue - a.mappedValue;\r\n            });\r\n            for (var i = 0; i < info.length; ++i) {\r\n                info[info[i].ordinalNumber].beforeSortIndex = i;\r\n            }\r\n            return map(info, function (item) {\r\n                return {\r\n                    ordinalNumber: item.ordinalNumber,\r\n                    beforeSortIndex: item.beforeSortIndex\r\n                };\r\n            });\r\n        };\r\n        BarView.prototype._isDataOrderChanged = function (data, orderMap, oldOrder) {\r\n            var oldCount = oldOrder ? oldOrder.length : 0;\r\n            if (oldCount !== data.count()) {\r\n                return true;\r\n            }\r\n            var lastValue = Number.MAX_VALUE;\r\n            for (var i = 0; i < oldOrder.length; ++i) {\r\n                var value = orderMap(oldOrder[i].ordinalNumber);\r\n                if (value > lastValue) {\r\n                    return true;\r\n                }\r\n                lastValue = value;\r\n            }\r\n            return false;\r\n        };\r\n        BarView.prototype._updateSort = function (data, orderMap, baseAxis, api) {\r\n            var oldOrder = baseAxis.scale.getCategorySortInfo();\r\n            var isOrderChanged = this._isDataOrderChanged(data, orderMap, oldOrder);\r\n            if (isOrderChanged) {\r\n                var newOrder = this._dataSort(data, orderMap);\r\n                var extent = baseAxis.scale.getExtent();\r\n                for (var i = extent[0]; i < extent[1]; ++i) {\r\n                    if (!oldOrder[i] || oldOrder[i].ordinalNumber !== newOrder[i].ordinalNumber) {\r\n                        this.removeOnRenderedListener(api);\r\n                        var action = {\r\n                            type: 'changeAxisOrder',\r\n                            componentType: baseAxis.dim + 'Axis',\r\n                            axisId: baseAxis.index,\r\n                            sortInfo: newOrder\r\n                        };\r\n                        api.dispatchAction(action);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        BarView.prototype._initSort = function (data, isHorizontal, baseAxis, api) {\r\n            var action = {\r\n                type: 'changeAxisOrder',\r\n                componentType: baseAxis.dim + 'Axis',\r\n                isInitSort: true,\r\n                axisId: baseAxis.index,\r\n                sortInfo: this._dataSort(data, function (idx) { return parseFloat(data.get(isHorizontal ? 'y' : 'x', idx)) || 0; })\r\n            };\r\n            api.dispatchAction(action);\r\n        };\r\n        BarView.prototype.remove = function (ecModel, api) {\r\n            this._clear(this._model);\r\n            this.removeOnRenderedListener(api);\r\n        };\r\n        BarView.prototype.dispose = function (ecModel, api) {\r\n            this.removeOnRenderedListener(api);\r\n        };\r\n        BarView.prototype.removeOnRenderedListener = function (api) {\r\n            if (this._onRendered) {\r\n                api.getZr().off('rendered', this._onRendered);\r\n                this._onRendered = null;\r\n            }\r\n        };\r\n        BarView.prototype._clear = function (model) {\r\n            var group = this.group;\r\n            var data = this._data;\r\n            if (model && model.isAnimationEnabled() && data && !this._isLargeDraw) {\r\n                this._removeBackground();\r\n                this._backgroundEls = [];\r\n                data.eachItemGraphicEl(function (el) {\r\n                    removeElementWithFadeOut(el, model, getECData(el).dataIndex);\r\n                });\r\n            }\r\n            else {\r\n                group.removeAll();\r\n            }\r\n            this._data = null;\r\n            this._isFirstFrame = true;\r\n        };\r\n        BarView.prototype._removeBackground = function () {\r\n            this.group.remove(this._backgroundGroup);\r\n            this._backgroundGroup = null;\r\n        };\r\n        BarView.type = 'bar';\r\n        return BarView;\r\n    }(ChartView));\r\n    var clip = {\r\n        cartesian2d: function (coordSysBoundingRect, layout) {\r\n            var signWidth = layout.width < 0 ? -1 : 1;\r\n            var signHeight = layout.height < 0 ? -1 : 1;\r\n            if (signWidth < 0) {\r\n                layout.x += layout.width;\r\n                layout.width = -layout.width;\r\n            }\r\n            if (signHeight < 0) {\r\n                layout.y += layout.height;\r\n                layout.height = -layout.height;\r\n            }\r\n            var x = mathMax$5(layout.x, coordSysBoundingRect.x);\r\n            var x2 = mathMin$5(layout.x + layout.width, coordSysBoundingRect.x + coordSysBoundingRect.width);\r\n            var y = mathMax$5(layout.y, coordSysBoundingRect.y);\r\n            var y2 = mathMin$5(layout.y + layout.height, coordSysBoundingRect.y + coordSysBoundingRect.height);\r\n            layout.x = x;\r\n            layout.y = y;\r\n            layout.width = x2 - x;\r\n            layout.height = y2 - y;\r\n            var clipped = layout.width < 0 || layout.height < 0;\r\n            if (signWidth < 0) {\r\n                layout.x += layout.width;\r\n                layout.width = -layout.width;\r\n            }\r\n            if (signHeight < 0) {\r\n                layout.y += layout.height;\r\n                layout.height = -layout.height;\r\n            }\r\n            return clipped;\r\n        },\r\n        polar: function (coordSysClipArea, layout) {\r\n            var signR = layout.r0 <= layout.r ? 1 : -1;\r\n            if (signR < 0) {\r\n                var tmp = layout.r;\r\n                layout.r = layout.r0;\r\n                layout.r0 = tmp;\r\n            }\r\n            var r = mathMin$5(layout.r, coordSysClipArea.r);\r\n            var r0 = mathMax$5(layout.r0, coordSysClipArea.r0);\r\n            layout.r = r;\r\n            layout.r0 = r0;\r\n            var clipped = r - r0 < 0;\r\n            if (signR < 0) {\r\n                var tmp = layout.r;\r\n                layout.r = layout.r0;\r\n                layout.r0 = tmp;\r\n            }\r\n            return clipped;\r\n        }\r\n    };\r\n    var elementCreator = {\r\n        cartesian2d: function (seriesModel, data, newIndex, layout, isHorizontal, animationModel, axisModel, isUpdate, roundCap) {\r\n            var rect = new Rect({\r\n                shape: extend({}, layout),\r\n                z2: 1\r\n            });\r\n            rect.__dataIndex = newIndex;\r\n            rect.name = 'item';\r\n            if (animationModel) {\r\n                var rectShape = rect.shape;\r\n                var animateProperty = isHorizontal ? 'height' : 'width';\r\n                rectShape[animateProperty] = 0;\r\n            }\r\n            return rect;\r\n        },\r\n        polar: function (seriesModel, data, newIndex, layout, isRadial, animationModel, axisModel, isUpdate, roundCap) {\r\n            var clockwise = layout.startAngle < layout.endAngle;\r\n            var ShapeClass = (!isRadial && roundCap) ? SausagePath : Sector;\r\n            var sector = new ShapeClass({\r\n                shape: defaults({ clockwise: clockwise }, layout),\r\n                z2: 1\r\n            });\r\n            sector.name = 'item';\r\n            if (animationModel) {\r\n                var sectorShape = sector.shape;\r\n                var animateProperty = isRadial ? 'r' : 'endAngle';\r\n                var animateTarget = {};\r\n                sectorShape[animateProperty] = isRadial ? 0 : layout.startAngle;\r\n                animateTarget[animateProperty] = layout[animateProperty];\r\n                (isUpdate ? updateProps : initProps)(sector, {\r\n                    shape: animateTarget\r\n                }, animationModel);\r\n            }\r\n            return sector;\r\n        }\r\n    };\r\n    function updateRealtimeAnimation(seriesModel, axisModel, animationModel, el, layout, newIndex, isHorizontal, isUpdate, isChangeOrder) {\r\n        if (animationModel || axisModel) {\r\n            var seriesTarget = void 0;\r\n            var axisTarget = void 0;\r\n            if (isHorizontal) {\r\n                axisTarget = {\r\n                    x: layout.x,\r\n                    width: layout.width\r\n                };\r\n                seriesTarget = {\r\n                    y: layout.y,\r\n                    height: layout.height\r\n                };\r\n            }\r\n            else {\r\n                axisTarget = {\r\n                    y: layout.y,\r\n                    height: layout.height\r\n                };\r\n                seriesTarget = {\r\n                    x: layout.x,\r\n                    width: layout.width\r\n                };\r\n            }\r\n            if (!isChangeOrder) {\r\n                (isUpdate ? updateProps : initProps)(el, {\r\n                    shape: seriesTarget\r\n                }, seriesModel, newIndex, null);\r\n            }\r\n            (isUpdate ? updateProps : initProps)(el, {\r\n                shape: axisTarget\r\n            }, axisModel, newIndex);\r\n        }\r\n    }\r\n    var getLayout = {\r\n        cartesian2d: function (data, dataIndex, itemModel) {\r\n            var layout = data.getItemLayout(dataIndex);\r\n            var fixedLineWidth = itemModel ? getLineWidth(itemModel, layout) : 0;\r\n            var signX = layout.width > 0 ? 1 : -1;\r\n            var signY = layout.height > 0 ? 1 : -1;\r\n            return {\r\n                x: layout.x + signX * fixedLineWidth / 2,\r\n                y: layout.y + signY * fixedLineWidth / 2,\r\n                width: layout.width - signX * fixedLineWidth,\r\n                height: layout.height - signY * fixedLineWidth\r\n            };\r\n        },\r\n        polar: function (data, dataIndex, itemModel) {\r\n            var layout = data.getItemLayout(dataIndex);\r\n            return {\r\n                cx: layout.cx,\r\n                cy: layout.cy,\r\n                r0: layout.r0,\r\n                r: layout.r,\r\n                startAngle: layout.startAngle,\r\n                endAngle: layout.endAngle\r\n            };\r\n        }\r\n    };\r\n    function isZeroOnPolar(layout) {\r\n        return layout.startAngle != null\r\n            && layout.endAngle != null\r\n            && layout.startAngle === layout.endAngle;\r\n    }\r\n    function updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontal, isPolar) {\r\n        var style = data.getItemVisual(dataIndex, 'style');\r\n        if (!isPolar) {\r\n            el.setShape('r', itemModel.get(BAR_BORDER_RADIUS_QUERY) || 0);\r\n        }\r\n        el.useStyle(style);\r\n        var cursorStyle = itemModel.getShallow('cursor');\r\n        cursorStyle && el.attr('cursor', cursorStyle);\r\n        if (!isPolar) {\r\n            var labelPositionOutside = isHorizontal\r\n                ? (layout.height > 0 ? 'bottom' : 'top')\r\n                : (layout.width > 0 ? 'left' : 'right');\r\n            setLabelStyle(el, getLabelStatesModels(itemModel), {\r\n                labelFetcher: seriesModel,\r\n                labelDataIndex: dataIndex,\r\n                defaultText: getDefaultLabel(seriesModel.getData(), dataIndex),\r\n                inheritColor: style.fill,\r\n                defaultOutsidePosition: labelPositionOutside\r\n            });\r\n            var label = el.getTextContent();\r\n            if (label) {\r\n                var obj = labelInner(label);\r\n                obj.prevValue = obj.value;\r\n                obj.value = seriesModel.getRawValue(dataIndex);\r\n            }\r\n        }\r\n        var emphasisModel = itemModel.getModel(['emphasis']);\r\n        enableHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\r\n        setStatesStylesFromModel(el, itemModel);\r\n        if (isZeroOnPolar(layout)) {\r\n            el.style.fill = 'none';\r\n            el.style.stroke = 'none';\r\n            each(el.states, function (state) {\r\n                if (state.style) {\r\n                    state.style.fill = state.style.stroke = 'none';\r\n                }\r\n            });\r\n        }\r\n    }\r\n    function getLineWidth(itemModel, rawLayout) {\r\n        var lineWidth = itemModel.get(BAR_BORDER_WIDTH_QUERY) || 0;\r\n        var width = isNaN(rawLayout.width) ? Number.MAX_VALUE : Math.abs(rawLayout.width);\r\n        var height = isNaN(rawLayout.height) ? Number.MAX_VALUE : Math.abs(rawLayout.height);\r\n        return Math.min(lineWidth, width, height);\r\n    }\r\n    var LagePathShape = (function () {\r\n        function LagePathShape() {\r\n        }\r\n        return LagePathShape;\r\n    }());\r\n    var LargePath = (function (_super) {\r\n        __extends(LargePath, _super);\r\n        function LargePath(opts) {\r\n            var _this = _super.call(this, opts) || this;\r\n            _this.type = 'largeBar';\r\n            return _this;\r\n        }\r\n        LargePath.prototype.getDefaultShape = function () {\r\n            return new LagePathShape();\r\n        };\r\n        LargePath.prototype.buildPath = function (ctx, shape) {\r\n            var points = shape.points;\r\n            var startPoint = this.__startPoint;\r\n            var baseDimIdx = this.__baseDimIdx;\r\n            for (var i = 0; i < points.length; i += 2) {\r\n                startPoint[baseDimIdx] = points[i + baseDimIdx];\r\n                ctx.moveTo(startPoint[0], startPoint[1]);\r\n                ctx.lineTo(points[i], points[i + 1]);\r\n            }\r\n        };\r\n        return LargePath;\r\n    }(Path));\r\n    function createLarge(seriesModel, group, incremental) {\r\n        var data = seriesModel.getData();\r\n        var startPoint = [];\r\n        var baseDimIdx = data.getLayout('valueAxisHorizontal') ? 1 : 0;\r\n        startPoint[1 - baseDimIdx] = data.getLayout('valueAxisStart');\r\n        var largeDataIndices = data.getLayout('largeDataIndices');\r\n        var barWidth = data.getLayout('barWidth');\r\n        var backgroundModel = seriesModel.getModel('backgroundStyle');\r\n        var drawBackground = seriesModel.get('showBackground', true);\r\n        if (drawBackground) {\r\n            var points = data.getLayout('largeBackgroundPoints');\r\n            var backgroundStartPoint = [];\r\n            backgroundStartPoint[1 - baseDimIdx] = data.getLayout('backgroundStart');\r\n            var bgEl = new LargePath({\r\n                shape: { points: points },\r\n                incremental: !!incremental,\r\n                silent: true,\r\n                z2: 0\r\n            });\r\n            bgEl.__startPoint = backgroundStartPoint;\r\n            bgEl.__baseDimIdx = baseDimIdx;\r\n            bgEl.__largeDataIndices = largeDataIndices;\r\n            bgEl.__barWidth = barWidth;\r\n            setLargeBackgroundStyle(bgEl, backgroundModel, data);\r\n            group.add(bgEl);\r\n        }\r\n        var el = new LargePath({\r\n            shape: { points: data.getLayout('largePoints') },\r\n            incremental: !!incremental\r\n        });\r\n        el.__startPoint = startPoint;\r\n        el.__baseDimIdx = baseDimIdx;\r\n        el.__largeDataIndices = largeDataIndices;\r\n        el.__barWidth = barWidth;\r\n        group.add(el);\r\n        setLargeStyle(el, seriesModel, data);\r\n        getECData(el).seriesIndex = seriesModel.seriesIndex;\r\n        if (!seriesModel.get('silent')) {\r\n            el.on('mousedown', largePathUpdateDataIndex);\r\n            el.on('mousemove', largePathUpdateDataIndex);\r\n        }\r\n    }\r\n    var largePathUpdateDataIndex = throttle(function (event) {\r\n        var largePath = this;\r\n        var dataIndex = largePathFindDataIndex(largePath, event.offsetX, event.offsetY);\r\n        getECData(largePath).dataIndex = dataIndex >= 0 ? dataIndex : null;\r\n    }, 30, false);\r\n    function largePathFindDataIndex(largePath, x, y) {\r\n        var baseDimIdx = largePath.__baseDimIdx;\r\n        var valueDimIdx = 1 - baseDimIdx;\r\n        var points = largePath.shape.points;\r\n        var largeDataIndices = largePath.__largeDataIndices;\r\n        var barWidthHalf = Math.abs(largePath.__barWidth / 2);\r\n        var startValueVal = largePath.__startPoint[valueDimIdx];\r\n        _eventPos[0] = x;\r\n        _eventPos[1] = y;\r\n        var pointerBaseVal = _eventPos[baseDimIdx];\r\n        var pointerValueVal = _eventPos[1 - baseDimIdx];\r\n        var baseLowerBound = pointerBaseVal - barWidthHalf;\r\n        var baseUpperBound = pointerBaseVal + barWidthHalf;\r\n        for (var i = 0, len = points.length / 2; i < len; i++) {\r\n            var ii = i * 2;\r\n            var barBaseVal = points[ii + baseDimIdx];\r\n            var barValueVal = points[ii + valueDimIdx];\r\n            if (barBaseVal >= baseLowerBound && barBaseVal <= baseUpperBound\r\n                && (startValueVal <= barValueVal\r\n                    ? (pointerValueVal >= startValueVal && pointerValueVal <= barValueVal)\r\n                    : (pointerValueVal >= barValueVal && pointerValueVal <= startValueVal))) {\r\n                return largeDataIndices[i];\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    function setLargeStyle(el, seriesModel, data) {\r\n        var globalStyle = data.getVisual('style');\r\n        el.useStyle(extend({}, globalStyle));\r\n        el.style.fill = null;\r\n        el.style.stroke = globalStyle.fill;\r\n        el.style.lineWidth = data.getLayout('barWidth');\r\n    }\r\n    function setLargeBackgroundStyle(el, backgroundModel, data) {\r\n        var borderColor = backgroundModel.get('borderColor') || backgroundModel.get('color');\r\n        var itemStyle = backgroundModel.getItemStyle();\r\n        el.useStyle(itemStyle);\r\n        el.style.fill = null;\r\n        el.style.stroke = borderColor;\r\n        el.style.lineWidth = data.getLayout('barWidth');\r\n    }\r\n    function createBackgroundShape(isHorizontalOrRadial, layout, coord) {\r\n        if (isCoordinateSystemType(coord, 'cartesian2d')) {\r\n            var rectShape = layout;\r\n            var coordLayout = coord.getArea();\r\n            return {\r\n                x: isHorizontalOrRadial ? rectShape.x : coordLayout.x,\r\n                y: isHorizontalOrRadial ? coordLayout.y : rectShape.y,\r\n                width: isHorizontalOrRadial ? rectShape.width : coordLayout.width,\r\n                height: isHorizontalOrRadial ? coordLayout.height : rectShape.height\r\n            };\r\n        }\r\n        else {\r\n            var coordLayout = coord.getArea();\r\n            var sectorShape = layout;\r\n            return {\r\n                cx: coordLayout.cx,\r\n                cy: coordLayout.cy,\r\n                r0: isHorizontalOrRadial ? coordLayout.r0 : sectorShape.r0,\r\n                r: isHorizontalOrRadial ? coordLayout.r : sectorShape.r,\r\n                startAngle: isHorizontalOrRadial ? sectorShape.startAngle : 0,\r\n                endAngle: isHorizontalOrRadial ? sectorShape.endAngle : Math.PI * 2\r\n            };\r\n        }\r\n    }\r\n    function createBackgroundEl(coord, isHorizontalOrRadial, layout) {\r\n        var ElementClz = coord.type === 'polar' ? Sector : Rect;\r\n        return new ElementClz({\r\n            shape: createBackgroundShape(isHorizontalOrRadial, layout, coord),\r\n            silent: true,\r\n            z2: 0\r\n        });\r\n    }\r\n    ChartView.registerClass(BarView);\n\n    registerAction({\r\n        type: 'changeAxisOrder',\r\n        event: 'changeAxisOrder',\r\n        update: 'update'\r\n    }, function (payload, ecModel) {\r\n        var componentType = payload.componentType || 'series';\r\n        ecModel.eachComponent({ mainType: componentType, query: payload }, function (componentModel) {\r\n            if (payload.sortInfo) {\r\n                componentModel.axis.setCategorySortInfo(payload.sortInfo);\r\n            }\r\n        });\r\n    });\n\n    registerLayout(PRIORITY.VISUAL.LAYOUT, curry(layout, 'bar'));\r\n    registerLayout(PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, largeLayout);\r\n    registerVisual({\r\n        seriesType: 'bar',\r\n        reset: function (seriesModel) {\r\n            seriesModel.getData().setVisual('legendSymbol', 'roundRect');\r\n        }\r\n    });\n\n    function createListSimply (seriesModel, opt, nameList) {\r\n        opt = isArray(opt) && { coordDimensions: opt } || extend({}, opt);\r\n        var source = seriesModel.getSource();\r\n        var dimensionsInfo = createDimensions(source, opt);\r\n        var list = new List(dimensionsInfo, seriesModel);\r\n        list.initData(source, nameList);\r\n        return list;\r\n    }\n\n    var LegendVisualProvider = (function () {\r\n        function LegendVisualProvider(getDataWithEncodedVisual, getRawData) {\r\n            this._getDataWithEncodedVisual = getDataWithEncodedVisual;\r\n            this._getRawData = getRawData;\r\n        }\r\n        LegendVisualProvider.prototype.getAllNames = function () {\r\n            var rawData = this._getRawData();\r\n            return rawData.mapArray(rawData.getName);\r\n        };\r\n        LegendVisualProvider.prototype.containName = function (name) {\r\n            var rawData = this._getRawData();\r\n            return rawData.indexOfName(name) >= 0;\r\n        };\r\n        LegendVisualProvider.prototype.indexOfName = function (name) {\r\n            var dataWithEncodedVisual = this._getDataWithEncodedVisual();\r\n            return dataWithEncodedVisual.indexOfName(name);\r\n        };\r\n        LegendVisualProvider.prototype.getItemVisual = function (dataIndex, key) {\r\n            var dataWithEncodedVisual = this._getDataWithEncodedVisual();\r\n            return dataWithEncodedVisual.getItemVisual(dataIndex, key);\r\n        };\r\n        return LegendVisualProvider;\r\n    }());\n\n    var PieSeriesModel = (function (_super) {\r\n        __extends(PieSeriesModel, _super);\r\n        function PieSeriesModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.useColorPaletteOnData = true;\r\n            return _this;\r\n        }\r\n        PieSeriesModel.prototype.init = function (option) {\r\n            _super.prototype.init.apply(this, arguments);\r\n            this.legendVisualProvider = new LegendVisualProvider(bind(this.getData, this), bind(this.getRawData, this));\r\n            this._defaultLabelLine(option);\r\n        };\r\n        PieSeriesModel.prototype.mergeOption = function () {\r\n            _super.prototype.mergeOption.apply(this, arguments);\r\n        };\r\n        PieSeriesModel.prototype.getInitialData = function () {\r\n            return createListSimply(this, {\r\n                coordDimensions: ['value'],\r\n                encodeDefaulter: curry(makeSeriesEncodeForNameBased, this)\r\n            });\r\n        };\r\n        PieSeriesModel.prototype.getDataParams = function (dataIndex) {\r\n            var data = this.getData();\r\n            var params = _super.prototype.getDataParams.call(this, dataIndex);\r\n            var valueList = [];\r\n            data.each(data.mapDimension('value'), function (value) {\r\n                valueList.push(value);\r\n            });\r\n            params.percent = getPercentWithPrecision(valueList, dataIndex, data.hostModel.get('percentPrecision'));\r\n            params.$vars.push('percent');\r\n            return params;\r\n        };\r\n        PieSeriesModel.prototype._defaultLabelLine = function (option) {\r\n            defaultEmphasis(option, 'labelLine', ['show']);\r\n            var labelLineNormalOpt = option.labelLine;\r\n            var labelLineEmphasisOpt = option.emphasis.labelLine;\r\n            labelLineNormalOpt.show = labelLineNormalOpt.show\r\n                && option.label.show;\r\n            labelLineEmphasisOpt.show = labelLineEmphasisOpt.show\r\n                && option.emphasis.label.show;\r\n        };\r\n        PieSeriesModel.type = 'series.pie';\r\n        PieSeriesModel.defaultOption = {\r\n            zlevel: 0,\r\n            z: 2,\r\n            legendHoverLink: true,\r\n            center: ['50%', '50%'],\r\n            radius: [0, '75%'],\r\n            clockwise: true,\r\n            startAngle: 90,\r\n            minAngle: 0,\r\n            minShowLabelAngle: 0,\r\n            selectedOffset: 10,\r\n            percentPrecision: 2,\r\n            stillShowZeroSum: true,\r\n            left: 0,\r\n            top: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            width: null,\r\n            height: null,\r\n            label: {\r\n                rotate: 0,\r\n                show: true,\r\n                overflow: 'truncate',\r\n                position: 'outer',\r\n                alignTo: 'none',\r\n                edgeDistance: '25%',\r\n                bleedMargin: 10,\r\n                distanceToLabelLine: 5\r\n            },\r\n            labelLine: {\r\n                show: true,\r\n                length: 15,\r\n                length2: 15,\r\n                smooth: false,\r\n                minTurnAngle: 90,\r\n                maxSurfaceAngle: 90,\r\n                lineStyle: {\r\n                    width: 1,\r\n                    type: 'solid'\r\n                }\r\n            },\r\n            itemStyle: {\r\n                borderWidth: 1\r\n            },\r\n            labelLayout: {\r\n                hideOverlap: true\r\n            },\r\n            emphasis: {\r\n                scale: true,\r\n                scaleSize: 5\r\n            },\r\n            avoidLabelOverlap: true,\r\n            animationType: 'expansion',\r\n            animationDuration: 1000,\r\n            animationTypeUpdate: 'transition',\r\n            animationEasingUpdate: 'cubicInOut',\r\n            animationDurationUpdate: 500,\r\n            animationEasing: 'cubicInOut'\r\n        };\r\n        return PieSeriesModel;\r\n    }(SeriesModel));\r\n    SeriesModel.registerClass(PieSeriesModel);\n\n    var RADIAN = Math.PI / 180;\r\n    function adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight, viewLeft, viewTop, farthestX) {\r\n        if (list.length < 2) {\r\n            return;\r\n        }\r\n        function recalculateXOnSemiToAlignOnEllipseCurve(semi) {\r\n            var rB = semi.rB;\r\n            var rB2 = rB * rB;\r\n            for (var i = 0; i < semi.list.length; i++) {\r\n                var item = semi.list[i];\r\n                var dy = Math.abs(item.label.y - cy);\r\n                var rA = r + item.len;\r\n                var rA2 = rA * rA;\r\n                var dx = Math.sqrt((1 - Math.abs(dy * dy / rB2)) * rA2);\r\n                item.label.x = cx + (dx + item.len2) * dir;\r\n            }\r\n        }\r\n        function recalculateX(items) {\r\n            var topSemi = { list: [], maxY: 0 };\r\n            var bottomSemi = { list: [], maxY: 0 };\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i].labelAlignTo !== 'none') {\r\n                    continue;\r\n                }\r\n                var item = items[i];\r\n                var semi = item.label.y > cy ? bottomSemi : topSemi;\r\n                var dy = Math.abs(item.label.y - cy);\r\n                if (dy > semi.maxY) {\r\n                    var dx = item.label.x - cx - item.len2 * dir;\r\n                    var rA = r + item.len;\r\n                    var rB = dx < rA\r\n                        ? Math.sqrt(dy * dy / (1 - dx * dx / rA / rA))\r\n                        : rA;\r\n                    semi.rB = rB;\r\n                    semi.maxY = dy;\r\n                }\r\n                semi.list.push(item);\r\n            }\r\n            recalculateXOnSemiToAlignOnEllipseCurve(topSemi);\r\n            recalculateXOnSemiToAlignOnEllipseCurve(bottomSemi);\r\n        }\r\n        var len = list.length;\r\n        for (var i = 0; i < len; i++) {\r\n            if (list[i].position === 'outer' && list[i].labelAlignTo === 'labelLine') {\r\n                var dx = list[i].label.x - farthestX;\r\n                list[i].linePoints[1][0] += dx;\r\n                list[i].label.x = farthestX;\r\n            }\r\n        }\r\n        if (shiftLayoutOnY(list, viewTop, viewTop + viewHeight)) {\r\n            recalculateX(list);\r\n        }\r\n    }\r\n    function avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop) {\r\n        var leftList = [];\r\n        var rightList = [];\r\n        var leftmostX = Number.MAX_VALUE;\r\n        var rightmostX = -Number.MAX_VALUE;\r\n        for (var i = 0; i < labelLayoutList.length; i++) {\r\n            var label = labelLayoutList[i].label;\r\n            if (isPositionCenter(labelLayoutList[i])) {\r\n                continue;\r\n            }\r\n            if (label.x < cx) {\r\n                leftmostX = Math.min(leftmostX, label.x);\r\n                leftList.push(labelLayoutList[i]);\r\n            }\r\n            else {\r\n                rightmostX = Math.max(rightmostX, label.x);\r\n                rightList.push(labelLayoutList[i]);\r\n            }\r\n        }\r\n        adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight, viewLeft, viewTop, rightmostX);\r\n        adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight, viewLeft, viewTop, leftmostX);\r\n        for (var i = 0; i < labelLayoutList.length; i++) {\r\n            var layout = labelLayoutList[i];\r\n            var label = layout.label;\r\n            if (isPositionCenter(layout)) {\r\n                continue;\r\n            }\r\n            var linePoints = layout.linePoints;\r\n            if (linePoints) {\r\n                var isAlignToEdge = layout.labelAlignTo === 'edge';\r\n                var realTextWidth = layout.rect.width;\r\n                var targetTextWidth = void 0;\r\n                if (isAlignToEdge) {\r\n                    if (label.x < cx) {\r\n                        targetTextWidth = linePoints[2][0] - layout.labelDistance\r\n                            - viewLeft - layout.edgeDistance;\r\n                    }\r\n                    else {\r\n                        targetTextWidth = viewLeft + viewWidth - layout.edgeDistance\r\n                            - linePoints[2][0] - layout.labelDistance;\r\n                    }\r\n                }\r\n                else {\r\n                    if (label.x < cx) {\r\n                        targetTextWidth = label.x - viewLeft - layout.bleedMargin;\r\n                    }\r\n                    else {\r\n                        targetTextWidth = viewLeft + viewWidth - label.x - layout.bleedMargin;\r\n                    }\r\n                }\r\n                if (targetTextWidth < layout.rect.width) {\r\n                    layout.label.style.width = targetTextWidth;\r\n                    if (layout.labelAlignTo === 'edge') {\r\n                        realTextWidth = targetTextWidth;\r\n                    }\r\n                }\r\n                var dist = linePoints[1][0] - linePoints[2][0];\r\n                if (isAlignToEdge) {\r\n                    if (label.x < cx) {\r\n                        linePoints[2][0] = viewLeft + layout.edgeDistance + realTextWidth + layout.labelDistance;\r\n                    }\r\n                    else {\r\n                        linePoints[2][0] = viewLeft + viewWidth - layout.edgeDistance\r\n                            - realTextWidth - layout.labelDistance;\r\n                    }\r\n                }\r\n                else {\r\n                    if (label.x < cx) {\r\n                        linePoints[2][0] = label.x + layout.labelDistance;\r\n                    }\r\n                    else {\r\n                        linePoints[2][0] = label.x - layout.labelDistance;\r\n                    }\r\n                    linePoints[1][0] = linePoints[2][0] + dist;\r\n                }\r\n                linePoints[1][1] = linePoints[2][1] = label.y;\r\n            }\r\n        }\r\n    }\r\n    function isPositionCenter(sectorShape) {\r\n        return sectorShape.position === 'center';\r\n    }\r\n    function labelLayout (seriesModel) {\r\n        var data = seriesModel.getData();\r\n        var labelLayoutList = [];\r\n        var cx;\r\n        var cy;\r\n        var hasLabelRotate = false;\r\n        var minShowLabelRadian = (seriesModel.get('minShowLabelAngle') || 0) * RADIAN;\r\n        var viewRect = data.getLayout('viewRect');\r\n        var r = data.getLayout('r');\r\n        var viewWidth = viewRect.width;\r\n        var viewLeft = viewRect.x;\r\n        var viewTop = viewRect.y;\r\n        var viewHeight = viewRect.height;\r\n        function setNotShow(el) {\r\n            el.ignore = true;\r\n        }\r\n        function isLabelShown(label) {\r\n            if (!label.ignore) {\r\n                return true;\r\n            }\r\n            for (var key in label.states) {\r\n                if (label.states[key].ignore === false) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        data.each(function (idx) {\r\n            var sector = data.getItemGraphicEl(idx);\r\n            var sectorShape = sector.shape;\r\n            var label = sector.getTextContent();\r\n            var labelLine = sector.getTextGuideLine();\r\n            var itemModel = data.getItemModel(idx);\r\n            var labelModel = itemModel.getModel('label');\r\n            var labelPosition = labelModel.get('position') || itemModel.get(['emphasis', 'label', 'position']);\r\n            var labelDistance = labelModel.get('distanceToLabelLine');\r\n            var labelAlignTo = labelModel.get('alignTo');\r\n            var edgeDistance = parsePercent$2(labelModel.get('edgeDistance'), viewWidth);\r\n            var bleedMargin = labelModel.get('bleedMargin');\r\n            var labelLineModel = itemModel.getModel('labelLine');\r\n            var labelLineLen = labelLineModel.get('length');\r\n            labelLineLen = parsePercent$2(labelLineLen, viewWidth);\r\n            var labelLineLen2 = labelLineModel.get('length2');\r\n            labelLineLen2 = parsePercent$2(labelLineLen2, viewWidth);\r\n            if (Math.abs(sectorShape.endAngle - sectorShape.startAngle) < minShowLabelRadian) {\r\n                each(label.states, setNotShow);\r\n                label.ignore = true;\r\n                return;\r\n            }\r\n            if (!isLabelShown(label)) {\r\n                return;\r\n            }\r\n            var midAngle = (sectorShape.startAngle + sectorShape.endAngle) / 2;\r\n            var nx = Math.cos(midAngle);\r\n            var ny = Math.sin(midAngle);\r\n            var textX;\r\n            var textY;\r\n            var linePoints;\r\n            var textAlign;\r\n            cx = sectorShape.cx;\r\n            cy = sectorShape.cy;\r\n            var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\r\n            if (labelPosition === 'center') {\r\n                textX = sectorShape.cx;\r\n                textY = sectorShape.cy;\r\n                textAlign = 'center';\r\n            }\r\n            else {\r\n                var x1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * nx : sectorShape.r * nx) + cx;\r\n                var y1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * ny : sectorShape.r * ny) + cy;\r\n                textX = x1 + nx * 3;\r\n                textY = y1 + ny * 3;\r\n                if (!isLabelInside) {\r\n                    var x2 = x1 + nx * (labelLineLen + r - sectorShape.r);\r\n                    var y2 = y1 + ny * (labelLineLen + r - sectorShape.r);\r\n                    var x3 = x2 + ((nx < 0 ? -1 : 1) * labelLineLen2);\r\n                    var y3 = y2;\r\n                    if (labelAlignTo === 'edge') {\r\n                        textX = nx < 0\r\n                            ? viewLeft + edgeDistance\r\n                            : viewLeft + viewWidth - edgeDistance;\r\n                    }\r\n                    else {\r\n                        textX = x3 + (nx < 0 ? -labelDistance : labelDistance);\r\n                    }\r\n                    textY = y3;\r\n                    linePoints = [[x1, y1], [x2, y2], [x3, y3]];\r\n                }\r\n                textAlign = isLabelInside\r\n                    ? 'center'\r\n                    : (labelAlignTo === 'edge'\r\n                        ? (nx > 0 ? 'right' : 'left')\r\n                        : (nx > 0 ? 'left' : 'right'));\r\n            }\r\n            var labelRotate;\r\n            var rotate = labelModel.get('rotate');\r\n            if (typeof rotate === 'number') {\r\n                labelRotate = rotate * (Math.PI / 180);\r\n            }\r\n            else {\r\n                labelRotate = rotate\r\n                    ? (nx < 0 ? -midAngle + Math.PI : -midAngle)\r\n                    : 0;\r\n            }\r\n            hasLabelRotate = !!labelRotate;\r\n            label.x = textX;\r\n            label.y = textY;\r\n            label.rotation = labelRotate;\r\n            label.setStyle({\r\n                verticalAlign: 'middle'\r\n            });\r\n            if (!isLabelInside) {\r\n                var textRect = label.getBoundingRect().clone();\r\n                textRect.applyTransform(label.getComputedTransform());\r\n                var margin = (label.style.margin || 0) + 2.1;\r\n                textRect.y -= margin / 2;\r\n                textRect.height += margin;\r\n                labelLayoutList.push({\r\n                    label: label,\r\n                    labelLine: labelLine,\r\n                    position: labelPosition,\r\n                    len: labelLineLen,\r\n                    len2: labelLineLen2,\r\n                    minTurnAngle: labelLineModel.get('minTurnAngle'),\r\n                    maxSurfaceAngle: labelLineModel.get('maxSurfaceAngle'),\r\n                    surfaceNormal: new Point(nx, ny),\r\n                    linePoints: linePoints,\r\n                    textAlign: textAlign,\r\n                    labelDistance: labelDistance,\r\n                    labelAlignTo: labelAlignTo,\r\n                    edgeDistance: edgeDistance,\r\n                    bleedMargin: bleedMargin,\r\n                    rect: textRect\r\n                });\r\n            }\r\n            else {\r\n                label.setStyle({\r\n                    align: textAlign\r\n                });\r\n                var selectState = label.states.select;\r\n                if (selectState) {\r\n                    selectState.x += label.x;\r\n                    selectState.y += label.y;\r\n                }\r\n            }\r\n            sector.setTextConfig({\r\n                inside: isLabelInside\r\n            });\r\n        });\r\n        if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\r\n            avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop);\r\n        }\r\n        for (var i = 0; i < labelLayoutList.length; i++) {\r\n            var layout = labelLayoutList[i];\r\n            var label = layout.label;\r\n            var labelLine = layout.labelLine;\r\n            var notShowLabel = isNaN(label.x) || isNaN(label.y);\r\n            if (label) {\r\n                label.setStyle({\r\n                    align: layout.textAlign\r\n                });\r\n                if (notShowLabel) {\r\n                    each(label.states, setNotShow);\r\n                    label.ignore = true;\r\n                }\r\n                var selectState = label.states.select;\r\n                if (selectState) {\r\n                    selectState.x += label.x;\r\n                    selectState.y += label.y;\r\n                }\r\n            }\r\n            if (labelLine) {\r\n                var linePoints = layout.linePoints;\r\n                if (notShowLabel || !linePoints) {\r\n                    each(labelLine.states, setNotShow);\r\n                    labelLine.ignore = true;\r\n                }\r\n                else {\r\n                    limitTurnAngle(linePoints, layout.minTurnAngle);\r\n                    limitSurfaceAngle(linePoints, layout.surfaceNormal, layout.maxSurfaceAngle);\r\n                    labelLine.setShape({ points: linePoints });\r\n                    label.__hostTarget.textGuideLineConfig = {\r\n                        anchor: new Point(linePoints[0][0], linePoints[0][1])\r\n                    };\r\n                }\r\n            }\r\n        }\r\n    }\n\n    function getSectorCornerRadius(model, shape) {\r\n        var cornerRadius = model.get('borderRadius');\r\n        if (cornerRadius == null) {\r\n            return null;\r\n        }\r\n        if (!isArray(cornerRadius)) {\r\n            cornerRadius = [cornerRadius, cornerRadius];\r\n        }\r\n        return {\r\n            innerCornerRadius: parsePercent(cornerRadius[0], shape.r0),\r\n            cornerRadius: parsePercent(cornerRadius[1], shape.r)\r\n        };\r\n    }\n\n    var PiePiece = (function (_super) {\r\n        __extends(PiePiece, _super);\r\n        function PiePiece(data, idx, startAngle) {\r\n            var _this = _super.call(this) || this;\r\n            _this.z2 = 2;\r\n            var polyline = new Polyline();\r\n            var text = new ZRText();\r\n            _this.setTextGuideLine(polyline);\r\n            _this.setTextContent(text);\r\n            _this.updateData(data, idx, startAngle, true);\r\n            return _this;\r\n        }\r\n        PiePiece.prototype.updateData = function (data, idx, startAngle, firstCreate) {\r\n            var sector = this;\r\n            var seriesModel = data.hostModel;\r\n            var itemModel = data.getItemModel(idx);\r\n            var emphasisModel = itemModel.getModel('emphasis');\r\n            var layout = data.getItemLayout(idx);\r\n            var sectorShape = extend(getSectorCornerRadius(itemModel.getModel('itemStyle'), layout) || {}, layout);\r\n            if (firstCreate) {\r\n                sector.setShape(sectorShape);\r\n                var animationType = seriesModel.getShallow('animationType');\r\n                if (animationType === 'scale') {\r\n                    sector.shape.r = layout.r0;\r\n                    initProps(sector, {\r\n                        shape: {\r\n                            r: layout.r\r\n                        }\r\n                    }, seriesModel, idx);\r\n                }\r\n                else {\r\n                    if (startAngle != null) {\r\n                        sector.setShape({ startAngle: startAngle, endAngle: startAngle });\r\n                        initProps(sector, {\r\n                            shape: {\r\n                                startAngle: layout.startAngle,\r\n                                endAngle: layout.endAngle\r\n                            }\r\n                        }, seriesModel, idx);\r\n                    }\r\n                    else {\r\n                        sector.shape.endAngle = layout.startAngle;\r\n                        updateProps(sector, {\r\n                            shape: {\r\n                                endAngle: layout.endAngle\r\n                            }\r\n                        }, seriesModel, idx);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                updateProps(sector, {\r\n                    shape: sectorShape\r\n                }, seriesModel, idx);\r\n            }\r\n            sector.useStyle(data.getItemVisual(idx, 'style'));\r\n            setStatesStylesFromModel(sector, itemModel);\r\n            var midAngle = (layout.startAngle + layout.endAngle) / 2;\r\n            var offset = seriesModel.get('selectedOffset');\r\n            var dx = Math.cos(midAngle) * offset;\r\n            var dy = Math.sin(midAngle) * offset;\r\n            var cursorStyle = itemModel.getShallow('cursor');\r\n            cursorStyle && sector.attr('cursor', cursorStyle);\r\n            this._updateLabel(seriesModel, data, idx);\r\n            sector.ensureState('emphasis').shape = __assign({ r: layout.r + (emphasisModel.get('scale')\r\n                    ? (emphasisModel.get('scaleSize') || 0) : 0) }, getSectorCornerRadius(emphasisModel.getModel('itemStyle'), layout));\r\n            extend(sector.ensureState('select'), {\r\n                x: dx,\r\n                y: dy,\r\n                shape: getSectorCornerRadius(itemModel.getModel(['select', 'itemStyle']), layout)\r\n            });\r\n            extend(sector.ensureState('blur'), {\r\n                shape: getSectorCornerRadius(itemModel.getModel(['blur', 'itemStyle']), layout)\r\n            });\r\n            var labelLine = sector.getTextGuideLine();\r\n            var labelText = sector.getTextContent();\r\n            extend(labelLine.ensureState('select'), {\r\n                x: dx,\r\n                y: dy\r\n            });\r\n            extend(labelText.ensureState('select'), {\r\n                x: dx,\r\n                y: dy\r\n            });\r\n            enableHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\r\n        };\r\n        PiePiece.prototype._updateLabel = function (seriesModel, data, idx) {\r\n            var sector = this;\r\n            var itemModel = data.getItemModel(idx);\r\n            var labelModel = itemModel.getModel('label');\r\n            var labelLineModel = itemModel.getModel('labelLine');\r\n            var style = data.getItemVisual(idx, 'style');\r\n            var visualColor = style && style.fill;\r\n            var visualOpacity = style && style.opacity;\r\n            setLabelStyle(sector, getLabelStatesModels(itemModel), {\r\n                labelFetcher: data.hostModel,\r\n                labelDataIndex: idx,\r\n                inheritColor: visualColor,\r\n                defaultText: seriesModel.getFormattedLabel(idx, 'normal')\r\n                    || data.getName(idx)\r\n            }, { normal: {\r\n                    opacity: retrieve2(labelModel.get('opacity'), visualOpacity)\r\n                } });\r\n            var labelText = sector.getTextContent();\r\n            sector.setTextConfig({\r\n                position: null,\r\n                rotation: null\r\n            });\r\n            labelText.attr({\r\n                z2: 10\r\n            });\r\n            setLabelLineStyle(this, getLabelLineStatesModels(itemModel), {\r\n                stroke: visualColor,\r\n                opacity: retrieve2(labelLineModel.get(['lineStyle', 'opacity']), visualOpacity)\r\n            });\r\n        };\r\n        return PiePiece;\r\n    }(Sector));\r\n    var PieView = (function (_super) {\r\n        __extends(PieView, _super);\r\n        function PieView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.ignoreLabelLineUpdate = true;\r\n            return _this;\r\n        }\r\n        PieView.prototype.init = function () {\r\n            var sectorGroup = new Group();\r\n            this._sectorGroup = sectorGroup;\r\n        };\r\n        PieView.prototype.render = function (seriesModel, ecModel, api, payload) {\r\n            var data = seriesModel.getData();\r\n            var oldData = this._data;\r\n            var group = this.group;\r\n            var startAngle;\r\n            if (!oldData && data.count() > 0) {\r\n                var shape = data.getItemLayout(0);\r\n                for (var s = 1; isNaN(shape && shape.startAngle) && s < data.count(); ++s) {\r\n                    shape = data.getItemLayout(s);\r\n                }\r\n                if (shape) {\r\n                    startAngle = shape.startAngle;\r\n                }\r\n            }\r\n            data.diff(oldData)\r\n                .add(function (idx) {\r\n                var piePiece = new PiePiece(data, idx, startAngle);\r\n                data.setItemGraphicEl(idx, piePiece);\r\n                group.add(piePiece);\r\n            })\r\n                .update(function (newIdx, oldIdx) {\r\n                var piePiece = oldData.getItemGraphicEl(oldIdx);\r\n                piePiece.updateData(data, newIdx, startAngle);\r\n                piePiece.off('click');\r\n                group.add(piePiece);\r\n                data.setItemGraphicEl(newIdx, piePiece);\r\n            })\r\n                .remove(function (idx) {\r\n                var piePiece = oldData.getItemGraphicEl(idx);\r\n                removeElementWithFadeOut(piePiece, seriesModel, idx);\r\n            })\r\n                .execute();\r\n            labelLayout(seriesModel);\r\n            if (seriesModel.get('animationTypeUpdate') !== 'expansion') {\r\n                this._data = data;\r\n            }\r\n        };\r\n        PieView.prototype.dispose = function () { };\r\n        PieView.prototype.containPoint = function (point, seriesModel) {\r\n            var data = seriesModel.getData();\r\n            var itemLayout = data.getItemLayout(0);\r\n            if (itemLayout) {\r\n                var dx = point[0] - itemLayout.cx;\r\n                var dy = point[1] - itemLayout.cy;\r\n                var radius = Math.sqrt(dx * dx + dy * dy);\r\n                return radius <= itemLayout.r && radius >= itemLayout.r0;\r\n            }\r\n        };\r\n        PieView.type = 'pie';\r\n        return PieView;\r\n    }(ChartView));\r\n    ChartView.registerClass(PieView);\n\n    var PI2$7 = Math.PI * 2;\r\n    var RADIAN$1 = Math.PI / 180;\r\n    function getViewRect(seriesModel, api) {\r\n        return getLayoutRect(seriesModel.getBoxLayoutParams(), {\r\n            width: api.getWidth(),\r\n            height: api.getHeight()\r\n        });\r\n    }\r\n    function pieLayout (seriesType, ecModel, api) {\r\n        ecModel.eachSeriesByType(seriesType, function (seriesModel) {\r\n            var data = seriesModel.getData();\r\n            var valueDim = data.mapDimension('value');\r\n            var viewRect = getViewRect(seriesModel, api);\r\n            var center = seriesModel.get('center');\r\n            var radius = seriesModel.get('radius');\r\n            if (!isArray(radius)) {\r\n                radius = [0, radius];\r\n            }\r\n            if (!isArray(center)) {\r\n                center = [center, center];\r\n            }\r\n            var width = parsePercent$2(viewRect.width, api.getWidth());\r\n            var height = parsePercent$2(viewRect.height, api.getHeight());\r\n            var size = Math.min(width, height);\r\n            var cx = parsePercent$2(center[0], width) + viewRect.x;\r\n            var cy = parsePercent$2(center[1], height) + viewRect.y;\r\n            var r0 = parsePercent$2(radius[0], size / 2);\r\n            var r = parsePercent$2(radius[1], size / 2);\r\n            var startAngle = -seriesModel.get('startAngle') * RADIAN$1;\r\n            var minAngle = seriesModel.get('minAngle') * RADIAN$1;\r\n            var validDataCount = 0;\r\n            data.each(valueDim, function (value) {\r\n                !isNaN(value) && validDataCount++;\r\n            });\r\n            var sum = data.getSum(valueDim);\r\n            var unitRadian = Math.PI / (sum || validDataCount) * 2;\r\n            var clockwise = seriesModel.get('clockwise');\r\n            var roseType = seriesModel.get('roseType');\r\n            var stillShowZeroSum = seriesModel.get('stillShowZeroSum');\r\n            var extent = data.getDataExtent(valueDim);\r\n            extent[0] = 0;\r\n            var restAngle = PI2$7;\r\n            var valueSumLargerThanMinAngle = 0;\r\n            var currentAngle = startAngle;\r\n            var dir = clockwise ? 1 : -1;\r\n            data.setLayout({ viewRect: viewRect, r: r });\r\n            data.each(valueDim, function (value, idx) {\r\n                var angle;\r\n                if (isNaN(value)) {\r\n                    data.setItemLayout(idx, {\r\n                        angle: NaN,\r\n                        startAngle: NaN,\r\n                        endAngle: NaN,\r\n                        clockwise: clockwise,\r\n                        cx: cx,\r\n                        cy: cy,\r\n                        r0: r0,\r\n                        r: roseType\r\n                            ? NaN\r\n                            : r\r\n                    });\r\n                    return;\r\n                }\r\n                if (roseType !== 'area') {\r\n                    angle = (sum === 0 && stillShowZeroSum)\r\n                        ? unitRadian : (value * unitRadian);\r\n                }\r\n                else {\r\n                    angle = PI2$7 / validDataCount;\r\n                }\r\n                if (angle < minAngle) {\r\n                    angle = minAngle;\r\n                    restAngle -= minAngle;\r\n                }\r\n                else {\r\n                    valueSumLargerThanMinAngle += value;\r\n                }\r\n                var endAngle = currentAngle + dir * angle;\r\n                data.setItemLayout(idx, {\r\n                    angle: angle,\r\n                    startAngle: currentAngle,\r\n                    endAngle: endAngle,\r\n                    clockwise: clockwise,\r\n                    cx: cx,\r\n                    cy: cy,\r\n                    r0: r0,\r\n                    r: roseType\r\n                        ? linearMap(value, extent, [r0, r])\r\n                        : r\r\n                });\r\n                currentAngle = endAngle;\r\n            });\r\n            if (restAngle < PI2$7 && validDataCount) {\r\n                if (restAngle <= 1e-3) {\r\n                    var angle_1 = PI2$7 / validDataCount;\r\n                    data.each(valueDim, function (value, idx) {\r\n                        if (!isNaN(value)) {\r\n                            var layout_1 = data.getItemLayout(idx);\r\n                            layout_1.angle = angle_1;\r\n                            layout_1.startAngle = startAngle + dir * idx * angle_1;\r\n                            layout_1.endAngle = startAngle + dir * (idx + 1) * angle_1;\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    unitRadian = restAngle / valueSumLargerThanMinAngle;\r\n                    currentAngle = startAngle;\r\n                    data.each(valueDim, function (value, idx) {\r\n                        if (!isNaN(value)) {\r\n                            var layout_2 = data.getItemLayout(idx);\r\n                            var angle = layout_2.angle === minAngle\r\n                                ? minAngle : value * unitRadian;\r\n                            layout_2.startAngle = currentAngle;\r\n                            layout_2.endAngle = currentAngle + dir * angle;\r\n                            currentAngle += dir * angle;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\n\n    function dataFilter (seriesType) {\r\n        return {\r\n            seriesType: seriesType,\r\n            reset: function (seriesModel, ecModel) {\r\n                var legendModels = ecModel.findComponents({\r\n                    mainType: 'legend'\r\n                });\r\n                if (!legendModels || !legendModels.length) {\r\n                    return;\r\n                }\r\n                var data = seriesModel.getData();\r\n                data.filterSelf(function (idx) {\r\n                    var name = data.getName(idx);\r\n                    for (var i = 0; i < legendModels.length; i++) {\r\n                        if (!legendModels[i].isSelected(name)) {\r\n                            return false;\r\n                        }\r\n                    }\r\n                    return true;\r\n                });\r\n            }\r\n        };\r\n    }\n\n    createLegacyDataSelectAction('pie', registerAction);\r\n    registerLayout(curry(pieLayout, 'pie'));\r\n    registerProcessor(dataFilter('pie'));\n\n    exports.PRIORITY = PRIORITY;\n    exports.connect = connect;\n    exports.dataTool = dataTool;\n    exports.dependencies = dependencies;\n    exports.disConnect = disConnect;\n    exports.disconnect = disconnect;\n    exports.dispose = dispose;\n    exports.extendChartView = extendChartView;\n    exports.extendComponentModel = extendComponentModel;\n    exports.extendComponentView = extendComponentView;\n    exports.extendSeriesModel = extendSeriesModel;\n    exports.getCoordinateSystemDimensions = getCoordinateSystemDimensions;\n    exports.getInstanceByDom = getInstanceByDom;\n    exports.getInstanceById = getInstanceById;\n    exports.getMap = getMap;\n    exports.init = init$1;\n    exports.registerAction = registerAction;\n    exports.registerCoordinateSystem = registerCoordinateSystem;\n    exports.registerLayout = registerLayout;\n    exports.registerLoading = registerLoading;\n    exports.registerLocale = registerLocale;\n    exports.registerMap = registerMap;\n    exports.registerPostInit = registerPostInit;\n    exports.registerPostUpdate = registerPostUpdate;\n    exports.registerPreprocessor = registerPreprocessor;\n    exports.registerProcessor = registerProcessor;\n    exports.registerTheme = registerTheme;\n    exports.registerTransform = registerTransform;\n    exports.registerVisual = registerVisual;\n    exports.setCanvasCreator = setCanvasCreator;\n    exports.version = version;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n\n"]}