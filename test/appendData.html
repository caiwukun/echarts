<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <script src="lib/esl.js"></script>
        <script src="lib/config.js"></script>
        <script src="lib/jquery.min.js"></script>
        <script src="lib/facePrint.js"></script>
        <script src="lib/testHelper.js"></script>
        <link rel="stylesheet" href="lib/reset.css" />
    </head>
    <body>
        <style>
            .test-title {
                background: #146402;
                color: #fff;
            }
        </style>


        <div id="main0"></div>
        <div id="main1"></div>
        <div id="main2"></div>


        <script>
            function addButton(name, cb) {

            }
        </script>







        <script>

            require([
                'echarts'/*, 'map/js/china' */
            ], function (echarts) {

                // Thanks to <https://github.com/Truantboy>, see: #7718.
                var option = {
                    animation: true,
                    tooltip: {},
                    xAxis: {},
                    yAxis: {},
                    series: [{
                        type: 'scatter',
                        // name: 'data',
                        data: [[0, 0], [3005, 3005]],
                        progressiveThreshold: 3000,
                        symbol: 'triangle',
                        symbolSize: 20
                    }]
                };

                var yBase = 500;
                var appendCount = 2990;

                var myChart = testHelper.create(echarts, 'main0', {
                    title: [
                        'Click btn to appendData less than limit, should render thousands of points normally.',
                        'Click again, should appendData normally.',
                        'Check hover (emphasis), should scale normally.'
                    ],
                    option: option,
                    info: option.series,
                    infoKey: 'series',
                    button: {
                        text: 'Click to appendData ' + appendCount + ' points',
                        onClick: function () {
                            var tp = []

                            for(var i = 1; i < appendCount; i++) {
                                tp[i] = [i, yBase];
                            }

                            myChart.appendData({
                                seriesIndex: 0,
                                data: tp
                            });

                            yBase += 1000;
                        }
                    }
                });

            });

        </script>









        <script>

            require([
                'echarts'/*, 'map/js/china' */
            ], function (echarts) {

                // Thanks to <https://github.com/Truantboy>, see: #7718.
                var option = {
                    animation: true,
                    tooltip: {},
                    xAxis: {},
                    yAxis: {},
                    legend: {},
                    series: [{
                        type: 'scatter',
                        name: 'data',
                        data: [[0, 0], [3005, 3005]],
                        progressiveThreshold: 3000,
                        symbol: 'triangle',
                        symbolSize: 20
                    }]
                };

                var yBase = 500;
                var appendCount = 4000;

                var myChart = testHelper.create(echarts, 'main1', {
                    title: [
                        '(1) Click btn to appendData over limit, should render successfully.',
                        '(2) Then test click lengend, should be normal.',
                        '(3) Check that grid intent should be correct.'
                    ],
                    option: option,
                    info: option.series,
                    infoKey: 'series',
                    button: {
                        text: 'Click to appendData ' + appendCount + ' points',
                        onClick: function () {
                            var tp = []

                            for(var i = 1; i < appendCount; i++) {
                                tp[i] = [i, yBase];
                            }

                            myChart.appendData({
                                seriesIndex: 0,
                                data: tp
                            });

                            yBase += 1000;
                        }
                    }
                });

            });

        </script>






        <script>

            require([
                'echarts'
            ], function (echarts) {

                var option = {
                    animation: true,
                    tooltip: {},
                    xAxis: {},
                    yAxis: {},
                    series: [{
                        type: 'scatter',
                        data: [[0, 0], [2005, 2005]],
                        progressiveThreshold: 2000,
                        symbolSize: 20
                    }, {
                        type: 'scatter',
                        data: [[100, 1000], [300, 1005]]
                    }]
                };

                var appendCount = 1998;

                var chart = testHelper.create(echarts, 'main2', {
                    title: [
                        'Click to appendData over limit, color should be the same.',
                        'Check hover (emphasis), should scale normally.'
                    ].join('\n'),
                    option: option,
                    info: option.series,
                    infoKey: 'series',
                    button: {
                        text: 'Click to appendData ' + appendCount + ' points',
                        onClick: function () {
                            var tp = []

                            for(var i = 1; i < appendCount; i++) {
                                tp[i] = [i, 1];
                            }

                            chart.appendData({
                                seriesIndex: 0,
                                data: tp
                            });
                        }
                    }
                });

            });

        </script>





    </body>
</html>